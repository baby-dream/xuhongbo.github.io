<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>xuhongbo</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://xuhongbo.com/"/>
  <updated>2017-04-14T14:02:13.298Z</updated>
  <id>http://xuhongbo.com/</id>
  
  <author>
    <name>xuhongbo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Emojiåœ¨å‰ç«¯çš„å¤„ç†åŠæ³•ä»¥åŠå­—ç¬¦ç¼–ç </title>
    <link href="http://xuhongbo.com/2017/04/14/%E6%8A%80%E5%B7%A7/Emoji/"/>
    <id>http://xuhongbo.com/2017/04/14/æŠ€å·§/Emoji/</id>
    <published>2017-04-14T14:09:23.000Z</published>
    <updated>2017-04-14T14:02:13.298Z</updated>
    
    <content type="html"><![CDATA[<p>â€‹     ä¸ºä»€ä¹ˆä¼šæœ‰é¢˜ç›®ä¸­çš„emojiçš„è¿‡æ»¤å‘¢ï¼Œä¸»è¦æ˜¯å› ä¸ºemojiçš„å­—ç¬¦ç¼–ç æ‰€å†³å®šçš„ã€‚ä¸‹é¢å°±å…ˆè¯´ä¸€ä¸‹å­—ç¬¦ç¼–ç é—®é¢˜ã€‚å­—ç¬¦ç¼–ç æ˜¯è®¡ç®—æœºåŸç†ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸€ç¯ï¼Œç„¶è€Œå®ƒé‡Œé¢æœ‰å¾ˆå¤šæ¦‚å¿µå®¹æ˜“æ··æ·†ï¼Œæœ¬æ–‡å°±æ¥ç»“åˆ Emoji è°ˆè°ˆ Unicode å’Œå®ƒçš„å®ç°æ–¹æ¡ˆä»¬ã€‚</p>
<h2 id="å½“æˆ‘ä»¬è°ˆè®º-Unicode-æ—¶ï¼Œæˆ‘ä»¬åœ¨è¯´ä»€ä¹ˆï¼Ÿ"><a href="#å½“æˆ‘ä»¬è°ˆè®º-Unicode-æ—¶ï¼Œæˆ‘ä»¬åœ¨è¯´ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å½“æˆ‘ä»¬è°ˆè®º Unicode æ—¶ï¼Œæˆ‘ä»¬åœ¨è¯´ä»€ä¹ˆï¼Ÿ"></a>å½“æˆ‘ä»¬è°ˆè®º Unicode æ—¶ï¼Œæˆ‘ä»¬åœ¨è¯´ä»€ä¹ˆï¼Ÿ</h2><p>å­—ç¬¦ç¼–ç æœ‰å¾ˆå¤šå›½é™…æ ‡å‡†ï¼Œä¾‹å¦‚ ASCIIã€ANSIï¼ˆåŒ…æ‹¬ GBKï¼‰ã€Unicodeï¼Œè¿™äº›ä¸åŒçš„ç¼–ç æ–¹å¼è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ª HashMapï¼ˆä¸¥æ ¼æ¥è®²åº”è¯¥æ˜¯ä¸€ä¸ªç¨€ç–æ•°ç»„ï¼Œå› ä¸ºæ•°å­—æœ¬èº«ä¸æ¶‰åŠ Hash å’Œç¢°æ’çš„é—®é¢˜ï¼‰ï¼ŒK å°±æ˜¯ç¼–ç ï¼ŒV å°±æ˜¯å¯¹åº”çš„å•ä¸ªå­—ç¬¦ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒASCII ç¼–ç æ ¹æœ¬ä¸èƒ½åŒ…å«å›½é™…ä¸Šæ‰€æœ‰çš„å­—ç¬¦ï¼Œå› ä¸ºå®ƒ K çš„å–å€¼è¿˜ä¸è¿‡ 8 bitsã€‚ANSIã€ASCII ä¸åœ¨æˆ‘ä»¬ä»Šå¤©çš„è®¨è®ºèŒƒå›´å†…ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬è¯´è¯´ Unicodeã€‚</p>
<p>å¯ä»¥è¯´ï¼ŒUnicode å‡ ä¹å¯ä»¥è¦†ç›–å›½é™…ä¸Šæ‰€æœ‰çš„æ–‡å­—äº†ï¼Œå®ƒæ˜¯ä¸€å¼ å·¨å¤§çš„è¡¨ï¼ŒK çš„èŒƒå›´ä» 0x0 - 0x10FFFFï¼Œç†è®ºä¸Šèƒ½å®¹çº³ <a href="tel:1114112" target="_blank" rel="external">1114112</a> ä¸ªå­—ç¬¦ï¼Œå·²ç»ä¸Šç™¾ä¸‡çš„æ•°é‡çº§äº†ã€‚æ‰€ä»¥åªè¦ä¸€ä¸ªæ–‡æœ¬é‡‡ç”¨ Unicode ç¼–ç ï¼Œé‚£ä¹ˆå®ƒçš„æ¯ä¸ªå­—ç¬¦çš„ç¼–ç éƒ½åº”è¯¥è½åœ¨è¿™ 0x0 - 0x10FFFF çš„åŒºé—´å†…äº†ï¼Œå¹¶ä¸”ä¸€ä¸€å¯¹åº”ã€‚</p>
<p>ç”±äº Unicode å¤ªåºå¤§äº†ï¼Œå› æ­¤äººä»¬ç”¨ Planeï¼ˆå¹³é¢ï¼‰çš„æ¦‚å¿µæ¥ç»™è¿™äº›ç¼–ç åˆ’åˆ†åŒºé—´ï¼Œè¿™ä¸ªæ¦‚å¿µå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥è¯¢ï¼Œåé¢æˆ‘ä¼šç»§ç»­æåˆ°å®ƒã€‚</p>
<h2 id="æ‰€ä»¥-UTF-x-éƒ½æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#æ‰€ä»¥-UTF-x-éƒ½æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æ‰€ä»¥ UTF-x éƒ½æ˜¯ä»€ä¹ˆï¼Ÿ"></a>æ‰€ä»¥ UTF-x éƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æˆ‘ä»¬é€šå¸¸è¯´çš„ UTF-8ã€UTF-16 äº¦æˆ–æ˜¯ UTF-32 æ˜¯ Unicode è¿™ç§ç¼–ç åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨æ–¹å¼ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒUnicode ä¸­æœ€å¤§çš„å–å€¼æ˜¯ 0x10FFFFï¼Œå  3 ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆè¿™äº›å­—èŠ‚å¦‚ä½•å­˜å‚¨å°±æ˜¯ä¸€ä¸ªé—®é¢˜äº†ã€‚</p>
<p><strong>UTF-16</strong></p>
<p>é€šå¸¸æˆ‘ä»¬è¯´ Unicode ç¼–ç çš„æ—¶å€™ï¼Œå…¶å®æ˜¯åœ¨è¯´ UTF-16ã€‚Windows å†…æ ¸ã€Javaã€Objective-C (Foundation)ã€JavaScript ä¸­éƒ½ä¼šå°†å­—ç¬¦çš„åŸºæœ¬å•å…ƒå®šä¸ºä¸¤ä¸ªå­—èŠ‚çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ C / C++ ä¸­é‡åˆ°çš„ <strong>wchar_t</strong> ç±»å‹æˆ– Java ä¸­çš„ <strong>char</strong> ç±»å‹ç­‰ç­‰ï¼Œè¿™äº›ç±»å‹å å†…å­˜ä¸¤ä¸ªå­—èŠ‚ï¼Œå› ä¸º Unicode ä¸­å¸¸ç”¨çš„å­—ç¬¦éƒ½å¤„äº 0x0 - 0xFFFF çš„èŒƒå›´ä¹‹å†…ï¼Œå› æ­¤ä¸¤ä¸ªå­—èŠ‚å‡ ä¹å¯ä»¥è¦†ç›–å¤§éƒ¨åˆ†çš„å¸¸ç”¨å­—ç¬¦ã€‚</p>
<p>ç„¶è€Œæˆ‘ä»¬æ€»éœ€è¦ç”¨åˆ°ä¸€äº›ä¸å¸¸ç”¨çš„å­—ç¬¦ï¼Œå°±æ¯”å¦‚ Emojiã€‚è¿™äº›å­—ç¬¦è½åœ¨ä¸€ä¸ªåä¸º Astral çš„å¹³é¢å†…ï¼Œæ€»ä¹‹æ˜¯è¶…è¿‡äº† 0xFFFFï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå‘¢ï¼Ÿè¿™é‡Œè‚¯å®šä¸èƒ½ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºäº†ã€‚æ‰€ä»¥ UTF-16 åšäº†è¿™ä¸ªçš„è§„å®šï¼š</p>
<p>é«˜ä½å­—èŠ‚ä¸º 0b110110 æˆ– 0b110111 çš„å­—å…ƒéœ€è¦ä¸¤ä¸¤é…å¯¹å…±åŒè¡¨è¾¾ä¸€ä¸ªå¤„äº 0x10000 - 0x10FFFF çš„å­—ç¬¦ã€‚</p>
<p>0x10000 - 0x10FFFF ä¹‹é—´æœ‰ 0xFFFFF ä¸ªå­—ç¬¦ï¼Œ20 bitsã€‚0xD800 å’Œ 0xDC00 éƒ½æœ‰ 10 bits ä»¥ä¸Šçš„ç©ºä½™ç©ºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è¶…è¿‡ 0xFFFF çš„ç¼–ç å‡æ‰ 0x10000ï¼Œå°†ç»“æœçš„ 20 bits ä¸­çš„å‰ 10 bits ä¸ 0xD800 åš OR è¿ç®—ï¼Œå°†å 10 bits ä¸ 0xDC00 åš OR è¿ç®—ã€‚è¿™æ ·ï¼Œè§£æçš„æ—¶å€™å¦‚æœé«˜ä½å­—èŠ‚æ˜¯ 0b110110ï¼Œé‚£ä¹ˆå–å…¶ä½ä½ 10 bitsï¼Œå­˜èµ·æ¥ï¼Œå†è¯»å–ä¸‹ä¸€ä¸ªå­—å…ƒï¼Œå–å…¶ä½ä½ 10 bitsï¼Œä¸¤ä¸ªç»“åˆèµ·æ¥å†åŠ ä¸Š 0x10000 å°±èƒ½è¿˜åŸå‡ºæ¥å“åº”çš„ç¼–ç äº†ã€‚</p>
<p>è¯´å¾—æ¯”è¾ƒå¹²æ¶©ï¼Œä¸¾ä¸ªğŸŒ°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&apos;ğŸ˜‚&apos;.charCodeAt(0) // 55357</div><div class="line">&apos;ğŸ˜‚&apos;.charCodeAt(1) // 56834</div></pre></td></tr></table></figure>
<p>55357 äºŒè¿›åˆ¶ <a href="tel:1101%201000%200011%201101" target="_blank" rel="external">1101 1000 0011 1101</a>ï¼Œé«˜ä½æœ‰ 0b110110ï¼Œå‰©ä¸‹çš„ 10 ä¸ªä½ä½æ˜¯ 0b0000111101ã€‚</p>
<p>56834 äºŒè¿›åˆ¶ <a href="tel:1101%201110%200000%200010" target="_blank" rel="external">1101 1110 0000 0010</a>ï¼Œé«˜ä½æœ‰ 0b110111ï¼Œå‰©ä¸‹çš„ 10 ä¸ªä½ä½æ˜¯ 0b1000000010ã€‚</p>
<p>ä¸¤ä¸ªåˆåœ¨ä¸€èµ·å†åŠ  0x10000 = 0x1F602ï¼Œæ­£å¥½æ˜¯ ğŸ˜‚ è¿™ä¸ªè¡¨æƒ…çš„ Unicode ç¼–ç ã€‚</p>
<p>åˆ°è¿™é‡Œä½ åº”è¯¥èƒ½ç†è§£ UTF-16 äº†å§ã€‚</p>
<p><strong>UTF-8</strong></p>
<p>è¿™é‡Œç®€å•æä¸€ä¸‹ï¼Œè¯¦ç»†çš„å¤§å®¶å¯ä»¥è‡ªå·±æŸ¥ã€‚</p>
<p>UTF-8 å·§å¦™å€ŸåŠ©äº†ä¸€ä¸ªå­—èŠ‚å†…çš„é«˜ä½ä½œä¸ºæ ‡å¿—ä½ï¼ŒåŠ¨æ€è°ƒæ•´ä¸€ä¸ªå­—å…ƒçš„é•¿åº¦ã€‚</p>
<p>æœ€é«˜ä½ä¸º 0ï¼Œè¿™è¡¨ç¤ºè¿™ä¸ªå­—å…ƒå ä¸€ä¸ªå­—èŠ‚ï¼Œç¼–ç ä¸ºå‰©ä½™çš„ 7 bitsã€‚</p>
<p>æœ€é«˜ä½ä¸º 0b110ï¼Œä»£è¡¨è¿™ä¸ªå­—å…ƒå ä¸¤ä¸ªå­—èŠ‚ï¼Œæ¥ä¸‹æ¥çš„å­—èŠ‚é«˜ä½å‡ä¸º 0b10ï¼Œè¦å–å‰©ä½™çš„ 6 bitsã€‚</p>
<p>ä»¥æ­¤ç±»æ¨â€¦</p>
<p><strong>UTF-32</strong></p>
<p>è¿™ä¸ªæ¯”è¾ƒç®€å•äº†ï¼Œå°±æ˜¯æš´åŠ›ä¸”å¥¢ä¾ˆåœ°ç”¨ 4 ä¸ªå­—èŠ‚æ¥ç›´æ¥å­˜å‚¨æ‰€æœ‰çš„ç¼–ç ã€‚</p>
<p>å…¶å®åˆ«çœ‹ UTF-32 è¿™ä¹ˆä¸ä¸­ç”¨ï¼Œå…¶å®ç”¨å®ƒæ¥ç»Ÿè®¡æ–‡å­—ä¸ªæ•°æ˜¯éå¸¸ç®€å•çš„ã€‚ğŸ˜‚ç”¨ UTF-16 è¡¨ç¤ºä¸ºä¸¤ä¸ªå­—èŠ‚ï¼Œç”¨ UTF-8 è¡¨ç¤ºæ˜¯å››ä¸ªå­—èŠ‚ï¼Œå› æ­¤å¯¹äº Foundation ä¸­çš„ NSStringã€JavaScript ä¸­çš„åŸç”Ÿ String ç­‰é‡‡ç”¨ UTF-16 å­˜å‚¨æ–‡å­—çš„å®¹å™¨ï¼ŒğŸ˜‚çš„ length å°±æ˜¯ 2ï¼Œæ˜¾ç„¶æ˜¯ä¸æ­£ç¡®çš„ï¼Œä½†å‡å¦‚ä½ æŠŠå®ƒè½¬æ¢æˆ UTF-32ï¼Œlength é™¤ä»¥ 4 å°±æ˜¯ 1 äº†ã€‚ä½†æ˜¯ç¼–ç è½¬æ¢è¿˜æ˜¯æœ‰ä¸€å®šå¼€é”€çš„ï¼Œå…¶å®ç»“åˆä¸Šé¢è¯´åˆ°çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è‡ªå·±å†™ä¸€ä¸ª walker æ¥ç²¾ç¡®ç»Ÿè®¡ä¸€ä¸ªå›ºå®šç¼–ç ä¸‹çš„å­—ç¬¦ä¸ªæ•°åˆ°åº•æ˜¯å¤šå°‘ä¸ªï¼Œç›¸ä¿¡å¤§å®¶ä¸éš¾å®ç°ã€‚</p>
<p>äº‹å®ä¸Šï¼ŒSwift ä¸­çš„ CharacterView å°±éšè—äº†ç¼–ç ç»†èŠ‚ï¼Œå°†å­—ç¬¦ä½œä¸ºåŸºæœ¬å•å…ƒï¼Œè¿™æ ·å½“ä½ è°ƒç”¨å…¶ count å±æ€§æ—¶ï¼Œè¿”å›çš„å°±æ˜¯æˆ‘ä»¬æ‰€çœ‹åˆ°çš„å­—ç¬¦çš„ä¸ªæ•°ã€‚</p>
<h2 id="Emoji-å¥½åƒæœ‰ç‚¹å¤æ‚"><a href="#Emoji-å¥½åƒæœ‰ç‚¹å¤æ‚" class="headerlink" title="Emoji å¥½åƒæœ‰ç‚¹å¤æ‚"></a>Emoji å¥½åƒæœ‰ç‚¹å¤æ‚</h2><p>äº‹å®ä¸Š Swift åšäº†æ›´å¤šã€‚</p>
<p>å¾ˆå¤š Emoji å…¶å®ä¸æ˜¯ä¸€ä¸ª Unicode å­—å…ƒèƒ½è¡¨ç¤ºçš„ï¼Œæ¯”å¦‚ â¤ï¸ï¼Œè¿™ç©æ„å°±ç®—è½¬æ¢æˆäº† UTF-32 ä¹Ÿå  8 ä¸ªå­—èŠ‚ï¼Œé™¤ä»¥ 4 æ˜¯ 2ï¼Œä¸¤ä¸ªå­—ç¬¦ï¼Ÿï¼Ÿâ¤ï¸ å…¶å®æ˜¯ç”± â¤ å’Œä¸€ä¸ªæ ·å¼æ§åˆ¶ç¬¦ç»„æˆçš„ï¼Œå½“æ–‡å­—æ¸²æŸ“å¼•æ“è¯»åˆ°è¿™æ ·çš„å­—ç¬¦ç»„åˆæ—¶å°±ä¼šå» Emoji å­—ä½“åº“æ‰¾ â¤ï¸æ¥æ¸²æŸ“ï¼Œæ‰€ä»¥å¯¹äºè¿™ç±» Emoji å¤„ç†èµ·æ¥ä¹Ÿè¦ç‰¹æ®Šè€ƒè™‘ã€‚</p>
<p>è¿˜æœ‰æ›´å˜æ€çš„æ˜¯ ğŸ‘©â¤ï¸ğŸ’‹ğŸ‘©ï¼Œè¿™è´§æ˜¯ 6 ä¸ªå­—ç¬¦ç»„æˆçš„ï¼Œé‡Œé¢ç”¨åˆ°äº†é›¶å®½å­—ç¬¦å°†å‡ ä¸ªè¡¨æƒ…è¿æ¥èµ·æ¥ï¼Œæœ€åå°±èƒ½ä½œä¸ºä¸€ä¸ªå­—ç¬¦æ¸²æŸ“äº†ã€‚</p>
<h2 id="Emoji-filter"><a href="#Emoji-filter" class="headerlink" title="Emoji filter"></a>Emoji filter</h2><p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç </p>
<p>å…ˆè¯´ä¸€ä¸‹å¤§ä½“çš„æ€è·¯å°±æ˜¯æ ¹æ®æ–°è¾“å…¥çš„å­—ç¬¦è¿›è¡Œå­—èŠ‚çš„åˆ¤æ–­è¿›è¡Œè¿‡æ»¤ï¼Œè¿˜æœ‰å°±æ˜¯æ ¹æ®ç‰¹å¾è¿›è¡Œæ­£åˆ™åŒ¹é…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">"lwoaApp"</span>)</div><div class="line">    .directive(<span class="string">"utf16toEntities"</span>, [<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> &#123;</div><div class="line">          	<span class="comment">//è¿™é‡Œè¿›è¡ŒåŒ¹é…æ¨¡å¼è¿™é‡Œç”¨åˆ°Aï¼ˆé»˜è®¤ï¼‰å¯ä»¥ä¸å†™</span></div><div class="line">          	restrict: <span class="string">"A"</span>,</div><div class="line">            <span class="attr">require</span>: <span class="string">'?^ngModel'</span>,<span class="comment">//è¿™é‡Œè¿›è¡Œæ›¿æ¢æ“ä½œ</span></div><div class="line">            link: <span class="function"><span class="keyword">function</span> (<span class="params">scope, elem, attrs, ngmodel</span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> startLen = <span class="number">0</span>;<span class="comment">//åˆå§‹åŒ–å­—ç¬¦ä¸²é•¿åº¦</span></div><div class="line">                elem.on(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;<span class="comment">//æ·»åŠ è¾“å…¥äº‹ä»¶</span></div><div class="line">                    <span class="keyword">var</span> val = ngmodel.$modelValue,<span class="comment">//è·å–inputçš„å€¼</span></div><div class="line">                        dataname = attrs.dataname;</div><div class="line">                    <span class="keyword">if</span> (val &amp;&amp; val != <span class="string">''</span>) &#123;<span class="comment">//å½“è¾“å…¥æ¡†ä¸ä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬è¿›å…¥è¿™ä¸ªå‡½æ•°ï¼Œç„¶åè¿›è¡Œè¿‡æ»¤</span></div><div class="line">                        <span class="keyword">var</span> name = dataname.split(<span class="string">"."</span>);</div><div class="line">                        <span class="keyword">if</span> (val.length - startLen === <span class="number">2</span>) &#123;<span class="comment">//è·å–æ–°è¾“å…¥çš„å­—ç¬¦çš„çš„é•¿åº¦ï¼Œå› ä¸ºemojiå¸¸æœ‰çš„æ˜¯å››ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå­—ç¬¦ï¼Œç„¶åè¿›è¡Œæ–°åŠ å…¥çš„å­—ç¬¦è¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¸ºemoji</span></div><div class="line">                            <span class="keyword">var</span> test = val.substring(startLen, val.length)<span class="comment">//å–åˆ°æ–°è¾“å…¥çš„å­—ç¬¦</span></div><div class="line">                            <span class="keyword">var</span> isEmoji = <span class="literal">false</span>;<span class="comment">//åˆå§‹åŒ–çŠ¶æ€</span></div><div class="line">                            <span class="built_in">escape</span>(test).replace(<span class="regexp">/\%uD/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">word</span>) </span>&#123;<span class="comment">//è¿™é‡Œæˆ‘ä»¬è¿›è¡Œemojiçš„ç‰¹å¾åŒ¹é…ï¼Œå¦‚æœç¬¦åˆæˆ‘ä»¬å°±è¿›è¡ŒUnicodeçš„å€¼çš„åˆ¤æ–­</span></div><div class="line">                                isEmoji = <span class="literal">true</span></div><div class="line">                                <span class="keyword">return</span> <span class="string">''</span>;</div><div class="line">                            &#125;);</div><div class="line">                            <span class="keyword">if</span> (isEmoji) &#123;<span class="comment">//è¿™é‡Œè¿›è¡Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆemojiçš„ç‰¹å¾</span></div><div class="line">                                <span class="keyword">var</span> H = test.charCodeAt(<span class="number">0</span>);<span class="comment">//å–é«˜ä½</span></div><div class="line">                                <span class="keyword">var</span> L = test.charCodeAt(<span class="number">1</span>);<span class="comment">//å–ä½ä½</span></div><div class="line">                                <span class="keyword">var</span> utf16val = <span class="number">0x10000</span> + H + L;<span class="comment">//è¿›è¡Œè¿ç®—</span></div><div class="line">                                <span class="keyword">if</span> (utf16val &gt; <span class="number">0xFFFF</span>) &#123;<span class="comment">//åˆ¤æ–­æ˜¯å¦åœ¨æˆ‘ä»¬å¸¸ç”¨çš„ç¼–ç èŒƒå›´å†…ï¼Œä¸Šæ–‡ä¸­å·²ç»æåˆ°äº†</span></div><div class="line">                                    val = val.substring(<span class="number">0</span>, startLen)<span class="comment">//ç¬¦åˆemojiç‰¹å¾çš„è¯è¿›è¡Œåˆ é™¤</span></div><div class="line">                                &#125;</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                        startLen = val.length;<span class="comment">//æŠŠå€¼èµ‹ç»™åˆå§‹çŠ¶æ€</span></div><div class="line">                        <span class="keyword">var</span> val = <span class="built_in">unescape</span>(<span class="built_in">escape</span>(val).replace(<span class="regexp">/\%uD.&#123;3&#125;/g</span>, <span class="string">''</span>)).trim();<span class="comment">//ä¸‹é¢å°±æ˜¯è¿›è¡Œä¸€äº›æ­£åˆ™è¿›è¡Œæ›¿æ¢æ‰ç¬¦åˆemojiçš„å­—ç¬¦ç¼–ç ï¼Œç”±äºå„ä¸ªå¹³å°ä»¥åŠè¾“å…¥æ³•å®ç°emojiçš„æ–¹å¼ä¸åŒï¼Œåªèƒ½æŠŠæ‰€æœ‰ç¬¦åˆemojiçŠ¶æ€çš„éƒ½åˆ é™¤ï¼Œä½†æ˜¯è¿™æ ·å­å¸¦æ¥çš„å¼Šç«¯å°±æ˜¯æœ‰å¯èƒ½è¯¯åˆ ä¸€äº›å­—ç¬¦</span></div><div class="line">                      	val = val.replace(<span class="regexp">/\^\:[a-z0-9_]+\:$/</span>).trim();</div><div class="line">                        val = <span class="built_in">unescape</span>(<span class="built_in">escape</span>(val).replace(<span class="regexp">/\%u26.&#123;2&#125;/g</span>, <span class="string">''</span>).replace(<span class="regexp">/\%uE.&#123;3&#125;/g</span>, <span class="string">''</span>).replace(<span class="regexp">/\%u27.&#123;2&#125;/g</span>, <span class="string">''</span>).replace(<span class="regexp">/\%uFE0F/g</span>, <span class="string">''</span>).replace(<span class="regexp">/\%u2B50/g</span>, <span class="string">''</span>));</div><div class="line">                        val = val.replace(<span class="regexp">/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g</span>, <span class="string">""</span>);</div><div class="line">                        val = <span class="built_in">unescape</span>(<span class="built_in">escape</span>(val).replace(<span class="regexp">/\%u0x0 - \%u0x10FFFF/g</span>, <span class="string">''</span>));</div><div class="line">                        <span class="keyword">var</span> ranges = [</div><div class="line">                            <span class="string">'\ud83c[\udf00-\udfff]'</span>,</div><div class="line">                            <span class="string">'\ud83d[\udc00-\ude4f]'</span>,</div><div class="line">                            <span class="string">'\ud83d[\ude80-\udeff]'</span></div><div class="line">                        ];</div><div class="line">                        val = val.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(ranges.join(<span class="string">'|'</span>), <span class="string">'g'</span>), <span class="string">''</span>);</div><div class="line">                        scope[name[<span class="number">0</span>]][name[<span class="number">1</span>]] = val.trim();</div><div class="line">                        scope.$apply();</div><div class="line">                    &#125; <span class="keyword">else</span> &#123;</div><div class="line">                        startLen = <span class="number">0</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    ]);</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;â€‹     ä¸ºä»€ä¹ˆä¼šæœ‰é¢˜ç›®ä¸­çš„emojiçš„è¿‡æ»¤å‘¢ï¼Œä¸»è¦æ˜¯å› ä¸ºemojiçš„å­—ç¬¦ç¼–ç æ‰€å†³å®šçš„ã€‚ä¸‹é¢å°±å…ˆè¯´ä¸€ä¸‹å­—ç¬¦ç¼–ç é—®é¢˜ã€‚å­—ç¬¦ç¼–ç æ˜¯è®¡ç®—æœºåŸç†ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„ä¸€ç¯ï¼Œç„¶è€Œå®ƒé‡Œé¢æœ‰å¾ˆå¤šæ¦‚å¿µå®¹æ˜“æ··æ·†ï¼Œæœ¬æ–‡å°±æ¥ç»“åˆ Emoji è°ˆè°ˆ Unicode å’Œå®ƒçš„å®ç°æ–¹æ¡ˆä»¬ã€‚&lt;/p&gt;
&lt;h2 i
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JavaScript ä»£ç æ”¶é›†</title>
    <link href="http://xuhongbo.com/2017/04/01/JavaScript/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81%E6%94%B6%E9%9B%86/"/>
    <id>http://xuhongbo.com/2017/04/01/JavaScript/å¸¸ç”¨ä»£ç æ”¶é›†/</id>
    <published>2017-04-01T08:08:32.000Z</published>
    <updated>2017-04-01T08:50:05.808Z</updated>
    
    <content type="html"><![CDATA[<h5 id="ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚"><a href="#ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚" class="headerlink" title="ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚"></a>ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚</h5><p>æ˜¨å¤©ä¸€ä¸ªæœ‹å‹é—®æˆ‘vueçš„åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Œå› ä¸ºæˆ‘åœ¨ä»–ä¹‹å‰åˆšåˆšè·Ÿåˆ«äººè¯´äº†ä¸€æ¬¡äº†ï¼Œæˆ‘å°±ç­”åº”ä»–è¯´ä»Šå¤©å‡ºä¸€ç¯‡æ–‡ç« è®©ä»–çœ‹ä¸€ä¸‹ï¼Œå½“æ—¶å¾ˆè´¸ç„¶ï¼Œæ˜¨å¤©æ™šä¸Šå›åˆ°ä½å¤„ï¼Œæ‹¿å‡ºæ¥ç¬”è®°æœ¬ï¼Œæ‰å‘ç°å¹¶ä¸æ˜¯ä¸€å¥ä¸¤å¥èƒ½å¤Ÿè§£é‡Šæ¸…æ¥šçš„ï¼Œæˆ‘æ‰“ç®—æŠŠè¿™ä¸€å—ç”±æµ…åˆ°æ·±å…¥çš„å†™ä¸€ç¯‡æ–‡ç« ï¼Œæ‰€ä»¥ä¸æ˜¯è¿™ä¸¤å¤©èƒ½å®Œæˆçš„ä»»åŠ¡ï¼Œä½†æ˜¯è‚¯å®šä¼šè¿‘æœŸæ›´æ–°</p>
<a id="more"></a>
<h4 id="1-PC-js"><a href="#1-PC-js" class="headerlink" title="1. PC - js"></a>1. PC - js</h4><ul>
<li>è¿”å›æŒ‡å®šèŒƒå›´çš„éšæœºæ•°(m-nä¹‹é—´)çš„å…¬å¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.random()*(n-m)+m</div></pre></td></tr></table></figure>
<ul>
<li>é˜»æ­¢é»˜è®¤äº‹ä»¶</li>
<li><a href="http://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false" target="_blank" rel="external">return false</a></li>
<li><a href="http://www.75team.com/archives/201" target="_blank" rel="external">return false</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// event.preventDefault()ä¼šé˜»æŒ¡é¢„è®¾è¦å‘ç”Ÿçš„äº‹ä»¶.</span></div><div class="line"><span class="comment">// event.stopPropagation()ä¼šé˜»æŒ¡å‘ç”Ÿå†’æ³¡äº‹ä»¶.</span></div><div class="line"><span class="comment">// è€Œreturn falseåˆ™æ˜¯å‰é¢ä¸¤è€…çš„äº‹æƒ…ä»–éƒ½ä¼šåšï¼š</span></div><div class="line"><span class="comment">// ä»–ä¼šåševent.preventDefault();</span></div><div class="line"><span class="comment">// ä»–ä¼šåševent.stopPropagation();</span></div><div class="line"><span class="comment">// åœæ­¢callback functionçš„æ‰§è¡Œå¹¶ä¸”ç«‹å³returnå›æ¥</span></div></pre></td></tr></table></figure>
<ul>
<li>é˜²æ­¢è¢«IframeåµŒå¥—</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(top != self)&#123;</div><div class="line">    location.href = â€about:blankâ€;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ä¸¤ç§å›¾ç‰‡lazyåŠ è½½çš„æ–¹å¼ </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// @description å‡†å¤‡ä¸ºå›¾ç‰‡é¢„åŠ è½½ä½¿ç”¨çš„æ’ä»¶</span></div><div class="line"><span class="comment">// ä½¿ç”¨çš„å›¾ç‰‡å®¹å™¨cssç±»åä¸ºlazy-load-wrap</span></div><div class="line"><span class="comment">// å›¾ç‰‡çœŸå®åœ°å€ä¸ºdata-lazy-src</span></div><div class="line"><span class="comment">// å½“lazy-load-wrapå®¹å™¨è¿›å…¥è§†å£ï¼Œåˆ™å¼€å§‹æ›¿æ¢å®¹å™¨å†…æ‰€æœ‰éœ€è¦å»¶è¿ŸåŠ è½½çš„å›¾ç‰‡è·¯å¾„ï¼Œå¹¶æ›´æ”¹å®¹å™¨çš„åŠ è½½çŠ¶æ€</span></div><div class="line"><span class="comment">//ç¬¬ä¸€ç§æ–¹æ³•</span></div><div class="line">$.fn.compassLazyLoad=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> _HEIGHT=<span class="built_in">window</span>.innerHeight,</div><div class="line">	_lazyLoadWrap=$(<span class="string">'.lazy-load-wrap'</span>);</div><div class="line"></div><div class="line">	<span class="keyword">var</span> methods=&#123;</div><div class="line">		<span class="attr">setOffsetTop</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			$.each(_lazyLoadWrap,<span class="function"><span class="keyword">function</span>(<span class="params">i,n</span>)</span>&#123;</div><div class="line">				$(n).attr(&#123;</div><div class="line">					<span class="string">'top'</span>:n.offsetTop-_HEIGHT,</div><div class="line">					<span class="string">'status'</span>:<span class="string">'wait'</span></div><div class="line">				&#125;);</div><div class="line">			&#125;)</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">isShow</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">var</span> _scrollTop=$(<span class="built_in">window</span>).scrollTop;</div><div class="line">			<span class="comment">//åˆ©ç”¨imageå®¹å™¨åˆ¤æ–­æ˜¯å¦è¿›å…¥è§†å£ï¼Œè€Œéimageæœ¬èº«</span></div><div class="line">			$.each(_lazyLoadWrap,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="keyword">var</span> _that=$(<span class="keyword">this</span>);</div><div class="line">				<span class="keyword">if</span> (_that.attr(<span class="string">'status'</span>)===<span class="string">'done'</span>) &#123;</div><div class="line">					<span class="keyword">return</span>;</div><div class="line">				&#125;;</div><div class="line">				<span class="keyword">if</span> (_that.attr(<span class="string">'top'</span>)&lt;=_scrollTop) &#123;</div><div class="line">					_that.find(<span class="string">'img[data-lazy-src]'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i,n</span>)</span>&#123;</div><div class="line">						n.src=$(n).data(<span class="string">'lazy-src'</span>);</div><div class="line">					&#125;);</div><div class="line">					_that.attr(<span class="string">'status'</span>,<span class="string">'done'</span>);</div><div class="line">				&#125;;</div><div class="line">			&#125;)</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">scroll</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			$(<span class="built_in">window</span>).on(<span class="string">'scroll'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				methods.isShow();</div><div class="line">			&#125;);</div><div class="line">		&#125;,</div><div class="line">		<span class="attr">init</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			methods.setOffsetTop();</div><div class="line">			methods.isShow();</div><div class="line">			methods.scroll();</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	methods.init();</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//ç¬¬äºŒç§æ–¹æ³•</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> exist=(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> timer=<span class="literal">null</span>,</div><div class="line">	temp=[].slice.call($(<span class="string">'.container'</span>));</div><div class="line">	ret=&#123;&#125;;</div><div class="line"></div><div class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>,len=temp.length<span class="number">-1</span>;i&lt;=len;i++)&#123;</div><div class="line">		ret[i]=temp[i];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">var</span> isExist=<span class="function"><span class="keyword">function</span>(<span class="params">winTop,winEnd</span>)</span>&#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> ret)&#123;</div><div class="line">			<span class="built_in">console</span>.log(ret);</div><div class="line">			<span class="keyword">var</span> item=ret[i],</div><div class="line">			eleTop=item.offsetTop,</div><div class="line">			eleEnd=eleTop+item.offsetHeight;</div><div class="line"></div><div class="line">			<span class="keyword">if</span>((eleTop&gt;winTop&amp;&amp;eleTop&lt;=winEnd)||(eleEnd&gt;winTop&amp;&amp;eleEnd&lt;=winEnd))&#123;</div><div class="line">				$(item).css(<span class="string">'background'</span>,<span class="string">'none'</span>);</div><div class="line">				<span class="keyword">new</span> Tab($(item).attr(<span class="string">'id'</span>),data).init;</div><div class="line">				<span class="keyword">delete</span> ret[i];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="attr">timer</span>:timer;</div><div class="line">		isExist:isExist;</div><div class="line">	&#125;;</div><div class="line">&#125;)($);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//ç¬¬ä¸‰ç§æ–¹æ³•</span></div><div class="line">Zepto(<span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> swiper = <span class="keyword">new</span> Swiper(<span class="string">'.swiper-container'</span>, &#123;</div><div class="line">        <span class="attr">pagination</span>: <span class="string">'.swiper-pagination'</span>,</div><div class="line">        <span class="attr">paginationClickable</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">autoplay</span>: <span class="number">3000</span>,</div><div class="line">        <span class="attr">loop</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">autoplayDisableOnInteraction</span>: <span class="literal">false</span></div><div class="line">    &#125;);</div><div class="line">    (<span class="function"><span class="keyword">function</span> <span class="title">lazyLoad</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> imgs = $(<span class="string">".lazyLoad"</span>);</div><div class="line">        <span class="keyword">var</span> src = <span class="string">''</span>;</div><div class="line">        $.each(imgs, <span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</div><div class="line">            src = $(item).attr(<span class="string">'data-src'</span>);</div><div class="line">            $(item).attr(<span class="string">'src'</span>, src);</div><div class="line">        &#125;);</div><div class="line">    &#125;)();</div><div class="line">&#125;);</div><div class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> lazyLoadTimerId = <span class="literal">null</span>;</div><div class="line">    <span class="comment">/// æ™ºèƒ½åŠ è½½äº‹ä»¶</span></div><div class="line">    $(<span class="built_in">window</span>).bind(<span class="string">"scroll"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        clearTimeout(lazyLoadTimerId);</div><div class="line">        lazyLoadTimerId = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// å»¶è¿ŸåŠ è½½æ‰€æœ‰å›¾ç‰‡</span></div><div class="line">            <span class="keyword">var</span> isHttp = (location.protocol === <span class="string">"http:"</span>);</div><div class="line">            $(<span class="string">"#ym_images img"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> self = $(<span class="keyword">this</span>);</div><div class="line">                <span class="keyword">if</span> (self.filter(<span class="string">":above-the-fold"</span>).length &gt; <span class="number">0</span>) &#123;</div><div class="line">                    <span class="keyword">var</span> originUrl = self.attr(<span class="string">"data-original"</span>);</div><div class="line">                    self.attr(<span class="string">"src"</span>, originUrl);</div><div class="line">                &#125;</div><div class="line">            &#125;);</div><div class="line">        &#125;, <span class="number">500</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>æŸå¹´æŸæœˆçš„1å·ä¸ºæ˜ŸæœŸå‡ </li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> weekday = [<span class="string">"æ˜ŸæœŸæ—¥"</span>, <span class="string">"æ˜ŸæœŸä¸€"</span>, <span class="string">"æ˜ŸæœŸäºŒ"</span>, <span class="string">"æ˜ŸæœŸä¸‰"</span>, <span class="string">"æ˜ŸæœŸå››"</span>, <span class="string">"æ˜ŸæœŸäº”"</span>, <span class="string">"æ˜ŸæœŸå…­"</span>];</div><div class="line">weekday[<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2015</span>, <span class="number">9</span>, <span class="number">1</span>).getDay()];	<span class="comment">//2015å¹´10æœˆ1å·</span></div></pre></td></tr></table></figure>
<h4 id="2-Mobile-js"><a href="#2-Mobile-js" class="headerlink" title="2. Mobile - js"></a>2. Mobile - js</h4><ul>
<li><a href="http://caibaojian.com/browser-ios-or-android.html" target="_blank" rel="external">js åˆ¤æ–­IOS, å®‰å“</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> u = navigator.userAgent, app = navigator.appVersion;</div><div class="line"><span class="keyword">var</span> isAndroid = u.indexOf(<span class="string">'Android'</span>) &gt; <span class="number">-1</span> || u.indexOf(<span class="string">'Linux'</span>) &gt; <span class="number">-1</span>; <span class="comment">//androidç»ˆç«¯æˆ–è€…ucæµè§ˆå™¨</span></div><div class="line"><span class="keyword">var</span> isiOS = !!u.match(<span class="regexp">/\(i[^;]+;( U;)? CPU.+Mac OS X/</span>); <span class="comment">//iosç»ˆç«¯</span></div><div class="line">alert(<span class="string">'æ˜¯å¦æ˜¯Androidï¼š'</span>+isAndroid);</div><div class="line">alert(<span class="string">'æ˜¯å¦æ˜¯iOSï¼š'</span>+isiOS);</div></pre></td></tr></table></figure>
<h4 id="3-å¾®ä¿¡-weixin"><a href="#3-å¾®ä¿¡-weixin" class="headerlink" title="3. å¾®ä¿¡ weixin"></a>3. <a href="http://loo2k.com/blog/detecting-wechat-client/" target="_blank" rel="external">å¾®ä¿¡ weixin</a></h4><ul>
<li>UserAgent åˆ¤æ–­å¾®ä¿¡å®¢æˆ·ç«¯</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Mozilla/5.0 (iPhone; CPU iPhone OS 8_3 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Mobile/12F70 MicroMessenger/6.1.5 NetType/WIFI</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isWechat</span>(<span class="params"></span>) </span>&#123;  </div><div class="line">    <span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</div><div class="line">    <span class="keyword">return</span> <span class="regexp">/micromessenger/i</span>.test(ua) || <span class="regexp">/windows phone/i</span>.test(ua);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>JSæ¥å£å®‰å…¨åŸŸåä¸å¡«å†™ï¼Œåˆ†äº«onMenuShareAppMessageç›´æ¥ä¼šå–é»˜è®¤å€¼ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åˆ†äº«onMenuShareAppMessageç›´æ¥ä¼šå–é»˜è®¤å€¼</span></div></pre></td></tr></table></figure>
<ul>
<li>å…³é—­å½“å‰é¡µé¢</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">WeixinJSBridge.call(<span class="string">'closeWindow'</span>);</div></pre></td></tr></table></figure>
<ul>
<li><a href="http://www.cnblogs.com/true_to_me/p/3565039.html" target="_blank" rel="external">æ”¯ä»˜æ¥å£æ–¹æ³•è°ƒç”¨å¿…é¡»åœ¨addeventé‡Œè¾¹è°ƒç”¨</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'WeixinJSBridgeReady'</span>, <span class="function"><span class="keyword">function</span> <span class="title">onBridgeReady</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    that.initOrder();</div><div class="line">&#125;, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<ul>
<li>æ”¯ä»˜æ¥å£æ–¹æ³•è°ƒç”¨å¿…é¡»åœ¨</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">WeixinJSBridge.invoke(<span class="string">'getBrandWCPayRequest'</span>, d, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(res.err_msg == <span class="string">"get_brand_wcpay_request:ok"</span>)&#123;</div><div class="line">        <span class="comment">// alert("æ”¯ä»˜æˆåŠŸ");</span></div><div class="line">        <span class="comment">// union.release(d.orderId);</span></div><div class="line">        resetUrl();</div><div class="line">        paySuccess(<span class="string">'home'</span>, d.orderId);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        cancelOrder(d.orderId);</div><div class="line">        <span class="comment">// alert(res.err_msg);</span></div><div class="line">    &#125;</div><div class="line">    loading.hide();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>ç€‘å¸ƒæµæ— é™åŠ è½½å®ä¾‹</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// be dependent on jquery &amp; jquery.infinitescroll.min.js</span></div><div class="line"><span class="comment">// insert this '&lt;div id="more"&gt;&lt;a href="api?page="&gt;&lt;/a&gt;&lt;/div&gt;' to your page.html</span></div><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$</span>)</span>&#123;</div><div class="line">  $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> $container = $(<span class="string">'.list-wrap-gd'</span>);</div><div class="line">      <span class="function"><span class="keyword">function</span> <span class="title">layOutCallBack</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          $container.imagesLoaded(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              $container.masonry(&#123;</div><div class="line">                  <span class="attr">itemSelector</span>: <span class="string">'.item-bar'</span>,</div><div class="line">                  <span class="attr">gutter</span>: <span class="number">10</span></div><div class="line">              &#125;);</div><div class="line">          &#125;);</div><div class="line">          $container.imagesLoaded().progress( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">              $container.masonry(<span class="string">'layout'</span>);</div><div class="line">          &#125;);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      layOutCallBack();</div><div class="line"></div><div class="line">      $container.infinitescroll(&#123;</div><div class="line">          <span class="attr">navSelector</span> : <span class="string">"#more"</span>,</div><div class="line">          <span class="attr">nextSelector</span> : <span class="string">"#more a"</span>,</div><div class="line">          <span class="attr">itemSelector</span> : <span class="string">".item-bar"</span>,</div><div class="line">          <span class="attr">pixelsFromNavToBottom</span>: <span class="number">300</span>,</div><div class="line">          <span class="attr">loading</span>:&#123;</div><div class="line">              <span class="attr">img</span>: <span class="string">"/images/masonry_loading.gif"</span>,</div><div class="line">              <span class="attr">msgText</span>: <span class="string">' '</span>,</div><div class="line">              <span class="attr">finishedMsg</span>: <span class="string">"&lt;em&gt;å·²ç»åˆ°æœ€åä¸€é¡µ&lt;/em&gt;"</span>,</div><div class="line">              <span class="attr">finished</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                  $(<span class="string">"#more"</span>).remove();</div><div class="line">                  $(<span class="string">"#infscr-loading"</span>).hide();</div><div class="line">              &#125;</div><div class="line">          &#125;,</div><div class="line">          <span class="attr">errorCallback</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              $(<span class="built_in">window</span>).unbind(<span class="string">'.infscr'</span>);</div><div class="line">          &#125;,</div><div class="line">          <span class="attr">pathParse</span>: <span class="function"><span class="keyword">function</span> (<span class="params">path, nextPage</span>) </span>&#123;</div><div class="line">              <span class="keyword">var</span> query = <span class="string">""</span>;</div><div class="line">              <span class="keyword">var</span> keyword=$(<span class="string">"#search_keyword"</span>).val();</div><div class="line">              <span class="keyword">var</span> cat_id=$(<span class="string">"#cat_id"</span>).val();</div><div class="line">              <span class="keyword">var</span> brand_id=$(<span class="string">"#brand_id"</span>).val();</div><div class="line">              <span class="keyword">var</span> country_id = $(<span class="string">"#country_id"</span>).val();</div><div class="line">              query = query + <span class="string">"&amp;namekeyword="</span>+keyword;</div><div class="line">              query = query +<span class="string">"&amp;cat_id="</span>+cat_id</div><div class="line">              query = query + <span class="string">"&amp;brand_id="</span> + brand_id; </div><div class="line">              query = query + <span class="string">"&amp;country_id="</span> + country_id;</div><div class="line">              path = [path,query];</div><div class="line">              <span class="keyword">return</span> path;</div><div class="line">          &#125;</div><div class="line">      &#125;,</div><div class="line"></div><div class="line">      <span class="function"><span class="keyword">function</span>(<span class="params">newElements</span>) </span>&#123;</div><div class="line">          <span class="keyword">var</span> $newElems = $( newElements ).css(&#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;);</div><div class="line">          $newElems.imagesLoaded(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">              $newElems.animate(&#123; <span class="attr">opacity</span>: <span class="number">1</span> &#125;);</div><div class="line">              $container.masonry( <span class="string">'appended'</span>, $newElems, <span class="literal">true</span> );</div><div class="line">              layOutCallBack();</div><div class="line">          &#125;);</div><div class="line">      &#125;);</div><div class="line">  &#125;);</div><div class="line">&#125;)(jQuery);</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://www.snip2code.com/Snippet/176582/--iOS-Safari----input---focus-fixed-----" target="_blank" rel="external">iOSï¼ŒSafariæµè§ˆå™¨ï¼Œinputç­‰è¡¨å•focusåfixedå…ƒç´ é”™ä½é—®é¢˜</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>( <span class="regexp">/iPhone|iPod|iPad/i</span>.test(navigator.userAgent) ) &#123;</div><div class="line">  $(<span class="built_in">document</span>).on(<span class="string">'focus'</span>, <span class="string">'input, textarea'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></div><div class="line">  &#123;</div><div class="line">     $(<span class="string">'header'</span>).css(<span class="string">"position"</span>, <span class="string">'absolute'</span>);</div><div class="line">     $(<span class="string">'footer'</span>).css(<span class="string">"position"</span>, <span class="string">'absolute'</span>);</div><div class="line">     </div><div class="line">  &#125;);</div><div class="line">  </div><div class="line">  $(<span class="built_in">document</span>).on(<span class="string">'blur'</span>, <span class="string">'input, textarea'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></div><div class="line">  &#123;</div><div class="line">       $(<span class="string">'header'</span>).css(<span class="string">"position"</span>, <span class="string">'fixed'</span>);</div><div class="line">       $(<span class="string">'footer'</span>).css(<span class="string">"position"</span>, <span class="string">'fixed'</span>);</div><div class="line">      </div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å¾—åˆ°åœ°ç†ä½ç½®</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLocation</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">  <span class="keyword">if</span>(navigator.geolocation)&#123;</div><div class="line">      navigator.geolocation.getCurrentPosition(</div><div class="line">              <span class="function"><span class="keyword">function</span>(<span class="params">p</span>)</span>&#123;</div><div class="line">                  callback(p.coords.latitude, p.coords.longitude);</div><div class="line">              &#125;,</div><div class="line">              <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">                  <span class="keyword">var</span> msg = e.code + <span class="string">"\n"</span> + e.message;</div><div class="line">              &#125;</div><div class="line">      );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><a href="http://isux.tencent.com/web-app-rem.html" target="_blank" rel="external">remè®¡ç®—é€‚é…</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">doc, win</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> docEl = doc.documentElement,</div><div class="line">      resizeEvt = <span class="string">'orientationchange'</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">'orientationchange'</span> : <span class="string">'resize'</span>,</div><div class="line">      recalc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          <span class="keyword">var</span> clientWidth = docEl.clientWidth;</div><div class="line">          <span class="keyword">if</span>(!clientWidth) <span class="keyword">return</span>;</div><div class="line">          docEl.style.fontSize = <span class="number">20</span> * (clientWidth / <span class="number">320</span>) + <span class="string">'px'</span>;</div><div class="line">      &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">if</span>(!doc.addEventListener) <span class="keyword">return</span>;</div><div class="line">  win.addEventListener(resizeEvt, recalc, <span class="literal">false</span>);</div><div class="line">  doc.addEventListener(<span class="string">'DOMContentLoaded'</span>, recalc, <span class="literal">false</span>);</div><div class="line">&#125;)(<span class="built_in">document</span>, <span class="built_in">window</span>);</div></pre></td></tr></table></figure>
<ul>
<li><a href="http://www.html-js.com/article/3041" target="_blank" rel="external">å¦å¤–ä¸€ç§remæ–¹æ¡ˆ</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dpr, rem, scale;</div><div class="line"><span class="keyword">var</span> docEl = <span class="built_in">document</span>.documentElement;</div><div class="line"><span class="keyword">var</span> fontEl = <span class="built_in">document</span>.createElement(<span class="string">'style'</span>);</div><div class="line"><span class="keyword">var</span> metaEl = <span class="built_in">document</span>.querySelector(<span class="string">'meta[name="viewport"]'</span>);</div><div class="line"></div><div class="line">dpr = <span class="built_in">window</span>.devicePixelRatio || <span class="number">1</span>;</div><div class="line">rem = docEl.clientWidth * <span class="number">2</span> / <span class="number">10</span>;</div><div class="line">scale = <span class="number">1</span> / dpr;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// è®¾ç½®viewportï¼Œè¿›è¡Œç¼©æ”¾ï¼Œè¾¾åˆ°é«˜æ¸…æ•ˆæœ</span></div><div class="line">metaEl.setAttribute(<span class="string">'content'</span>, <span class="string">'width='</span> + dpr * docEl.clientWidth + <span class="string">',initial-scale='</span> + scale + <span class="string">',maximum-scale='</span> + scale + <span class="string">', minimum-scale='</span> + scale + <span class="string">',user-scalable=no'</span>);</div><div class="line"></div><div class="line"><span class="comment">// è®¾ç½®data-dprå±æ€§ï¼Œç•™ä½œçš„css hackä¹‹ç”¨</span></div><div class="line">docEl.setAttribute(<span class="string">'data-dpr'</span>, dpr);</div><div class="line"></div><div class="line"><span class="comment">// åŠ¨æ€å†™å…¥æ ·å¼</span></div><div class="line">docEl.firstElementChild.appendChild(fontEl);</div><div class="line">fontEl.innerHTML = <span class="string">'html&#123;font-size:'</span> + rem + <span class="string">'px!important;&#125;'</span>;</div><div class="line"></div><div class="line"><span class="comment">// ç»™jsè°ƒç”¨çš„ï¼ŒæŸä¸€dprä¸‹remå’Œpxä¹‹é—´çš„è½¬æ¢å‡½æ•°</span></div><div class="line"><span class="built_in">window</span>.rem2px = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    v = <span class="built_in">parseFloat</span>(v);</div><div class="line">    <span class="keyword">return</span> v * rem;</div><div class="line">&#125;;</div><div class="line"><span class="built_in">window</span>.px2rem = <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</div><div class="line">    v = <span class="built_in">parseFloat</span>(v);</div><div class="line">    <span class="keyword">return</span> v / rem;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">window</span>.dpr = dpr;</div><div class="line"><span class="built_in">window</span>.rem = rem;</div></pre></td></tr></table></figure>
<ul>
<li>è·å–jsæ‰€åœ¨è·¯å¾„</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getJsDir</span> (<span class="params">src</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> script = <span class="literal">null</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (src) &#123;</div><div class="line">        script = [].filter.call(<span class="built_in">document</span>.scripts, <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> v.src.indexOf(src) !== <span class="number">-1</span>;</div><div class="line">        &#125;)[<span class="number">0</span>];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        script = <span class="built_in">document</span>.scripts[<span class="built_in">document</span>.scripts.length - <span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> script ? script.src.substr(<span class="number">0</span>, script.src.lastIndexOf(<span class="string">'/'</span>)) : script;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>ä»å…¨å±€æ•è·é”™è¯¯</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">errMsg, scriptURI, lineNumber, columnNumber, errorObj</span>) </span>&#123;</div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> rst = &#123;</div><div class="line">            <span class="string">"é”™è¯¯ä¿¡æ¯ï¼š"</span>: errMsg,</div><div class="line">            <span class="string">"å‡ºé”™æ–‡ä»¶ï¼š"</span>: scriptURI,</div><div class="line">            <span class="string">"å‡ºé”™è¡Œå·ï¼š"</span>: lineNumber,</div><div class="line">            <span class="string">"å‡ºé”™åˆ—å·ï¼š"</span>: columnNumber,</div><div class="line">            <span class="string">"é”™è¯¯è¯¦æƒ…ï¼š"</span>: errorObj</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        alert(<span class="built_in">JSON</span>.stringify(rst, <span class="literal">null</span>, <span class="number">10</span>));</div><div class="line">    &#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://www.zhihu.com/question/26228251/answer/32405529" target="_blank" rel="external">å¦‚ä½•é€šè¿‡ js ä¿®æ”¹å¾®ä¿¡æµè§ˆå™¨çš„title?</a></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> $body = $(<span class="string">'body'</span>);</div><div class="line"><span class="built_in">document</span>.title = <span class="string">'title'</span>; <span class="comment">// hackåœ¨å¾®ä¿¡ç­‰webviewä¸­æ— æ³•ä¿®æ”¹document.titleçš„æƒ…å†µ    </span></div><div class="line"><span class="keyword">var</span> $iframe = $(<span class="string">'&lt;iframe src="/favicon.ico"&gt;&lt;/iframe&gt;'</span>).on(<span class="string">'load'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </div><div class="line">        $iframe.off(<span class="string">'load'</span>).remove() </div><div class="line">    &#125;, <span class="number">0</span>) </div><div class="line">&#125;).appendTo($body)</div></pre></td></tr></table></figure>
<h4 id="1-å¸¸ç”¨æ–¹æ³•-js"><a href="#1-å¸¸ç”¨æ–¹æ³•-js" class="headerlink" title="1. å¸¸ç”¨æ–¹æ³• - js"></a>1. å¸¸ç”¨æ–¹æ³• - js</h4><ul>
<li>å­—ç¬¦ä¸²é•¿åº¦æˆªå–</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cutstr</span>(<span class="params">str, len</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> temp,</div><div class="line">        icount = <span class="number">0</span>,</div><div class="line">        patrn = <span class="regexp">/[^\x00-\xff]/</span>ï¼Œ</div><div class="line">        strre = <span class="string">""</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</div><div class="line">        <span class="keyword">if</span> (icount &lt; len - <span class="number">1</span>) &#123;</div><div class="line">            temp = str.substr(i, <span class="number">1</span>);</div><div class="line">                <span class="keyword">if</span> (patrn.exec(temp) == <span class="literal">null</span>) &#123;</div><div class="line">                   icount = icount + <span class="number">1</span></div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                icount = icount + <span class="number">2</span></div><div class="line">            &#125;</div><div class="line">            strre += temp</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> strre + <span class="string">"..."</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ›¿æ¢å…¨éƒ¨</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>.prototype.replaceAll = <span class="function"><span class="keyword">function</span>(<span class="params">s1, s2</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(s1, <span class="string">"gm"</span>), s2)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ¸…é™¤ç©ºæ ¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> reExtraSpace = <span class="regexp">/^\s*(.*?)\s+$/</span>;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.replace(reExtraSpace, <span class="string">"$1"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ¸…é™¤å·¦ç©ºæ ¼/å³ç©ºæ ¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">ltrim</span>(<span class="params">s</span>)</span>&#123; <span class="keyword">return</span> s.replace( <span class="regexp">/^(\s*|ã€€*)/</span>, <span class="string">""</span>); &#125; </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">rtrim</span>(<span class="params">s</span>)</span>&#123; <span class="keyword">return</span> s.replace( <span class="regexp">/(\s*|ã€€*)$/</span>, <span class="string">""</span>); &#125;</div></pre></td></tr></table></figure>
<ul>
<li>åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²å¼€å¤´</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>.prototype.startWith = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.indexOf(s) == <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>åˆ¤æ–­æ˜¯å¦ä»¥æŸä¸ªå­—ç¬¦ä¸²ç»“æŸ</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>.prototype.endWith = <span class="function"><span class="keyword">function</span> (<span class="params">s</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> d = <span class="keyword">this</span>.length - s.length;</div><div class="line">    <span class="keyword">return</span> (d &gt;= <span class="number">0</span> &amp;&amp; <span class="keyword">this</span>.lastIndexOf(s) == d)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è½¬ä¹‰htmlæ ‡ç­¾</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">HtmlEncode</span>(<span class="params">text</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> text.replace(<span class="regexp">/&amp;/g</span>, <span class="string">'&amp;'</span>).replace(<span class="regexp">/\"/g</span>, <span class="string">'"'</span>).replace(<span class="regexp">/&lt;/g</span>, <span class="string">'&lt;'</span>).replace(<span class="regexp">/&gt;/g</span>, <span class="string">'&gt;'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ—¶é—´æ—¥æœŸæ ¼å¼è½¬æ¢</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Date</span>.prototype.Format = <span class="function"><span class="keyword">function</span>(<span class="params">formatStr</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> str = formatStr;</div><div class="line">    <span class="keyword">var</span> Week = [<span class="string">'æ—¥'</span>, <span class="string">'ä¸€'</span>, <span class="string">'äºŒ'</span>, <span class="string">'ä¸‰'</span>, <span class="string">'å››'</span>, <span class="string">'äº”'</span>, <span class="string">'å…­'</span>];</div><div class="line">    str = str.replace(<span class="regexp">/yyyy|YYYY/</span>, <span class="keyword">this</span>.getFullYear());</div><div class="line">    str = str.replace(<span class="regexp">/yy|YY/</span>, (<span class="keyword">this</span>.getYear() % <span class="number">100</span>) &gt; <span class="number">9</span> ? (<span class="keyword">this</span>.getYear() % <span class="number">100</span>).toString() : <span class="string">'0'</span> + (<span class="keyword">this</span>.getYear() % <span class="number">100</span>));</div><div class="line">    str = str.replace(<span class="regexp">/MM/</span>, (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>) &gt; <span class="number">9</span> ? (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>).toString() : <span class="string">'0'</span> + (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>));</div><div class="line">    str = str.replace(<span class="regexp">/M/g</span>, (<span class="keyword">this</span>.getMonth() + <span class="number">1</span>));</div><div class="line">    str = str.replace(<span class="regexp">/w|W/g</span>, Week[<span class="keyword">this</span>.getDay()]);</div><div class="line">    str = str.replace(<span class="regexp">/dd|DD/</span>, <span class="keyword">this</span>.getDate() &gt; <span class="number">9</span> ? <span class="keyword">this</span>.getDate().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getDate());</div><div class="line">    str = str.replace(<span class="regexp">/d|D/g</span>, <span class="keyword">this</span>.getDate());</div><div class="line">    str = str.replace(<span class="regexp">/hh|HH/</span>, <span class="keyword">this</span>.getHours() &gt; <span class="number">9</span> ? <span class="keyword">this</span>.getHours().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getHours());</div><div class="line">    str = str.replace(<span class="regexp">/h|H/g</span>, <span class="keyword">this</span>.getHours());</div><div class="line">    str = str.replace(<span class="regexp">/mm/</span>, <span class="keyword">this</span>.getMinutes() &gt; <span class="number">9</span> ? <span class="keyword">this</span>.getMinutes().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getMinutes());</div><div class="line">    str = str.replace(<span class="regexp">/m/g</span>, <span class="keyword">this</span>.getMinutes());</div><div class="line">    str = str.replace(<span class="regexp">/ss|SS/</span>, <span class="keyword">this</span>.getSeconds() &gt; <span class="number">9</span> ? <span class="keyword">this</span>.getSeconds().toString() : <span class="string">'0'</span> + <span class="keyword">this</span>.getSeconds());</div><div class="line">    str = str.replace(<span class="regexp">/s|S/g</span>, <span class="keyword">this</span>.getSeconds());</div><div class="line">    <span class="keyword">return</span> str</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—ç±»å‹</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isDigit</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> patrn = <span class="regexp">/^[0-9]*$/</span>;</div><div class="line">    <span class="keyword">if</span> (patrn.exec(value) == <span class="literal">null</span> || value == <span class="string">""</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è®¾ç½®cookieå€¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">name, value, Hours</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">    <span class="keyword">var</span> offset = <span class="number">8</span>;</div><div class="line">    <span class="keyword">var</span> utc = d.getTime() + (d.getTimezoneOffset() * <span class="number">60000</span>);</div><div class="line">    <span class="keyword">var</span> nd = utc + (<span class="number">3600000</span> * offset);</div><div class="line">    <span class="keyword">var</span> exp = <span class="keyword">new</span> <span class="built_in">Date</span>(nd);</div><div class="line">    exp.setTime(exp.getTime() + Hours * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</div><div class="line">    <span class="built_in">document</span>.cookie = name + <span class="string">"="</span> + <span class="built_in">escape</span>(value) + <span class="string">";path=/;expires="</span> + exp.toGMTString() + <span class="string">";domain=360doc.com;"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è·å–cookieå€¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> arr = <span class="built_in">document</span>.cookie.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^| )"</span> + name + <span class="string">"=([^;]*)(;|$)"</span>));</div><div class="line">    <span class="keyword">if</span> (arr != <span class="literal">null</span>) <span class="keyword">return</span> <span class="built_in">unescape</span>(arr[<span class="number">2</span>]);</div><div class="line">    <span class="keyword">return</span> <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>åŠ è½½æ ·å¼æ–‡ä»¶è¡¨</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">LoadStyle</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="built_in">document</span>.createStyleSheet(url)</div><div class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">        <span class="keyword">var</span> cssLink = <span class="built_in">document</span>.createElement(<span class="string">'link'</span>);</div><div class="line">        cssLink.rel = <span class="string">'stylesheet'</span>;</div><div class="line">        cssLink.type = <span class="string">'text/css'</span>;</div><div class="line">        cssLink.href = url;</div><div class="line">        <span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>];</div><div class="line">        head.appendChild(cssLink)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è¿”å›è„šæœ¬å†…å®¹</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">evalscript</span>(<span class="params">s</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">'&lt;script'</span>) == <span class="number">-1</span>) <span class="keyword">return</span> s;</div><div class="line">    <span class="keyword">var</span> p = <span class="regexp">/&lt;script[^\&gt;]*?&gt;([^\x00]*?)&lt;\/script&gt;/ig</span>;</div><div class="line">    <span class="keyword">var</span> arr = [];</div><div class="line">    <span class="keyword">while</span>(arr = p.exec(s)) &#123;</div><div class="line">        <span class="keyword">var</span> p1 = <span class="regexp">/&lt;script[^\&gt;]*?src=\"([^\&gt;]*?)\"[^\&gt;]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?&gt;&lt;\/script&gt;/i</span>;</div><div class="line">        <span class="keyword">var</span> arr1 = [];</div><div class="line">        arr1 = p1.exec(arr[<span class="number">0</span>]);</div><div class="line">        <span class="keyword">if</span>(arr1) &#123;</div><div class="line">            appendscript(arr1[<span class="number">1</span>], <span class="string">''</span>, arr1[<span class="number">2</span>], arr1[<span class="number">3</span>]);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            p1 = <span class="regexp">/&lt;script(.*?)&gt;([^\x00]+?)&lt;\/script&gt;/i</span>;</div><div class="line">            arr1 = p1.exec(arr[<span class="number">0</span>]);</div><div class="line">            appendscript(<span class="string">''</span>, arr1[<span class="number">2</span>], arr1[<span class="number">1</span>].indexOf(<span class="string">'reload='</span>) != <span class="number">-1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> s;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ¸…é™¤è„šæœ¬å†…å®¹</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">stripscript</span>(<span class="params">s</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> s.replace(<span class="regexp">/&lt;script.*?&gt;.*?&lt;\/script&gt;/ig</span>, <span class="string">''</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>åŠ¨æ€åŠ è½½è„šæœ¬æ–‡ä»¶</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">appendscript</span>(<span class="params">src, text, reload, charset</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> id = hash(src + text);</div><div class="line">    <span class="keyword">if</span>(!reload &amp;&amp; in_array(id, evalscripts)) <span class="keyword">return</span>;</div><div class="line">    <span class="keyword">if</span>(reload &amp;&amp; $(id)) &#123;</div><div class="line">        $(id).parentNode.removeChild($(id));</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    evalscripts.push(id);</div><div class="line">    <span class="keyword">var</span> scriptNode = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</div><div class="line">    scriptNode.type = <span class="string">"text/javascript"</span>;</div><div class="line">    scriptNode.id = id;</div><div class="line">    scriptNode.charset = charset ? charset : (BROWSER.firefox ? <span class="built_in">document</span>.characterSet : <span class="built_in">document</span>.charset);</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">if</span>(src) &#123;</div><div class="line">            scriptNode.src = src;</div><div class="line">            scriptNode.onloadDone = <span class="literal">false</span>;</div><div class="line">            scriptNode.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                scriptNode.onloadDone = <span class="literal">true</span>;</div><div class="line">                JSLOADED[src] = <span class="number">1</span>;</div><div class="line">             &#125;;</div><div class="line">             scriptNode.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                 <span class="keyword">if</span>((scriptNode.readyState == <span class="string">'loaded'</span> || scriptNode.readyState == <span class="string">'complete'</span>) &amp;&amp; !scriptNode.onloadDone) &#123;</div><div class="line">                    scriptNode.onloadDone = <span class="literal">true</span>;</div><div class="line">                    JSLOADED[src] = <span class="number">1</span>;</div><div class="line">                &#125;</div><div class="line">             &#125;;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(text)&#123;</div><div class="line">            scriptNode.text = text;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(scriptNode);</div><div class="line">    &#125; <span class="keyword">catch</span>(e) &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è¿”å›æŒ‰IDæ£€ç´¢çš„å…ƒç´ å¯¹è±¡</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">$</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> !id ? <span class="literal">null</span> : <span class="built_in">document</span>.getElementById(id);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ£€éªŒURLé“¾æ¥æ˜¯å¦æœ‰æ•ˆ</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUrlState</span>(<span class="params">URL</span>)</span>&#123; </div><div class="line">    <span class="keyword">var</span> xmlhttp = <span class="keyword">new</span> ActiveXObject(<span class="string">"microsoft.xmlhttp"</span>); </div><div class="line">    xmlhttp.Open(<span class="string">"GET"</span>,URL, <span class="literal">false</span>);  </div><div class="line">    <span class="keyword">try</span>&#123;  </div><div class="line">            xmlhttp.Send(); </div><div class="line">    &#125;<span class="keyword">catch</span>(e)&#123;</div><div class="line">    &#125;<span class="keyword">finally</span>&#123; </div><div class="line">        <span class="keyword">var</span> result = xmlhttp.responseText; </div><div class="line">        <span class="keyword">if</span>(result)&#123;</div><div class="line">            <span class="keyword">if</span>(xmlhttp.Status==<span class="number">200</span>)&#123; </div><div class="line">                <span class="keyword">return</span>(<span class="literal">true</span>); </div><div class="line">             &#125;<span class="keyword">else</span>&#123; </div><div class="line">                   <span class="keyword">return</span>(<span class="literal">false</span>); </div><div class="line">             &#125; </div><div class="line">         &#125;<span class="keyword">else</span>&#123; </div><div class="line">             <span class="keyword">return</span>(<span class="literal">false</span>); </div><div class="line">         &#125; </div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è·å–å½“å‰è·¯å¾„</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> currentPageUrl = <span class="string">""</span>;</div><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span>.href === <span class="string">"undefined"</span>) &#123;</div><div class="line">    currentPageUrl = <span class="built_in">document</span>.location.toString().toLowerCase();</div><div class="line">&#125;<span class="keyword">else</span> &#123;</div><div class="line">    currentPageUrl = <span class="keyword">this</span>.href.toString().toLowerCase();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è·å–é¡µé¢é«˜åº¦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageHeight</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> g = <span class="built_in">document</span>, a = g.body, f = g.documentElement, d = g.compatMode == <span class="string">"BackCompat"</span></div><div class="line">                    ? a</div><div class="line">                    : g.documentElement;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollHeight, a.scrollHeight, d.clientHeight);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è·å–é¡µé¢å¯è§†å®½åº¦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageViewWidth</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> d = <span class="built_in">document</span>, a = d.compatMode == <span class="string">"BackCompat"</span> ? </div><div class="line">       				   d.body: d.documentElement;</div><div class="line">    <span class="keyword">return</span> a.clientWidth;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>è·å–é¡µé¢å®½åº¦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPageWidth</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> g = <span class="built_in">document</span>, a = g.body, f = g.documentElement, d = g.compatMode == <span class="string">"BackCompat"</span>?</div><div class="line">    					  a: g.documentElement;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.max(f.scrollWidth, a.scrollWidth, d.clientWidth);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>éšæœºæ•°æ—¶é—´æˆ³</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">uniqueId</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> a=<span class="built_in">Math</span>.random,b=<span class="built_in">parseInt</span>;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Number</span>(<span class="keyword">new</span> <span class="built_in">Date</span>()).toString()+b(<span class="number">10</span>*a())+b(<span class="number">10</span>*a())+b(<span class="number">10</span>*a());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ—¥æœŸæ ¼å¼åŒ–å‡½æ•°</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Date</span>.prototype.format = <span class="function"><span class="keyword">function</span>(<span class="params">format</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> o = &#123;</div><div class="line">        <span class="string">"M+"</span> : <span class="keyword">this</span>.getMonth()+<span class="number">1</span>, <span class="comment">//month</span></div><div class="line">        <span class="string">"d+"</span> : <span class="keyword">this</span>.getDate(),    <span class="comment">//day</span></div><div class="line">        <span class="string">"h+"</span> : <span class="keyword">this</span>.getHours(),   <span class="comment">//hour</span></div><div class="line">        <span class="string">"m+"</span> : <span class="keyword">this</span>.getMinutes(), <span class="comment">//minute</span></div><div class="line">        <span class="string">"s+"</span> : <span class="keyword">this</span>.getSeconds(), <span class="comment">//second</span></div><div class="line">        <span class="string">"q+"</span> : <span class="built_in">Math</span>.floor((<span class="keyword">this</span>.getMonth()+<span class="number">3</span>)/<span class="number">3</span>),  <span class="comment">//quarter</span></div><div class="line">        <span class="string">"S"</span> : <span class="keyword">this</span>.getMilliseconds() <span class="comment">//millisecond</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">if</span>(<span class="regexp">/(y+)/</span>.test(format)) format=format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>,</div><div class="line">(<span class="keyword">this</span>.getFullYear()+<span class="string">""</span>).substr(<span class="number">4</span> - <span class="built_in">RegExp</span>.$<span class="number">1.</span>length));</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> k <span class="keyword">in</span> o)&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"("</span>+ k +<span class="string">")"</span>).test(format))</div><div class="line">            format = format.replace(<span class="built_in">RegExp</span>.$<span class="number">1</span>,<span class="built_in">RegExp</span>.$<span class="number">1.</span>length==<span class="number">1</span> ? o[k] :(<span class="string">"00"</span>+ o[k]).substr((<span class="string">""</span>+ o[k]).length));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> format;</div><div class="line">&#125;</div><div class="line"><span class="comment">//è°ƒç”¨</span></div><div class="line"><span class="comment">//new Date().format("yyyy-MM-dd hh:mm:ss");</span></div></pre></td></tr></table></figure>
<ul>
<li>è¿”å›é¡¶éƒ¨çš„é€šç”¨æ–¹æ³•</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">backTop</span>(<span class="params">btnId</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(btnId);</div><div class="line">    <span class="keyword">var</span> d = <span class="built_in">document</span>.documentElement;</div><div class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.body;</div><div class="line">    <span class="built_in">window</span>.onscroll = set;</div><div class="line">    btn.style.display = <span class="string">"none"</span>;</div><div class="line">    btn.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        btn.style.display = <span class="string">"none"</span>;</div><div class="line">        <span class="built_in">window</span>.onscroll = <span class="literal">null</span>;</div><div class="line">        <span class="keyword">this</span>.timer = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            d.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</div><div class="line">            b.scrollTop -= <span class="built_in">Math</span>.ceil((d.scrollTop + b.scrollTop) * <span class="number">0.1</span>);</div><div class="line">            <span class="keyword">if</span> ((d.scrollTop + b.scrollTop) == <span class="number">0</span>) clearInterval(btn.timer, <span class="built_in">window</span>.onscroll = set);</div><div class="line">            &#125;, <span class="number">10</span>);</div><div class="line">    &#125;;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        btn.style.display = (d.scrollTop + b.scrollTop &gt; <span class="number">100</span>) ? <span class="string">'block'</span>: <span class="string">"none"</span></div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">backTop(<span class="string">'goTop'</span>);</div></pre></td></tr></table></figure>
<ul>
<li>è·å¾—URLä¸­GETå‚æ•°å€¼</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç”¨æ³•ï¼šå¦‚æœåœ°å€æ˜¯ test.htm?t1=1&amp;t2=2&amp;t3=3, é‚£ä¹ˆèƒ½å–å¾—ï¼šGET["t1"], GET["t2"], GET["t3"]</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_get</span>(<span class="params"></span>)</span>&#123; </div><div class="line">    querystr = <span class="built_in">window</span>.location.href.split(<span class="string">"?"</span>)</div><div class="line">    <span class="keyword">if</span>(querystr[<span class="number">1</span>])&#123;</div><div class="line">        GETs = querystr[<span class="number">1</span>].split(<span class="string">"&amp;"</span>);</div><div class="line">        GET = [];</div><div class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;GETs.length;i++)&#123;</div><div class="line">              tmp_arr = GETs.split(<span class="string">"="</span>)</div><div class="line">              key=tmp_arr[<span class="number">0</span>]</div><div class="line">              GET[key] = tmp_arr[<span class="number">1</span>]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> querystr[<span class="number">1</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>æ•°ç»„å»é‡</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span>.prototype.unique=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> x=<span class="keyword">this</span>.split(<span class="regexp">/[\r\n]+/</span>);</div><div class="line">    <span class="keyword">var</span> y=<span class="string">''</span>;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;x.length;i++)&#123;</div><div class="line">        <span class="keyword">if</span>(!<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^"</span>+x.replace(<span class="regexp">/([^\w])/ig</span>,<span class="string">"\\$1"</span>)+<span class="string">"$"</span>,<span class="string">"igm"</span>).test(y))&#123;</div><div class="line">            y+=x+<span class="string">"\r\n"</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> y</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>æŒ‰å­—å…¸é¡ºåºï¼Œå¯¹æ¯è¡Œè¿›è¡Œæ•°ç»„æ’åº</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">SetSort</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> text=K1.value.split(<span class="regexp">/[\r\n]/</span>).sort().join(<span class="string">"\r\n"</span>);<span class="comment">//é¡ºåº</span></div><div class="line">    <span class="keyword">var</span> test=K1.value.split(<span class="regexp">/[\r\n]/</span>).sort().reverse().join(<span class="string">"\r\n"</span>);<span class="comment">//ååº</span></div><div class="line">    K1.value=K1.value!=text?text:test;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>å­—ç¬¦ä¸²ååºè¾“å‡º</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsReverse</span>(<span class="params">text</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> text.split(<span class="string">''</span>).reverse().join(<span class="string">''</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>é‡‘é¢å¤§å†™è½¬æ¢å‡½æ•°</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//æ ¼å¼è½¬æ¢</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">transform</span>(<span class="params">tranvalue</span>) </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        <span class="keyword">var</span> i = <span class="number">1</span>;</div><div class="line">        <span class="keyword">var</span> dw2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">""</span>, <span class="string">"ä¸‡"</span>, <span class="string">"äº¿"</span>); <span class="comment">//å¤§å•ä½</span></div><div class="line">        <span class="keyword">var</span> dw1 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"æ‹¾"</span>, <span class="string">"ä½°"</span>, <span class="string">"ä»Ÿ"</span>); <span class="comment">//å°å•ä½</span></div><div class="line">        <span class="keyword">var</span> dw = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">"é›¶"</span>, <span class="string">"å£¹"</span>, <span class="string">"è´°"</span>, <span class="string">"å"</span>, <span class="string">"è‚†"</span>, <span class="string">"ä¼"</span>, <span class="string">"é™†"</span>, <span class="string">"æŸ’"</span>, <span class="string">"æŒ"</span>, <span class="string">"ç–"</span>); <span class="comment">//æ•´æ•°éƒ¨åˆ†ç”¨</span></div><div class="line">        <span class="comment">//ä»¥ä¸‹æ˜¯å°å†™è½¬æ¢æˆå¤§å†™æ˜¾ç¤ºåœ¨åˆè®¡å¤§å†™çš„æ–‡æœ¬æ¡†ä¸­     </span></div><div class="line">        <span class="comment">//åˆ†ç¦»æ•´æ•°ä¸å°æ•°</span></div><div class="line">        <span class="keyword">var</span> source = splits(tranvalue);</div><div class="line">        <span class="keyword">var</span> num = source[<span class="number">0</span>];</div><div class="line">        <span class="keyword">var</span> dig = source[<span class="number">1</span>];</div><div class="line">        <span class="comment">//è½¬æ¢æ•´æ•°éƒ¨åˆ†</span></div><div class="line">        <span class="keyword">var</span> k1 = <span class="number">0</span>; <span class="comment">//è®¡å°å•ä½</span></div><div class="line">        <span class="keyword">var</span> k2 = <span class="number">0</span>; <span class="comment">//è®¡å¤§å•ä½</span></div><div class="line">        <span class="keyword">var</span> sum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">var</span> str = <span class="string">""</span>;</div><div class="line">        <span class="keyword">var</span> len = source[<span class="number">0</span>].length; <span class="comment">//æ•´æ•°çš„é•¿åº¦</span></div><div class="line">        <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= len; i++) &#123;</div><div class="line">              <span class="keyword">var</span> n = source[<span class="number">0</span>].charAt(len - i); <span class="comment">//å–å¾—æŸä¸ªä½æ•°ä¸Šçš„æ•°å­—</span></div><div class="line">              <span class="keyword">var</span> bn = <span class="number">0</span>;</div><div class="line">              <span class="keyword">if</span> (len - i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123;</div><div class="line">                bn = source[<span class="number">0</span>].charAt(len - i - <span class="number">1</span>); <span class="comment">//å–å¾—æŸä¸ªä½æ•°å‰ä¸€ä½ä¸Šçš„æ•°å­—</span></div><div class="line">              &#125;</div><div class="line">              sum = sum + <span class="built_in">Number</span>(n);</div><div class="line">              <span class="keyword">if</span> (sum != <span class="number">0</span>) &#123;</div><div class="line">                str = dw[<span class="built_in">Number</span>(n)].concat(str); <span class="comment">//å–å¾—è¯¥æ•°å­—å¯¹åº”çš„å¤§å†™æ•°å­—ï¼Œå¹¶æ’å…¥åˆ°strå­—ç¬¦ä¸²çš„å‰é¢</span></div><div class="line">                <span class="keyword">if</span> (n == <span class="string">'0'</span>) sum = <span class="number">0</span>;</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (len - i - <span class="number">1</span> &gt;= <span class="number">0</span>) &#123; <span class="comment">//åœ¨æ•°å­—èŒƒå›´å†…</span></div><div class="line">                <span class="keyword">if</span> (k1 != <span class="number">3</span>) &#123; <span class="comment">//åŠ å°å•ä½</span></div><div class="line">                      <span class="keyword">if</span> (bn != <span class="number">0</span>) &#123;</div><div class="line">                        str = dw1[k1].concat(str);</div><div class="line">                      &#125;</div><div class="line">                      k1++;</div><div class="line">                &#125; <span class="keyword">else</span> &#123; <span class="comment">//ä¸åŠ å°å•ä½ï¼ŒåŠ å¤§å•ä½</span></div><div class="line">                      k1 = <span class="number">0</span>;</div><div class="line">                      <span class="keyword">var</span> temp = str.charAt(<span class="number">0</span>);</div><div class="line">                      <span class="keyword">if</span> (temp == <span class="string">"ä¸‡"</span> || temp == <span class="string">"äº¿"</span>) <span class="comment">//è‹¥å¤§å•ä½å‰æ²¡æœ‰æ•°å­—åˆ™èˆå»å¤§å•ä½</span></div><div class="line">                      str = str.substr(<span class="number">1</span>, str.length - <span class="number">1</span>);</div><div class="line">                      str = dw2[k2].concat(str);</div><div class="line">                      sum = <span class="number">0</span>;</div><div class="line">                &#125;</div><div class="line">              &#125;</div><div class="line">              <span class="keyword">if</span> (k1 == <span class="number">3</span>)&#123; <span class="comment">//å°å•ä½åˆ°åƒåˆ™å¤§å•ä½è¿›ä¸€</span></div><div class="line">                k2++;</div><div class="line">              &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">//è½¬æ¢å°æ•°éƒ¨åˆ†</span></div><div class="line">        <span class="keyword">var</span> strdig = <span class="string">""</span>;</div><div class="line">        <span class="keyword">if</span> (dig != <span class="string">""</span>) &#123;</div><div class="line">              <span class="keyword">var</span> n = dig.charAt(<span class="number">0</span>);</div><div class="line">              <span class="keyword">if</span> (n != <span class="number">0</span>) &#123;</div><div class="line">                strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"è§’"</span>; <span class="comment">//åŠ æ•°å­—</span></div><div class="line">              &#125;</div><div class="line">              <span class="keyword">var</span> n = dig.charAt(<span class="number">1</span>);</div><div class="line">              <span class="keyword">if</span> (n != <span class="number">0</span>) &#123;</div><div class="line">                strdig += dw[<span class="built_in">Number</span>(n)] + <span class="string">"åˆ†"</span>; <span class="comment">//åŠ æ•°å­—</span></div><div class="line">              &#125;</div><div class="line">        &#125;</div><div class="line">        str += <span class="string">"å…ƒ"</span> + strdig;</div><div class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"0å…ƒ"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> str;</div><div class="line">&#125;</div><div class="line"><span class="comment">//æ‹†åˆ†æ•´æ•°ä¸å°æ•°</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">splits</span>(<span class="params">tranvalue</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> value = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">''</span>, <span class="string">''</span>);</div><div class="line">    temp = tranvalue.split(<span class="string">"."</span>);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; temp.length; i++) &#123;</div><div class="line">        value = temp;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> value;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h5 id=&quot;ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚&quot;&gt;&lt;a href=&quot;#ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚&quot; class=&quot;headerlink&quot; title=&quot;ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚&quot;&gt;&lt;/a&gt;ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„ä»£ç æ”¶é›†ï¼Œæ²¡æœ‰ä»»ä½•æŠ€æœ¯å«é‡ï¼Œåªæ˜¯å¡«å‘çš„ç§¯ç´¯ã€‚&lt;/h5&gt;&lt;p&gt;æ˜¨å¤©ä¸€ä¸ªæœ‹å‹é—®æˆ‘vueçš„åŒå‘æ•°æ®ç»‘å®šçš„åŸç†ï¼Œå› ä¸ºæˆ‘åœ¨ä»–ä¹‹å‰åˆšåˆšè·Ÿåˆ«äººè¯´äº†ä¸€æ¬¡äº†ï¼Œæˆ‘å°±ç­”åº”ä»–è¯´ä»Šå¤©å‡ºä¸€ç¯‡æ–‡ç« è®©ä»–çœ‹ä¸€ä¸‹ï¼Œå½“æ—¶å¾ˆè´¸ç„¶ï¼Œæ˜¨å¤©æ™šä¸Šå›åˆ°ä½å¤„ï¼Œæ‹¿å‡ºæ¥ç¬”è®°æœ¬ï¼Œæ‰å‘ç°å¹¶ä¸æ˜¯ä¸€å¥ä¸¤å¥èƒ½å¤Ÿè§£é‡Šæ¸…æ¥šçš„ï¼Œæˆ‘æ‰“ç®—æŠŠè¿™ä¸€å—ç”±æµ…åˆ°æ·±å…¥çš„å†™ä¸€ç¯‡æ–‡ç« ï¼Œæ‰€ä»¥ä¸æ˜¯è¿™ä¸¤å¤©èƒ½å®Œæˆçš„ä»»åŠ¡ï¼Œä½†æ˜¯è‚¯å®šä¼šè¿‘æœŸæ›´æ–°&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Vuex 2.0 æºç åˆ†æ</title>
    <link href="http://xuhongbo.com/2017/03/20/%E6%A1%86%E6%9E%B6/vue/Vuex%202.0%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    <id>http://xuhongbo.com/2017/03/20/æ¡†æ¶/vue/Vuex 2.0 æºç åˆ†æ/</id>
    <published>2017-03-20T04:24:22.000Z</published>
    <updated>2017-03-21T04:33:05.226Z</updated>
    
    <content type="html"><![CDATA[<p>å½“æˆ‘ä»¬ç”¨ Vue.js å¼€å‘ä¸€ä¸ªä¸­åˆ°å¤§å‹çš„å•é¡µåº”ç”¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•è®©å¤šä¸ª Vue ç»„ä»¶å…±äº«çŠ¶æ€</li>
<li>Vue ç»„ä»¶é—´å¦‚ä½•é€šè®¯</li>
</ul>
<p>é€šå¸¸ï¼Œåœ¨é¡¹ç›®ä¸æ˜¯å¾ˆå¤æ‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šåˆ©ç”¨å…¨å±€äº‹ä»¶æ€»çº¿ ï¼ˆglobal event busï¼‰è§£å†³ï¼Œä½†æ˜¯éšç€å¤æ‚åº¦çš„æå‡ï¼Œè¿™äº›ä»£ç å°†å˜çš„éš¾ä»¥ç»´æŠ¤ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ å¥½ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œäºæ˜¯ï¼ŒVuex è¯ç”Ÿäº†ã€‚</p>
<a id="more"></a>
<p>æœ¬æ–‡å¹¶ä¸æ˜¯ Vuex çš„ç§‘æ™®æ–‡ç« ï¼Œå¯¹äºè¿˜ä¸äº†è§£ Vuex çš„åŒå­¦ï¼Œå»ºè®®å…ˆç§»æ­¥ <a href="https://vuex.vuejs.org/zh-cn/" target="_blank" rel="external">Vuex å®˜æ–¹æ–‡æ¡£</a>ï¼›</p>
<p><a href="https://camo.githubusercontent.com/dfd0f78b33acef4969f3274bb4674ccd48c46000/68747470733a2f2f767565782e7675656a732e6f72672f7a682d636e2f696d616765732f767565782e706e67" target="_blank" rel="external"><img src="https://camo.githubusercontent.com/dfd0f78b33acef4969f3274bb4674ccd48c46000/68747470733a2f2f767565782e7675656a732e6f72672f7a682d636e2f696d616765732f767565782e706e67" alt="vuex åŸç†å›¾"></a></p>
<p>Vuex çš„è®¾è®¡æ€æƒ³å—åˆ°äº† Fluxï¼ŒRedux å’Œ The Elm Architecture çš„å¯å‘ï¼Œå®ƒçš„å®ç°åˆååˆ†å·§å¦™ï¼Œå’Œ Vue.js é…åˆç›¸å¾—ç›Šå½°ï¼Œä¸‹é¢å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹å®ƒçš„å®ç°å§ã€‚</p>
<h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><p>Vuex çš„æºç æ‰˜ç®¡åœ¨ <a href="https://github.com/vuejs/vuex" target="_blank" rel="external">github</a>ï¼Œæˆ‘ä»¬é¦–å…ˆé€šè¿‡ git æŠŠä»£ç  clone åˆ°æœ¬åœ°ï¼Œé€‰ä¸€æ¬¾é€‚åˆè‡ªå·±çš„ IDE æ‰“å¼€æºç ï¼Œå±•å¼€ src ç›®å½•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><a href="https://camo.githubusercontent.com/4c0c82eb95a6d128f80355522e266fe5220ca863/687474703a2f2f7374617469632e67616c696c656f2e7869616f6a756b656a692e636f6d2f7374617469632f746d732f736869656c642f767565785f7372632e706e67" target="_blank" rel="external"><img src="https://camo.githubusercontent.com/4c0c82eb95a6d128f80355522e266fe5220ca863/687474703a2f2f7374617469632e67616c696c656f2e7869616f6a756b656a692e636f6d2f7374617469632f746d732f736869656c642f767565785f7372632e706e67" alt="enter image description here"></a></p>
<p>src ç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶ä¸å¤šï¼ŒåŒ…å«å‡ ä¸ª js æ–‡ä»¶å’Œ plugins ç›®å½•ï¼Œ plugins ç›®å½•é‡Œé¢åŒ…å« 2 ä¸ª Vuex çš„å†…ç½®æ’ä»¶ï¼Œæ•´ä¸ªæºç åŠ èµ·æ¥ä¸è¿‡ 500-600 è¡Œï¼Œå¯è°“éå¸¸è½»å·§çš„ä¸€ä¸ªåº“ã€‚</p>
<p>éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ï¼Œæˆ‘ä»¬å…ˆç›´è§‚çš„æ„Ÿå—ä¸€ä¸‹æºç çš„ç»“æ„ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€ä¸‹å…¶ä¸­çš„å®ç°ç»†èŠ‚ã€‚</p>
<h2 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h2><p>æœ¬æ–‡çš„æºç åˆ†æè¿‡ç¨‹ä¸ä¼šæ˜¯è‡ªä¸Šè€Œä¸‹çš„ç»™ä»£ç åŠ æ³¨é‡Šï¼Œæˆ‘æ›´å€¾å‘äºæ˜¯ä» Vuex æä¾›çš„ API å’Œæˆ‘ä»¬çš„ä½¿ç”¨æ–¹æ³•ç­‰ç»´åº¦å»åˆ†æã€‚Vuex çš„æºç æ˜¯åŸºäº es6 çš„è¯­æ³•ç¼–å†™çš„ï¼Œå¯¹äºä¸äº†è§£ es6 çš„åŒå­¦ï¼Œå»ºè®®è¿˜æ˜¯å…ˆå­¦ä¹ ä¸€ä¸‹ es6ã€‚</p>
<h3 id="ä»å…¥å£å¼€å§‹"><a href="#ä»å…¥å£å¼€å§‹" class="headerlink" title="ä»å…¥å£å¼€å§‹"></a>ä»å…¥å£å¼€å§‹</h3><p>çœ‹æºç ä¸€èˆ¬æ˜¯ä»å…¥å£å¼€å§‹ï¼ŒVuex æºç çš„å…¥å£æ˜¯ src/index.jsï¼Œå…ˆæ¥æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<p>æˆ‘ä»¬é¦–å…ˆçœ‹è¿™ä¸ªåº“çš„ export ï¼Œåœ¨ index.js ä»£ç æœ€åã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  Store,</div><div class="line">  install,</div><div class="line">  mapState,</div><div class="line">  mapMutations,</div><div class="line">  mapGetters,</div><div class="line">  mapActions</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå¯ä»¥ä¸€ç›®äº†ç„¶åœ°çœ‹åˆ° Vuex å¯¹å¤–æš´éœ²çš„ APIã€‚å…¶ä¸­, Store æ˜¯ Vuex æä¾›çš„çŠ¶æ€å­˜å‚¨ç±»ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨ Vuex å°±æ˜¯é€šè¿‡åˆ›å»º Store çš„å®ä¾‹ï¼Œç¨åæˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç»ã€‚æ¥ç€æ˜¯ install æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é€šå¸¸æ˜¯æˆ‘ä»¬ç¼–å†™ç¬¬ä¸‰æ–¹ Vue æ’ä»¶çš„â€œå¥—è·¯â€ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹â€œå¥—è·¯â€ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">install</span> (<span class="params">_Vue</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (Vue) &#123;</div><div class="line">    <span class="built_in">console</span>.error(</div><div class="line">      <span class="string">'[vuex] already installed. Vue.use(Vuex) should be called only once.'</span></div><div class="line">    )</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  Vue = _Vue</div><div class="line">  applyMixin(Vue)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// auto install in dist mode</span></div><div class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span> &amp;&amp; <span class="built_in">window</span>.Vue) &#123;</div><div class="line">  install(<span class="built_in">window</span>.Vue)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å®ç°äº†ä¸€ä¸ª install æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å½“æˆ‘ä»¬å…¨å±€å¼•ç”¨ Vue ï¼Œä¹Ÿå°±æ˜¯ window ä¸Šæœ‰ Vue å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šæ‰‹åŠ¨è°ƒç”¨ install æ–¹æ³•ï¼Œå¹¶ä¼ å…¥ Vue çš„å¼•ç”¨ï¼›å½“ Vue é€šè¿‡ npm å®‰è£…åˆ°é¡¹ç›®ä¸­çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­å¼•å…¥ç¬¬ä¸‰æ–¹ Vue æ’ä»¶é€šå¸¸ä¼šç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line">...</div><div class="line">Vue.use(Vuex)</div></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬æ‰§è¡Œ Vue.use(Vuex) è¿™å¥ä»£ç çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨äº† install çš„æ–¹æ³•å¹¶ä¼ å…¥ Vue çš„å¼•ç”¨ã€‚install æ–¹æ³•é¡¾åæ€ä¹‰ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„å®ç°ã€‚å®ƒæ¥å—äº†ä¸€ä¸ªå‚æ•° _Vueï¼Œå‡½æ•°ä½“é¦–å…ˆåˆ¤æ–­ Vue ï¼Œè¿™ä¸ªå˜é‡çš„å®šä¹‰åœ¨ index.js æ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> Vue <span class="comment">// bind on install</span></div></pre></td></tr></table></figure>
<p>å¯¹ Vue çš„åˆ¤æ–­ä¸»è¦æ˜¯ä¿è¯ install æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™é‡ŒæŠŠ install æ–¹æ³•çš„å‚æ•° _Vue å¯¹è±¡èµ‹å€¼ç»™ Vue å˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ index.js æ–‡ä»¶çš„å…¶å®ƒåœ°æ–¹ä½¿ç”¨ Vue è¿™ä¸ªå˜é‡äº†ã€‚install æ–¹æ³•çš„æœ€åè°ƒç”¨äº† applyMixin æ–¹æ³•ï¼Œæˆ‘ä»¬é¡ºä¾¿æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œåœ¨ src/mixin.js æ–‡ä»¶é‡Œå®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">Vue</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> version = <span class="built_in">Number</span>(Vue.version.split(<span class="string">'.'</span>)[<span class="number">0</span>])</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (version &gt;= <span class="number">2</span>) &#123;</div><div class="line">    <span class="keyword">const</span> usesInit = Vue.config._lifecycleHooks.indexOf(<span class="string">'init'</span>) &gt; <span class="number">-1</span></div><div class="line">    Vue.mixin(usesInit ? &#123; <span class="attr">init</span>: vuexInit &#125; : &#123; <span class="attr">beforeCreate</span>: vuexInit &#125;)</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// override init and inject vuex init procedure</span></div><div class="line">    <span class="comment">// for 1.x backwards compatibility.</span></div><div class="line">    <span class="keyword">const</span> _init = Vue.prototype._init</div><div class="line">    Vue.prototype._init = <span class="function"><span class="keyword">function</span> (<span class="params">options = &#123;&#125;</span>) </span>&#123;</div><div class="line">      options.init = options.init</div><div class="line">        ? [vuexInit].concat(options.init)</div><div class="line">        : vuexInit</div><div class="line">      _init.call(<span class="keyword">this</span>, options)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * Vuex init hook, injected into each instances init hooks list.</div><div class="line">   */</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">vuexInit</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> options = <span class="keyword">this</span>.$options</div><div class="line">    <span class="comment">// store injection</span></div><div class="line">    <span class="keyword">if</span> (options.store) &#123;</div><div class="line">      <span class="keyword">this</span>.$store = options.store</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (options.parent &amp;&amp; options.parent.$store) &#123;</div><div class="line">      <span class="keyword">this</span>.$store = options.parent.$store</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç çš„ä½œç”¨å°±æ˜¯åœ¨ Vue çš„ç”Ÿå‘½å‘¨æœŸä¸­çš„åˆå§‹åŒ–ï¼ˆ1.0 ç‰ˆæœ¬æ˜¯ initï¼Œ2.0 ç‰ˆæœ¬æ˜¯ beforeCreatedï¼‰é’©å­å‰æ’å…¥ä¸€æ®µ Vuex åˆå§‹åŒ–ä»£ç ã€‚è¿™é‡Œåšçš„äº‹æƒ…å¾ˆç®€å•â€”â€”ç»™ Vue çš„å®ä¾‹æ³¨å…¥ä¸€ä¸ª <code>$store</code> çš„å±æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ Vue çš„ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡ <code>this.$store.xxx</code> è®¿é—®åˆ° Vuex çš„å„ç§æ•°æ®å’ŒçŠ¶æ€ã€‚</p>
<h3 id="è®¤è¯†-Store-æ„é€ å‡½æ•°"><a href="#è®¤è¯†-Store-æ„é€ å‡½æ•°" class="headerlink" title="è®¤è¯† Store æ„é€ å‡½æ•°"></a>è®¤è¯† Store æ„é€ å‡½æ•°</h3><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Vuex çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå®ä¾‹åŒ– Store ç±»ï¼Œç„¶åä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬æˆ‘ä»¬å®šä¹‰å¥½çš„ actionsã€gettersã€mutationsã€stateç­‰ï¼Œç”šè‡³å½“æˆ‘ä»¬æœ‰å¤šä¸ªå­æ¨¡å—çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ª modules å¯¹è±¡ã€‚é‚£ä¹ˆå®ä¾‹åŒ–çš„æ—¶å€™ï¼Œåˆ°åº•åšäº†å“ªäº›äº‹æƒ…å‘¢ï¼Ÿå¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œè®©æˆ‘ä»¬å›åˆ° index.js æ–‡ä»¶ï¼Œé‡ç‚¹çœ‹ä¸€ä¸‹ Store ç±»çš„å®šä¹‰ã€‚Store ç±»å®šä¹‰çš„ä»£ç ç•¥é•¿ï¼Œæˆ‘ä¸ä¼šä¸€ä¸‹å°±è´´ä¸Šæ‰€æœ‰ä»£ç ï¼Œæˆ‘ä»¬æ¥æ‹†è§£åˆ†æå®ƒï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹æ„é€ å‡½æ•°çš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span> (options = &#123;&#125;) &#123;</div><div class="line">    assert(Vue, <span class="string">`must call Vue.use(Vuex) before creating a store instance.`</span>)</div><div class="line">    assert(<span class="keyword">typeof</span> <span class="built_in">Promise</span> !== <span class="string">'undefined'</span>, <span class="string">`vuex requires a Promise polyfill in this browser.`</span>)</div><div class="line"></div><div class="line">    <span class="keyword">const</span> &#123;</div><div class="line">      state = &#123;&#125;,</div><div class="line">      plugins = [],</div><div class="line">      strict = <span class="literal">false</span></div><div class="line">    &#125; = options</div><div class="line"></div><div class="line">    <span class="comment">// store internal state</span></div><div class="line">    <span class="keyword">this</span>._options = options</div><div class="line">    <span class="keyword">this</span>._committing = <span class="literal">false</span></div><div class="line">    <span class="keyword">this</span>._actions = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line">    <span class="keyword">this</span>._mutations = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line">    <span class="keyword">this</span>._wrappedGetters = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line">    <span class="keyword">this</span>._runtimeModules = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line">    <span class="keyword">this</span>._subscribers = []</div><div class="line">    <span class="keyword">this</span>._watcherVM = <span class="keyword">new</span> Vue()</div><div class="line"></div><div class="line">    <span class="comment">// bind commit and dispatch to self</span></div><div class="line">    <span class="keyword">const</span> store = <span class="keyword">this</span></div><div class="line">    <span class="keyword">const</span> &#123; dispatch, commit &#125; = <span class="keyword">this</span></div><div class="line">    <span class="keyword">this</span>.dispatch = <span class="function"><span class="keyword">function</span> <span class="title">boundDispatch</span> (<span class="params">type, payload</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> dispatch.call(store, type, payload)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">this</span>.commit = <span class="function"><span class="keyword">function</span> <span class="title">boundCommit</span> (<span class="params">type, payload, options</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> commit.call(store, type, payload, options)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// strict mode</span></div><div class="line">    <span class="keyword">this</span>.strict = strict</div><div class="line"></div><div class="line">    <span class="comment">// init root module.</span></div><div class="line">    <span class="comment">// this also recursively registers all sub-modules</span></div><div class="line">    <span class="comment">// and collects all module getters inside this._wrappedGetters</span></div><div class="line">    installModule(<span class="keyword">this</span>, state, [], options)</div><div class="line"></div><div class="line">    <span class="comment">// initialize the store vm, which is responsible for the reactivity</span></div><div class="line">    <span class="comment">// (also registers _wrappedGetters as computed properties)</span></div><div class="line">    resetStoreVM(<span class="keyword">this</span>, state)</div><div class="line"></div><div class="line">    <span class="comment">// apply plugins</span></div><div class="line">    plugins.concat(devtoolPlugin).forEach(<span class="function"><span class="params">plugin</span> =&gt;</span> plugin(<span class="keyword">this</span>))</div><div class="line">  &#125;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ„é€ å‡½æ•°çš„ä¸€å¼€å§‹å°±ç”¨äº†â€œæ–­è¨€å‡½æ•°â€ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æ»¡è¶³ä¸€äº›æ¡ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">assert(Vue, <span class="string">`must call Vue.use(Vuex) before creating a store instance.`</span>)</div></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç çš„ç›®çš„æ˜¯ç¡®ä¿ Vue çš„å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯åœ¨æˆ‘ä»¬å®ä¾‹åŒ– Store ä¹‹å‰ï¼Œå¿…é¡»è¦ä¿è¯ä¹‹å‰çš„ install æ–¹æ³•å·²ç»æ‰§è¡Œäº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">assert(<span class="keyword">typeof</span> <span class="built_in">Promise</span> !== <span class="string">'undefined'</span>, <span class="string">`vuex requires a Promise polyfill in this browser.`</span>)</div></pre></td></tr></table></figure>
<p>è¿™è¡Œä»£ç çš„ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿ Promsie å¯ä»¥ä½¿ç”¨çš„ï¼Œå› ä¸º Vuex çš„æºç æ˜¯ä¾èµ– Promise çš„ã€‚Promise æ˜¯ es6 æä¾›æ–°çš„ APIï¼Œç”±äºç°åœ¨çš„æµè§ˆå™¨å¹¶ä¸æ˜¯éƒ½æ”¯æŒ es6 è¯­æ³•çš„ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬ä¼šç”¨ babel ç¼–è¯‘æˆ‘ä»¬çš„ä»£ç ï¼Œå¦‚æœæƒ³ä½¿ç”¨ Promise è¿™ä¸ª ç‰¹æ€§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ package.json ä¸­æ·»åŠ å¯¹ babel-polyfill çš„ä¾èµ–å¹¶åœ¨ä»£ç çš„å…¥å£åŠ ä¸Š <code>import &#39;babel-polyfill&#39;</code> è¿™æ®µä»£ç ã€‚</p>
<p>å†æ¥çœ‹çœ‹ assert è¿™ä¸ªå‡½æ•°ï¼Œå®ƒå¹¶ä¸æ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ï¼Œå®ƒçš„å®ç°åœ¨ src/util.js é‡Œï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">assert</span> (<span class="params">condition, msg</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!condition) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`[vuex] <span class="subst">$&#123;msg&#125;</span>`</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>éå¸¸ç®€å•ï¼Œå¯¹ condition åˆ¤æ–­ï¼Œå¦‚æœä¸ä¸ä¸ºçœŸï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚è¿™ä¸ªå‡½æ•°è™½ç„¶ç®€å•ï¼Œä½†è¿™ç§ç¼–ç¨‹æ–¹å¼å€¼å¾—æˆ‘ä»¬å­¦ä¹ ã€‚</p>
<p>å†æ¥çœ‹æ„é€ å‡½æ•°æ¥ä¸‹æ¥çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> &#123;</div><div class="line">  state = &#123;&#125;,</div><div class="line">  plugins = [],</div><div class="line">  strict = <span class="literal">false</span></div><div class="line">&#125; = options</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå°±æ˜¯åˆ©ç”¨ es6 çš„ç»“æ„èµ‹å€¼æ‹¿åˆ° options é‡Œçš„ stateï¼Œplugins å’Œ strictã€‚state è¡¨ç¤º rootStateï¼Œplugins è¡¨ç¤ºåº”ç”¨çš„æ’ä»¶ã€strict è¡¨ç¤ºæ˜¯å¦å¼€å¯ä¸¥æ ¼æ¨¡å¼ã€‚</p>
<p>æ¥ç€å¾€ä¸‹çœ‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// store internal state</span></div><div class="line"><span class="keyword">this</span>._options = options</div><div class="line"><span class="keyword">this</span>._committing = <span class="literal">false</span></div><div class="line"><span class="keyword">this</span>._actions = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line"><span class="keyword">this</span>._mutations = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line"><span class="keyword">this</span>._wrappedGetters = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line"><span class="keyword">this</span>._runtimeModules = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line"><span class="keyword">this</span>._subscribers = []</div><div class="line"><span class="keyword">this</span>._watcherVM = <span class="keyword">new</span> Vue()</div></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸»è¦æ˜¯åˆ›å»ºä¸€äº›å†…éƒ¨çš„å±æ€§ï¼š<br><code>this._options</code> å­˜å‚¨å‚æ•° optionsã€‚<br><code>this._committing</code> æ ‡å¿—ä¸€ä¸ªæäº¤çŠ¶æ€ï¼Œä½œç”¨æ˜¯ä¿è¯å¯¹ Vuex ä¸­ state çš„ä¿®æ”¹åªèƒ½åœ¨ mutation çš„å›è°ƒå‡½æ•°ä¸­ï¼Œè€Œä¸èƒ½åœ¨å¤–éƒ¨éšæ„ä¿®æ”¹ stateã€‚<br><code>this._actions</code> ç”¨æ¥å­˜å‚¨ç”¨æˆ·å®šä¹‰çš„æ‰€æœ‰çš„ actionsã€‚<br><code>this._mutations</code> ç”¨æ¥å­˜å‚¨ç”¨æˆ·å®šä¹‰æ‰€æœ‰çš„ mutatinsã€‚<br><code>this._wrappedGetters</code> ç”¨æ¥å­˜å‚¨ç”¨æˆ·å®šä¹‰çš„æ‰€æœ‰ getters ã€‚<br><code>this._runtimeModules</code> ç”¨æ¥å­˜å‚¨æ‰€æœ‰çš„è¿è¡Œæ—¶çš„ modulesã€‚<br><code>this._subscribers</code> ç”¨æ¥å­˜å‚¨æ‰€æœ‰å¯¹ mutation å˜åŒ–çš„è®¢é˜…è€…ã€‚<br><code>this._watcherVM</code> æ˜¯ä¸€ä¸ª Vue å¯¹è±¡çš„å®ä¾‹ï¼Œä¸»è¦æ˜¯åˆ©ç”¨ Vue å®ä¾‹æ–¹æ³• $watch æ¥è§‚æµ‹å˜åŒ–çš„ã€‚</p>
<p>ç»§ç»­å¾€ä¸‹çœ‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// bind commit and dispatch to self</span></div><div class="line"><span class="keyword">const</span> store = <span class="keyword">this</span></div><div class="line"><span class="keyword">const</span> &#123; dispatch, commit &#125; = <span class="keyword">this</span></div><div class="line"><span class="keyword">this</span>.dispatch = <span class="function"><span class="keyword">function</span> <span class="title">boundDispatch</span> (<span class="params">type, payload</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> dispatch.call(store, type, payload)</div><div class="line">&#125;</div><div class="line"><span class="keyword">this</span>.commit = <span class="function"><span class="keyword">function</span> <span class="title">boundCommit</span> (<span class="params">type, payload, options</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> commit.call(store, type, payload, options)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// strict mode</span></div><div class="line"><span class="keyword">this</span>.strict = strict</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„ä»£ç ä¹Ÿä¸éš¾ç†è§£ï¼ŒæŠŠ Store ç±»çš„ dispatch å’Œ commit çš„æ–¹æ³•çš„ this æŒ‡é’ˆæŒ‡å‘å½“å‰ store çš„å®ä¾‹ä¸Šï¼Œdispatch å’Œ commit çš„å®ç°æˆ‘ä»¬ç¨åä¼šåˆ†æã€‚this.strict è¡¨ç¤ºæ˜¯å¦å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè§‚æµ‹æ‰€æœ‰çš„ state çš„å˜åŒ–ï¼Œå»ºè®®åœ¨å¼€å‘ç¯å¢ƒæ—¶å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œçº¿ä¸Šç¯å¢ƒè¦å…³é—­ä¸¥æ ¼æ¨¡å¼ï¼Œå¦åˆ™ä¼šæœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ã€‚</p>
<h3 id="Vuex-çš„åˆå§‹åŒ–æ ¸å¿ƒ"><a href="#Vuex-çš„åˆå§‹åŒ–æ ¸å¿ƒ" class="headerlink" title="Vuex çš„åˆå§‹åŒ–æ ¸å¿ƒ"></a>Vuex çš„åˆå§‹åŒ–æ ¸å¿ƒ</h3><h4 id="installModule"><a href="#installModule" class="headerlink" title="installModule"></a>installModule</h4><p>æˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// init root module.</span></div><div class="line"><span class="comment">// this also recursively registers all sub-modules</span></div><div class="line"><span class="comment">// and collects all module getters inside this._wrappedGetters</span></div><div class="line">installModule(<span class="keyword">this</span>, state, [], options)</div><div class="line"></div><div class="line"><span class="comment">// initialize the store vm, which is responsible for the reactivity</span></div><div class="line"><span class="comment">// (also registers _wrappedGetters as computed properties)</span></div><div class="line">resetStoreVM(<span class="keyword">this</span>, state)</div><div class="line"></div><div class="line"><span class="comment">// apply plugins</span></div><div class="line">plugins.concat(devtoolPlugin).forEach(<span class="function"><span class="params">plugin</span> =&gt;</span> plugin(<span class="keyword">this</span>))</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ˜¯ Vuex çš„åˆå§‹åŒ–çš„æ ¸å¿ƒï¼Œå…¶ä¸­ï¼ŒinstallModule æ–¹æ³•æ˜¯æŠŠæˆ‘ä»¬é€šè¿‡ options ä¼ å…¥çš„å„ç§å±æ€§æ¨¡å—æ³¨å†Œå’Œå®‰è£…ï¼›resetStoreVM æ–¹æ³•æ˜¯åˆå§‹åŒ– store._vmï¼Œè§‚æµ‹ state å’Œ getters çš„å˜åŒ–ï¼›æœ€åæ˜¯åº”ç”¨ä¼ å…¥çš„æ’ä»¶ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ installModule çš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">installModule</span> (<span class="params">store, rootState, path, module, hot</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> isRoot = !path.length</div><div class="line">  <span class="keyword">const</span> &#123;</div><div class="line">    state,</div><div class="line">    actions,</div><div class="line">    mutations,</div><div class="line">    getters,</div><div class="line">    modules</div><div class="line">  &#125; = <span class="built_in">module</span></div><div class="line"></div><div class="line">  <span class="comment">// set state</span></div><div class="line">  <span class="keyword">if</span> (!isRoot &amp;&amp; !hot) &#123;</div><div class="line">    <span class="keyword">const</span> parentState = getNestedState(rootState, path.slice(<span class="number">0</span>, <span class="number">-1</span>))</div><div class="line">    <span class="keyword">const</span> moduleName = path[path.length - <span class="number">1</span>]</div><div class="line">    store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      Vue.set(parentState, moduleName, state || &#123;&#125;)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (mutations) &#123;</div><div class="line">    <span class="built_in">Object</span>.keys(mutations).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">      registerMutation(store, key, mutations[key], path)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (actions) &#123;</div><div class="line">    <span class="built_in">Object</span>.keys(actions).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">      registerAction(store, key, actions[key], path)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (getters) &#123;</div><div class="line">    wrapGetters(store, getters, path)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (modules) &#123;</div><div class="line">    <span class="built_in">Object</span>.keys(modules).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">      installModule(store, rootState, path.concat(key), modules[key], hot)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>installModule å‡½æ•°å¯æ¥æ”¶5ä¸ªå‚æ•°ï¼Œstoreã€rootStateã€pathã€moduleã€hotï¼Œstore è¡¨ç¤ºå½“å‰ Store å®ä¾‹ï¼ŒrootState è¡¨ç¤ºæ ¹ stateï¼Œpath è¡¨ç¤ºå½“å‰åµŒå¥—æ¨¡å—çš„è·¯å¾„æ•°ç»„ï¼Œmodule è¡¨ç¤ºå½“å‰å®‰è£…çš„æ¨¡å—ï¼Œhot å½“åŠ¨æ€æ”¹å˜ modules æˆ–è€…çƒ­æ›´æ–°çš„æ—¶å€™ä¸º trueã€‚</p>
<p>å…ˆæ¥çœ‹è¿™éƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> isRoot = !path.length</div><div class="line"><span class="keyword">const</span> &#123;</div><div class="line">  state,</div><div class="line">  actions,</div><div class="line">  mutations,</div><div class="line">  getters,</div><div class="line">  modules</div><div class="line">&#125; = <span class="built_in">module</span></div></pre></td></tr></table></figure>
<p>ä»£ç é¦–å…ˆé€šè¿‡ path æ•°ç»„çš„é•¿åº¦åˆ¤æ–­æ˜¯å¦ä¸ºæ ¹ã€‚æˆ‘ä»¬åœ¨æ„é€ å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ˜¯ <code>installModule(this, state, [], options)</code>ï¼Œæ‰€ä»¥è¿™é‡Œ isRoot ä¸º trueã€‚module ä¸ºä¼ å…¥çš„ optionsï¼Œæˆ‘ä»¬æ‹¿åˆ°äº† module ä¸‹çš„ stateã€actionsã€mutationsã€getters ä»¥åŠåµŒå¥—çš„ modulesã€‚</p>
<p>æ¥ç€çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// set state</span></div><div class="line"><span class="keyword">if</span> (!isRoot &amp;&amp; !hot) &#123;</div><div class="line">  <span class="keyword">const</span> parentState = getNestedState(rootState, path.slice(<span class="number">0</span>, <span class="number">-1</span>))</div><div class="line">  <span class="keyword">const</span> moduleName = path[path.length - <span class="number">1</span>]</div><div class="line">  store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    Vue.set(parentState, moduleName, state || &#123;&#125;)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œåˆ¤æ–­å½“ä¸ä¸ºæ ¹ä¸”éçƒ­æ›´æ–°çš„æƒ…å†µï¼Œç„¶åè®¾ç½®çº§è”çŠ¶æ€ï¼Œè¿™é‡Œä¹ä¸€çœ‹ä¸å¥½ç†è§£ï¼Œæˆ‘ä»¬å…ˆæ”¾ä¸€æ”¾ï¼Œç¨åæ¥å›é¡¾ã€‚</p>
<p>å†å¾€ä¸‹çœ‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (mutations) &#123;</div><div class="line">  <span class="built_in">Object</span>.keys(mutations).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">    registerMutation(store, key, mutations[key], path)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (actions) &#123;</div><div class="line">  <span class="built_in">Object</span>.keys(actions).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">    registerAction(store, key, actions[key], path)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (getters) &#123;</div><div class="line">  wrapGetters(store, getters, path)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œåˆ†åˆ«æ˜¯å¯¹ mutationsã€actionsã€getters è¿›è¡Œæ³¨å†Œï¼Œå¦‚æœæˆ‘ä»¬å®ä¾‹åŒ– Store çš„æ—¶å€™é€šè¿‡ options ä¼ å…¥è¿™äº›å¯¹è±¡ï¼Œé‚£ä¹ˆä¼šåˆ†åˆ«è¿›è¡Œæ³¨å†Œï¼Œæˆ‘ç¨åå†å»ä»‹ç»æ³¨å†Œçš„å…·ä½“å®ç°ã€‚é‚£ä¹ˆåˆ°è¿™ï¼Œå¦‚æœ Vuex æ²¡æœ‰ module ï¼Œè¿™ä¸ª installModule æ–¹æ³•å¯ä»¥è¯´å·²ç»åšå®Œäº†ã€‚ä½†æ˜¯ Vuex å·§å¦™äº†è®¾è®¡äº† module è¿™ä¸ªæ¦‚å¿µï¼Œå› ä¸º Vuex æœ¬èº«æ˜¯å•ä¸€çŠ¶æ€æ ‘ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€éƒ½åŒ…å«åœ¨ä¸€ä¸ªå¤§å¯¹è±¡å†…ï¼Œéšç€æˆ‘ä»¬åº”ç”¨è§„æ¨¡çš„ä¸æ–­å¢é•¿ï¼Œè¿™ä¸ª Store å˜å¾—éå¸¸è‡ƒè‚¿ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVuex å…è®¸æˆ‘ä»¬æŠŠ store åˆ† moduleï¼ˆæ¨¡å—ï¼‰ã€‚æ¯ä¸€ä¸ªæ¨¡å—åŒ…å«å„è‡ªçš„ stateã€mutationsã€actions å’Œ gettersï¼Œç”šè‡³æ˜¯åµŒå¥—æ¨¡å—ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥è¿˜æœ‰ä¸€è¡Œä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (modules) &#123;</div><div class="line">  <span class="built_in">Object</span>.keys(modules).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">    installModule(store, rootState, path.concat(key), modules[key], hot)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œé€šè¿‡éå† modulesï¼Œé€’å½’è°ƒç”¨ installModule å»å®‰è£…å­æ¨¡å—ã€‚è¿™é‡Œä¼ å…¥äº† storeã€rootStateã€path.concat(key)ã€å’Œ modules[key]ï¼Œå’Œåˆšæ‰ä¸åŒçš„æ˜¯ï¼Œpath ä¸ä¸ºç©ºï¼Œmodule å¯¹åº”ä¸ºå­æ¨¡å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å›åˆ°åˆšæ‰é‚£æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// set state</span></div><div class="line"><span class="keyword">if</span> (!isRoot &amp;&amp; !hot) &#123;</div><div class="line">  <span class="keyword">const</span> parentState = getNestedState(rootState, path.slice(<span class="number">0</span>, <span class="number">-1</span>))</div><div class="line">  <span class="keyword">const</span> moduleName = path[path.length - <span class="number">1</span>]</div><div class="line">  store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    Vue.set(parentState, moduleName, state || &#123;&#125;)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“é€’å½’åˆå§‹åŒ–å­æ¨¡å—çš„æ—¶å€™ï¼ŒisRoot ä¸º falseï¼Œæ³¨æ„è¿™é‡Œæœ‰ä¸ªæ–¹æ³•<code>getNestedState(rootState, path)</code>ï¼Œæ¥çœ‹ä¸€ä¸‹ getNestedState å‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNestedState</span> (<span class="params">state, path</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> path.length</div><div class="line">    ? path.reduce(<span class="function">(<span class="params">state, key</span>) =&gt;</span> state[key], state)</div><div class="line">    : state</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯æ ¹æ® path æŸ¥æ‰¾ state ä¸Šçš„åµŒå¥— stateã€‚åœ¨è¿™é‡Œå°±æ˜¯ä¼ å…¥ rootState å’Œ pathï¼Œè®¡ç®—å‡ºå½“å‰æ¨¡å—çš„çˆ¶æ¨¡å—çš„ stateï¼Œç”±äºæ¨¡å—çš„ path æ˜¯æ ¹æ®æ¨¡å—çš„åç§° concat è¿æ¥çš„ï¼Œæ‰€ä»¥ path çš„æœ€åä¸€ä¸ªå…ƒç´ å°±æ˜¯å½“å‰æ¨¡å—çš„æ¨¡å—åï¼Œæœ€åè°ƒç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  Vue.set(parentState, moduleName, state || &#123;&#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>æŠŠå½“å‰æ¨¡å—çš„ state æ·»åŠ åˆ° parentState ä¸­ã€‚<br>è¿™é‡Œæ³¨æ„ä¸€ä¸‹æˆ‘ä»¬ç”¨äº† store._withCommit æ–¹æ³•ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">_withCommit (fn) &#123;</div><div class="line">  <span class="keyword">const</span> committing = <span class="keyword">this</span>._committing</div><div class="line">  <span class="keyword">this</span>._committing = <span class="literal">true</span></div><div class="line">  fn()</div><div class="line">  <span class="keyword">this</span>._committing = committing</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äºæˆ‘ä»¬æ˜¯åœ¨ä¿®æ”¹ stateï¼ŒVuex ä¸­æ‰€æœ‰å¯¹ state çš„ä¿®æ”¹éƒ½ä¼šç”¨ <code>_withCommit</code>å‡½æ•°åŒ…è£…ï¼Œä¿è¯åœ¨åŒæ­¥ä¿®æ”¹ state çš„è¿‡ç¨‹ä¸­ <code>this._committing</code> çš„å€¼å§‹ç»ˆä¸ºtrueã€‚è¿™æ ·å½“æˆ‘ä»¬è§‚æµ‹ state çš„å˜åŒ–æ—¶ï¼Œå¦‚æœ this._committing çš„å€¼ä¸ä¸º trueï¼Œåˆ™èƒ½æ£€æŸ¥åˆ°è¿™ä¸ªçŠ¶æ€ä¿®æ”¹æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæœ‰äº›åŒå­¦å¯èƒ½ä¼šæœ‰ç‚¹å›°æƒ‘ï¼Œä¸¾ä¸ªä¾‹å­æ¥ç›´è§‚æ„Ÿå—ä¸€ä¸‹ï¼Œä»¥ Vuex æºç ä¸­çš„ example/shopping-cart ä¸ºä¾‹ï¼Œæ‰“å¼€ store/index.jsï¼Œæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  actions,</div><div class="line">  getters,</div><div class="line">  <span class="attr">modules</span>: &#123;</div><div class="line">    cart,</div><div class="line">    products</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">strict</span>: debug,</div><div class="line">  <span class="attr">plugins</span>: debug ? [createLogger()] : []</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªå­ moduleï¼Œcart å’Œ productsï¼Œæˆ‘ä»¬æ‰“å¼€ store/modules/cart.jsï¼Œçœ‹ä¸€ä¸‹ cart æ¨¡å—ä¸­çš„ state å®šä¹‰ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> state = &#123;</div><div class="line">  <span class="attr">added</span>: [],</div><div class="line">  <span class="attr">checkoutStatus</span>: <span class="literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬è¿è¡Œè¿™ä¸ªé¡¹ç›®ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåˆ©ç”¨ Vue çš„è°ƒè¯•å·¥å…·æ¥çœ‹ä¸€ä¸‹ Vuex ä¸­çš„çŠ¶æ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><a href="https://camo.githubusercontent.com/2bd2ed9ea9f74792db15c5980666275330ab64a2/687474703a2f2f7374617469632e67616c696c656f2e7869616f6a756b656a692e636f6d2f7374617469632f746d732f736869656c642f767565782d746573742e706e67" target="_blank" rel="external"><img src="https://camo.githubusercontent.com/2bd2ed9ea9f74792db15c5980666275330ab64a2/687474703a2f2f7374617469632e67616c696c656f2e7869616f6a756b656a692e636f6d2f7374617469632f746d732f736869656c642f767565782d746573742e706e67" alt="enter image description here"></a></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ rootState ä¸‹ï¼Œåˆ†åˆ«æœ‰ cart å’Œ products 2ä¸ªå±æ€§ï¼Œkey æ ¹æ®æ¨¡å—åç§°è€Œæ¥ï¼Œvalue å°±æ˜¯åœ¨æ¯ä¸ªæ¨¡å—æ–‡ä»¶ä¸­å®šä¹‰çš„ stateï¼Œè¿™å°±æŠŠæ¨¡å— state æŒ‚è½½åˆ° rootState ä¸Šäº†ã€‚</p>
<p>æˆ‘ä»¬äº†è§£å®ŒåµŒå¥—æ¨¡å— state æ˜¯æ€ä¹ˆä¸€å›äº‹åï¼Œæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹ installModule è¿‡ç¨‹ä¸­çš„å…¶å®ƒ 3 ä¸ªé‡è¦æ–¹æ³•ï¼šregisterMutationã€registerAction å’Œ wrapGettersã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ 3 ä¸ªæ–¹æ³•åˆ†åˆ«å¤„ç† mutationsã€actions å’Œ gettersã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ registerMutation çš„å®šä¹‰ï¼š</p>
<h4 id="registerMutation"><a href="#registerMutation" class="headerlink" title="registerMutation"></a>registerMutation</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">registerMutation</span> (<span class="params">store, type, handler, path = []</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> entry = store._mutations[type] || (store._mutations[type] = [])</div><div class="line">  entry.push(<span class="function"><span class="keyword">function</span> <span class="title">wrappedMutationHandler</span> (<span class="params">payload</span>) </span>&#123;</div><div class="line">    handler(getNestedState(store.state, path), payload)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>registerMutation æ˜¯å¯¹ store çš„ mutation çš„åˆå§‹åŒ–ï¼Œå®ƒæ¥å— 4 ä¸ªå‚æ•°ï¼Œstoreä¸ºå½“å‰ Store å®ä¾‹ï¼Œtypeä¸º mutation çš„ keyï¼Œhandler ä¸º mutation æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œpath ä¸ºå½“å‰æ¨¡å—çš„è·¯å¾„ã€‚mutation çš„ä½œç”¨å°±æ˜¯åŒæ­¥ä¿®æ”¹å½“å‰æ¨¡å—çš„ state ï¼Œå‡½æ•°é¦–å…ˆé€šè¿‡ type æ‹¿åˆ°å¯¹åº”çš„ mutation å¯¹è±¡æ•°ç»„ï¼Œ ç„¶åæŠŠä¸€ä¸ª mutation çš„åŒ…è£…å‡½æ•° push åˆ°è¿™ä¸ªæ•°ç»„ä¸­ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•° payloadï¼Œè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬åœ¨å®šä¹‰ mutation çš„æ—¶å€™æ¥æ”¶çš„é¢å¤–å‚æ•°ã€‚è¿™ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šè°ƒç”¨ mutation çš„å›è°ƒå‡½æ•°ï¼Œå¹¶é€šè¿‡ getNestedState(store.state, path) æ–¹æ³•å¾—åˆ°å½“å‰æ¨¡å—çš„ stateï¼Œå’Œ playload ä¸€èµ·ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line">mutations: &#123;</div><div class="line">  increment (state, n) &#123;</div><div class="line">    state.count += n</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª mutationï¼Œé€šè¿‡åˆšæ‰çš„ registerMutation æ–¹æ³•ï¼Œæˆ‘ä»¬æ³¨å†Œäº†è¿™ä¸ª mutationï¼Œè¿™é‡Œçš„ state å¯¹åº”çš„å°±æ˜¯å½“å‰æ¨¡å—çš„ stateï¼Œn å°±æ˜¯é¢å¤–å‚æ•° payloadï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šä»æºç åˆ†æçš„è§’åº¦æ¥ä»‹ç»è¿™ä¸ª mutation çš„å›è°ƒæ˜¯ä½•æ—¶è¢«è°ƒç”¨çš„ï¼Œå‚æ•°æ˜¯å¦‚ä½•ä¼ é€’çš„ã€‚</p>
<p>æˆ‘ä»¬æœ‰å¿…è¦çŸ¥é“ mutation çš„å›è°ƒå‡½æ•°çš„è°ƒç”¨æ—¶æœºï¼Œåœ¨ Vuex ä¸­ï¼Œmutation çš„è°ƒç”¨æ˜¯é€šè¿‡ store å®ä¾‹çš„ API æ¥å£ commit æ¥è°ƒç”¨çš„ï¼Œæ¥çœ‹ä¸€ä¸‹ commit å‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">commit (type, payload, options) &#123;</div><div class="line">  <span class="comment">// check object-style commit</span></div><div class="line">  <span class="keyword">if</span> (isObject(type) &amp;&amp; type.type) &#123;</div><div class="line">    options = payload</div><div class="line">    payload = type</div><div class="line">    type = type.type</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">const</span> mutation = &#123; type, payload &#125;</div><div class="line">  <span class="keyword">const</span> entry = <span class="keyword">this</span>._mutations[type]</div><div class="line">  <span class="keyword">if</span> (!entry) &#123;</div><div class="line">    <span class="built_in">console</span>.error(<span class="string">`[vuex] unknown mutation type: <span class="subst">$&#123;type&#125;</span>`</span>)</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">this</span>._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    entry.forEach(<span class="function"><span class="keyword">function</span> <span class="title">commitIterator</span> (<span class="params">handler</span>) </span>&#123;</div><div class="line">      handler(payload)</div><div class="line">    &#125;)</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">if</span> (!options || !options.silent) &#123;</div><div class="line">    <span class="keyword">this</span>._subscribers.forEach(<span class="function"><span class="params">sub</span> =&gt;</span> sub(mutation, <span class="keyword">this</span>.state))</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>commit æ”¯æŒ 3 ä¸ªå‚æ•°ï¼Œtype è¡¨ç¤º mutation çš„ç±»å‹ï¼Œpayload è¡¨ç¤ºé¢å¤–çš„å‚æ•°ï¼Œoptions è¡¨ç¤ºä¸€äº›é…ç½®ï¼Œæ¯”å¦‚ silent ç­‰ï¼Œç¨åä¼šç”¨åˆ°ã€‚commit å‡½æ•°é¦–å…ˆå¯¹ type çš„ç±»å‹åšäº†åˆ¤æ–­ï¼Œå¤„ç†äº† type ä¸º object çš„æƒ…å†µï¼Œæ¥ç€æ ¹æ® type å»æŸ¥æ‰¾å¯¹åº”çš„ mutationï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™è¾“å‡ºä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œå¦åˆ™éå†è¿™ä¸ª type å¯¹åº”çš„ mutation å¯¹è±¡æ•°ç»„ï¼Œæ‰§è¡Œ handler(payload) æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¹‹å‰å®šä¹‰çš„ wrappedMutationHandler(handler)ï¼Œæ‰§è¡Œå®ƒå°±ç›¸å½“äºæ‰§è¡Œäº† registerMutation æ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠå½“å‰æ¨¡å—çš„ state å’Œ é¢å¤–å‚æ•° payload ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚æ³¨æ„è¿™é‡Œæˆ‘ä»¬ä¾ç„¶ä½¿ç”¨äº† <code>this._withCommit</code> çš„æ–¹æ³•æäº¤ mutationã€‚commit å‡½æ•°çš„æœ€åï¼Œåˆ¤æ–­å¦‚æœä¸æ˜¯é™é»˜æ¨¡å¼ï¼Œåˆ™éå† <code>this._subscribers</code>ï¼Œè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠ mutation å’Œå½“å‰çš„æ ¹ state ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚é‚£ä¹ˆè¿™ä¸ª <code>this._subscribers</code> æ˜¯ä»€ä¹ˆå‘¢ï¼ŸåŸæ¥ Vuex çš„ Store å®ä¾‹æä¾›äº† subscribe API æ¥å£ï¼Œå®ƒçš„ä½œç”¨æ˜¯è®¢é˜…ï¼ˆæ³¨å†Œç›‘å¬ï¼‰ store çš„ mutationã€‚å…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">subscribe (fn) &#123;</div><div class="line">  <span class="keyword">const</span> subs = <span class="keyword">this</span>._subscribers</div><div class="line">  <span class="keyword">if</span> (subs.indexOf(fn) &lt; <span class="number">0</span>) &#123;</div><div class="line">    subs.push(fn)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> i = subs.indexOf(fn)</div><div class="line">    <span class="keyword">if</span> (i &gt; <span class="number">-1</span>) &#123;</div><div class="line">      subs.splice(i, <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>subscribe æ–¹æ³•å¾ˆç®€å•ï¼Œä»–æ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¼šæŠŠè¿™ä¸ªå›è°ƒå‡½æ•°ä¿å­˜åˆ° <code>this._subscribers</code> ä¸Šï¼Œå¹¶è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªè¿”å›çš„å‡½æ•°ï¼Œå°±å¯ä»¥è§£é™¤å½“å‰å‡½æ•°å¯¹ store çš„ mutation çš„ç›‘å¬ã€‚å…¶å®ï¼ŒVuex çš„å†…ç½® logger æ’ä»¶å°±æ˜¯åŸºäº subscribe æ¥å£å®ç°å¯¹ store çš„ muationçš„ç›‘å¬ï¼Œç¨åæˆ‘ä»¬ä¼šè¯¦ç»†ä»‹ç»è¿™ä¸ªæ’ä»¶ã€‚</p>
<h4 id="registerAction"><a href="#registerAction" class="headerlink" title="registerAction"></a>registerAction</h4><p>åœ¨äº†è§£å®Œ registerMutationï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ registerAction çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">registerAction</span> (<span class="params">store, type, handler, path = []</span>) </span>&#123;</div><div class="line"><span class="keyword">const</span> entry = store._actions[type] || (store._actions[type] = [])</div><div class="line">  <span class="keyword">const</span> &#123; dispatch, commit &#125; = store</div><div class="line">  entry.push(<span class="function"><span class="keyword">function</span> <span class="title">wrappedActionHandler</span> (<span class="params">payload, cb</span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> res = handler(&#123;</div><div class="line">      dispatch,</div><div class="line">      commit,</div><div class="line">      <span class="attr">getters</span>: store.getters,</div><div class="line">      <span class="attr">state</span>: getNestedState(store.state, path),</div><div class="line">      <span class="attr">rootState</span>: store.state</div><div class="line">    &#125;, payload, cb)</div><div class="line">    <span class="keyword">if</span> (!isPromise(res)) &#123;</div><div class="line">      res = <span class="built_in">Promise</span>.resolve(res)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (store._devtoolHook) &#123;</div><div class="line">      <span class="keyword">return</span> res.catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</div><div class="line">        store._devtoolHook.emit(<span class="string">'vuex:error'</span>, err)</div><div class="line">        <span class="keyword">throw</span> err</div><div class="line">      &#125;)</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">return</span> res</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>registerAction æ˜¯å¯¹ store çš„ action çš„åˆå§‹åŒ–ï¼Œå®ƒå’Œ registerMutation çš„å‚æ•°ä¸€è‡´ï¼Œå’Œ mutation ä¸åŒä¸€ç‚¹ï¼Œmutation æ˜¯åŒæ­¥ä¿®æ”¹å½“å‰æ¨¡å—çš„ stateï¼Œè€Œ action æ˜¯å¯ä»¥å¼‚æ­¥å»ä¿®æ”¹ stateï¼Œè¿™é‡Œä¸è¦è¯¯ä¼šï¼Œåœ¨ action çš„å›è°ƒä¸­å¹¶ä¸ä¼šç›´æ¥ä¿®æ”¹ state ï¼Œä»ç„¶æ˜¯é€šè¿‡æäº¤ä¸€ä¸ª mutation å»ä¿®æ”¹ stateï¼ˆåœ¨ Vuex ä¸­ï¼Œmutation æ˜¯ä¿®æ”¹ state çš„å”¯ä¸€é€”å¾„ï¼‰ã€‚é‚£æˆ‘ä»¬å°±æ¥çœ‹çœ‹ action æ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ã€‚</p>
<p>å‡½æ•°é¦–å…ˆä¹Ÿæ˜¯é€šè¿‡ type æ‹¿åˆ°å¯¹åº” action çš„å¯¹è±¡æ•°ç»„ï¼Œç„¶åæŠŠä¸€ä¸ª action çš„åŒ…è£…å‡½æ•° push åˆ°è¿™ä¸ªæ•°ç»„ä¸­ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ 2 ä¸ªå‚æ•°ï¼Œpayload è¡¨ç¤ºé¢å¤–å‚æ•° ï¼Œcb è¡¨ç¤ºå›è°ƒå‡½æ•°ï¼ˆå®é™…ä¸Šæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨å®ƒï¼‰ã€‚è¿™ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ä¼šè°ƒç”¨ action çš„å›è°ƒå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ª context å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…æ‹¬äº† store çš„ commit å’Œ dispatch æ–¹æ³•ã€getterã€å½“å‰æ¨¡å—çš„ state å’Œ rootState ç­‰ç­‰ã€‚æ¥ç€å¯¹è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼åšåˆ¤æ–­ï¼Œå¦‚æœä¸æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œåˆ™è°ƒç”¨ <code>Promise.resolveï¼ˆresï¼‰</code> ç»™res åŒ…è£…æˆäº†ä¸€ä¸ª Promise å¯¹è±¡ã€‚è¿™é‡Œä¹Ÿå°±è§£é‡Šäº†ä¸ºä½• Vuex çš„æºç ä¾èµ– Promiseï¼Œè¿™é‡Œå¯¹ Promise çš„åˆ¤æ–­ä¹Ÿå’Œç®€å•ï¼Œå‚è€ƒä»£ç  src/util.jsï¼Œå¯¹ isPromise çš„åˆ¤æ–­å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">isPromise</span> (<span class="params">val</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> val &amp;&amp; <span class="keyword">typeof</span> val.then === <span class="string">'function'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯ç®€å•çš„æ£€æŸ¥å¯¹è±¡çš„ then æ–¹æ³•ï¼Œå¦‚æœåŒ…å«è¯´æ˜å°±æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ã€‚</p>
<p>æ¥ç€åˆ¤æ–­ <code>store._devtoolHook</code>ï¼Œè¿™ä¸ªåªæœ‰å½“ç”¨åˆ° Vuex devtools å¼€å¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰èƒ½æ•è· promise çš„è¿‡ç¨‹ä¸­çš„ ã€‚ action çš„åŒ…è£…å‡½æ•°æœ€åè¿”å› res ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªåœ°åœ°é“é“çš„ Promise å¯¹è±¡ã€‚æ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">actions: &#123;</div><div class="line">  checkout (&#123; commit, state &#125;, payload) &#123;</div><div class="line">    <span class="comment">// æŠŠå½“å‰è´­ç‰©è½¦çš„å•†å“å¤‡ä»½èµ·æ¥</span></div><div class="line">    <span class="keyword">const</span> savedCartItems = [...state.cart.added]</div><div class="line">    <span class="comment">// å‘é€ç»“å¸è¯·æ±‚ï¼Œå¹¶æ„‰å¿«åœ°æ¸…ç©ºè´­ç‰©è½¦</span></div><div class="line">    commit(types.CHECKOUT_REQUEST)</div><div class="line">    <span class="comment">// è´­ç‰© API æ¥æ”¶ä¸€ä¸ªæˆåŠŸå›è°ƒå’Œä¸€ä¸ªå¤±è´¥å›è°ƒ</span></div><div class="line">    shop.buyProducts(</div><div class="line">      products,</div><div class="line">      <span class="comment">// æˆåŠŸæ“ä½œ</span></div><div class="line">      () =&gt; commit(types.CHECKOUT_SUCCESS),</div><div class="line">      <span class="comment">// å¤±è´¥æ“ä½œ</span></div><div class="line">      () =&gt; commit(types.CHECKOUT_FAILURE, savedCartItems)</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª actionï¼Œé€šè¿‡åˆšæ‰çš„ registerAction æ–¹æ³•ï¼Œæˆ‘ä»¬æ³¨å†Œäº†è¿™ä¸ª actionï¼Œè¿™é‡Œçš„ commit å°±æ˜¯ store çš„ API æ¥å£ï¼Œå¯ä»¥é€šè¿‡å®ƒåœ¨ action é‡Œæäº¤ä¸€ä¸ª mutationã€‚state å¯¹åº”çš„å°±æ˜¯å½“å‰æ¨¡å—çš„ stateï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ª action é‡Œå³å¯ä»¥åŒæ­¥æäº¤ mutationï¼Œä¹Ÿå¯ä»¥å¼‚æ­¥æäº¤ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šä»æºç åˆ†æçš„è§’åº¦æ¥ä»‹ç»è¿™ä¸ª action çš„å›è°ƒæ˜¯ä½•æ—¶è¢«è°ƒç”¨çš„ï¼Œå‚æ•°æ˜¯å¦‚ä½•ä¼ é€’çš„ã€‚</p>
<p>æˆ‘ä»¬æœ‰å¿…è¦çŸ¥é“ action çš„å›è°ƒå‡½æ•°çš„è°ƒç”¨æ—¶æœºï¼Œåœ¨ Vuex ä¸­ï¼Œaction çš„è°ƒç”¨æ˜¯é€šè¿‡ store å®ä¾‹çš„ API æ¥å£ dispatch æ¥è°ƒç”¨çš„ï¼Œæ¥çœ‹ä¸€ä¸‹ dispatch å‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">dispatch (type, payload) &#123;</div><div class="line"> <span class="comment">// check object-style dispatch</span></div><div class="line">  <span class="keyword">if</span> (isObject(type) &amp;&amp; type.type) &#123;</div><div class="line">    payload = type</div><div class="line">    type = type.type</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">const</span> entry = <span class="keyword">this</span>._actions[type]</div><div class="line">  <span class="keyword">if</span> (!entry) &#123;</div><div class="line">    <span class="built_in">console</span>.error(<span class="string">`[vuex] unknown action type: <span class="subst">$&#123;type&#125;</span>`</span>)</div><div class="line">    <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> entry.length &gt; <span class="number">1</span></div><div class="line">    ? <span class="built_in">Promise</span>.all(entry.map(<span class="function"><span class="params">handler</span> =&gt;</span> handler(payload)))</div><div class="line">    : entry[<span class="number">0</span>](payload)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>dispatch æ”¯æŒ2ä¸ªå‚æ•°ï¼Œtype è¡¨ç¤º action çš„ç±»å‹ï¼Œpayload è¡¨ç¤ºé¢å¤–çš„å‚æ•°ã€‚å‰é¢å‡ è¡Œä»£ç å’Œ commit æ¥å£éå¸¸ç±»ä¼¼ï¼Œéƒ½æ˜¯æ‰¾åˆ°å¯¹åº” type ä¸‹çš„ action å¯¹è±¡æ•°ç»„ï¼Œå”¯ä¸€å’Œ commit ä¸åŒçš„åœ°æ–¹æ˜¯æœ€åéƒ¨åˆ†ï¼Œå®ƒå¯¹ action çš„å¯¹è±¡æ•°ç»„é•¿åº¦åšåˆ¤æ–­ï¼Œå¦‚æœé•¿åº¦ä¸º 1 åˆ™ç›´æ¥è°ƒç”¨ <code>entry[0](payload)</code>ï¼Œ è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¹‹å‰å®šä¹‰çš„ wrappedActionHandler(payload, cb)ï¼Œæ‰§è¡Œå®ƒå°±ç›¸å½“äºæ‰§è¡Œäº† registerAction æ³¨å†Œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠå½“å‰æ¨¡å—çš„ context å’Œ é¢å¤–å‚æ•° payload ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ action çš„å›è°ƒå‡½æ•°é‡Œï¼Œå¯ä»¥æ‹¿åˆ°å½“å‰æ¨¡å—çš„ä¸Šä¸‹æ–‡åŒ…æ‹¬ store çš„ commit å’Œ dispatch æ–¹æ³•ã€getterã€å½“å‰æ¨¡å—çš„ state å’Œ rootStateï¼Œå¯è§ action æ˜¯éå¸¸çµæ´»çš„ã€‚</p>
<h4 id="wrapGetters"><a href="#wrapGetters" class="headerlink" title="wrapGetters"></a>wrapGetters</h4><p>äº†è§£å®Œ registerAction åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ wrapGettersçš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrapGetters</span> (<span class="params">store, moduleGetters, modulePath</span>) </span>&#123;</div><div class="line">  <span class="built_in">Object</span>.keys(moduleGetters).forEach(<span class="function"><span class="params">getterKey</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> rawGetter = moduleGetters[getterKey]</div><div class="line">    <span class="keyword">if</span> (store._wrappedGetters[getterKey]) &#123;</div><div class="line">      <span class="built_in">console</span>.error(<span class="string">`[vuex] duplicate getter key: <span class="subst">$&#123;getterKey&#125;</span>`</span>)</div><div class="line">      <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    store._wrappedGetters[getterKey] = <span class="function"><span class="keyword">function</span> <span class="title">wrappedGetter</span> (<span class="params">store</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> rawGetter(</div><div class="line">        getNestedState(store.state, modulePath), <span class="comment">// local state</span></div><div class="line">        store.getters, <span class="comment">// getters</span></div><div class="line">        store.state <span class="comment">// root state</span></div><div class="line">      )</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>wrapGetters æ˜¯å¯¹ store çš„ getters åˆå§‹åŒ–ï¼Œå®ƒæ¥å— 3ä¸ª å‚æ•°ï¼Œ store è¡¨ç¤ºå½“å‰ Store å®ä¾‹ï¼ŒmoduleGetters è¡¨ç¤ºå½“å‰æ¨¡å—ä¸‹çš„æ‰€æœ‰ getters, modulePath å¯¹åº”æ¨¡å—çš„è·¯å¾„ã€‚ç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°ï¼Œå’Œåˆšæ‰çš„ registerMutation ä»¥åŠ registerAction ä¸åŒï¼Œè¿™é‡Œå¯¹ getters çš„å¾ªç¯éå†æ˜¯æ”¾åœ¨äº†å‡½æ•°ä½“å†…ï¼Œå¹¶ä¸” getters å’Œå®ƒä»¬çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ä¸å…è®¸ getter çš„ key æœ‰é‡å¤ã€‚</p>
<p>è¿™ä¸ªå‡½æ•°åšçš„äº‹æƒ…å°±æ˜¯éå† moduleGettersï¼ŒæŠŠæ¯ä¸€ä¸ª getter åŒ…è£…æˆä¸€ä¸ªæ–¹æ³•ï¼Œæ·»åŠ åˆ° store._wrappedGetters å¯¹è±¡ä¸­ï¼Œæ³¨æ„ getter çš„ key æ˜¯ä¸å…è®¸é‡å¤çš„ã€‚åœ¨è¿™ä¸ªåŒ…è£…çš„æ–¹æ³•é‡Œï¼Œä¼šæ‰§è¡Œ getter çš„å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠå½“å‰æ¨¡å—çš„ stateï¼Œstore çš„ getters å’Œ store çš„ rootState ä½œä¸ºå®ƒå‚æ•°ã€‚æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> cartProducts = <span class="function"><span class="params">state</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> state.cart.added.map(<span class="function">(<span class="params">&#123; id, quantity &#125;</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> product = state.products.all.find(<span class="function"><span class="params">p</span> =&gt;</span> p.id === id)</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">title</span>: product.title,</div><div class="line">      <span class="attr">price</span>: product.price,</div><div class="line">      quantity</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª getterï¼Œé€šè¿‡åˆšæ‰çš„ wrapGetters æ–¹æ³•ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ª getter æ·»åŠ åˆ° <code>store._wrappedGetters</code> å¯¹è±¡é‡Œï¼Œè¿™å’Œå›è°ƒå‡½æ•°çš„å‚æ•° state å¯¹åº”çš„å°±æ˜¯å½“å‰æ¨¡å—çš„ stateï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»æºç çš„è§’åº¦åˆ†æè¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨ï¼Œå‚æ•°æ˜¯å¦‚ä½•ä¼ é€’çš„ã€‚</p>
<p>æˆ‘ä»¬æœ‰å¿…è¦çŸ¥é“ getter çš„å›è°ƒå‡½æ•°çš„è°ƒç”¨æ—¶æœºï¼Œåœ¨ Vuex ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“å½“æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­é€šè¿‡ <code>this.$store.getters.xxxgetters</code> å¯ä»¥è®¿é—®åˆ°å¯¹åº”çš„ getter çš„å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æŠŠå¯¹åº” getter çš„åŒ…è£…å‡½æ•°çš„æ‰§è¡Œç»“æœç»‘å®šåˆ° <code>this.$store</code> ä¸Šã€‚è¿™éƒ¨åˆ†çš„é€»è¾‘å°±åœ¨ resetStoreVM å‡½æ•°é‡Œã€‚æˆ‘ä»¬åœ¨ Store çš„æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨æ‰§è¡Œå®Œ installModule æ–¹æ³•åï¼Œå°±ä¼šæ‰§è¡Œ resetStoreVM æ–¹æ³•ã€‚æ¥çœ‹ä¸€ä¸‹å®ƒçš„å®šä¹‰ï¼š</p>
<h4 id="resetStoreVM"><a href="#resetStoreVM" class="headerlink" title="resetStoreVM"></a>resetStoreVM</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">resetStoreVM</span> (<span class="params">store, state</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> oldVm = store._vm</div><div class="line"></div><div class="line">  <span class="comment">// bind store public getters</span></div><div class="line">  store.getters = &#123;&#125;</div><div class="line">  <span class="keyword">const</span> wrappedGetters = store._wrappedGetters</div><div class="line">  <span class="keyword">const</span> computed = &#123;&#125;</div><div class="line">  <span class="built_in">Object</span>.keys(wrappedGetters).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> fn = wrappedGetters[key]</div><div class="line">    <span class="comment">// use computed to leverage its lazy-caching mechanism</span></div><div class="line">    computed[key] = <span class="function"><span class="params">()</span> =&gt;</span> fn(store)</div><div class="line">    <span class="built_in">Object</span>.defineProperty(store.getters, key, &#123;</div><div class="line">      <span class="attr">get</span>: <span class="function"><span class="params">()</span> =&gt;</span> store._vm[key]</div><div class="line">    &#125;)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="comment">// use a Vue instance to store the state tree</span></div><div class="line">  <span class="comment">// suppress warnings just in case the user has added</span></div><div class="line">  <span class="comment">// some funky global mixins</span></div><div class="line">  <span class="keyword">const</span> silent = Vue.config.silent</div><div class="line">  Vue.config.silent = <span class="literal">true</span></div><div class="line">  store._vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">    <span class="attr">data</span>: &#123; state &#125;,</div><div class="line">    computed</div><div class="line">  &#125;)</div><div class="line">  Vue.config.silent = silent</div><div class="line"></div><div class="line">  <span class="comment">// enable strict mode for new vm</span></div><div class="line">  <span class="keyword">if</span> (store.strict) &#123;</div><div class="line">    enableStrictMode(store)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (oldVm) &#123;</div><div class="line">    <span class="comment">// dispatch changes in all subscribed watchers</span></div><div class="line">    <span class="comment">// to force getter re-evaluation.</span></div><div class="line">    store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      oldVm.state = <span class="literal">null</span></div><div class="line">    &#125;)</div><div class="line">    Vue.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> oldVm.$destroy())</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯é‡ç½®ä¸€ä¸ªç§æœ‰çš„ _vm å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ª Vue çš„å®ä¾‹ã€‚è¿™ä¸ª _vm å¯¹è±¡ä¼šä¿ç•™æˆ‘ä»¬çš„ state æ ‘ï¼Œä»¥åŠç”¨è®¡ç®—å±æ€§çš„æ–¹å¼å­˜å‚¨äº† store çš„ gettersã€‚æ¥å…·ä½“çœ‹çœ‹å®ƒçš„å®ç°è¿‡ç¨‹ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°æ‹†æˆå‡ ä¸ªéƒ¨åˆ†æ¥åˆ†æï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> oldVm = store._vm</div><div class="line"></div><div class="line"> <span class="comment">// bind store public getters</span></div><div class="line"> store.getters = &#123;&#125;</div><div class="line"> <span class="keyword">const</span> wrappedGetters = store._wrappedGetters</div><div class="line"> <span class="keyword">const</span> computed = &#123;&#125;</div><div class="line"> <span class="built_in">Object</span>.keys(wrappedGetters).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">   <span class="keyword">const</span> fn = wrappedGetters[key]</div><div class="line">   <span class="comment">// use computed to leverage its lazy-caching mechanism</span></div><div class="line">   computed[key] = <span class="function"><span class="params">()</span> =&gt;</span> fn(store)</div><div class="line">   <span class="built_in">Object</span>.defineProperty(store.getters, key, &#123;</div><div class="line">     <span class="attr">get</span>: <span class="function"><span class="params">()</span> =&gt;</span> store._vm[key]</div><div class="line">   &#125;)</div><div class="line"> &#125;)</div></pre></td></tr></table></figure>
<p>è¿™éƒ¨åˆ†ç•™äº†ç°æœ‰çš„ store._vm å¯¹è±¡ï¼Œæ¥ç€éå† <code>store._wrappedGetters</code> å¯¹è±¡ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­ï¼Œä¾æ¬¡æ‹¿åˆ°æ¯ä¸ª getter çš„åŒ…è£…å‡½æ•°ï¼Œå¹¶æŠŠè¿™ä¸ªåŒ…è£…å‡½æ•°æ‰§è¡Œçš„ç»“æœç”¨ computed ä¸´æ—¶å˜é‡ä¿å­˜ã€‚æ¥ç€ç”¨ es5 çš„ Object.defineProperty æ–¹æ³•ä¸º store.getters å®šä¹‰äº† get æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­è°ƒç”¨<code>this.$store.getters.xxxgetters</code> è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œä¼šè®¿é—® <code>store._vm[xxxgetters]</code>ã€‚æˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// use a Vue instance to store the state tree</span></div><div class="line"><span class="comment">// suppress warnings just in case the user has added</span></div><div class="line"> <span class="comment">// some funky global mixins</span></div><div class="line"> <span class="keyword">const</span> silent = Vue.config.silent</div><div class="line"> Vue.config.silent = <span class="literal">true</span></div><div class="line"> store._vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">   <span class="attr">data</span>: &#123; state &#125;,</div><div class="line">   computed</div><div class="line"> &#125;)</div><div class="line"> Vue.config.silent = silent</div><div class="line"></div><div class="line"> <span class="comment">// enable strict mode for new vm</span></div><div class="line"> <span class="keyword">if</span> (store.strict) &#123;</div><div class="line">   enableStrictMode(store)</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>è¿™éƒ¨åˆ†çš„ä»£ç é¦–å…ˆå…ˆæ‹¿å…¨å±€ Vue.config.silent çš„é…ç½®ï¼Œç„¶åä¸´æ—¶æŠŠè¿™ä¸ªé…ç½®è®¾æˆ trueï¼Œæ¥ç€å®ä¾‹åŒ–ä¸€ä¸ª Vue çš„å®ä¾‹ï¼ŒæŠŠ store çš„çŠ¶æ€æ ‘ state ä½œä¸º data ä¼ å…¥ï¼ŒæŠŠæˆ‘ä»¬åˆšæ‰çš„ä¸´æ—¶å˜é‡ computed ä½œä¸ºè®¡ç®—å±æ€§ä¼ å…¥ã€‚ç„¶åå†æŠŠä¹‹å‰çš„ silent é…ç½®é‡ç½®ã€‚è®¾ç½® silent ä¸º true çš„ç›®çš„æ˜¯ä¸ºäº†å–æ¶ˆè¿™ä¸ª _vm çš„æ‰€æœ‰æ—¥å¿—å’Œè­¦å‘Šã€‚æŠŠ computed å¯¹è±¡ä½œä¸º _vm çš„ computed å±æ€§ï¼Œè¿™æ ·å°±å®Œæˆäº† getters çš„æ³¨å†Œã€‚å› ä¸ºå½“æˆ‘ä»¬åœ¨ç»„ä»¶ä¸­è®¿é—® <code>this.$store.getters.xxxgetters</code> çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºè®¿é—® <code>store._vm[xxxgetters]</code>ï¼Œä¹Ÿå°±æ˜¯åœ¨è®¿é—® computed[xxxgetters]ï¼Œè¿™æ ·å°±è®¿é—®åˆ°äº† xxxgetters å¯¹åº”çš„å›è°ƒå‡½æ•°äº†ã€‚è¿™æ®µä»£ç æœ€ååˆ¤æ–­ strict å±æ€§å†³å®šæ˜¯å¦å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸¥æ ¼æ¨¡å¼éƒ½å¹²äº†ä»€ä¹ˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">enableStrictMode</span> (<span class="params">store</span>) </span>&#123;</div><div class="line">  store._vm.$watch(<span class="string">'state'</span>, () =&gt; &#123;</div><div class="line">    assert(store._committing, <span class="string">`Do not mutate vuex store state outside mutation handlers.`</span>)</div><div class="line">  &#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span>, <span class="attr">sync</span>: <span class="literal">true</span> &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸¥æ ¼æ¨¡å¼åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œç›‘æµ‹ <code>store._vm.state</code> çš„å˜åŒ–ï¼Œçœ‹çœ‹ state çš„å˜åŒ–æ˜¯å¦é€šè¿‡æ‰§è¡Œ mutation çš„å›è°ƒå‡½æ•°æ”¹å˜ï¼Œå¦‚æœæ˜¯å¤–éƒ¨ç›´æ¥ä¿®æ”¹ stateï¼Œé‚£ä¹ˆ <code>store._committing</code> çš„å€¼ä¸º falseï¼Œè¿™æ ·å°±æŠ›å‡ºä¸€æ¡é”™è¯¯ã€‚å†æ¬¡å¼ºè°ƒä¸€ä¸‹ï¼ŒVuex ä¸­å¯¹ state çš„ä¿®æ”¹åªèƒ½åœ¨ mutation çš„å›è°ƒå‡½æ•°é‡Œã€‚</p>
<p>å›åˆ° resetStoreVM å‡½æ•°ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ€åä¸€éƒ¨åˆ†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (oldVm) &#123;</div><div class="line">  <span class="comment">// dispatch changes in all subscribed watchers</span></div><div class="line">  <span class="comment">// to force getter re-evaluation.</span></div><div class="line">  store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    oldVm.state = <span class="literal">null</span></div><div class="line">  &#125;)</div><div class="line">  Vue.nextTick(<span class="function"><span class="params">()</span> =&gt;</span> oldVm.$destroy())</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„é€»è¾‘å¾ˆç®€å•ï¼Œç”±äºè¿™ä¸ªå‡½æ•°æ¯æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„ Vue å®ä¾‹å¹¶èµ‹å€¼åˆ° <code>store._vm</code> ä¸Šï¼Œé‚£ä¹ˆæ—§çš„ _vm å¯¹è±¡çš„çŠ¶æ€è®¾ç½®ä¸º nullï¼Œå¹¶è°ƒç”¨ $destroy æ–¹æ³•é”€æ¯è¿™ä¸ªæ—§çš„ _vm å¯¹è±¡ã€‚</p>
<p>é‚£ä¹ˆåˆ°è¿™é‡Œï¼ŒVuex çš„åˆå§‹åŒ–åŸºæœ¬å‘Šä¸€æ®µè½äº†ï¼Œåˆå§‹åŒ–æ ¸å¿ƒå°±æ˜¯ installModule å’Œ<br>resetStoreVM å‡½æ•°ã€‚é€šè¿‡å¯¹ mutations ã€actions å’Œ getters çš„æ³¨å†Œï¼Œæˆ‘ä»¬äº†è§£åˆ° state çš„æ˜¯æŒ‰æ¨¡å—åˆ’åˆ†çš„ï¼ŒæŒ‰æ¨¡å—çš„åµŒå¥—å½¢æˆä¸€é¢—çŠ¶æ€æ ‘ã€‚è€Œ actionsã€mutations å’Œ getters çš„å…¨å±€çš„ï¼Œå…¶ä¸­ actions å’Œ mutations çš„ key å…è®¸é‡å¤ï¼Œä½† getters çš„ key æ˜¯ä¸å…è®¸é‡å¤çš„ã€‚å®˜æ–¹æ¨èæˆ‘ä»¬ç»™è¿™äº›å…¨å±€çš„å¯¹è±¡åœ¨å®šä¹‰çš„æ—¶å€™åŠ ä¸€ä¸ªåç§°ç©ºé—´æ¥é¿å…å‘½åå†²çªã€‚<br>ä»æºç çš„è§’åº¦ä»‹ç»å®Œ Vuex çš„åˆå§‹åŒ–çš„ç©æ³•ï¼Œæˆ‘ä»¬å†ä» Vuex æä¾›çš„ API æ–¹å‘æ¥åˆ†æå…¶ä¸­çš„æºç ï¼Œçœ‹çœ‹è¿™äº› API æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<h3 id="Vuex-API-åˆ†æ"><a href="#Vuex-API-åˆ†æ" class="headerlink" title="Vuex API åˆ†æ"></a>Vuex API åˆ†æ</h3><p>Vuex å¸¸è§çš„ API å¦‚ dispatchã€commit ã€subscribe ï¿½æˆ‘ä»¬å‰é¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œä¸‹é¢ä»‹ç»çš„ä¸€äº› Store çš„ APIï¼Œè™½ç„¶ä¸å¸¸ç”¨ï¼Œï¿½ä½†æ˜¯äº†è§£ä¸€ä¸‹ä¹Ÿä¸é”™ã€‚ï¿½</p>
<h4 id="watch-getter-cb-options"><a href="#watch-getter-cb-options" class="headerlink" title="watch(getter, cb, options)"></a>watch(getter, cb, options)</h4><p>watch ä½œç”¨æ˜¯å“åº”å¼çš„ç›‘æµ‹ä¸€ä¸ª getter æ–¹æ³•çš„è¿”å›å€¼ï¼Œå½“å€¼æ”¹å˜æ—¶è°ƒç”¨å›è°ƒã€‚getter æ¥æ”¶ store çš„ state ä½œä¸ºå”¯ä¸€å‚æ•°ã€‚æ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">watch (getter, cb, options) &#123;</div><div class="line">    assert(<span class="keyword">typeof</span> getter === <span class="string">'function'</span>, <span class="string">`store.watch only accepts a function.`</span>)</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._watcherVM.$watch(<span class="function"><span class="params">()</span> =&gt;</span> getter(<span class="keyword">this</span>.state), cb, options)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å‡½æ•°é¦–å…ˆæ–­è¨€ watch çš„ getter å¿…é¡»æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥ç€åˆ©ç”¨äº†å†…éƒ¨ä¸€ä¸ª Vue çš„å®ä¾‹å¯¹è±¡ <figure class="highlight plain"><figcaption><span>``` çš„ $watch æ–¹æ³•ï¼Œè§‚æµ‹ getter æ–¹æ³•è¿”å›å€¼çš„å˜åŒ–ï¼Œå¦‚æœæœ‰å˜åŒ–åˆ™è°ƒç”¨ cb å‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°ä¸ºæ–°å€¼å’Œæ—§å€¼ã€‚watch æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨å®ƒåˆ™å–æ¶ˆè§‚æµ‹ã€‚</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">#### registerModule(path, module)</div><div class="line"></div><div class="line">registerModule çš„ä½œç”¨æ˜¯æ³¨å†Œä¸€ä¸ªåŠ¨æ€æ¨¡å—ï¼Œæœ‰çš„æ—¶å€™å½“æˆ‘ä»¬å¼‚æ­¥åŠ è½½ä¸€äº›ä¸šåŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ª API æ¥å£å»åŠ¨æ€æ³¨å†Œæ¨¡å—ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ï¼š</div><div class="line"></div><div class="line">```javascript</div><div class="line">registerModule (path, module) &#123;</div><div class="line">    if (typeof path === &apos;string&apos;) path = [path]</div><div class="line">    assert(Array.isArray(path), `module path must be a string or an Array.`)</div><div class="line">    this._runtimeModules[path.join(&apos;.&apos;)] = module</div><div class="line">    installModule(this, this.state, path, module)</div><div class="line">    // reset store to update getters...</div><div class="line">    resetStoreVM(this, this.state)</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>å‡½æ•°é¦–å…ˆå¯¹ path åˆ¤æ–­ï¼Œå¦‚æœ path æ˜¯ä¸€ä¸ª string åˆ™æŠŠ path è½¬æ¢æˆä¸€ä¸ª Arrayã€‚æ¥ç€æŠŠ module å¯¹è±¡ç¼“å­˜åˆ° <code>this._runtimeModules</code> è¿™ä¸ªå¯¹è±¡é‡Œï¼Œpath ç”¨ç‚¹è¿æ¥ä½œä¸ºè¯¥å¯¹è±¡çš„ keyã€‚æ¥ç€å’Œåˆå§‹åŒ– Store çš„é€»è¾‘ä¸€æ ·ï¼Œè°ƒç”¨ installModule å’Œ resetStoreVm æ–¹æ³•å®‰è£…ä¸€éåŠ¨æ€æ³¨å…¥çš„ moduleã€‚</p>
<h4 id="unregisterModule-path"><a href="#unregisterModule-path" class="headerlink" title="unregisterModule(path)"></a>unregisterModule(path)</h4><p>å’Œ registerModule æ–¹æ³•ç›¸å¯¹çš„å°±æ˜¯ unregisterModule æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ³¨é”€ä¸€ä¸ªåŠ¨æ€æ¨¡å—ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">unregisterModule (path) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> path === <span class="string">'string'</span>) path = [path]</div><div class="line">    assert(<span class="built_in">Array</span>.isArray(path), <span class="string">`module path must be a string or an Array.`</span>)</div><div class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>._runtimeModules[path.join(<span class="string">'.'</span>)]</div><div class="line">    <span class="keyword">this</span>._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">const</span> parentState = getNestedState(<span class="keyword">this</span>.state, path.slice(<span class="number">0</span>, <span class="number">-1</span>))</div><div class="line">      Vue.delete(parentState, path[path.length - <span class="number">1</span>])</div><div class="line">    &#125;)</div><div class="line">    resetStore(<span class="keyword">this</span>)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å‡½æ•°é¦–å…ˆè¿˜æ˜¯å¯¹ path çš„ç±»å‹åšäº†åˆ¤æ–­ï¼Œè¿™éƒ¨åˆ†é€»è¾‘å’Œæ³¨å†Œæ˜¯ä¸€æ ·çš„ã€‚æ¥ç€ä» <code>this._runtimeModules</code> é‡Œåˆ æ‰ä»¥ path ç‚¹è¿æ¥çš„ key å¯¹åº”çš„æ¨¡å—ã€‚æ¥ç€é€šè¿‡ <code>this._withCommit</code> æ–¹æ³•æŠŠå½“å‰æ¨¡å—çš„ state å¯¹è±¡ä»çˆ¶ state ä¸Šåˆ é™¤ã€‚æœ€åè°ƒç”¨ resetStore(this) æ–¹æ³•ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">resetStore</span> (<span class="params">store</span>) </span>&#123;</div><div class="line">  store._actions = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line">  store._mutations = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line">  store._wrappedGetters = <span class="built_in">Object</span>.create(<span class="literal">null</span>)</div><div class="line">  <span class="keyword">const</span> state = store.state</div><div class="line">  <span class="comment">// init root module</span></div><div class="line">  installModule(store, state, [], store._options, <span class="literal">true</span>)</div><div class="line">  <span class="comment">// init all runtime modules</span></div><div class="line">  <span class="built_in">Object</span>.keys(store._runtimeModules).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">    installModule(store, state, key.split(<span class="string">'.'</span>), store._runtimeModules[key], <span class="literal">true</span>)</div><div class="line">  &#125;)</div><div class="line">  <span class="comment">// reset vm</span></div><div class="line">  resetStoreVM(store, state)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•ä½œç”¨å°±æ˜¯é‡ç½® store å¯¹è±¡ï¼Œé‡ç½® store çš„ <code>_actionsã€_mutationsã€_wrappedGetters</code> ç­‰ç­‰å±æ€§ã€‚ç„¶åå†æ¬¡è°ƒç”¨ installModules å»é‡æ–°å®‰è£…ä¸€é Module å¯¹åº”çš„è¿™äº›å±æ€§ï¼Œæ³¨æ„è¿™é‡Œæˆ‘ä»¬çš„æœ€åä¸€ä¸ªå‚æ•° hot ä¸ºtrueï¼Œè¡¨ç¤ºå®ƒæ˜¯ä¸€æ¬¡çƒ­æ›´æ–°ã€‚è¿™æ ·åœ¨ installModule è¿™ä¸ªæ–¹æ³•ä½“ç±»ï¼Œå¦‚ä¸‹è¿™æ®µé€»è¾‘å°±ä¸ä¼šæ‰§è¡Œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">installModule</span> (<span class="params">store, rootState, path, module, hot</span>) </span>&#123;</div><div class="line">  ... </div><div class="line">  <span class="comment">// set state</span></div><div class="line">  <span class="keyword">if</span> (!isRoot &amp;&amp; !hot) &#123;</div><div class="line">    <span class="keyword">const</span> parentState = getNestedState(rootState, path.slice(<span class="number">0</span>, <span class="number">-1</span>))</div><div class="line">    <span class="keyword">const</span> moduleName = path[path.length - <span class="number">1</span>]</div><div class="line">    store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      Vue.set(parentState, moduleName, state || &#123;&#125;)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äº hot å§‹ç»ˆä¸º trueï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸ä¼šé‡æ–°å¯¹çŠ¶æ€æ ‘åšè®¾ç½®ï¼Œæˆ‘ä»¬çš„ state ä¿æŒä¸å˜ã€‚å› ä¸ºæˆ‘ä»¬å·²ç»æ˜ç¡®çš„åˆ é™¤äº†å¯¹åº” path ä¸‹çš„ state äº†ï¼Œè¦åšçš„äº‹æƒ…åªä¸è¿‡å°±æ˜¯é‡æ–°æ³¨å†Œä¸€é muationsã€actions ä»¥åŠ gettersã€‚</p>
<p>å›è°ƒ resetStore æ–¹æ³•ï¼Œæ¥ä¸‹æ¥éå† <code>this._runtimeModules</code> æ¨¡å—ï¼Œé‡æ–°å®‰è£…æ‰€æœ‰å‰©ä½™çš„ runtime Moudlesã€‚æœ€åè¿˜æ˜¯è°ƒç”¨ resetStoreVM æ–¹æ³•å»é‡ç½® Store çš„ _vm å¯¹è±¡ã€‚</p>
<h4 id="hotUpdate-newOptions"><a href="#hotUpdate-newOptions" class="headerlink" title="hotUpdate(newOptions)"></a>hotUpdate(newOptions)</h4><p>hotUpdate çš„ä½œç”¨æ˜¯çƒ­åŠ è½½æ–°çš„ action å’Œ mutationã€‚ æ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">hotUpdate (newOptions) &#123;</div><div class="line">  updateModule(<span class="keyword">this</span>._options, newOptions)</div><div class="line">  resetStore(<span class="keyword">this</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡½æ•°é¦–å…ˆè°ƒç”¨ updateModule æ–¹æ³•å»æ›´æ–°çŠ¶æ€ï¼Œå…¶ä¸­å½“å‰ Store çš„ opition é…ç½®å’Œè¦æ›´æ–°çš„ newOptions ä¼šä½œä¸ºå‚æ•°ã€‚æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateModule</span> (<span class="params">targetModule, newModule</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (newModule.actions) &#123;</div><div class="line">    targetModule.actions = newModule.actions</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (newModule.mutations) &#123;</div><div class="line">    targetModule.mutations = newModule.mutations</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (newModule.getters) &#123;</div><div class="line">    targetModule.getters = newModule.getters</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (newModule.modules) &#123;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> newModule.modules) &#123;</div><div class="line">      <span class="keyword">if</span> (!(targetModule.modules &amp;&amp; targetModule.modules[key])) &#123;</div><div class="line">        <span class="built_in">console</span>.warn(</div><div class="line">          <span class="string">`[vuex] trying to add a new module '<span class="subst">$&#123;key&#125;</span>' on hot reloading, `</span> +</div><div class="line">          <span class="string">'manual reload is needed'</span></div><div class="line">        )</div><div class="line">        <span class="keyword">return</span></div><div class="line">      &#125;</div><div class="line">      updateModule(targetModule.modules[key], newModule.modules[key])</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é¦–å…ˆæˆ‘ä»¬å¯¹ newOptions å¯¹è±¡çš„ actionsã€mutations ä»¥åŠ getters åšäº†åˆ¤æ–­ï¼Œå¦‚æœæœ‰è¿™äº›å±æ€§çš„è¯åˆ™æ›¿æ¢ targetModuleï¼ˆå½“å‰ Store çš„ optionsï¼‰å¯¹åº”çš„å±æ€§ã€‚æœ€ååˆ¤æ–­å¦‚æœ newOptions åŒ…å« modules è¿™ä¸ª keyï¼Œåˆ™éå†è¿™ä¸ª modules å¯¹è±¡ï¼Œå¦‚æœ modules å¯¹åº”çš„ key ä¸åœ¨ä¹‹å‰çš„ modules ä¸­ï¼Œåˆ™æŠ¥ä¸€æ¡è­¦å‘Šï¼Œå› ä¸ºè¿™æ˜¯æ·»åŠ ä¸€ä¸ªæ–°çš„ module ï¼Œéœ€è¦æ‰‹åŠ¨é‡æ–°åŠ è½½ã€‚å¦‚æœ key åœ¨ä¹‹å‰çš„ modulesï¼Œåˆ™é€’å½’è°ƒç”¨ updateModuleï¼Œçƒ­æ›´æ–°å­æ¨¡å—ã€‚</p>
<p>è°ƒç”¨å®Œ updateModule åï¼Œå›åˆ° hotUpdate å‡½æ•°ï¼Œæ¥ç€è°ƒç”¨ resetStore æ–¹æ³•é‡æ–°è®¾ç½® storeï¼Œåˆšåˆšæˆ‘ä»¬å·²ç»ä»‹ç»è¿‡äº†ã€‚</p>
<h4 id="replaceState"><a href="#replaceState" class="headerlink" title="replaceState"></a>replaceState</h4><p>replaceStateçš„ä½œç”¨æ˜¯æ›¿æ¢æ•´ä¸ª rootStateï¼Œä¸€èˆ¬åœ¨ç”¨äºè°ƒè¯•ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">replaceState (state) &#123;</div><div class="line">    <span class="keyword">this</span>._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">this</span>._vm.state = state</div><div class="line">    &#125;)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>å‡½æ•°éå¸¸ç®€å•ï¼Œå°±æ˜¯è°ƒç”¨ <code>this._withCommit</code> æ–¹æ³•ä¿®æ”¹ Store çš„ rootStateï¼Œä¹‹æ‰€ä»¥æä¾›è¿™ä¸ª API æ˜¯ç”±äºåœ¨æˆ‘ä»¬æ˜¯ä¸èƒ½åœ¨ muations çš„å›è°ƒå‡½æ•°å¤–éƒ¨å»æ”¹å˜ stateã€‚</p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒAPI éƒ¨åˆ†ä»‹ç»å®Œäº†ï¼Œå…¶å®æ•´ä¸ª Vuex æºç ä¸‹çš„ src/index.js æ–‡ä»¶é‡Œçš„ä»£ç åŸºæœ¬éƒ½è¿‡äº†ä¸€éã€‚</p>
<h3 id="è¾…åŠ©å‡½æ•°"><a href="#è¾…åŠ©å‡½æ•°" class="headerlink" title="è¾…åŠ©å‡½æ•°"></a>è¾…åŠ©å‡½æ•°</h3><p>Vuex é™¤äº†æä¾›æˆ‘ä»¬ Store å¯¹è±¡å¤–ï¼Œè¿˜å¯¹å¤–æä¾›äº†ä¸€ç³»åˆ—çš„è¾…åŠ©å‡½æ•°ï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨ Vuexï¼Œæä¾›äº†æ“ä½œ store çš„å„ç§å±æ€§çš„ä¸€ç³»åˆ—è¯­æ³•ç³–ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸€ä¸‹ï¼š</p>
<h4 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h4><p>mapState å·¥å…·å‡½æ•°ä¼šå°† store ä¸­çš„ state æ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§ä¸­ã€‚ä¸ºäº†æ›´å¥½ç†è§£å®ƒçš„å®ç°ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// vuex æä¾›äº†ç‹¬ç«‹çš„æ„å»ºå·¥å…·å‡½æ•° Vuex.mapState</span></div><div class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  computed: mapState(&#123;</div><div class="line">    <span class="comment">// ç®­å¤´å‡½æ•°å¯ä»¥è®©ä»£ç éå¸¸ç®€æ´</span></div><div class="line">    count: <span class="function"><span class="params">state</span> =&gt;</span> state.count,</div><div class="line">    <span class="comment">// ä¼ å…¥å­—ç¬¦ä¸² 'count' ç­‰åŒäº `state =&gt; state.count`</span></div><div class="line">    countAlias: <span class="string">'count'</span>,</div><div class="line">    <span class="comment">// æƒ³è®¿é—®å±€éƒ¨çŠ¶æ€ï¼Œå°±å¿…é¡»å€ŸåŠ©äºä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œå‡½æ•°ä¸­ä½¿ç”¨ `this` è·å–å±€éƒ¨çŠ¶æ€</span></div><div class="line">    countPlusLocalState (state) &#123;</div><div class="line">      <span class="keyword">return</span> state.count + <span class="keyword">this</span>.localCount</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“è®¡ç®—å±æ€§åç§°å’ŒçŠ¶æ€å­æ ‘åç§°å¯¹åº”ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘ mapState å·¥å…·å‡½æ•°ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">computed: mapState([</div><div class="line">  <span class="comment">// æ˜ å°„ this.count åˆ° this.$store.state.count</span></div><div class="line">  <span class="string">'count'</span></div><div class="line">])</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä¾‹å­æˆ‘ä»¬å¯ä»¥ç›´è§‚çš„çœ‹åˆ°ï¼ŒmapState å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œé‚£å®ƒåº•å±‚åˆ°åº•å¹²äº†ä»€ä¹ˆäº‹å‘¢ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹æºç è¿™ä¸ªå‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">mapState</span> (<span class="params">states</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> res = &#123;&#125;</div><div class="line">  normalizeMap(states).forEach(<span class="function">(<span class="params">&#123; key, val &#125;</span>) =&gt;</span> &#123;</div><div class="line">    res[key] = <span class="function"><span class="keyword">function</span> <span class="title">mappedState</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">typeof</span> val === <span class="string">'function'</span></div><div class="line">        ? val.call(<span class="keyword">this</span>, <span class="keyword">this</span>.$store.state, <span class="keyword">this</span>.$store.getters)</div><div class="line">        : <span class="keyword">this</span>.$store.state[val]</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡½æ•°é¦–å…ˆå¯¹ä¼ å…¥çš„å‚æ•°è°ƒç”¨ normalizeMap æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalizeMap</span> (<span class="params">map</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(map)</div><div class="line">    ? map.map(<span class="function"><span class="params">key</span> =&gt;</span> (&#123; key, <span class="attr">val</span>: key &#125;))</div><div class="line">    : <span class="built_in">Object</span>.keys(map).map(<span class="function"><span class="params">key</span> =&gt;</span> (&#123; key, <span class="attr">val</span>: map[key] &#125;))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•åˆ¤æ–­å‚æ•° map æ˜¯å¦ä¸ºæ•°ç»„ï¼Œå¦‚æœæ˜¯æ•°ç»„ï¼Œåˆ™è°ƒç”¨æ•°ç»„çš„ map æ–¹æ³•ï¼ŒæŠŠæ•°ç»„çš„æ¯ä¸ªå…ƒç´ è½¬æ¢æˆä¸€ä¸ª <code>{key, val: key}</code>çš„å¯¹è±¡ï¼›å¦åˆ™ä¼ å…¥çš„ map å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆä» mapState çš„ä½¿ç”¨åœºæ™¯æ¥çœ‹ï¼Œä¼ å…¥çš„å‚æ•°ä¸æ˜¯æ•°ç»„å°±æ˜¯å¯¹è±¡ï¼‰ï¼Œæˆ‘ä»¬è°ƒç”¨ Object.keys æ–¹æ³•éå†è¿™ä¸ª map å¯¹è±¡çš„ keyï¼ŒæŠŠæ•°ç»„çš„æ¯ä¸ª key éƒ½è½¬æ¢æˆä¸€ä¸ª <code>{key, val: key}</code>çš„å¯¹è±¡ã€‚æœ€åæˆ‘ä»¬æŠŠè¿™ä¸ªå¯¹è±¡æ•°ç»„ä½œä¸º normalizeMap çš„è¿”å›å€¼ã€‚</p>
<p>å›åˆ° mapState å‡½æ•°ï¼Œåœ¨è°ƒç”¨äº† normalizeMap å‡½æ•°åï¼ŒæŠŠä¼ å…¥çš„ states è½¬æ¢æˆç”± {key, val} å¯¹è±¡æ„æˆçš„æ•°ç»„ï¼Œæ¥ç€è°ƒç”¨ forEach æ–¹æ³•éå†è¿™ä¸ªæ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡æ¯ä¸ªå…ƒç´ éƒ½è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•° mappedStateï¼Œå‡½æ•°å¯¹ val çš„ç±»å‹åˆ¤æ–­ï¼Œå¦‚æœ val æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ç›´æ¥è°ƒç”¨è¿™ä¸ª val å‡½æ•°ï¼ŒæŠŠå½“å‰ store ä¸Šçš„ state å’Œ getters ä½œä¸ºå‚æ•°ï¼Œè¿”å›å€¼ä½œä¸º mappedState çš„è¿”å›å€¼ï¼›å¦åˆ™ç›´æ¥æŠŠ <code>this.$store.state[val]</code> ä½œä¸º mappedState çš„è¿”å›å€¼ã€‚</p>
<p>é‚£ä¹ˆä¸ºä½• mapState å‡½æ•°çš„è¿”å›å€¼æ˜¯è¿™æ ·ä¸€ä¸ªå¯¹è±¡å‘¢ï¼Œå› ä¸º mapState çš„ä½œç”¨æ˜¯æŠŠå…¨å±€çš„ state å’Œ getters æ˜ å°„åˆ°å½“å‰ç»„ä»¶çš„ computed è®¡ç®—å±æ€§ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ Vue ä¸­ æ¯ä¸ªè®¡ç®—å±æ€§éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>ä¸ºäº†æ›´åŠ ç›´è§‚åœ°è¯´æ˜ï¼Œå›åˆ°åˆšæ‰çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  computed: mapState(&#123;</div><div class="line">    <span class="comment">// ç®­å¤´å‡½æ•°å¯ä»¥è®©ä»£ç éå¸¸ç®€æ´</span></div><div class="line">    count: <span class="function"><span class="params">state</span> =&gt;</span> state.count,</div><div class="line">    <span class="comment">// ä¼ å…¥å­—ç¬¦ä¸² 'count' ç­‰åŒäº `state =&gt; state.count`</span></div><div class="line">    countAlias: <span class="string">'count'</span>,</div><div class="line">    <span class="comment">// æƒ³è®¿é—®å±€éƒ¨çŠ¶æ€ï¼Œå°±å¿…é¡»å€ŸåŠ©äºä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œå‡½æ•°ä¸­ä½¿ç”¨ `this` è·å–å±€éƒ¨çŠ¶æ€</span></div><div class="line">    countPlusLocalState (state) &#123;</div><div class="line">      <span class="keyword">return</span> state.count + <span class="keyword">this</span>.localCount</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»è¿‡ mapState å‡½æ•°è°ƒç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  computed: &#123;</div><div class="line">    count() &#123;</div><div class="line">	  <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count</div><div class="line">    &#125;,</div><div class="line">    countAlias() &#123;</div><div class="line">	  <span class="keyword">return</span> <span class="keyword">this</span>.$store.state[<span class="string">'count'</span>]</div><div class="line">    &#125;,</div><div class="line">    countPlusLocalState() &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count + <span class="keyword">this</span>.localCount</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å†çœ‹ä¸€ä¸‹ mapState å‚æ•°ä¸ºæ•°ç»„çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">computed: mapState([</div><div class="line">  <span class="comment">// æ˜ å°„ this.count åˆ° this.$store.state.count</span></div><div class="line">  <span class="string">'count'</span></div><div class="line">])</div></pre></td></tr></table></figure>
<p>ç»è¿‡ mapState å‡½æ•°è°ƒç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  count() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.state[<span class="string">'count'</span>]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="mapGetters"><a href="#mapGetters" class="headerlink" title="mapGetters"></a>mapGetters</h4><p>mapGetters å·¥å…·å‡½æ•°ä¼šå°† store ä¸­çš„ getter æ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§ä¸­ã€‚å®ƒçš„åŠŸèƒ½å’Œ mapState éå¸¸ç±»ä¼¼ï¼Œæˆ‘ä»¬æ¥ç›´æ¥çœ‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">mapGetters</span> (<span class="params">getters</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> res = &#123;&#125;</div><div class="line">  normalizeMap(getters).forEach(<span class="function">(<span class="params">&#123; key, val &#125;</span>) =&gt;</span> &#123;</div><div class="line">    res[key] = <span class="function"><span class="keyword">function</span> <span class="title">mappedGetter</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (!(val <span class="keyword">in</span> <span class="keyword">this</span>.$store.getters)) &#123;</div><div class="line">        <span class="built_in">console</span>.error(<span class="string">`[vuex] unknown getter: <span class="subst">$&#123;val&#125;</span>`</span>)</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters[val]</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>mapGetters çš„å®ç°ä¹Ÿå’Œ mapState å¾ˆç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å®ƒçš„ val ä¸èƒ½æ˜¯å‡½æ•°ï¼Œåªèƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸”ä¼šæ£€æŸ¥ <code>val in this.$store.getters</code> çš„å€¼ï¼Œå¦‚æœä¸º false ä¼šè¾“å‡ºä¸€æ¡é”™è¯¯æ—¥å¿—ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  computed: &#123;</div><div class="line">    <span class="comment">// ä½¿ç”¨å¯¹è±¡æ‰©å±•æ“ä½œç¬¦æŠŠ getter æ··å…¥åˆ° computed ä¸­</span></div><div class="line">    ...mapGetters([</div><div class="line">      <span class="string">'doneTodosCount'</span>,</div><div class="line">      <span class="string">'anotherGetter'</span>,</div><div class="line">      <span class="comment">// ...</span></div><div class="line">    ])</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»è¿‡ mapGetters å‡½æ•°è°ƒç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  computed: &#123;</div><div class="line">    doneTodosCount() &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters[<span class="string">'doneTodosCount'</span>]</div><div class="line">    &#125;,</div><div class="line">    anotherGetter() &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters[<span class="string">'anotherGetter'</span>]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å†çœ‹ä¸€ä¸ªå‚æ•° mapGetters å‚æ•°æ˜¯å¯¹è±¡çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">computed: mapGetters(&#123;</div><div class="line">  <span class="comment">// æ˜ å°„ this.doneCount åˆ° store.getters.doneTodosCount</span></div><div class="line">  doneCount: <span class="string">'doneTodosCount'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>ç»è¿‡ mapGetters å‡½æ•°è°ƒç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  doneCount() &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters[<span class="string">'doneTodosCount'</span>]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="mapActions"><a href="#mapActions" class="headerlink" title="mapActions"></a>mapActions</h4><p>mapActions å·¥å…·å‡½æ•°ä¼šå°† store ä¸­çš„ dispatch æ–¹æ³•æ˜ å°„åˆ°ç»„ä»¶çš„ methods ä¸­ã€‚å’Œ mapStateã€mapGetters ä¹Ÿç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒæ˜ å°„çš„åœ°æ–¹ä¸æ˜¯è®¡ç®—å±æ€§ï¼Œè€Œæ˜¯ç»„ä»¶çš„ methods å¯¹è±¡ä¸Šã€‚æˆ‘ä»¬æ¥ç›´æ¥çœ‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">mapActions</span> (<span class="params">actions</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> res = &#123;&#125;</div><div class="line">  normalizeMap(actions).forEach(<span class="function">(<span class="params">&#123; key, val &#125;</span>) =&gt;</span> &#123;</div><div class="line">    res[key] = <span class="function"><span class="keyword">function</span> <span class="title">mappedAction</span> (<span class="params">...args</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.dispatch.apply(<span class="keyword">this</span>.$store, [val].concat(args))</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•°çš„å®ç°å¥—è·¯å’Œ mapStateã€mapGetters å·®ä¸å¤šï¼Œç”šè‡³æ›´ç®€å•ä¸€äº›ï¼Œ å®é™…ä¸Šå°±æ˜¯åšäº†ä¸€å±‚å‡½æ•°åŒ…è£…ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  methods: &#123;</div><div class="line">    ...mapActions([</div><div class="line">      <span class="string">'increment'</span> <span class="comment">// æ˜ å°„ this.increment() åˆ° this.$store.dispatch('increment')</span></div><div class="line">    ]),</div><div class="line">    ...mapActions(&#123;</div><div class="line">      <span class="attr">add</span>: <span class="string">'increment'</span> <span class="comment">// æ˜ å°„ this.add() to this.$store.dispatch('increment')</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»è¿‡ mapActions å‡½æ•°è°ƒç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  methods: &#123;</div><div class="line">    increment(...args) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.dispatch.apply(<span class="keyword">this</span>.$store, [<span class="string">'increment'</span>].concat(args))</div><div class="line">	&#125;</div><div class="line">    add(...args) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.dispatch.apply(<span class="keyword">this</span>.$store, [<span class="string">'increment'</span>].concat(args))</div><div class="line">	&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="mapMutations"><a href="#mapMutations" class="headerlink" title="mapMutations"></a>mapMutations</h4><p>mapMutations å·¥å…·å‡½æ•°ä¼šå°† store ä¸­çš„ commit æ–¹æ³•æ˜ å°„åˆ°ç»„ä»¶çš„ methods ä¸­ã€‚å’Œ mapActions çš„åŠŸèƒ½å‡ ä¹ä¸€æ ·ï¼Œæˆ‘ä»¬æ¥ç›´æ¥çœ‹å®ƒçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">mapMutations</span> (<span class="params">mutations</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> res = &#123;&#125;</div><div class="line">  normalizeMap(mutations).forEach(<span class="function">(<span class="params">&#123; key, val &#125;</span>) =&gt;</span> &#123;</div><div class="line">    res[key] = <span class="function"><span class="keyword">function</span> <span class="title">mappedMutation</span> (<span class="params">...args</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.commit.apply(<span class="keyword">this</span>.$store, [val].concat(args))</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> res</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å‡½æ•°çš„å®ç°å‡ ä¹ä¹Ÿå’Œ mapActions ä¸€æ ·ï¼Œå”¯ä¸€å·®åˆ«å°±æ˜¯æ˜ å°„çš„æ˜¯ store çš„ commit æ–¹æ³•ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  methods: &#123;</div><div class="line">    ...mapMutations([</div><div class="line">      <span class="string">'increment'</span> <span class="comment">// æ˜ å°„ this.increment() åˆ° this.$store.commit('increment')</span></div><div class="line">    ]),</div><div class="line">    ...mapMutations(&#123;</div><div class="line">      <span class="attr">add</span>: <span class="string">'increment'</span> <span class="comment">// æ˜ å°„ this.add() åˆ° this.$store.commit('increment')</span></div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»è¿‡ mapMutations å‡½æ•°è°ƒç”¨åçš„ç»“æœï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  methods: &#123;</div><div class="line">    increment(...args) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.commit.apply(<span class="keyword">this</span>.$store, [<span class="string">'increment'</span>].concat(args))</div><div class="line">	&#125;</div><div class="line">    add(...args) &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.commit.apply(<span class="keyword">this</span>.$store, [<span class="string">'increment'</span>].concat(args))</div><div class="line">	&#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h3><p>Vuex çš„ store æ¥æ”¶ plugins é€‰é¡¹ï¼Œä¸€ä¸ª Vuex çš„æ’ä»¶å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œæ¥æ”¶ store ä½œä¸ºå”¯ä¸€å‚æ•°ã€‚æ’ä»¶ä½œç”¨é€šå¸¸æ˜¯ç”¨æ¥ç›‘å¬æ¯æ¬¡ mutation çš„å˜åŒ–ï¼Œæ¥åšä¸€äº›äº‹æƒ…ã€‚</p>
<p>åœ¨ store çš„æ„é€ å‡½æ•°çš„æœ€åï¼Œæˆ‘ä»¬é€šè¿‡å¦‚ä¸‹ä»£ç è°ƒç”¨æ’ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> devtoolPlugin <span class="keyword">from</span> <span class="string">'./plugins/devtool'</span></div><div class="line"></div><div class="line"><span class="comment">// apply plugins</span></div><div class="line">plugins.concat(devtoolPlugin).forEach(<span class="function"><span class="params">plugin</span> =&gt;</span> plugin(<span class="keyword">this</span>))</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é€šå¸¸å®ä¾‹åŒ– store çš„æ—¶å€™ï¼Œè¿˜ä¼šè°ƒç”¨ logger æ’ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">import</span> createLogger <span class="keyword">from</span> <span class="string">'vuex/dist/logger'</span></div><div class="line"></div><div class="line">Vue.use(Vuex)</div><div class="line"></div><div class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">'production'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  ...</div><div class="line">  plugins: debug ? [createLogger()] : []</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿° 2 ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«è°ƒç”¨äº† devtoolPlugin å’Œ createLogger() 2 ä¸ªæ’ä»¶ï¼Œå®ƒä»¬æ˜¯ Vuex å†…ç½®æ’ä»¶ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥åˆ†åˆ«çœ‹ä¸€ä¸‹ä»–ä»¬çš„å®ç°ã€‚</p>
<h4 id="devtoolPlugin"><a href="#devtoolPlugin" class="headerlink" title="devtoolPlugin"></a>devtoolPlugin</h4><p>devtoolPlugin ä¸»è¦åŠŸèƒ½æ˜¯åˆ©ç”¨ Vue çš„å¼€å‘è€…å·¥å…·å’Œ Vuex åšé…åˆï¼Œé€šè¿‡å¼€å‘è€…å·¥å…·çš„é¢æ¿å±•ç¤º Vuex çš„çŠ¶æ€ã€‚å®ƒçš„æºç åœ¨ src/plugins/devtool.js ä¸­ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ’ä»¶åˆ°åº•åšäº†å“ªäº›äº‹æƒ…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> devtoolHook =</div><div class="line">  <span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">'undefined'</span> &amp;&amp;</div><div class="line">  <span class="built_in">window</span>.__VUE_DEVTOOLS_GLOBAL_HOOK__</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">devtoolPlugin</span> (<span class="params">store</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (!devtoolHook) <span class="keyword">return</span></div><div class="line"></div><div class="line">  store._devtoolHook = devtoolHook</div><div class="line"></div><div class="line">  devtoolHook.emit(<span class="string">'vuex:init'</span>, store)</div><div class="line"></div><div class="line">  devtoolHook.on(<span class="string">'vuex:travel-to-state'</span>, targetState =&gt; &#123;</div><div class="line">    store.replaceState(targetState)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  store.subscribe(<span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</div><div class="line">    devtoolHook.emit(<span class="string">'vuex:mutation'</span>, mutation, state)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç›´æ¥ä»å¯¹å¤–æš´éœ²çš„ devtoolPlugin å‡½æ•°çœ‹èµ·ï¼Œå‡½æ•°é¦–å…ˆåˆ¤æ–­äº†devtoolHook çš„å€¼ï¼Œå¦‚æœæˆ‘ä»¬æµè§ˆå™¨è£…äº† Vue å¼€å‘è€…å·¥å…·ï¼Œé‚£ä¹ˆåœ¨ window ä¸Šå°±ä¼šæœ‰ä¸€ä¸ª <code>__VUE_DEVTOOLS_GLOBAL_HOOK__</code> çš„å¼•ç”¨ï¼Œ é‚£ä¹ˆè¿™ä¸ª devtoolHook å°±æŒ‡å‘è¿™ä¸ªå¼•ç”¨ã€‚</p>
<p>æ¥ä¸‹æ¥é€šè¿‡ <code>devtoolHook.emit(&#39;vuex:init&#39;, store)</code> æ´¾å‘ä¸€ä¸ª Vuex åˆå§‹åŒ–çš„äº‹ä»¶ï¼Œè¿™æ ·å¼€å‘è€…å·¥å…·å°±èƒ½æ‹¿åˆ°å½“å‰è¿™ä¸ª store å®ä¾‹ã€‚</p>
<p>æ¥ä¸‹æ¥é€šè¿‡ <code>devtoolHook.on(&#39;vuex:travel-to-state&#39;, targetState =&gt; { store.replaceState(targetState) })</code>ç›‘å¬ Vuex çš„ traval-to-state çš„äº‹ä»¶ï¼ŒæŠŠå½“å‰çš„çŠ¶æ€æ ‘æ›¿æ¢æˆç›®æ ‡çŠ¶æ€æ ‘ï¼Œè¿™ä¸ªåŠŸèƒ½ä¹Ÿæ˜¯åˆ©ç”¨ Vue å¼€å‘è€…å·¥å…·æ›¿æ¢ Vuex çš„çŠ¶æ€ã€‚</p>
<p>æœ€åé€šè¿‡ <code>store.subscribe((mutation, state) =&gt; { devtoolHook.emit(&#39;vuex:mutation&#39;, mutation, state) })</code> æ–¹æ³•è®¢é˜… store çš„ state çš„å˜åŒ–ï¼Œå½“ store çš„ mutation æäº¤äº† state çš„å˜åŒ–ï¼Œ ä¼šè§¦å‘å›è°ƒå‡½æ•°â€”â€”é€šè¿‡ devtoolHook æ´¾å‘ä¸€ä¸ª Vuex mutation çš„äº‹ä»¶ï¼Œmutation å’Œ rootState ä½œä¸ºå‚æ•°ï¼Œè¿™æ ·å¼€å‘è€…å·¥å…·å°±å¯ä»¥è§‚æµ‹åˆ° Vuex state çš„å®æ—¶å˜åŒ–ï¼Œåœ¨é¢æ¿ä¸Šå±•ç¤ºæœ€æ–°çš„çŠ¶æ€æ ‘ã€‚</p>
<h4 id="loggerPlugin"><a href="#loggerPlugin" class="headerlink" title="loggerPlugin"></a>loggerPlugin</h4><p>é€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å®æ—¶æŠŠ mutation çš„åŠ¨ä½œä»¥åŠ store çš„ state çš„å˜åŒ–å®æ—¶è¾“å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ loggerPlugin å¸®æˆ‘ä»¬åšè¿™ä¸ªäº‹æƒ…ã€‚å®ƒçš„æºç åœ¨ src/plugins/logger.js ä¸­ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ’ä»¶åˆ°åº•åšäº†å“ªäº›äº‹æƒ…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Credits: borrowed code from fcomb/redux-logger</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; deepCopy &#125; <span class="keyword">from</span> <span class="string">'../util'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">createLogger</span> (<span class="params">&#123;</span></span></div><div class="line">  collapsed = true,</div><div class="line">  transformer = state =&gt; state,</div><div class="line">  mutationTransformer = mut =&gt; mut</div><div class="line">&#125; = &#123;&#125;) &#123;</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">store</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> prevState = deepCopy(store.state)</div><div class="line"></div><div class="line">    store.subscribe(<span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">console</span> === <span class="string">'undefined'</span>) &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">      &#125;</div><div class="line">      <span class="keyword">const</span> nextState = deepCopy(state)</div><div class="line">      <span class="keyword">const</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">      <span class="keyword">const</span> formattedTime = <span class="string">` @ <span class="subst">$&#123;pad(time.getHours(), <span class="number">2</span>)&#125;</span>:<span class="subst">$&#123;pad(time.getMinutes(), <span class="number">2</span>)&#125;</span>:<span class="subst">$&#123;pad(time.getSeconds(), <span class="number">2</span>)&#125;</span>.<span class="subst">$&#123;pad(time.getMilliseconds(), <span class="number">3</span>)&#125;</span>`</span></div><div class="line">      <span class="keyword">const</span> formattedMutation = mutationTransformer(mutation)</div><div class="line">      <span class="keyword">const</span> message = <span class="string">`mutation <span class="subst">$&#123;mutation.type&#125;</span><span class="subst">$&#123;formattedTime&#125;</span>`</span></div><div class="line">      <span class="keyword">const</span> startMessage = collapsed</div><div class="line">        ? <span class="built_in">console</span>.groupCollapsed</div><div class="line">        : <span class="built_in">console</span>.group</div><div class="line"></div><div class="line">      <span class="comment">// render</span></div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">        startMessage.call(<span class="built_in">console</span>, message)</div><div class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">        <span class="built_in">console</span>.log(message)</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'%c prev state'</span>, <span class="string">'color: #9E9E9E; font-weight: bold'</span>, transformer(prevState))</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'%c mutation'</span>, <span class="string">'color: #03A9F4; font-weight: bold'</span>, formattedMutation)</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'%c next state'</span>, <span class="string">'color: #4CAF50; font-weight: bold'</span>, transformer(nextState))</div><div class="line"></div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">        <span class="built_in">console</span>.groupEnd()</div><div class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'â€”â€” log end â€”â€”'</span>)</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      prevState = nextState</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">repeat</span> (<span class="params">str, times</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> (<span class="keyword">new</span> <span class="built_in">Array</span>(times + <span class="number">1</span>)).join(str)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">pad</span> (<span class="params">num, maxLength</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> repeat(<span class="string">'0'</span>, maxLength - num.toString().length) + num</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ’ä»¶å¯¹å¤–æš´éœ²çš„æ˜¯ createLogger æ–¹æ³•ï¼Œå®ƒå®é™…ä¸Šæ¥å— 3 ä¸ªå‚æ•°ï¼Œå®ƒä»¬éƒ½æœ‰é»˜è®¤å€¼ï¼Œé€šå¸¸æˆ‘ä»¬ç”¨é»˜è®¤å€¼å°±å¯ä»¥ã€‚createLogger çš„è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“æˆ‘æ‰§è¡Œ logger æ’ä»¶çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯è¿™ä¸ªå‡½æ•°ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°åšäº†å“ªäº›äº‹æƒ…ã€‚</p>
<p>å‡½æ•°é¦–å…ˆæ‰§è¡Œäº† <code>let prevState = deepCopy(store.state)</code> æ·±æ‹·è´å½“å‰ store çš„ rootStateã€‚è¿™é‡Œä¸ºä»€ä¹ˆè¦æ·±æ‹·è´ï¼Œå› ä¸ºå¦‚æœæ˜¯å•çº¯çš„å¼•ç”¨ï¼Œé‚£ä¹ˆ store.state çš„ä»»ä½•å˜åŒ–éƒ½ä¼šå½±å“è¿™ä¸ªå¼•ç”¨ï¼Œè¿™æ ·å°±æ— æ³•è®°å½•ä¸Šä¸€ä¸ªçŠ¶æ€äº†ã€‚æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ deepCopy çš„å®ç°ï¼Œåœ¨ src/util.js é‡Œå®šä¹‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">find</span> (<span class="params">list, f</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> list.filter(f)[<span class="number">0</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span> (<span class="params">obj, cache = []</span>) </span>&#123;</div><div class="line">  <span class="comment">// just return if obj is immutable value</span></div><div class="line">  <span class="keyword">if</span> (obj === <span class="literal">null</span> || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) &#123;</div><div class="line">    <span class="keyword">return</span> obj</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// if obj is hit, it is in circular structure</span></div><div class="line">  <span class="keyword">const</span> hit = find(cache, c =&gt; c.original === obj)</div><div class="line">  <span class="keyword">if</span> (hit) &#123;</div><div class="line">    <span class="keyword">return</span> hit.copy</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">const</span> copy = <span class="built_in">Array</span>.isArray(obj) ? [] : &#123;&#125;</div><div class="line">  <span class="comment">// put the copy into cache at first</span></div><div class="line">  <span class="comment">// because we want to refer it in recursive deepCopy</span></div><div class="line">  cache.push(&#123;</div><div class="line">    <span class="attr">original</span>: obj,</div><div class="line">    copy</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">    copy[key] = deepCopy(obj[key], cache)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> copy</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>deepCopy å¹¶ä¸é™Œç”Ÿï¼Œå¾ˆå¤šå¼€æºåº“å¦‚ loadashã€jQuery éƒ½æœ‰ç±»ä¼¼çš„å®ç°ï¼ŒåŸç†ä¹Ÿä¸éš¾ç†è§£ï¼Œä¸»è¦æ˜¯æ„é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œéå†åŸå¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œé€’å½’è°ƒç”¨ deepCopyã€‚ä¸è¿‡è¿™é‡Œçš„å®ç°æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„åœ°æ–¹ï¼Œåœ¨æ¯æ¬¡æ‰§è¡Œ deepCopy çš„æ—¶å€™ï¼Œä¼šç”¨ cache æ•°ç»„ç¼“å­˜å½“å‰åµŒå¥—çš„å¯¹è±¡ï¼Œä»¥åŠæ‰§è¡Œ deepCopy è¿”å›çš„ copyã€‚å¦‚æœåœ¨ deepCopy çš„è¿‡ç¨‹ä¸­é€šè¿‡ <code>find(cache, c =&gt; c.original === obj)</code> å‘ç°æœ‰å¾ªç¯å¼•ç”¨çš„æ—¶å€™ï¼Œç›´æ¥è¿”å› cache ä¸­å¯¹åº”çš„ copyï¼Œè¿™æ ·å°±é¿å…äº†æ— é™å¾ªç¯çš„æƒ…å†µã€‚</p>
<p>å›åˆ° loggerPlugin å‡½æ•°ï¼Œé€šè¿‡ deepCopy æ‹·è´äº†å½“å‰ state çš„å‰¯æœ¬å¹¶ç”¨ prevState å˜é‡ä¿å­˜ï¼Œæ¥ä¸‹æ¥è°ƒç”¨ store.subscribe æ–¹æ³•è®¢é˜… store çš„ state çš„å˜ã€‚ åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œä¹Ÿæ˜¯å…ˆé€šè¿‡ deepCopy æ–¹æ³•æ‹¿åˆ°å½“å‰çš„ state çš„å‰¯æœ¬ï¼Œå¹¶ç”¨ nextState å˜é‡ä¿å­˜ã€‚æ¥ä¸‹æ¥è·å–å½“å‰æ ¼å¼åŒ–æ—¶é—´å·²ç»æ ¼å¼åŒ–çš„ mutation å˜åŒ–çš„å­—ç¬¦ä¸²ï¼Œç„¶ååˆ©ç”¨ console.group ä»¥åŠ console.log åˆ†ç»„è¾“å‡º prevStateã€mutationä»¥åŠ nextStateï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡æˆ‘ä»¬ createLogger çš„å‚æ•° collapsedã€transformer ä»¥åŠ mutationTransformer æ¥æ§åˆ¶æˆ‘ä»¬æœ€ç»ˆ log çš„æ˜¾ç¤ºæ•ˆæœã€‚åœ¨å‡½æ•°çš„æœ€åï¼Œæˆ‘ä»¬æŠŠ nextState èµ‹å€¼ç»™ prevStateï¼Œä¾¿äºä¸‹ä¸€æ¬¡ mutationã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Vuex 2.0 çš„æºç åˆ†æåˆ°è¿™å°±å‘Šä¸€æ®µè½äº†ï¼Œæœ€åæˆ‘å†åˆ†äº«ä¸€ä¸‹çœ‹æºç çš„å°å¿ƒå¾—ï¼šå¯¹äºä¸€ä¸ªåº“æˆ–è€…æ¡†æ¶æºç çš„ç ”ç©¶å‰ï¼Œé¦–å…ˆäº†è§£ä»–ä»¬çš„ä½¿ç”¨åœºæ™¯ã€å®˜ç½‘æ–‡æ¡£ç­‰ï¼›ç„¶åä¸€å®šè¦ç”¨ä»–ï¼Œè‡³å°‘ä¹Ÿè¦å†™å‡ ä¸ªå° demoï¼Œè¾¾åˆ°ç†Ÿç»ƒæŒæ¡çš„ç¨‹åº¦ï¼›æœ€åå†ä»å…¥å£ã€APIã€ä½¿ç”¨æ–¹æ³•ç­‰ç­‰å¤šä¸ªç»´åº¦å»äº†è§£ä»–å†…éƒ¨çš„å®ç°ç»†èŠ‚ã€‚å¦‚æœè¿™ä¸ªåº“è¿‡äºåºå¤§ï¼Œé‚£å°±å…ˆæŒ‰æ¨¡å—å’ŒåŠŸèƒ½æ‹†åˆ†ï¼Œä¸€ç‚¹ç‚¹åœ°æ¶ˆåŒ–ã€‚</p>
<p>æœ€åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰äº›åŒå­¦ä¼šé—®ï¼Œæºç é‚£ä¹ˆæ¯ç‡¥ï¼Œæˆ‘ä»¬åˆ†æå­¦ä¹ å®ƒçš„æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿé¦–å…ˆï¼Œå­¦ä¹ æºç æœ‰åŠ©äºæˆ‘ä»¬æ›´æ·±å…¥æŒæ¡å’Œåº”ç”¨è¿™ä¸ªåº“æˆ–è€…æ¡†æ¶ï¼›å…¶æ¬¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å­¦ä¹ åˆ°æºç ä¸­å¾ˆå¤šç¼–ç¨‹æŠ€å·§ï¼Œå¯ä»¥è¿ç§»åˆ°æˆ‘ä»¬å¹³æ—¶çš„å¼€å‘å·¥ä½œä¸­ï¼›æœ€åï¼Œå¯¹äºä¸€äº›é«˜çº§å¼€å‘å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥å­¦ä¹ åˆ°å®ƒçš„è®¾è®¡æ€æƒ³ï¼Œå¯¹å°†æ¥æœ‰ä¸€å¤©æˆ‘ä»¬ä¹Ÿå»è®¾è®¡ä¸€ä¸ªåº“æˆ–è€…æ¡†æ¶æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ï¼Œè¿™ä¹Ÿæ˜¯æå‡è‡ªèº«èƒ½åŠ›æ°´å¹³çš„éå¸¸å¥½çš„é€”å¾„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å½“æˆ‘ä»¬ç”¨ Vue.js å¼€å‘ä¸€ä¸ªä¸­åˆ°å¤§å‹çš„å•é¡µåº”ç”¨æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚ä½•è®©å¤šä¸ª Vue ç»„ä»¶å…±äº«çŠ¶æ€&lt;/li&gt;
&lt;li&gt;Vue ç»„ä»¶é—´å¦‚ä½•é€šè®¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šå¸¸ï¼Œåœ¨é¡¹ç›®ä¸æ˜¯å¾ˆå¤æ‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šåˆ©ç”¨å…¨å±€äº‹ä»¶æ€»çº¿ ï¼ˆglobal event busï¼‰è§£å†³ï¼Œä½†æ˜¯éšç€å¤æ‚åº¦çš„æå‡ï¼Œè¿™äº›ä»£ç å°†å˜çš„éš¾ä»¥ç»´æŠ¤ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´åŠ å¥½ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œäºæ˜¯ï¼ŒVuex è¯ç”Ÿäº†ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>angularé«˜ä»¿æŸæ‹›è˜ç½‘ç«™åæ„Ÿæƒ³</title>
    <link href="http://xuhongbo.com/2017/03/10/%E6%A1%86%E6%9E%B6/angular/%E9%AB%98%E4%BB%BF%E6%8B%89%E9%92%A9%E6%84%9F%E6%83%B3/"/>
    <id>http://xuhongbo.com/2017/03/10/æ¡†æ¶/angular/é«˜ä»¿æ‹‰é’©æ„Ÿæƒ³/</id>
    <published>2017-03-09T17:24:22.000Z</published>
    <updated>2017-03-12T03:32:36.035Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸¤å¤©é—²æ¥æ— è¶£ï¼Œå°±è‡ªå·±æ‘¸ç´¢ç€ï¼Œé«˜ä»¿äº†ä¸€æŠŠæŸæ‹›è˜ç½‘ç«™æ‰‹æœºç«¯ï¼Œå…ˆè¯´ä¸€ä¸‹ï¼Œæˆ‘å¹¶ä¸ä¼šæŠŠè¿™ä¸ªé¡¹ç›®è¿›è¡Œå‰–æï¼Œæˆ‘åªä¼šè¿›è¡Œè®°å½•ä¸€èˆ¬çš„é—®é¢˜ï¼Œå…·ä½“çš„ä½ å¯ä»¥å»æˆ‘çš„githubä¸Šé¢è¿›è¡Œforkï¼Œç„¶åè‡ªå·±ç ”ç©¶</p>
<a id="more"></a>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”å‰²â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“</p>
<h4 id="ç”¨åˆ°çš„æŠ€æœ¯æ ˆä»¥åŠå·¥å…·ï¼š"><a href="#ç”¨åˆ°çš„æŠ€æœ¯æ ˆä»¥åŠå·¥å…·ï¼š" class="headerlink" title="ç”¨åˆ°çš„æŠ€æœ¯æ ˆä»¥åŠå·¥å…·ï¼š"></a>ç”¨åˆ°çš„æŠ€æœ¯æ ˆä»¥åŠå·¥å…·ï¼š</h4><ol>
<li>angular1.0</li>
<li>gulp</li>
<li>browser-sync</li>
<li>vs-code</li>
<li>åŒ…ç®¡ç†å·¥å…·æˆ‘è¿™é‡Œç”¨äº†ä¸¤ä¸ªï¼Œä¸€ä¸ªbowerï¼Œå¦ä¸€ä¸ªæ˜¯npm</li>
</ol>
<h4 id="åŠŸèƒ½ç‚¹"><a href="#åŠŸèƒ½ç‚¹" class="headerlink" title="åŠŸèƒ½ç‚¹"></a>åŠŸèƒ½ç‚¹</h4><ul>
<li>èŒä½å±•ç¤º</li>
<li>èŒä½æ”¶è—</li>
<li>æŸ¥çœ‹èŒä½ä»¥åŠå…¬å¸è¯¦ç»†ä¿¡æ¯</li>
<li>æŸ¥çœ‹å†å²è®°å½•</li>
<li>åœ¨çº¿æœç´¢èŒä½è¿›è¡Œæ¡ä»¶ç­›æŸ¥</li>
<li>æŸ¥çœ‹æŠ•é€’ç®€å†è®°å½•</li>
<li>é¢è¯•é‚€è¯·</li>
<li>ç™»å½•ä¿¡æ¯æœ¬åœ°ç¼“å­˜ï¼ˆè¿™é‡Œç”¨åˆ°çš„æ˜¯cookieâ€“&gt;angular-cookieï¼‰</li>
<li>ç™»é™†æ³¨å†Œ  ä¸ªäººä¸­å¿ƒ</li>
</ul>
<p>è¯ä¸å¤šè¯´ï¼Œç›´æ¥æŠŠæˆ‘çš„ç›®å½•äº®å‡ºæ¥å§</p>
<p><img src="/images/lagou/tree.png" alt="img"></p>
<p>åœ¨å¼€å§‹è¿™ä¸ªä¹‹å‰æˆ‘å…ˆè´´å‡ºæˆ‘çš„ç›®å½•ç»“æ„å†è§£é‡Šä¸€ä¸‹</p>
<p><img src="/images/lagou/tree1.png" alt="img"></p>
<p>åœ¨scriptæ–‡ä»¶å¤¹ä¸­ï¼Œ</p>
<ul>
<li>config ä¸»è¦æ˜¯é…ç½®æˆ‘ä»¬çš„è·¯ç”±æ¨¡å—ä»¥åŠä¸€äº›é…ç½®æ€§çš„ä¸œè¥¿</li>
<li>controller ä¸»è¦æ˜¯æˆ‘ä»¬çš„è§†å›¾çš„æ§åˆ¶å™¨</li>
<li>directive ä¸»è¦æ˜¯æˆ‘ä»¬çš„æŒ‡ä»¤</li>
<li>filter æ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰çš„è¿‡æ»¤å™¨</li>
<li>service ä¸»è¦æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰æœåŠ¡</li>
<li>app.js æ˜¯æˆ‘ä»¬çš„ä¸»æ–‡ä»¶</li>
</ul>
<p>åœ¨æˆ‘ä»¬çš„viewsæ–‡ä»¶å¤¹ä¸­ï¼Œä¸»è¦æ˜¯æˆ‘ä»¬çš„è§†å›¾ï¼Œtemplateä¸­å…¨éƒ¨æ˜¯æˆ‘ä»¬çš„æŒ‡ä»¤çš„è§†å›¾æ¨¡æ¿</p>
<p>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æˆ‘ç”¨åˆ°çš„æœ€å¤šçš„æ˜¯directiveï¼ˆæŒ‡ä»¤ï¼‰,æˆ‘åœ¨ä½¿ç”¨çš„æ—¶å€™æ„Ÿè§‰æŒºç¾å¦™çš„ï¼Œæœ‰ç‚¹vueé‡Œé¢æ¨¡æ¿å¼•æ“çš„æ„Ÿè§‰ï¼Œå…·ä½“çš„æ¯”è¾ƒå¯ä»¥è‡ªå·±çœ‹çœ‹vue</p>
<p>é¡¹ç›®ä¸­ç”¨åˆ°çš„è·¯ç”±æ˜¯ç¬¬ä¸‰æ–¹çš„ui-routerï¼Œè¿™ä¸ªç¡®å®æ¯”æˆ‘ä»¬çš„ng-routerè¿˜ç”¨ï¼Œå¦‚æœä¸çŸ¥é“æ€ä¹ˆç”¨ï¼Œå¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼Œè™½ç„¶ä¸œè¥¿ä¸å¤šï¼Œä½†æ˜¯æ—¥å¸¸ä½¿ç”¨è¿˜æ˜¯OKçš„  <a href="http://xuhongbo.com/2016/12/14/%E6%A1%86%E6%9E%B6/angular/ui-router/">ä¼ é€é—¨</a></p>
<p>å¥½äº†è¯ä¸å¤šè¯´äº†ï¼Œç›´æ¥è¯´ä¸‹æ ¸å¿ƒçš„ä¸€äº›ä¸œè¥¿å§</p>
<h4 id="directive"><a href="#directive" class="headerlink" title="directive"></a>directive</h4><p>ç¬¬ä¸€ä¸ªæ˜¯æˆ‘åˆšåˆšè¯´è¿‡çš„æŒ‡ä»¤ï¼Œè¯¦ç»†çš„ä»‹ç»æˆ‘å¦ä¸€ç¯‡æ–‡ç«   <a href="http://xuhongbo.com/2017/02/18/%E6%A1%86%E6%9E%B6/angular/angular%20Directives/">ä¼ é€é—¨</a>  ä¹Ÿæœ‰ä»‹ç»ï¼Œä½†æ˜¯è¿™ä¸ªæˆ‘å†è¡¥å……ä¸€ä¸‹å®é™…åº”ç”¨ä¸­çš„é—®é¢˜</p>
<p>é¦–å…ˆè´´ä¸€ä¸ªç¤ºä¾‹ä¸Šæ¥å§</p>
<p>search.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-bar ta-c"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"name='';search();"</span>&gt;</span>å–æ¶ˆ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"name"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"æœç´¢èŒä½/å…¬å¸/åŸå¸‚"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"search();"</span>  <span class="attr">class</span>=<span class="string">"ta-l"</span>&gt;</span></div><div class="line">    æœç´¢</div><div class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">//è¿™é‡Œç”¨åˆ°äº†appTabæŒ‡ä»¤ï¼Œä¸‹é¢æˆ‘å°±æŠŠè¿™ä¸ªæŒ‡ä»¤è´´å‡ºæ¥ï¼Œå¥½å¥½çš„è¯´ä¸€ä¸‹è¿™ä¸ªæŒ‡ä»¤åˆ°åº•æ€ä¹ˆå›äº‹</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">app-tab</span> <span class="attr">list</span>=<span class="string">"tabList"</span> <span class="attr">tab-click</span>=<span class="string">"tClick(id,name)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-list"</span> <span class="attr">filter-obj</span>=<span class="string">"filterObj"</span> <span class="attr">app-position-list</span> <span class="attr">data</span>=<span class="string">"positionList"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">app-foot</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">app-sheet</span> <span class="attr">select</span>=<span class="string">"sClick(id,name)"</span>  <span class="attr">list</span>=<span class="string">"sheet.list"</span> <span class="attr">visible</span>=<span class="string">"visible"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>tab.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line">angular.module(<span class="string">"app"</span>).directive(<span class="string">"appTab"</span>, [<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">restrict</span>: <span class="string">"A"</span>,</div><div class="line">        <span class="attr">replace</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">templateUrl</span>: <span class="string">"views/template/tab.html"</span>,</div><div class="line">      <span class="comment">//è¿™é‡Œçš„scopeä¸»è¦æ˜¯å‘å¤–éƒ¨æä¾›æ¥å£ï¼ŒæŠŠæˆ‘ä»¬çš„è§†å›¾ä¸æˆ‘ä»¬çš„æ§åˆ¶å™¨è”ç³»èµ·æ¥</span></div><div class="line">        scope: &#123;</div><div class="line">          <span class="comment">//è¿™é‡Œçš„listä¼šåœ¨æˆ‘ä»¬å¼•ç”¨è¿™ä¸ªæŒ‡ä»¤æ—¶ä»¥attrçš„å½¢å¼å†™å…¥æˆ‘ä»¬çš„æŒ‡ä»¤æ ‡ç­¾ä¸­ï¼Œç„¶ååœ¨é‚£é‡Œä¸æˆ‘ä»¬çš„æ•°æ®æ¨¡å‹ä¸­çš„æ•°æ®ç»‘å®šåœ¨ä¸€èµ·</span></div><div class="line">            list: <span class="string">"="</span>,</div><div class="line">            <span class="attr">tabClick</span>: <span class="string">"&amp;"</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">link</span>: <span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line">            $scope.click = <span class="function"><span class="keyword">function</span> (<span class="params">tab</span>) </span>&#123;</div><div class="line">                $scope.selectId = tab.id;</div><div class="line">                $scope.tabClick(tab);</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>tab.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"tab"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">ng-click</span>=<span class="string">"click(item)"</span> <span class="attr">ng-repeat</span>=<span class="string">"item in list"</span> <span class="attr">class</span>=<span class="string">"d-ib ta-c &#123;&#123;selectId===item.id?'active':''&#125;&#125;"</span> <span class="attr">ng-bind</span>=<span class="string">"item.name"</span>&gt;</span>åŸå¸‚<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<p>searchCtrl.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line">angular.module(<span class="string">"app"</span>)</div><div class="line">    .controller(<span class="string">"searchCtrl"</span>, [<span class="string">"dict"</span>, <span class="string">"$http"</span>, <span class="string">"$scope"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">dict, $http, $scope</span>) </span>&#123;</div><div class="line">        $scope.name = <span class="string">""</span>;</div><div class="line">        $scope.search = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            $http.get(<span class="string">"/data/positionList.json?name="</span> + $scope.name).then(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</div><div class="line">                $scope.positionList = data.data;</div><div class="line">            &#125;);</div><div class="line">        &#125;;</div><div class="line">        $scope.search();</div><div class="line">        $scope.sheet = &#123;&#125;;</div><div class="line">        $scope.tabList = [&#123;</div><div class="line">            <span class="attr">id</span>: <span class="string">"city"</span>,</div><div class="line">            <span class="attr">name</span>: <span class="string">"åŸå¸‚"</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">id</span>: <span class="string">"salary"</span>,</div><div class="line">            <span class="attr">name</span>: <span class="string">"è–ªæ°´"</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">id</span>: <span class="string">"scale"</span>,</div><div class="line">            <span class="attr">name</span>: <span class="string">"å…¬å¸è§„æ¨¡"</span></div><div class="line">        &#125;];</div><div class="line">        <span class="keyword">var</span> tabId = <span class="string">""</span>;</div><div class="line">        $scope.filterObj=&#123;&#125;;</div><div class="line">        $scope.tClick = <span class="function"><span class="keyword">function</span> (<span class="params">id, name</span>) </span>&#123;</div><div class="line">            tabId = id;</div><div class="line">            $scope.sheet.list = dict[id].data;</div><div class="line">            $scope.visible = <span class="literal">true</span>;</div><div class="line">        &#125;;</div><div class="line">        $scope.sClick = <span class="function"><span class="keyword">function</span> (<span class="params">id, name</span>) </span>&#123;</div><div class="line">            <span class="keyword">if</span> (id) &#123;</div><div class="line">                angular.forEach($scope.tabList, <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (item.id === tabId) &#123;</div><div class="line">                        item.name = name;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                $scope.filterObj[tabId+<span class="string">"Id"</span>]=id;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">delete</span> $scope.filterObj[tabId+<span class="string">"Id"</span>];</div><div class="line">                angular.forEach($scope.tabList, <span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</div><div class="line">                    <span class="keyword">if</span> (item.id === tabId) &#123;</div><div class="line">                        <span class="keyword">switch</span> (item.id) &#123;</div><div class="line">                            <span class="keyword">case</span> <span class="string">"city"</span>:</div><div class="line">                                item.name = <span class="string">"åŸå¸‚"</span>;</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                            <span class="keyword">case</span> <span class="string">"salary"</span>:</div><div class="line">                                item.name = <span class="string">"è–ªæ°´"</span>;</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                            <span class="keyword">case</span> <span class="string">"scale"</span>:</div><div class="line">                                item.name = <span class="string">"å…¬å¸è§„æ¨¡"</span>;</div><div class="line">                                <span class="keyword">break</span>;</div><div class="line">                            <span class="keyword">default</span>:</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;]);</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘è´´å‡ºä¸€å¼ æˆ‘åœ¨å›¾ä¾‹ä¸Šçš„è¯´æ˜ï¼Œç›¸ä¿¡ï¼Œä½ å¾ˆå¿«å°±èƒ½çœ‹æ˜ç™½æ€ä¹ˆå›äº‹ï¼Œä½ ä»å“ªå„¿çœ‹éƒ½å¯ä»¥ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œçº¢è‰²çš„æ˜¯ä»æ§åˆ¶å™¨åˆ†å‘æ•°æ®åˆ°æŒ‡ä»¤ï¼Œç»¿è‰²çš„æ˜¯ä»æˆ‘ä»¬çš„æŒ‡ä»¤ä¸­è§¦å‘æˆ‘ä»¬çš„æ§åˆ¶å™¨ä¸­çš„å‡½æ•°ï¼Œè¿™æ ·å­å°±ç®—æ˜¯æŠŠæˆ‘ä»¬çš„æŒ‡ä»¤è¯´å®Œäº†ï¼Œå› ä¸ºæˆ‘ç›¸ä¿¡æ²¡æœ‰æ¯”å®ä¾‹æ¥çš„æ›´å®åœ¨çš„äº†</p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘è¿˜æ˜¯è¯´ä¸€ä¸‹ï¼Œæ–‡ä»¶ç»“æ„å§</p>
<p>tab.htmlæ˜¯tab.jsä¸­å®šä¹‰çš„appTabæŒ‡ä»¤è§†å›¾æ¨¡æ¿</p>
<p>æˆ‘ä»¬åœ¨search.htmlç”¨åˆ°äº†è¿™ä¸ªæŒ‡ä»¤ï¼Œç„¶åsearchCtrlæ˜¯æˆ‘ä»¬çš„searchçš„æ§åˆ¶å™¨</p>
<p><img src="/images/lagou/directiveæ¥å£.png" alt="img"></p>
<p>ä¸Šé¢æˆ‘ä»¬ä¹Ÿè¯´äº†å®é™…åº”ç”¨ä¸­çš„æŒ‡ä»¤æ€ä¹ˆå»ç”¨ä¸‹é¢æˆ‘ä»¬å°±è¯´ä¸€ä¸‹serviceæ€ä¹ˆç”¨</p>
<h4 id="serviceä»¥åŠangular-cookieçš„ä½¿ç”¨"><a href="#serviceä»¥åŠangular-cookieçš„ä½¿ç”¨" class="headerlink" title="serviceä»¥åŠangular-cookieçš„ä½¿ç”¨"></a>serviceä»¥åŠangular-cookieçš„ä½¿ç”¨</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line">angular.module(<span class="string">"app"</span>).service(<span class="string">"cache"</span>, [<span class="string">"$cookies"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$cookies</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.put = <span class="function"><span class="keyword">function</span> (<span class="params">key, val</span>) </span>&#123;</div><div class="line">        $cookies.put(key, val);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">this</span>.get = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> $cookies.get(key);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">this</span>.remove = <span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</div><div class="line">        $cookies.remove(key);</div><div class="line">    &#125;;</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<p>è¿™ä¸€æ­¥å°±okäº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åé¢ç›´æ¥ç”¨serviceä¸­çš„cookieæ¥ç¼“å­˜æˆ‘ä»¬çš„ç™»é™†ä¿¡æ¯äº†</p>
<p>è‡ªå®šä¹‰æœåŠ¡ä¸ä»…èƒ½åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æŒ‡ä»¤ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå’Œæˆ‘ä»¬çš„angularå†…ç½®æœåŠ¡ç”¨æ³•ä¸€è‡´</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">æŒ‡ä»¤</div><div class="line"><span class="string">"user strict"</span>;</div><div class="line"></div><div class="line">angular.module(<span class="string">"app"</span>).directive(<span class="string">"appHead"</span>, [<span class="string">"cache"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">cache</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="attr">restrict</span>: <span class="string">"AE"</span>,</div><div class="line">		<span class="attr">replace</span>: <span class="literal">true</span>,</div><div class="line">		<span class="attr">templateUrl</span>: <span class="string">"views/template/header.html"</span>,</div><div class="line">		<span class="attr">link</span>:<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">			$scope.name=cache.get(<span class="string">"name"</span>)||<span class="string">""</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">æ§åˆ¶å™¨</div><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"></div><div class="line">angular.module(<span class="string">"app"</span>)</div><div class="line">    .controller(<span class="string">"positionCtrl"</span>, [</div><div class="line">        <span class="string">"$q"</span>,</div><div class="line">        <span class="string">"$http"</span>,</div><div class="line">        <span class="string">"$state"</span>,</div><div class="line">        <span class="string">"$scope"</span>,</div><div class="line">        <span class="string">"cache"</span>,</div><div class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">$q, $http, $state, $scope, cache</span>) </span>&#123;</div><div class="line">            $scope.isLogin = <span class="literal">false</span>;</div><div class="line">            $scope.isLogin = cache.get(<span class="string">"name"</span>);</div><div class="line"></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> def = $q.defer();</div><div class="line">                $http.get(<span class="string">"data/position.json?id="</span> + $state.params.id).then(<span class="function"><span class="keyword">function</span> (<span class="params">resp</span>) </span>&#123;</div><div class="line">                    $scope.position = resp.data;</div><div class="line">                    def.resolve(resp.data);</div><div class="line">                &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</div><div class="line">                    def.reject(err);</div><div class="line">                &#125;);</div><div class="line">                <span class="keyword">return</span> def.promise;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="function"><span class="keyword">function</span> <span class="title">getCompany</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">                $http.get(<span class="string">"data/company.json?id="</span> + id).then(<span class="function"><span class="keyword">function</span> (<span class="params">resp</span>) </span>&#123;</div><div class="line">                    $scope.company = resp.data;</div><div class="line">                &#125;);</div><div class="line">            &#125;</div><div class="line">            getPosition().then(<span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</div><div class="line">                getCompany(obj.companyId);</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            $scope.go = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">if</span> (!$scope.isLogin) $state.go(<span class="string">"login"</span>);</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">    ]);</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸¤å¤©é—²æ¥æ— è¶£ï¼Œå°±è‡ªå·±æ‘¸ç´¢ç€ï¼Œé«˜ä»¿äº†ä¸€æŠŠæŸæ‹›è˜ç½‘ç«™æ‰‹æœºç«¯ï¼Œå…ˆè¯´ä¸€ä¸‹ï¼Œæˆ‘å¹¶ä¸ä¼šæŠŠè¿™ä¸ªé¡¹ç›®è¿›è¡Œå‰–æï¼Œæˆ‘åªä¼šè¿›è¡Œè®°å½•ä¸€èˆ¬çš„é—®é¢˜ï¼Œå…·ä½“çš„ä½ å¯ä»¥å»æˆ‘çš„githubä¸Šé¢è¿›è¡Œforkï¼Œç„¶åè‡ªå·±ç ”ç©¶&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MongoDBçš„å®‰è£…ä»¥åŠè‡ªå¯åŠ¨è¯¦ç»†æ•™ç¨‹</title>
    <link href="http://xuhongbo.com/2017/03/07/nodejs/mongodb/MongoDB/"/>
    <id>http://xuhongbo.com/2017/03/07/nodejs/mongodb/MongoDB/</id>
    <published>2017-03-06T17:57:20.000Z</published>
    <updated>2017-03-07T02:14:25.099Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆè¯´ä¸€ä¸‹ï¼Œæˆ‘å†™è¿™ç¯‡æ–‡ç« çš„èƒŒæ™¯ï¼Œä¸€ç›´ä»¥æ¥æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆå®è·µçš„ï¼Œé‚£å°±æ˜¯æ‡’ï¼Œå—¯ï¼Œå¯¹ï¼Œå°±æ˜¯æ‡’ï¼Œä¹‹å‰æˆ‘è‡ªå·±é…è¿‡è¿™ä¸ªmongodbï¼Œæœ€è¿‘ç”µè„‘é‡è£…äº†ï¼Œç„¶åæˆ‘æœ‰ä¸ªæ­¥éª¤å¿˜è®°äº†ï¼Œç„¶åå»ç½‘ä¸ŠæŸ¥è¯¢èµ„æ–™ï¼Œæƒ³æ”¹æˆè‡ªå¯åŠ¨ï¼Œå¯æ˜¯æˆ‘å‘ç°ç½‘ä¸Šçš„æ•™ç¨‹æ²¡æœ‰ä¸€ç¯‡èƒ½æŠŠå®ƒè¯´æ¸…æ¥šçš„ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠè¿™ä¸ªæ•™ç¨‹å†™äº†ä¸‹æ¥ï¼Œä¾›å¤§å®¶å‚è€ƒ</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åä¸½çš„åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p>
<p>MongoDBæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”±<a href="http://baike.baidu.com/view/824.htm" target="_blank" rel="external">C++</a>è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p>
<p>MongoDB[][ ]æ˜¯ä¸€ä¸ªä»‹äº<a href="http://baike.baidu.com/view/68348.htm" target="_blank" rel="external">å…³ç³»æ•°æ®åº“</a>å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚ä»–æ”¯æŒçš„æ•°æ®ç»“æ„éå¸¸æ¾æ•£ï¼Œæ˜¯ç±»ä¼¼<a href="http://baike.baidu.com/view/136475.htm" target="_blank" rel="external">json</a>çš„<a href="http://baike.baidu.com/view/3463259.htm" target="_blank" rel="external">bson</a>æ ¼å¼ï¼Œå› æ­¤å¯ä»¥å­˜å‚¨æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç±»å‹ã€‚Mongoæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä»–æ”¯æŒçš„æŸ¥è¯¢è¯­è¨€éå¸¸å¼ºå¤§ï¼Œå…¶è¯­æ³•æœ‰ç‚¹ç±»ä¼¼äºé¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå‡ ä¹å¯ä»¥å®ç°ç±»ä¼¼å…³ç³»æ•°æ®åº“å•è¡¨æŸ¥è¯¢çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ”¯æŒå¯¹æ•°æ®å»ºç«‹<a href="http://baike.baidu.com/view/262241.htm" target="_blank" rel="external">ç´¢å¼•</a>ã€‚</p>
<a id="more"></a>
<p>é¦–å…ˆæˆ‘ä»¬è¦å»ä¸‹è½½æˆ‘ä»¬çš„mongodbçš„zipåŒ…ï¼Œä¸çŸ¥é“ä½ ä»¬è¦ä¸‹è½½ä»€ä¹ˆï¼Œåæ­£æˆ‘æ˜¯ä¸‹è½½çš„zipï¼Œå› ä¸ºè¿™ä¸ªæ¯”è¾ƒçµæ´»ï¼Œåªéœ€è¦è§£å‹å°±OKäº†ï¼Œï¼ˆè®°ä½å“ˆï¼Œæ˜¯zipæ ¼å¼ï¼‰    <a href="https://www.mongodb.com/" target="_blank" rel="external">ä¼ é€é—¨</a></p>
<p><img src="/images/MongoDB/mdb16.png" alt="img"></p>
<p><img src="/images/MongoDB/mdb17.png" alt="img"></p>
<p>ç„¶åæŠŠä»–è§£å‹åˆ°æˆ‘ä»¬ç”µè„‘çš„æŸä¸€ä¸ªç›˜ç¬¦çš„æ ¹ç›®å½•è­¬å¦‚æˆ‘è¿™æ · æŠŠå®ƒæ”¾åœ¨Dç›˜æ ¹ç›®å½•</p>
<p><img src="/images/MongoDB/mdb15.png" alt="img"></p>
<p>å½“æˆ‘ä»¬æŠŠè¿™äº›å‡†å¤‡å¥½ä»¥åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æˆ‘ä»¬mongodbçš„ç›®å½•ä¸‹ï¼Œå»ºç«‹ä¸€ä¸ªdataçš„ç›®å½•ï¼ˆå…ˆä¸è¦ç®¡é‚£ä¸ªmongo.configï¼‰</p>
<p><img src="/images/MongoDB/mdb1.png" alt="img"></p>
<p>åé¢æˆ‘ä»¬åªéœ€è¦åœ¨dataä¸­å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹å«dbè¿˜æœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹å«log</p>
<p><img src="/images/MongoDB/mdb2.png" alt="img"></p>
<p>è¿˜æœ‰ä¸‹é¢æˆ‘ä»¬è¦åœ¨æˆ‘ä»¬çš„logæ–‡ä»¶å¤¹ä¸­å»ºç«‹ä¸€ä¸ªmongodb.logæ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œä¸ç”¨å¡«ä»»ä½•çš„ä¸œè¥¿</p>
<p><img src="/images/MongoDB/mdb3.png" alt="img"></p>
<p>ä¸‹é¢æˆ‘ä»¬åªéœ€è¦æŠŠæˆ‘ä»¬çš„mongodbåŠ å…¥æˆ‘ä»¬çš„pathç›®å½•ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç³»ç»Ÿçš„ä»»ä½•åœ°æ–¹å¯åŠ¨æˆ‘ä»¬çš„mongodbäº†</p>
<p><img src="/images/MongoDB/mdb4.png" alt="img"></p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨æˆ‘ä»¬çš„æ•°æ®åº“äº†ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æŒ‡å®šæˆ‘ä»¬çš„æ•°æ®åº“å­˜å‚¨åœ°å€ï¼Œä¸Šé¢æˆ‘ä»¬å»ºçš„çš„dataé‡Œé¢çš„db</p>
<p>æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥äº†ï¼Œå…¶å®åœ¨ä½ æ‰§è¡Œäº†ä¸Šé¢ä¸€æ­¥ä¹‹åï¼Œå¹¶ä¸éœ€è¦è·³è½¬åˆ°binç›®å½•ä¸‹ï¼Œä¹Ÿä¾ç„¶å¯ä»¥æ‰§è¡Œæˆ‘ä»¬çš„mongodå‘½ä»¤ï¼Œåé¢çš„<code>--dbpath D:\mongodb\data\db</code>åƒä¸‡ä¸èƒ½å¿˜ï¼Œè¿™æ˜¯æŒ‡å®šæˆ‘ä»¬çš„æ•°æ®å­˜å‚¨åœ°å€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">D:/mongodb/bin&gt;mongod --dbpath D:\mongodb\data\db</div><div class="line">D:\                                  </div><div class="line">Î» cd mongodb\bin\                                                    </div><div class="line">D:\mongodb\bin                       </div><div class="line">Î» mongod --dbpath D:\mongodb\data\db</div></pre></td></tr></table></figure>
<p><img src="/images/MongoDB/mdb13.png" alt="img"></p>
<p>å°±è¿™æ ·å­ï¼Œæˆ‘ä»¬å°±åœ¨æœ¬åœ°å®‰è£…å¥½äº†æˆ‘ä»¬çš„mongodb</p>
<h3 id="ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ã€‚ã€‚ã€‚"><a href="#ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ã€‚ã€‚ã€‚" class="headerlink" title="ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ã€‚ã€‚ã€‚"></a>ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ã€‚ã€‚ã€‚</h3><p>å¦‚æœçœŸçš„è¿™æ ·å­çš„è¯ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦åœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¼€å¯æˆ‘ä»¬çš„cmdç„¶åè¾“å…¥æˆ‘ä»¬çš„mongodç„¶åä¸€ç›´å¼€ç€æˆ‘ä»¬çš„cmdçª—å£æ‰è¡Œï¼Œè¿™æ ·å­å¾ˆä¸æ–¹ä¾¿å¥½å—ï¼Œå¦‚æœçœŸçš„è¿™æ ·å­å°±å®Œäº‹äº†ï¼Œæˆ‘å°±ä¸å†™è¿™ç¯‡æ–‡ç« äº†ã€‚æ—¢ç„¶ä½ æ˜¯ä¸€åå¼€å‘è€…ï¼Œå°±è‚¯å®šçŸ¥é“ç³»ç»ŸæœåŠ¡è¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠæˆ‘ä»¬çš„mongodbæœåŠ¡åŠ å…¥åˆ°æˆ‘ä»¬çš„ç³»ç»ŸæœåŠ¡ä¸­ï¼Œç„¶ååœ¨å¼€æœºçš„æ—¶å€™ï¼Œè‡ªåŠ¨å¼€å¯æˆ‘ä»¬çš„mongodbï¼Œè¿™æ ·å­å°±å¾ˆæ–¹ä¾¿äº†ã€‚</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“</p>
<p>ä¸‹é¢æˆ‘å°±å¸¦ç€ä½ ï¼ŒæŠŠæˆ‘ä»¬çš„mongodbåŠ åˆ°æˆ‘ä»¬çš„ç³»ç»ŸæœåŠ¡ä¸­</p>
<p>é¦–å…ˆå‘¢ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„mongodbæ ¹ç›®å½•ä¸‹ï¼Œå»ºç«‹ä¸€ä¸ª<code>mongo.config</code></p>
<p><img src="/images/MongoDB/mdb5.png" alt="img"></p>
<p>ç„¶ååœ¨æ–‡ä»¶ä¸­å†™å…¥æˆ‘ä»¬çš„mongodb.logçš„ç›®å½•ï¼Œä»¥åŠæˆ‘ä»¬çš„dbçš„ç›®å½•ï¼Œå¦‚ä¸‹ï¼ˆæ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µæ¥å¡«å†™ä¸‹é¢çš„è·¯å¾„ï¼‰</p>
<p><img src="/images/MongoDB/mdb6.png" alt="img"></p>
<p>å†ç„¶åæˆ‘ä»¬åœ¨æˆ‘ä»¬çš„cmdä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œå¯æ˜¯ä½ è¦æ ¹æ®è‡ªå·±çš„å®é™…ç›®å½•æ¥æ”¹å˜è‡ªå·±çš„å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongod --config D:\mongodb\mongo.config --install --serviceName &quot;MongoDB&quot;</div></pre></td></tr></table></figure>
<p><img src="/images/MongoDB/mdb8.png" alt="img"></p>
<p>å¦‚æœåœ¨æˆ‘ä»¬çš„mongodb.logä¸­çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼Œå—¯ï¼Œä½ å°±æˆåŠŸäº†</p>
<p><img src="/images/MongoDB/mdb14.png" alt="img"></p>
<p>ä¸‹é¢æˆ‘ä»¬åœ¨cmdæˆ–è€…<code>win+R</code>è¾“å…¥ä»¥ä¸‹å‘½ä»¤<code>services.msc</code>ï¼Œæ¥æ‰“å¼€æˆ‘ä»¬çš„æœåŠ¡åˆ—è¡¨</p>
<p><img src="/images/MongoDB/mdb9.png" alt="img"></p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°è¿™äº›ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„mongodbæœåŠ¡äº†</p>
<p><img src="/images/MongoDB/mdb10.png" alt="img"></p>
<p>ç„¶åæˆ‘ä»¬å³é”®è¿›å…¥å±æ€§ï¼ŒæŠŠå¯åŠ¨é¡¹æ”¹ä¸ºè‡ªåŠ¨</p>
<p><img src="/images/MongoDB/mdb11.png" alt="img"></p>
<p>ç„¶ååœ¨å›åˆ°ä¸Šä¸€çº§ï¼ŒæŠŠæˆ‘ä»¬çš„æœåŠ¡å¯åŠ¨äº†ï¼Œå°±ç®—æ­£å¼å®Œæˆäº†ï¼Œå™¢è€¶</p>
<p><img src="/images/MongoDB/mdb12.png" alt="img"></p>
<p>è‡³æ­¤æˆ‘ä»¬çš„mongodbå°±ç®—æ˜¯çœŸçš„å®‰è£…ä»¥åŠå¯ä»¥è‡ªå¯åŠ¨äº†ï¼Œå†ä¹Ÿä¸ç”¨å»çœ‹ç€é»‘é»‘çš„dosäº†</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¦–å…ˆè¯´ä¸€ä¸‹ï¼Œæˆ‘å†™è¿™ç¯‡æ–‡ç« çš„èƒŒæ™¯ï¼Œä¸€ç›´ä»¥æ¥æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆå®è·µçš„ï¼Œé‚£å°±æ˜¯æ‡’ï¼Œå—¯ï¼Œå¯¹ï¼Œå°±æ˜¯æ‡’ï¼Œä¹‹å‰æˆ‘è‡ªå·±é…è¿‡è¿™ä¸ªmongodbï¼Œæœ€è¿‘ç”µè„‘é‡è£…äº†ï¼Œç„¶åæˆ‘æœ‰ä¸ªæ­¥éª¤å¿˜è®°äº†ï¼Œç„¶åå»ç½‘ä¸ŠæŸ¥è¯¢èµ„æ–™ï¼Œæƒ³æ”¹æˆè‡ªå¯åŠ¨ï¼Œå¯æ˜¯æˆ‘å‘ç°ç½‘ä¸Šçš„æ•™ç¨‹æ²¡æœ‰ä¸€ç¯‡èƒ½æŠŠå®ƒè¯´æ¸…æ¥šçš„ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠè¿™ä¸ªæ•™ç¨‹å†™äº†ä¸‹æ¥ï¼Œä¾›å¤§å®¶å‚è€ƒ&lt;/p&gt;
&lt;p&gt;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åä¸½çš„åˆ†å‰²çº¿â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-&lt;/p&gt;
&lt;p&gt;MongoDBæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”±&lt;a href=&quot;http://baike.baidu.com/view/824.htm&quot;&gt;C++&lt;/a&gt;è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸ºWEBåº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;MongoDB[][ ]æ˜¯ä¸€ä¸ªä»‹äº&lt;a href=&quot;http://baike.baidu.com/view/68348.htm&quot;&gt;å…³ç³»æ•°æ®åº“&lt;/a&gt;å’Œéå…³ç³»æ•°æ®åº“ä¹‹é—´çš„äº§å“ï¼Œæ˜¯éå…³ç³»æ•°æ®åº“å½“ä¸­åŠŸèƒ½æœ€ä¸°å¯Œï¼Œæœ€åƒå…³ç³»æ•°æ®åº“çš„ã€‚ä»–æ”¯æŒçš„æ•°æ®ç»“æ„éå¸¸æ¾æ•£ï¼Œæ˜¯ç±»ä¼¼&lt;a href=&quot;http://baike.baidu.com/view/136475.htm&quot;&gt;json&lt;/a&gt;çš„&lt;a href=&quot;http://baike.baidu.com/view/3463259.htm&quot;&gt;bson&lt;/a&gt;æ ¼å¼ï¼Œå› æ­¤å¯ä»¥å­˜å‚¨æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç±»å‹ã€‚Mongoæœ€å¤§çš„ç‰¹ç‚¹æ˜¯ä»–æ”¯æŒçš„æŸ¥è¯¢è¯­è¨€éå¸¸å¼ºå¤§ï¼Œå…¶è¯­æ³•æœ‰ç‚¹ç±»ä¼¼äºé¢å‘å¯¹è±¡çš„æŸ¥è¯¢è¯­è¨€ï¼Œå‡ ä¹å¯ä»¥å®ç°ç±»ä¼¼å…³ç³»æ•°æ®åº“å•è¡¨æŸ¥è¯¢çš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè€Œä¸”è¿˜æ”¯æŒå¯¹æ•°æ®å»ºç«‹&lt;a href=&quot;http://baike.baidu.com/view/262241.htm&quot;&gt;ç´¢å¼•&lt;/a&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JavaScript API åˆé›†</title>
    <link href="http://xuhongbo.com/2017/03/05/JavaScript/JavaScript%20API/"/>
    <id>http://xuhongbo.com/2017/03/05/JavaScript/JavaScript API/</id>
    <published>2017-03-05T14:57:30.000Z</published>
    <updated>2017-04-01T08:56:34.802Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨æ˜é‡‘ä¸Šçœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œæ„Ÿè§‰æŒºä¸é”™çš„ï¼Œç„¶åæ”¶é›†ä¸‹æ¥ï¼Œä»¥ä¾›ä»¥åè¿›è¡ŒæŸ¥é˜…ï¼Œå†æ¬¡æ„Ÿè°¢å¤§ç¥æ€»ç»“çš„APIæ–‡æ¡£</p>
<a id="more"></a>
<p><strong>ä¸€ã€èŠ‚ç‚¹</strong></p>
<p><strong>1.1 èŠ‚ç‚¹å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">Node.nodeName   <span class="comment">//è¿”å›èŠ‚ç‚¹åç§°ï¼Œåªè¯»</span></div><div class="line">Node.nodeType   <span class="comment">//è¿”å›èŠ‚ç‚¹ç±»å‹çš„å¸¸æ•°å€¼ï¼Œåªè¯»</span></div><div class="line">Node.nodeValue  <span class="comment">//è¿”å›Textæˆ–CommentèŠ‚ç‚¹çš„æ–‡æœ¬å€¼ï¼Œåªè¯»</span></div><div class="line">Node.textContent  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹å’Œå®ƒçš„æ‰€æœ‰åä»£èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œå¯è¯»å†™</span></div><div class="line">Node.baseURI    <span class="comment">//è¿”å›å½“å‰ç½‘é¡µçš„ç»å¯¹è·¯å¾„</span></div><div class="line"></div><div class="line">Node.ownerDocument  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹æ‰€åœ¨çš„é¡¶å±‚æ–‡æ¡£å¯¹è±¡ï¼Œå³document</span></div><div class="line">Node.nextSibling  <span class="comment">//è¿”å›ç´§è·Ÿåœ¨å½“å‰èŠ‚ç‚¹åé¢çš„ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span></div><div class="line">Node.previousSibling  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹å‰é¢çš„ã€è·ç¦»æœ€è¿‘çš„ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span></div><div class="line">Node.parentNode   <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span></div><div class="line">Node.parentElement  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„çˆ¶ElementèŠ‚ç‚¹</span></div><div class="line">Node.childNodes   <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹</span></div><div class="line">Node.firstChild  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span></div><div class="line">Node.lastChild   <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹</span></div><div class="line"></div><div class="line"><span class="comment">//parentNodeæ¥å£</span></div><div class="line">Node.children  <span class="comment">//è¿”å›æŒ‡å®šèŠ‚ç‚¹çš„æ‰€æœ‰Elementå­èŠ‚ç‚¹</span></div><div class="line">Node.firstElementChild  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªElementå­èŠ‚ç‚¹</span></div><div class="line">Node.lastElementChild   <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªElementå­èŠ‚ç‚¹</span></div><div class="line">Node.childElementCount  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹æ‰€æœ‰Elementå­èŠ‚ç‚¹çš„æ•°ç›®ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>1.2 æ“ä½œ</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">Node.appendChild(node)   <span class="comment">//å‘èŠ‚ç‚¹æ·»åŠ æœ€åä¸€ä¸ªå­èŠ‚ç‚¹</span></div><div class="line">Node.hasChildNodes()   <span class="comment">//è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰å­èŠ‚ç‚¹</span></div><div class="line">Node.cloneNode(<span class="literal">true</span>);  <span class="comment">// é»˜è®¤ä¸ºfalse(å…‹éš†èŠ‚ç‚¹), true(å…‹éš†èŠ‚ç‚¹åŠå…¶å±æ€§ï¼Œä»¥åŠåä»£)</span></div><div class="line">Node.insertBefore(newNode,oldNode)  <span class="comment">// åœ¨æŒ‡å®šå­èŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°çš„å­èŠ‚ç‚¹</span></div><div class="line">Node.removeChild(node)   <span class="comment">//åˆ é™¤èŠ‚ç‚¹ï¼Œåœ¨è¦åˆ é™¤èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸Šæ“ä½œ</span></div><div class="line">Node.replaceChild(newChild,oldChild)  <span class="comment">//æ›¿æ¢èŠ‚ç‚¹</span></div><div class="line">Node.contains(node)  <span class="comment">//è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°èŠ‚ç‚¹æ˜¯å¦ä¸ºå½“å‰èŠ‚ç‚¹çš„åä»£èŠ‚ç‚¹ã€‚</span></div><div class="line">Node.compareDocumentPosition(node)   <span class="comment">//è¿”å›ä¸€ä¸ª7ä¸ªæ¯”ç‰¹ä½çš„äºŒè¿›åˆ¶å€¼ï¼Œè¡¨ç¤ºå‚æ•°èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„å…³ç³»</span></div><div class="line">Node.isEqualNode(noe)  <span class="comment">//è¿”å›å¸ƒå°”å€¼ï¼Œç”¨äºæ£€æŸ¥ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ã€‚æ‰€è°“ç›¸ç­‰çš„èŠ‚ç‚¹ï¼ŒæŒ‡çš„æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹çš„ç±»å‹ç›¸åŒã€å±æ€§ç›¸åŒã€å­èŠ‚ç‚¹ç›¸åŒã€‚</span></div><div class="line">Node.normalize()   <span class="comment">//ç”¨äºæ¸…ç†å½“å‰èŠ‚ç‚¹å†…éƒ¨çš„æ‰€æœ‰TextèŠ‚ç‚¹ã€‚å®ƒä¼šå»é™¤ç©ºçš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¹¶ä¸”å°†æ¯—é‚»çš„æ–‡æœ¬èŠ‚ç‚¹åˆå¹¶æˆä¸€ä¸ªã€‚</span></div><div class="line"></div><div class="line"><span class="comment">//ChildNodeæ¥å£</span></div><div class="line">Node.remove()  <span class="comment">//ç”¨äºåˆ é™¤å½“å‰èŠ‚ç‚¹</span></div><div class="line">Node.before()  <span class="comment">//</span></div><div class="line">Node.after()</div><div class="line">Node.replaceWith()</div></pre></td></tr></table></figure>
<p><strong>1.3 DocumentèŠ‚ç‚¹</strong></p>
<p><strong>1.3.1 DocumentèŠ‚ç‚¹çš„å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.doctype   <span class="comment">//</span></div><div class="line"><span class="built_in">document</span>.documentElement  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„æ ¹èŠ‚ç‚¹</span></div><div class="line"><span class="built_in">document</span>.defaultView   <span class="comment">//è¿”å›documentå¯¹è±¡æ‰€åœ¨çš„windowå¯¹è±¡</span></div><div class="line"><span class="built_in">document</span>.body   <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„&lt;body&gt;èŠ‚ç‚¹</span></div><div class="line"><span class="built_in">document</span>.head   <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„&lt;head&gt;èŠ‚ç‚¹</span></div><div class="line"><span class="built_in">document</span>.activeElement  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£ä¸­è·å¾—ç„¦ç‚¹çš„é‚£ä¸ªå…ƒç´ ã€‚</span></div><div class="line"></div><div class="line"><span class="comment">//èŠ‚ç‚¹é›†åˆå±æ€§</span></div><div class="line"><span class="built_in">document</span>.links  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„æ‰€æœ‰aå…ƒç´ </span></div><div class="line"><span class="built_in">document</span>.forms  <span class="comment">//è¿”å›é¡µé¢ä¸­æ‰€æœ‰è¡¨å•å…ƒç´ </span></div><div class="line"><span class="built_in">document</span>.images  <span class="comment">//è¿”å›é¡µé¢ä¸­æ‰€æœ‰å›¾ç‰‡å…ƒç´ </span></div><div class="line"><span class="built_in">document</span>.embeds  <span class="comment">//è¿”å›ç½‘é¡µä¸­æ‰€æœ‰åµŒå…¥å¯¹è±¡</span></div><div class="line"><span class="built_in">document</span>.scripts  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„æ‰€æœ‰è„šæœ¬</span></div><div class="line"><span class="built_in">document</span>.styleSheets  <span class="comment">//è¿”å›å½“å‰ç½‘é¡µçš„æ‰€æœ‰æ ·å¼è¡¨</span></div><div class="line"></div><div class="line"><span class="comment">//æ–‡æ¡£ä¿¡æ¯å±æ€§</span></div><div class="line"><span class="built_in">document</span>.documentURI  <span class="comment">//è¡¨ç¤ºå½“å‰æ–‡æ¡£çš„ç½‘å€</span></div><div class="line"><span class="built_in">document</span>.URL  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„ç½‘å€</span></div><div class="line"><span class="built_in">document</span>.domain  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„åŸŸå</span></div><div class="line"><span class="built_in">document</span>.lastModified  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£æœ€åä¿®æ”¹çš„æ—¶é—´æˆ³</span></div><div class="line"><span class="built_in">document</span>.location  <span class="comment">//è¿”å›locationå¯¹è±¡ï¼Œæä¾›å½“å‰æ–‡æ¡£çš„URLä¿¡æ¯</span></div><div class="line"><span class="built_in">document</span>.referrer  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„è®¿é—®æ¥æº</span></div><div class="line"><span class="built_in">document</span>.title    <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„æ ‡é¢˜</span></div><div class="line"><span class="built_in">document</span>.characterSetå±æ€§è¿”å›æ¸²æŸ“å½“å‰æ–‡æ¡£çš„å­—ç¬¦é›†ï¼Œæ¯”å¦‚UTF<span class="number">-8</span>ã€ISO<span class="number">-8859</span><span class="number">-1</span>ã€‚</div><div class="line"><span class="built_in">document</span>.readyState  <span class="comment">//è¿”å›å½“å‰æ–‡æ¡£çš„çŠ¶æ€</span></div><div class="line"><span class="built_in">document</span>.designMode  <span class="comment">//æ§åˆ¶å½“å‰æ–‡æ¡£æ˜¯å¦å¯ç¼–è¾‘ï¼Œå¯è¯»å†™</span></div><div class="line"><span class="built_in">document</span>.compatMode  <span class="comment">//è¿”å›æµè§ˆå™¨å¤„ç†æ–‡æ¡£çš„æ¨¡å¼</span></div><div class="line"><span class="built_in">document</span>.cookie   <span class="comment">//ç”¨æ¥æ“ä½œCookie</span></div></pre></td></tr></table></figure>
<p><strong>1.3.2 DocumentèŠ‚ç‚¹çš„æ–¹æ³•</strong></p>
<p><strong>ï¼ˆ1ï¼‰è¯»å†™æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.open()   <span class="comment">//ç”¨äºæ–°å»ºå¹¶æ‰“å¼€ä¸€ä¸ªæ–‡æ¡£</span></div><div class="line"><span class="built_in">document</span>.close()   <span class="comment">//ä¸å®‰æ¯”openæ–¹æ³•æ‰€æ–°å»ºçš„æ–‡æ¡£</span></div><div class="line"><span class="built_in">document</span>.write()   <span class="comment">//ç”¨äºå‘å½“å‰æ–‡æ¡£å†™å…¥å†…å®¹</span></div><div class="line"><span class="built_in">document</span>.writeIn()  <span class="comment">//ç”¨äºå‘å½“å‰æ–‡æ¡£å†™å…¥å†…å®¹ï¼Œå°¾éƒ¨æ·»åŠ æ¢è¡Œç¬¦ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰æŸ¥æ‰¾èŠ‚ç‚¹</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.querySelector(selectors)   <span class="comment">//æ¥å—ä¸€ä¸ªCSSé€‰æ‹©å™¨ä½œä¸ºå‚æ•°ï¼Œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…è¯¥é€‰æ‹©å™¨çš„å…ƒç´ èŠ‚ç‚¹ã€‚</span></div><div class="line"><span class="built_in">document</span>.querySelectorAll(selectors)  <span class="comment">//æ¥å—ä¸€ä¸ªCSSé€‰æ‹©å™¨ä½œä¸ºå‚æ•°ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…è¯¥é€‰æ‹©å™¨çš„å…ƒç´ èŠ‚ç‚¹ã€‚</span></div><div class="line"><span class="built_in">document</span>.getElementsByTagName(tagName)  <span class="comment">//è¿”å›æ‰€æœ‰æŒ‡å®šHTMLæ ‡ç­¾çš„å…ƒç´ </span></div><div class="line"><span class="built_in">document</span>.getElementsByClassName(className)   <span class="comment">//è¿”å›åŒ…æ‹¬äº†æ‰€æœ‰classåå­—ç¬¦åˆæŒ‡å®šæ¡ä»¶çš„å…ƒç´ </span></div><div class="line"><span class="built_in">document</span>.getElementsByName(name)   <span class="comment">//ç”¨äºé€‰æ‹©æ‹¥æœ‰nameå±æ€§çš„HTMLå…ƒç´ ï¼ˆæ¯”å¦‚&lt;form&gt;ã€&lt;radio&gt;ã€&lt;img&gt;ã€&lt;frame&gt;ã€&lt;embed&gt;å’Œ&lt;object&gt;ç­‰ï¼‰</span></div><div class="line"><span class="built_in">document</span>.getElementById(id)   <span class="comment">//è¿”å›åŒ¹é…æŒ‡å®šidå±æ€§çš„å…ƒç´ èŠ‚ç‚¹ã€‚</span></div><div class="line"><span class="built_in">document</span>.elementFromPoint(x,y)  <span class="comment">//è¿”å›ä½äºé¡µé¢æŒ‡å®šä½ç½®æœ€ä¸Šå±‚çš„Elementå­èŠ‚ç‚¹ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ3ï¼‰ç”ŸæˆèŠ‚ç‚¹</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.createElement(tagName)   <span class="comment">//ç”¨æ¥ç”ŸæˆHTMLå…ƒç´ èŠ‚ç‚¹ã€‚</span></div><div class="line"><span class="built_in">document</span>.createTextNode(text)   <span class="comment">//ç”¨æ¥ç”Ÿæˆæ–‡æœ¬èŠ‚ç‚¹</span></div><div class="line"><span class="built_in">document</span>.createAttribute(name)  <span class="comment">//ç”Ÿæˆä¸€ä¸ªæ–°çš„å±æ€§å¯¹è±¡èŠ‚ç‚¹ï¼Œå¹¶è¿”å›å®ƒã€‚</span></div><div class="line"><span class="built_in">document</span>.createDocumentFragment()  <span class="comment">//ç”Ÿæˆä¸€ä¸ªDocumentFragmentå¯¹è±¡</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ4ï¼‰äº‹ä»¶æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.createEvent(type)   <span class="comment">//ç”Ÿæˆä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œè¯¥å¯¹è±¡èƒ½è¢«element.dispatchEvent()æ–¹æ³•ä½¿ç”¨</span></div><div class="line"><span class="built_in">document</span>.addEventListener(type,listener,capture)  <span class="comment">//æ³¨å†Œäº‹ä»¶</span></div><div class="line"><span class="built_in">document</span>.removeEventListener(type,listener,capture)  <span class="comment">//æ³¨é”€äº‹ä»¶</span></div><div class="line"><span class="built_in">document</span>.dispatchEvent(event)  <span class="comment">//è§¦å‘äº‹ä»¶</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ5ï¼‰å…¶ä»–</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">document</span>.hasFocus()   <span class="comment">//è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰æ–‡æ¡£ä¹‹ä¸­æ˜¯å¦æœ‰å…ƒç´ è¢«æ¿€æ´»æˆ–è·å¾—ç„¦ç‚¹ã€‚</span></div><div class="line"><span class="built_in">document</span>.adoptNode(externalNode)  <span class="comment">//å°†æŸä¸ªèŠ‚ç‚¹ï¼Œä»å…¶åŸæ¥æ‰€åœ¨çš„æ–‡æ¡£ç§»é™¤ï¼Œæ’å…¥å½“å‰æ–‡æ¡£ï¼Œå¹¶è¿”å›æ’å…¥åçš„æ–°èŠ‚ç‚¹ã€‚</span></div><div class="line"><span class="built_in">document</span>.importNode(externalNode, deep)   <span class="comment">//ä»å¤–éƒ¨æ–‡æ¡£æ‹·è´æŒ‡å®šèŠ‚ç‚¹ï¼Œæ’å…¥å½“å‰æ–‡æ¡£ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>1.4 ElementèŠ‚ç‚¹</strong></p>
<p><strong>1.4.1 ElementèŠ‚ç‚¹çš„å±æ€§</strong></p>
<p><strong>ï¼ˆ1ï¼‰ç‰¹æ€§å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Element.attributes  <span class="comment">//è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§èŠ‚ç‚¹</span></div><div class="line">Element.id  <span class="comment">//è¿”å›æŒ‡å®šå…ƒç´ çš„idå±æ€§ï¼Œå¯è¯»å†™</span></div><div class="line">Element.tagName  <span class="comment">//è¿”å›æŒ‡å®šå…ƒç´ çš„å¤§å†™æ ‡ç­¾å</span></div><div class="line">Element.innerHTML   <span class="comment">//è¿”å›è¯¥å…ƒç´ åŒ…å«çš„HTMLä»£ç ï¼Œå¯è¯»å†™</span></div><div class="line">Element.outerHTML  <span class="comment">//è¿”å›æŒ‡å®šå…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰HTMLä»£ç ï¼ŒåŒ…æ‹¬å®ƒè‡ªèº«å’ŒåŒ…å«çš„çš„æ‰€æœ‰å­å…ƒç´ ï¼Œå¯è¯»å†™</span></div><div class="line">Element.className  <span class="comment">//è¿”å›å½“å‰å…ƒç´ çš„classå±æ€§ï¼Œå¯è¯»å†™</span></div><div class="line">Element.classList  <span class="comment">//è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰classé›†åˆ</span></div><div class="line">Element.dataset   <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„data-*å±æ€§ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰å°ºå¯¸å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Element.clientHeight   <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹å¯è§éƒ¨åˆ†çš„é«˜åº¦</span></div><div class="line">Element.clientWidth   <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹å¯è§éƒ¨åˆ†çš„å®½åº¦</span></div><div class="line">Element.clientLeft   <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹å·¦è¾¹æ¡†çš„å®½åº¦</span></div><div class="line">Element.clientTop   <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹é¡¶éƒ¨è¾¹æ¡†çš„å®½åº¦</span></div><div class="line">Element.scrollHeight  <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ€»é«˜åº¦</span></div><div class="line">Element.scrollWidth  <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ€»å®½åº¦</span></div><div class="line">Element.scrollLeft   <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹çš„æ°´å¹³æ»šåŠ¨æ¡å‘å³æ»šåŠ¨çš„åƒç´ æ•°å€¼,é€šè¿‡è®¾ç½®è¿™ä¸ªå±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®</span></div><div class="line">Element.scrollTop   <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹çš„å‚ç›´æ»šåŠ¨å‘ä¸‹æ»šåŠ¨çš„åƒç´ æ•°å€¼</span></div><div class="line">Element.offsetHeight   <span class="comment">//è¿”å›å…ƒç´ çš„å‚ç›´é«˜åº¦(åŒ…å«border,padding)</span></div><div class="line">Element.offsetWidth    <span class="comment">//è¿”å›å…ƒç´ çš„æ°´å¹³å®½åº¦(åŒ…å«border,padding)</span></div><div class="line">Element.offsetLeft    <span class="comment">//è¿”å›å½“å‰å…ƒç´ å·¦ä¸Šè§’ç›¸å¯¹äºElement.offsetParentèŠ‚ç‚¹çš„å‚ç›´åç§»</span></div><div class="line">Element.offsetTop   <span class="comment">//è¿”å›æ°´å¹³ä½ç§»</span></div><div class="line">Element.style  <span class="comment">//è¿”å›å…ƒç´ èŠ‚ç‚¹çš„è¡Œå†…æ ·å¼</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ3ï¼‰èŠ‚ç‚¹ç›¸å…³å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Element.children   <span class="comment">//åŒ…æ‹¬å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æ‰€æœ‰å­å…ƒç´ </span></div><div class="line">Element.childElementCount   <span class="comment">//è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹åŒ…å«çš„å­HTMLå…ƒç´ èŠ‚ç‚¹çš„ä¸ªæ•°</span></div><div class="line">Element.firstElementChild  <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªElementå­èŠ‚ç‚¹  </span></div><div class="line">Element.lastElementChild   <span class="comment">//è¿”å›å½“å‰èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªElementå­èŠ‚ç‚¹  </span></div><div class="line">Element.nextElementSibling  <span class="comment">//è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå…„å¼ŸHTMLå…ƒç´ èŠ‚ç‚¹</span></div><div class="line">Element.previousElementSibling  <span class="comment">//è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„å‰ä¸€ä¸ªå…„å¼ŸHTMLèŠ‚ç‚¹</span></div><div class="line">Element.offsetParent   <span class="comment">//è¿”å›å½“å‰å…ƒç´ èŠ‚ç‚¹çš„æœ€é è¿‘çš„ã€å¹¶ä¸”CSSçš„positionå±æ€§ä¸ç­‰äºstaticçš„çˆ¶å…ƒç´ ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>1.4.2 ElementèŠ‚ç‚¹çš„æ–¹æ³•</strong></p>
<p><strong>ï¼ˆ1ï¼‰ä½ç½®æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">getBoundingClientRect()  </div><div class="line"><span class="comment">// getBoundingClientRectè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«top,left,right,bottom,width,height // widthã€height å…ƒç´ è‡ªèº«å®½é«˜</span></div><div class="line"><span class="comment">// top å…ƒç´ ä¸Šå¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»</span></div><div class="line"><span class="comment">// right å…ƒç´ å³å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»</span></div><div class="line"><span class="comment">// bottom å…ƒç´ ä¸‹å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»</span></div><div class="line"><span class="comment">// left å…ƒç´ å·¦å¤–è¾¹ç•Œè·çª—å£æœ€ä¸Šé¢çš„è·ç¦»</span></div><div class="line"><span class="comment">// width å…ƒç´ è‡ªèº«å®½(åŒ…å«border,padding) </span></div><div class="line"><span class="comment">// height å…ƒç´ è‡ªèº«é«˜(åŒ…å«border,padding) </span></div><div class="line"></div><div class="line">getClientRects()   <span class="comment">//è¿”å›å½“å‰å…ƒç´ åœ¨é¡µé¢ä¸Šå½¢å‚çš„æ‰€æœ‰çŸ©å½¢ã€‚</span></div><div class="line"></div><div class="line"><span class="comment">// å…ƒç´ åœ¨é¡µé¢ä¸Šçš„åç§»é‡  </span></div><div class="line"><span class="keyword">var</span> rect = el.getBoundingClientRect()  </div><div class="line"><span class="keyword">return</span> &#123;   </div><div class="line">  <span class="attr">top</span>: rect.top + <span class="built_in">document</span>.body.scrollTop,   </div><div class="line">  <span class="attr">left</span>: rect.left + <span class="built_in">document</span>.body.scrollLeft  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰å±æ€§æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Element.getAttribute()ï¼šè¯»å–æŒ‡å®šå±æ€§  </div><div class="line">Element.setAttribute()ï¼šè®¾ç½®æŒ‡å®šå±æ€§  </div><div class="line">Element.hasAttribute()ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“å‰å…ƒç´ èŠ‚ç‚¹æ˜¯å¦æœ‰æŒ‡å®šçš„å±æ€§  </div><div class="line">Element.removeAttribute()ï¼šç§»é™¤æŒ‡å®šå±æ€§</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ3ï¼‰æŸ¥æ‰¾æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Element.querySelector()  </div><div class="line">Element.querySelectorAll()  </div><div class="line">Element.getElementsByTagName()  </div><div class="line">Element.getElementsByClassName()</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ4ï¼‰äº‹ä»¶æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">Element.addEventListener()ï¼šæ·»åŠ äº‹ä»¶çš„å›è°ƒå‡½æ•°  </div><div class="line">Element.removeEventListener()ï¼šç§»é™¤äº‹ä»¶ç›‘å¬å‡½æ•°  </div><div class="line">Element.dispatchEvent()ï¼šè§¦å‘äº‹ä»¶</div><div class="line"></div><div class="line"><span class="comment">//ie8</span></div><div class="line">Element.attachEvent(oneventName,listener)</div><div class="line">Element.detachEvent(oneventName,listener)</div><div class="line"></div><div class="line"><span class="comment">// eventå¯¹è±¡  </span></div><div class="line"><span class="keyword">var</span> event = <span class="built_in">window</span>.event||event;    </div><div class="line"></div><div class="line"><span class="comment">// äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹  </span></div><div class="line"><span class="keyword">var</span> target = event.target || event.srcElement;</div><div class="line"></div><div class="line"><span class="comment">// äº‹ä»¶ä»£ç†  </span></div><div class="line">ul.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;   </div><div class="line">  <span class="keyword">if</span> (event.target.tagName.toLowerCase() === <span class="string">'li'</span>) &#123;   </div><div class="line">    <span class="built_in">console</span>.log(event.target.innerHTML)   </div><div class="line">  &#125;  </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ5ï¼‰å…¶ä»–</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Element.scrollIntoView()   <span class="comment">//æ»šåŠ¨å½“å‰å…ƒç´ ï¼Œè¿›å…¥æµè§ˆå™¨çš„å¯è§åŒºåŸŸ</span></div><div class="line"></div><div class="line"><span class="comment">//è§£æHTMLå­—ç¬¦ä¸²ï¼Œç„¶åå°†ç”Ÿæˆçš„èŠ‚ç‚¹æ’å…¥DOMæ ‘çš„æŒ‡å®šä½ç½®ã€‚</span></div><div class="line">Element.insertAdjacentHTML(where, htmlString); </div><div class="line">Element.insertAdjacentHTML(<span class="string">'beforeBegin'</span>, htmlString); <span class="comment">// åœ¨è¯¥å…ƒç´ å‰æ’å…¥  </span></div><div class="line">Element.insertAdjacentHTML(<span class="string">'afterBegin'</span>, htmlString); <span class="comment">// åœ¨è¯¥å…ƒç´ ç¬¬ä¸€ä¸ªå­å…ƒç´ å‰æ’å…¥ </span></div><div class="line">Element.insertAdjacentHTML(<span class="string">'beforeEnd'</span>, htmlString); <span class="comment">// åœ¨è¯¥å…ƒç´ æœ€åä¸€ä¸ªå­å…ƒç´ åé¢æ’å…¥ </span></div><div class="line">Element.insertAdjacentHTML(<span class="string">'afterEnd'</span>, htmlString); <span class="comment">// åœ¨è¯¥å…ƒç´ åæ’å…¥</span></div><div class="line"></div><div class="line">Element.remove()  <span class="comment">//ç”¨äºå°†å½“å‰å…ƒç´ èŠ‚ç‚¹ä»DOMä¸­ç§»é™¤</span></div><div class="line">Element.focus()   <span class="comment">//ç”¨äºå°†å½“å‰é¡µé¢çš„ç„¦ç‚¹ï¼Œè½¬ç§»åˆ°æŒ‡å®šå…ƒç´ ä¸Š</span></div></pre></td></tr></table></figure>
<p><strong>äºŒã€CSSæ“ä½œ</strong></p>
<p><strong>ï¼ˆ1ï¼‰ç±»åæ“ä½œ</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ie8ä»¥ä¸‹</span></div><div class="line">Element.className  <span class="comment">//è·å–å…ƒç´ èŠ‚ç‚¹çš„ç±»å</span></div><div class="line">Element.className += <span class="string">' '</span> + newClassName  <span class="comment">//æ–°å¢ä¸€ä¸ªç±»å</span></div><div class="line"></div><div class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰æŸä¸ªç±»å</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">element,className</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(className,<span class="string">'gi'</span>).test(element.className);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//ç§»é™¤class</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">element,className</span>)</span>&#123;</div><div class="line">  element.className = element.className.replace(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|\\b)'</span> + className.split(<span class="string">' '</span>).join(<span class="string">'|'</span>) + <span class="string">'(\\b|$)'</span>, <span class="string">'gi'</span>),<span class="string">''</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//ie10 </span></div><div class="line">element.classList.add(className)  <span class="comment">//æ–°å¢</span></div><div class="line">element.classList.remove(className)  <span class="comment">//åˆ é™¤</span></div><div class="line">element.classList.contains(className)  <span class="comment">//æ˜¯å¦åŒ…å«</span></div><div class="line">element.classList.toggle(className)  <span class="comment">//toggle class</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰styleæ“ä½œ</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">element.setAttribute(<span class="string">'style'</span>,<span class="string">''</span>)</div><div class="line"></div><div class="line">element.style.backgroundColor = <span class="string">'red'</span></div><div class="line"></div><div class="line">element.style.cssText <span class="comment">//ç”¨æ¥è¯»å†™æˆ–åˆ é™¤æ•´ä¸ªstyleå±æ€§</span></div><div class="line"></div><div class="line">element.style.setProperty(propertyName,value)  <span class="comment">//è®¾ç½®csså±æ€§</span></div><div class="line">element.style.getPropertyValue(property)  <span class="comment">//è·å–csså±æ€§</span></div><div class="line">element.style.removeProperty(property)  <span class="comment">//åˆ é™¤csså±æ€§</span></div><div class="line">æ“ä½œéå†…è”æ ·å¼</div><div class="line"><span class="comment">//ie8</span></div><div class="line">element.currentStyle[attrName]</div><div class="line"><span class="comment">//ie9+</span></div><div class="line"><span class="built_in">window</span>.getComputedStyle(el,<span class="literal">null</span>)[attrName] </div><div class="line"><span class="built_in">window</span>.getComputedStyle(el,<span class="literal">null</span>).getPropertyValue(attrName)</div><div class="line"><span class="comment">//ä¼ªç±»</span></div><div class="line"><span class="built_in">window</span>.getComputedStyle(el,<span class="string">':after'</span>)[attrName]</div></pre></td></tr></table></figure>
<p><strong>ä¸‰ã€å¯¹è±¡</strong></p>
<p><strong>3.1 Objectå¯¹è±¡</strong></p>
<p><strong>ï¼ˆ1ï¼‰ç”Ÿæˆå®ä¾‹å¯¹è±¡</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>()</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype   <span class="comment">//è¿”å›åŸå‹å¯¹è±¡</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ3ï¼‰æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.keys(o)   <span class="comment">//éå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§</span></div><div class="line"><span class="built_in">Object</span>.getOwnPropertyName(o)   <span class="comment">//éå†å¯¹è±¡ä¸å¯æšä¸¾çš„å±æ€§</span></div></pre></td></tr></table></figure>
<p>å¯¹è±¡å®ä¾‹çš„æ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">valueOf()ï¼šè¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„å€¼ã€‚  </div><div class="line">toString()ï¼šè¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„å­—ç¬¦ä¸²å½¢å¼ã€‚  </div><div class="line">toLocaleString()ï¼šè¿”å›å½“å‰å¯¹è±¡å¯¹åº”çš„æœ¬åœ°å­—ç¬¦ä¸²å½¢å¼ã€‚  </div><div class="line">hasOwnProperty()ï¼šåˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦ä¸ºå½“å‰å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œè¿˜æ˜¯ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡çš„å±æ€§ã€‚ </div><div class="line">isPrototypeOf()ï¼šåˆ¤æ–­å½“å‰å¯¹è±¡æ˜¯å¦ä¸ºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ã€‚</div><div class="line">propertyIsEnumerable()ï¼šåˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦å¯æšä¸¾ã€‚</div></pre></td></tr></table></figure>
<p><strong>3.2 Arrayå¯¹è±¡</strong></p>
<p><strong>ï¼ˆ1ï¼‰ç”Ÿæˆå®ä¾‹å¯¹è±¡</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>()</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a.length  <span class="comment">//é•¿åº¦</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ3ï¼‰Array.isArray()</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.isArray(a)   <span class="comment">//ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºæ•°ç»„</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ4ï¼‰Arrayå®ä¾‹çš„æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">a.valueof()   <span class="comment">//è¿”å›æ•°ç»„æœ¬èº«</span></div><div class="line">a.toString()  <span class="comment">//è¿”å›æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼</span></div><div class="line">a.push(value,vlaue....)   <span class="comment">//ç”¨äºåœ¨æ•°ç»„çš„æœ«ç«¯æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦ã€‚</span></div><div class="line">pop()   <span class="comment">//ç”¨äºåˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ </span></div><div class="line">join()  <span class="comment">//ä»¥å‚æ•°ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†æ‰€æœ‰æ•°ç»„æˆå‘˜ç»„æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ã€‚å¦‚æœä¸æä¾›å‚æ•°ï¼Œé»˜è®¤ç”¨é€—å·åˆ†éš”ã€‚</span></div><div class="line">concat()  <span class="comment">//ç”¨äºå¤šä¸ªæ•°ç»„çš„åˆå¹¶ã€‚å®ƒå°†æ–°æ•°ç»„çš„æˆå‘˜ï¼Œæ·»åŠ åˆ°åŸæ•°ç»„çš„å°¾éƒ¨ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚</span></div><div class="line">shift()  <span class="comment">//ç”¨äºåˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚</span></div><div class="line">unshift(value)  <span class="comment">//ç”¨äºåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ å…ƒç´ ï¼Œå¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦ã€‚</span></div><div class="line">reverse()   <span class="comment">//ç”¨äºé¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºï¼Œè¿”å›æ”¹å˜åçš„æ•°ç»„</span></div><div class="line">slice(start_index, upto_index);   <span class="comment">//ç”¨äºæå–åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèµ·å§‹ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç»ˆæ­¢ä½ç½®ï¼ˆä½†è¯¥ä½ç½®çš„å…ƒç´ æœ¬èº«ä¸åŒ…æ‹¬åœ¨å†…ï¼‰ã€‚å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸€ç›´è¿”å›åˆ°åŸæ•°ç»„çš„æœ€åä¸€ä¸ªæˆå‘˜ã€‚è´Ÿæ•°è¡¨ç¤ºå€’æ•°ç¬¬å‡ ä¸ªã€‚</span></div><div class="line">splice(index, count_to_remove, addElement1, addElement2, ...);   <span class="comment">//ç”¨äºåˆ é™¤åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†æˆå‘˜ï¼Œå¹¶å¯ä»¥åœ¨è¢«åˆ é™¤çš„ä½ç½®æ·»åŠ å…¥æ–°çš„æ•°ç»„æˆå‘˜ï¼Œè¿”å›å€¼æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆ é™¤çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚å¦‚æœåé¢è¿˜æœ‰æ›´å¤šçš„å‚æ•°ï¼Œåˆ™è¡¨ç¤ºè¿™äº›å°±æ˜¯è¦è¢«æ’å…¥æ•°ç»„çš„æ–°å…ƒç´ ã€‚</span></div><div class="line">sort()   <span class="comment">//å¯¹æ•°ç»„æˆå‘˜è¿›è¡Œæ’åºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæ’åºã€‚æ’åºåï¼ŒåŸæ•°ç»„å°†è¢«æ”¹å˜ã€‚å¦‚æœæƒ³è®©sortæ–¹æ³•æŒ‰ç…§è‡ªå®šä¹‰æ–¹å¼æ’åºï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæŒ‰ç…§è‡ªå®šä¹‰æ–¹æ³•è¿›è¡Œæ’åºã€‚è¯¥å‡½æ•°æœ¬èº«åˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªå…ƒç´ ã€‚å¦‚æœè¿”å›å€¼å¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ åé¢ï¼›å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ å‰é¢ã€‚</span></div><div class="line">map()   <span class="comment">//å¯¹æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ä¾æ¬¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å‡½æ•°ç»“æœè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</span></div><div class="line">map(elem,index,arr)   <span class="comment">//mapæ–¹æ³•æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¯¥å‡½æ•°è°ƒç”¨æ—¶ï¼Œmapæ–¹æ³•ä¼šå°†å…¶ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å½“å‰æˆå‘˜ã€å½“å‰ä½ç½®å’Œæ•°ç»„æœ¬èº«ã€‚</span></div><div class="line">forEach()   <span class="comment">//éå†æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ï¼Œæ‰§è¡ŒæŸç§æ“ä½œ,å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å½“å‰ä½ç½®çš„å€¼ã€å½“å‰ä½ç½®çš„ç¼–å·å’Œæ•´ä¸ªæ•°ç»„ã€‚</span></div><div class="line">filter()   <span class="comment">//å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ç»“æœä¸ºtrueçš„æˆå‘˜ç»„æˆä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚è¯¥æ–¹æ³•ä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚</span></div><div class="line">some()    <span class="comment">//ç”¨æ¥åˆ¤æ–­æ•°ç»„æˆå‘˜æ˜¯å¦ç¬¦åˆæŸç§æ¡ä»¶ã€‚æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚è¯¥å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯å½“å‰ä½ç½®çš„æˆå‘˜ã€å½“å‰ä½ç½®çš„åºå·å’Œæ•´ä¸ªæ•°ç»„ã€‚åªè¦æœ‰ä¸€ä¸ªæ•°ç»„æˆå‘˜çš„è¿”å›å€¼æ˜¯trueï¼Œåˆ™æ•´ä¸ªsomeæ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯trueï¼Œå¦åˆ™falseã€‚</span></div><div class="line">every()   <span class="comment">//ç”¨æ¥åˆ¤æ–­æ•°ç»„æˆå‘˜æ˜¯å¦ç¬¦åˆæŸç§æ¡ä»¶ã€‚æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚è¯¥å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡æ˜¯å½“å‰ä½ç½®çš„æˆå‘˜ã€å½“å‰ä½ç½®çš„åºå·å’Œæ•´ä¸ªæ•°ç»„ã€‚æ‰€æœ‰æ•°ç»„æˆå‘˜çš„è¿”å›å€¼éƒ½æ˜¯trueï¼Œæ‰è¿”å›trueï¼Œå¦åˆ™falseã€‚</span></div><div class="line">reduce()   <span class="comment">//ä¾æ¬¡å¤„ç†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œæœ€ç»ˆç´¯è®¡ä¸ºä¸€ä¸ªå€¼ã€‚ä»å·¦åˆ°å³å¤„ç†ï¼ˆä»ç¬¬ä¸€ä¸ªæˆå‘˜åˆ°æœ€åä¸€ä¸ªæˆå‘˜ï¼‰</span></div><div class="line">reduceRight()  <span class="comment">//ä¾æ¬¡å¤„ç†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œæœ€ç»ˆç´¯è®¡ä¸ºä¸€ä¸ªå€¼ã€‚ä»å³åˆ°å·¦ï¼ˆä»æœ€åä¸€ä¸ªæˆå‘˜åˆ°ç¬¬ä¸€ä¸ªæˆå‘˜ï¼‰</span></div><div class="line">indexOf(s)   <span class="comment">//è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæœç´¢çš„å¼€å§‹ä½ç½®</span></div><div class="line">lastIndexOf()  <span class="comment">//è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>3.3 Numberå¯¹è±¡</strong></p>
<p><strong>ï¼ˆ1ï¼‰ç”Ÿæˆå¯¹è±¡</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> n = <span class="keyword">new</span> <span class="built_in">Number</span>()</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰Numberå¯¹è±¡çš„å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Number</span>.POSITIVE_INFINITYï¼šæ­£çš„æ— é™ï¼ŒæŒ‡å‘<span class="literal">Infinity</span>ã€‚  </div><div class="line"><span class="built_in">Number</span>.NEGATIVE_INFINITYï¼šè´Ÿçš„æ— é™ï¼ŒæŒ‡å‘-<span class="literal">Infinity</span>ã€‚  </div><div class="line"><span class="built_in">Number</span>.NaNï¼šè¡¨ç¤ºéæ•°å€¼ï¼ŒæŒ‡å‘<span class="literal">NaN</span>ã€‚  </div><div class="line"><span class="built_in">Number</span>.MAX_VALUEï¼šè¡¨ç¤ºæœ€å¤§çš„æ­£æ•°ï¼Œç›¸åº”çš„ï¼Œæœ€å°çš„è´Ÿæ•°ä¸º-<span class="built_in">Number</span>.MAX_VALUEã€‚  </div><div class="line"><span class="built_in">Number</span>.MIN_VALUEï¼šè¡¨ç¤ºæœ€å°çš„æ­£æ•°ï¼ˆå³æœ€æ¥è¿‘<span class="number">0</span>çš„æ­£æ•°ï¼Œåœ¨<span class="number">64</span>ä½æµ®ç‚¹æ•°ä½“ç³»ä¸­ä¸º<span class="number">5e-324</span>ï¼‰ï¼Œç›¸åº”çš„ï¼Œæœ€æ¥è¿‘<span class="number">0</span>çš„è´Ÿæ•°ä¸º-<span class="built_in">Number</span>.MIN_VALUEã€‚  </div><div class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGERï¼šè¡¨ç¤ºèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æœ€å¤§æ•´æ•°ï¼Œå³<span class="number">9007199254740991</span>ã€‚  </div><div class="line"><span class="built_in">Number</span>.MIN_SAFE_INTEGERï¼šè¡¨ç¤ºèƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æœ€å°æ•´æ•°ï¼Œå³<span class="number">-9007199254740991</span>ã€‚</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ4ï¼‰Numberå¯¹è±¡å®ä¾‹çš„æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">toString()   <span class="comment">//ç”¨æ¥å°†ä¸€ä¸ªæ•°å€¼è½¬ä¸ºå­—ç¬¦ä¸²å½¢å¼.å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¾“å‡ºçš„è¿›åˆ¶ã€‚å¦‚æœçœç•¥è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤å°†æ•°å€¼å…ˆè½¬ä¸ºåè¿›åˆ¶ï¼Œå†è¾“å‡ºå­—ç¬¦ä¸²ï¼›å¦åˆ™ï¼Œå°±æ ¹æ®å‚æ•°æŒ‡å®šçš„è¿›åˆ¶ï¼Œå°†ä¸€ä¸ªæ•°å­—è½¬åŒ–æˆæŸä¸ªè¿›åˆ¶çš„å­—ç¬¦ä¸²ã€‚</span></div><div class="line">toFixed()   <span class="comment">//ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºæŒ‡å®šä½æ•°çš„å°æ•°ï¼Œè¿”å›è¿™ä¸ªå°æ•°å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚</span></div><div class="line">toExponential()  <span class="comment">//ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºç§‘å­¦è®¡æ•°æ³•å½¢å¼ã€‚å¯ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°è¡¨ç¤ºå°æ•°ç‚¹åæœ‰æ•ˆæ•°å­—çš„ä½æ•°ï¼ŒèŒƒå›´ä¸º0åˆ°20ï¼Œè¶…å‡ºè¿™ä¸ªèŒƒå›´ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªRangeErrorã€‚</span></div><div class="line">toPrecision()  <span class="comment">//ç”¨äºå°†ä¸€ä¸ªæ•°è½¬ä¸ºæŒ‡å®šä½æ•°çš„æœ‰æ•ˆæ•°å­—ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>3.4 String å¯¹è±¡</strong></p>
<p><strong>ï¼ˆ1ï¼‰ç”Ÿæˆå®ä¾‹å¯¹è±¡</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">String</span>()</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰Stringå¯¹è±¡çš„å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s.length   <span class="comment">//è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦</span></div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ3ï¼‰æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">s.chatAt(index)   <span class="comment">//è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦</span></div><div class="line">s.fromCharCode()    <span class="comment">//è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ç³»åˆ—Unicodeç ç‚¹ï¼Œè¿”å›å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚</span></div><div class="line">s.charCodeAt(index)    <span class="comment">//è¿”å›ç»™å®šä½ç½®å­—ç¬¦çš„Unicodeç ç‚¹ï¼ˆåè¿›åˆ¶è¡¨ç¤ºï¼‰</span></div><div class="line">s.concat(s2)  <span class="comment">//ç”¨äºè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²</span></div><div class="line">s.slice(start,end)   <span class="comment">//ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ï¼ˆä¸å«è¯¥ä½ç½®ï¼‰ã€‚å¦‚æœå‚æ•°æ˜¯è´Ÿå€¼ï¼Œè¡¨ç¤ºä»ç»“å°¾å¼€å§‹å€’æ•°è®¡ç®—çš„ä½ç½®ï¼Œå³è¯¥è´Ÿå€¼åŠ ä¸Šå­—ç¬¦ä¸²é•¿åº¦ã€‚</span></div><div class="line">s.substring(start,end)  <span class="comment">//ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸².ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªä½ç½®è¡¨ç¤ºç»“æŸä½ç½®ã€‚</span></div><div class="line">s.substr(start,length)   <span class="comment">//ç”¨äºä»åŸå­—ç¬¦ä¸²å–å‡ºå­å­—ç¬¦ä¸²å¹¶è¿”å›ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è´Ÿæ•°ï¼Œè¡¨ç¤ºå€’æ•°è®¡ç®—çš„å­—ç¬¦ä½ç½®ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯è´Ÿæ•°ï¼Œå°†è¢«è‡ªåŠ¨è½¬ä¸º0ï¼Œå› æ­¤ä¼šè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚</span></div><div class="line">s.indexOf(s)   <span class="comment">//è¿”å›ç»™å®šå…ƒç´ åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæœç´¢çš„å¼€å§‹ä½ç½® </span></div><div class="line">s.lastIndexOf()  <span class="comment">//è¿”å›ç»™å®šå…ƒç´ åœ¨å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚</span></div><div class="line">s.trim()  <span class="comment">//ç”¨äºå»é™¤å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²</span></div><div class="line">s.toLowerCase()  <span class="comment">//ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²å…¨éƒ¨è½¬ä¸ºå°å†™,è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œä¸æ”¹å˜åŸå­—ç¬¦ä¸²ã€‚</span></div><div class="line">s.toUpperCase()  <span class="comment">//å…¨éƒ¨è½¬ä¸ºå¤§å†™</span></div><div class="line">s.localeCompare(s2)  <span class="comment">//ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚å®ƒè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œå¦‚æœå°äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å°äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ï¼›å¦‚æœç­‰äº0ï¼Œè¡¨ç¤ºä¸¤è€…ç›¸ç­‰ï¼›å¦‚æœå¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å¤§äºç¬¬äºŒä¸ªå­—ç¬¦ä¸²ã€‚</span></div><div class="line">s.match(regexp)   <span class="comment">//ç”¨äºç¡®å®šåŸå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æŸä¸ªå­å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜ä¸ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›nullã€‚</span></div><div class="line">s.search()  <span class="comment">//è¿”å›å€¼ä¸ºåŒ¹é…çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›-1ã€‚</span></div><div class="line">s.replace(oldValue,newValue)  <span class="comment">//ç”¨äºæ›¿æ¢åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…ï¼ˆé™¤éä½¿ç”¨å¸¦æœ‰gä¿®é¥°ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚</span></div><div class="line">s.split()  <span class="comment">//æŒ‰ç…§ç»™å®šè§„åˆ™åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸€ä¸ªç”±åˆ†å‰²å‡ºæ¥çš„å­å­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„ã€‚è¿˜å¯ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå†³å®šäº†è¿”å›æ•°ç»„çš„æˆå‘˜æ•°ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>3.5 Mathå¯¹è±¡</strong></p>
<p><strong>ï¼ˆ1ï¼‰å±æ€§</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.Eï¼šå¸¸æ•°eã€‚  </div><div class="line"><span class="built_in">Math</span>.LN2ï¼š<span class="number">2</span>çš„è‡ªç„¶å¯¹æ•°ã€‚  </div><div class="line"><span class="built_in">Math</span>.LN10ï¼š<span class="number">10</span>çš„è‡ªç„¶å¯¹æ•°ã€‚  </div><div class="line"><span class="built_in">Math</span>.LOG2Eï¼šä»¥<span class="number">2</span>ä¸ºåº•çš„eçš„å¯¹æ•°ã€‚  </div><div class="line"><span class="built_in">Math</span>.LOG10Eï¼šä»¥<span class="number">10</span>ä¸ºåº•çš„eçš„å¯¹æ•°ã€‚  </div><div class="line"><span class="built_in">Math</span>.PIï¼šå¸¸æ•°Piã€‚  </div><div class="line"><span class="built_in">Math</span>.SQRT1_2ï¼š<span class="number">0.5</span>çš„å¹³æ–¹æ ¹ã€‚  </div><div class="line"><span class="built_in">Math</span>.SQRT2ï¼š<span class="number">2</span>çš„å¹³æ–¹æ ¹ã€‚</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ2ï¼‰æ•°å­¦æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.abs()ï¼šè¿”å›å‚æ•°çš„ç»å¯¹å€¼  </div><div class="line"><span class="built_in">Math</span>.ceil()ï¼šå‘ä¸Šå–æ•´ï¼Œæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å¤§äºè¯¥å‚æ•°çš„æœ€å°æ•´æ•°ã€‚ </div><div class="line"><span class="built_in">Math</span>.floor()ï¼šå‘ä¸‹å–æ•´  </div><div class="line"><span class="built_in">Math</span>.max(n,n1,...)ï¼šå¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè¿”å›æœ€å¤§å€¼  </div><div class="line"><span class="built_in">Math</span>.min(n,n1,..)ï¼šå¯æ¥å—å¤šä¸ªå‚æ•°ï¼Œè¿”å›æœ€å°å€¼  </div><div class="line"><span class="built_in">Math</span>.pow(n,e)ï¼šæŒ‡æ•°è¿ç®—, è¿”å›ä»¥ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåº•æ•°ã€ç¬¬äºŒä¸ªå‚æ•°ä¸ºå¹‚çš„æŒ‡æ•°å€¼ã€‚ </div><div class="line"><span class="built_in">Math</span>.sqrt()ï¼šè¿”å›å‚æ•°å€¼çš„å¹³æ–¹æ ¹ã€‚å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªè´Ÿå€¼ï¼Œåˆ™è¿”å›<span class="literal">NaN</span>ã€‚  </div><div class="line"><span class="built_in">Math</span>.log()ï¼šè¿”å›ä»¥eä¸ºåº•çš„è‡ªç„¶å¯¹æ•°å€¼ã€‚</div><div class="line"><span class="built_in">Math</span>.exp()ï¼šè¿”å›eçš„æŒ‡æ•°ï¼Œä¹Ÿå°±æ˜¯å¸¸æ•°eçš„å‚æ•°æ¬¡æ–¹ã€‚</div><div class="line"><span class="built_in">Math</span>.round()ï¼šå››èˆäº”å…¥  </div><div class="line"><span class="built_in">Math</span>.random()ï¼šè¿”å›<span class="number">0</span>åˆ°<span class="number">1</span>ä¹‹é—´çš„ä¸€ä¸ªä¼ªéšæœºæ•°ï¼Œå¯èƒ½ç­‰äº<span class="number">0</span>ï¼Œä½†æ˜¯ä¸€å®šå°äº<span class="number">1</span>ã€‚</div></pre></td></tr></table></figure>
<p><strong>ï¼ˆ3ï¼‰ä¸‰è§’å‡½æ•°æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Math</span>.sin()ï¼šè¿”å›å‚æ•°çš„æ­£å¼¦  </div><div class="line"><span class="built_in">Math</span>.cos()ï¼šè¿”å›å‚æ•°çš„ä½™å¼¦  </div><div class="line"><span class="built_in">Math</span>.tan()ï¼šè¿”å›å‚æ•°çš„æ­£åˆ‡  </div><div class="line"><span class="built_in">Math</span>.asin()ï¼šè¿”å›å‚æ•°çš„åæ­£å¼¦ï¼ˆå¼§åº¦å€¼ï¼‰  </div><div class="line"><span class="built_in">Math</span>.acos()ï¼šè¿”å›å‚æ•°çš„åä½™å¼¦ï¼ˆå¼§åº¦å€¼ï¼‰  </div><div class="line"><span class="built_in">Math</span>.atan()ï¼šè¿”å›å‚æ•°çš„åæ­£åˆ‡ï¼ˆå¼§åº¦å€¼ï¼‰</div></pre></td></tr></table></figure>
<p><strong>3.6 JSONå¯¹è±¡</strong></p>
<p><strong>ï¼ˆ1ï¼‰æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">JSON</span>.stringify()   </div><div class="line"><span class="comment">//ç”¨äºå°†ä¸€ä¸ªå€¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²åº”è¯¥ç¬¦åˆJSONæ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥è¢«JSON.parseæ–¹æ³•è¿˜åŸã€‚</span></div><div class="line"><span class="comment">//ï¼ˆJSON.stringify(obj, selectedProperties)ï¼‰è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šéœ€è¦è½¬æˆå­—ç¬¦ä¸²çš„å±æ€§ã€‚</span></div><div class="line"><span class="comment">//è¿˜å¯ä»¥æ¥å—ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºå¢åŠ è¿”å›çš„JSONå­—ç¬¦ä¸²çš„å¯è¯»æ€§ã€‚å¦‚æœæ˜¯æ•°å­—ï¼Œè¡¨ç¤ºæ¯ä¸ªå±æ€§å‰é¢æ·»åŠ çš„ç©ºæ ¼ï¼ˆæœ€å¤šä¸è¶…è¿‡10ä¸ªï¼‰ï¼›å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼ˆä¸è¶…è¿‡10ä¸ªå­—ç¬¦ï¼‰ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ä¼šæ·»åŠ åœ¨æ¯è¡Œå‰é¢ã€‚</span></div><div class="line"></div><div class="line"><span class="built_in">JSON</span>.parse()   <span class="comment">//ç”¨äºå°†JSONå­—ç¬¦ä¸²è½¬åŒ–æˆå¯¹è±¡ã€‚</span></div></pre></td></tr></table></figure>
<p><strong>3.7 consoleå¯¹è±¡</strong></p>
<p><strong>ï¼ˆ1ï¼‰æ–¹æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(text,text2,...)   <span class="comment">//ç”¨äºåœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ã€‚å®ƒå¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œå°†å®ƒä»¬çš„ç»“æœè¿æ¥èµ·æ¥è¾“å‡ºã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ ¼å¼å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨äº†æ ¼å¼å ä½ç¬¦ï¼‰ï¼Œconsole.logæ–¹æ³•å°†ä¾æ¬¡ç”¨åé¢çš„å‚æ•°æ›¿æ¢å ä½ç¬¦ï¼Œç„¶åå†è¿›è¡Œè¾“å‡ºã€‚</span></div><div class="line"><span class="built_in">console</span>.info()   <span class="comment">//åœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ï¼ŒåŒæ—¶ï¼Œä¼šåœ¨è¾“å‡ºä¿¡æ¯çš„å‰é¢ï¼ŒåŠ ä¸Šä¸€ä¸ªè“è‰²å›¾æ ‡ã€‚</span></div><div class="line"><span class="built_in">console</span>.debug()  <span class="comment">//åœ¨consoleçª—å£è¾“å‡ºä¿¡æ¯ï¼ŒåŒæ—¶ï¼Œä¼šåœ¨è¾“å‡ºä¿¡æ¯çš„å‰é¢ï¼ŒåŠ ä¸Šä¸€ä¸ªè“è‰²å›¾æ ‡ã€‚</span></div><div class="line"><span class="built_in">console</span>.warn()  <span class="comment">//è¾“å‡ºä¿¡æ¯æ—¶ï¼Œåœ¨æœ€å‰é¢åŠ ä¸€ä¸ªé»„è‰²ä¸‰è§’ï¼Œè¡¨ç¤ºè­¦å‘Šï¼›</span></div><div class="line"><span class="built_in">console</span>.error()  <span class="comment">//è¾“å‡ºä¿¡æ¯æ—¶ï¼Œåœ¨æœ€å‰é¢åŠ ä¸€ä¸ªçº¢è‰²çš„å‰ï¼Œè¡¨ç¤ºå‡ºé”™ï¼ŒåŒæ—¶ä¼šæ˜¾ç¤ºé”™è¯¯å‘ç”Ÿçš„å †æ ˆ</span></div><div class="line"><span class="built_in">console</span>.table()  <span class="comment">//å¯ä»¥å°†å¤åˆç±»å‹çš„æ•°æ®è½¬ä¸ºè¡¨æ ¼æ˜¾ç¤ºã€‚</span></div><div class="line"><span class="built_in">console</span>.count()  <span class="comment">//ç”¨äºè®¡æ•°ï¼Œè¾“å‡ºå®ƒè¢«è°ƒç”¨äº†å¤šå°‘æ¬¡ã€‚</span></div><div class="line"><span class="built_in">console</span>.dir()    <span class="comment">//ç”¨æ¥å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ£€æŸ¥ï¼ˆinspectï¼‰ï¼Œå¹¶ä»¥æ˜“äºé˜…è¯»å’Œæ‰“å°çš„æ ¼å¼æ˜¾ç¤ºã€‚</span></div><div class="line"><span class="built_in">console</span>.dirxml()  <span class="comment">//ç”¨äºä»¥ç›®å½•æ ‘çš„å½¢å¼ï¼Œæ˜¾ç¤ºDOMèŠ‚ç‚¹ã€‚</span></div><div class="line"><span class="built_in">console</span>.assert()  <span class="comment">//æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ã€‚åªæœ‰å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºfalseï¼Œæ‰ä¼šè¾“å‡ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¸ä¼šæœ‰ä»»ä½•ç»“æœã€‚</span></div><div class="line"></div><div class="line"><span class="comment">//è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºè®¡æ—¶ï¼Œå¯ä»¥ç®—å‡ºä¸€ä¸ªæ“ä½œæ‰€èŠ±è´¹çš„å‡†ç¡®æ—¶é—´ã€‚</span></div><div class="line"><span class="built_in">console</span>.time()</div><div class="line"><span class="built_in">console</span>.timeEnd()</div><div class="line"><span class="comment">//timeæ–¹æ³•è¡¨ç¤ºè®¡æ—¶å¼€å§‹ï¼ŒtimeEndæ–¹æ³•è¡¨ç¤ºè®¡æ—¶ç»“æŸã€‚å®ƒä»¬çš„å‚æ•°æ˜¯è®¡æ—¶å™¨çš„åç§°ã€‚è°ƒç”¨timeEndæ–¹æ³•ä¹‹åï¼Œconsoleçª—å£ä¼šæ˜¾ç¤ºâ€œè®¡æ—¶å™¨åç§°: æ‰€è€—è´¹çš„æ—¶é—´â€ã€‚</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.profile()  <span class="comment">//ç”¨æ¥æ–°å»ºä¸€ä¸ªæ€§èƒ½æµ‹è¯•å™¨ï¼ˆprofileï¼‰ï¼Œå®ƒçš„å‚æ•°æ˜¯æ€§èƒ½æµ‹è¯•å™¨çš„åå­—ã€‚</span></div><div class="line"><span class="built_in">console</span>.profileEnd()  <span class="comment">//ç”¨æ¥ç»“æŸæ­£åœ¨è¿è¡Œçš„æ€§èƒ½æµ‹è¯•å™¨ã€‚</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.group()</div><div class="line"><span class="built_in">console</span>.groupend()</div><div class="line"><span class="comment">//ä¸Šé¢è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ã€‚å®ƒåªåœ¨è¾“å‡ºå¤§é‡ä¿¡æ¯æ—¶æœ‰ç”¨ï¼Œåˆ†åœ¨ä¸€ç»„çš„ä¿¡æ¯ï¼Œå¯ä»¥ç”¨é¼ æ ‡æŠ˜å /å±•å¼€ã€‚</span></div><div class="line"><span class="built_in">console</span>.groupCollapsed()  <span class="comment">//ç”¨äºå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ï¼Œè¯¥ç»„çš„å†…å®¹ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºæ—¶æ˜¯æ”¶èµ·çš„ï¼ˆcollapsedï¼‰ï¼Œè€Œä¸æ˜¯å±•å¼€çš„ã€‚</span></div><div class="line"></div><div class="line"><span class="built_in">console</span>.trace()  <span class="comment">//æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„ä»£ç åœ¨å †æ ˆä¸­çš„è°ƒç”¨è·¯å¾„ã€‚</span></div><div class="line"><span class="built_in">console</span>.clear()  <span class="comment">//ç”¨äºæ¸…é™¤å½“å‰æ§åˆ¶å°çš„æ‰€æœ‰è¾“å‡ºï¼Œå°†å…‰æ ‡å›ç½®åˆ°ç¬¬ä¸€è¡Œã€‚</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©åœ¨æ˜é‡‘ä¸Šçœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼Œæ„Ÿè§‰æŒºä¸é”™çš„ï¼Œç„¶åæ”¶é›†ä¸‹æ¥ï¼Œä»¥ä¾›ä»¥åè¿›è¡ŒæŸ¥é˜…ï¼Œå†æ¬¡æ„Ÿè°¢å¤§ç¥æ€»ç»“çš„APIæ–‡æ¡£&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>angular directive</title>
    <link href="http://xuhongbo.com/2017/02/18/%E6%A1%86%E6%9E%B6/angular/angular%20Directives/"/>
    <id>http://xuhongbo.com/2017/02/18/æ¡†æ¶/angular/angular Directives/</id>
    <published>2017-02-17T18:14:35.000Z</published>
    <updated>2017-04-01T08:29:28.069Z</updated>
    
    <content type="html"><![CDATA[<p>çªç„¶é—´ä¹‹å‰ä¸€ä¸ªåŒäº‹é—®æˆ‘angularè‡ªå®šä¹‰æŒ‡ä»¤æ˜¯ä»€ä¹ˆé¬¼ï¼Œæˆ‘ä¹Ÿçªç„¶é—´è’™äº†ï¼Œä½†æ˜¯æˆ‘ä¹ŸçŸ¥é“æ€ä¹ˆç”¨ï¼Œå°±æ˜¯è¡¨è¿°ä¸æ¸…æ¥šäº†ï¼Œæ‰€ä»¥è¿™ä¸¤å¤©æŸ¥äº†æŸ¥google angularçš„APIï¼Œæœ¬ç€ä¸è¯¯äººå­å¼Ÿçš„åŸåˆ™ï¼Œæˆ‘å†™ä¸‹äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åˆ°ä½ </p>
<p>ä»€ä¹ˆæ˜¯æŒ‡ä»¤å‘¢ï¼Ÿæˆ‘ä»¬å…ˆçœ‹å®˜æ–¹çš„è¯´æ³•</p>
<h5 id="What-are-Directives"><a href="#What-are-Directives" class="headerlink" title="What are Directives?"></a>What are Directives?</h5><p>At a high level, directives are markers on a DOM element (such as an attribute, element name, comment or CSS class) that tell AngularJSâ€™s <strong>HTML compiler</strong> (<a href="https://docs.angularjs.org/api/ng/service/$compile" target="_blank" rel="external"><code>$compile</code></a>) to attach a specified behavior to that DOM element (e.g. via event listeners), or even to transform the DOM element and its children.</p>
<p>AngularJS comes with a set of these directives built-in, like <code>ngBind</code>, <code>ngModel</code>, and <code>ngClass</code>. Much like you create controllers and services, you can create your own directives for AngularJS to use. When AngularJS <a href="https://docs.angularjs.org/guide/bootstrap" target="_blank" rel="external">bootstraps</a> your application, the <a href="https://docs.angularjs.org/guide/compiler" target="_blank" rel="external">HTML compiler</a> traverses the DOM matching directives against the DOM elements.</p>
<p>åœ¨é«˜çš„å±‚é¢ä¸Šè®²ï¼ŒæŒ‡ä»¤æ˜¯DOMå…ƒç´ ä¸­çš„æ ‡è®°(ä¾‹å¦‚ä¸€ä¸ªå±æ€§ï¼Œä¸€ä¸ªèŠ‚ç‚¹åï¼Œæ³¨é‡Šæˆ–è€…CSSç±»)ï¼Œå®ƒå‘Šè¯‰angularjsç¼–è¯‘å™¨å»ç»™è¿™ä¸ªå…ƒç´ é™„åŠ ä¸€ä¸ªæŒ‡ä»¤çš„è¡Œä¸ºæˆ–è€…è½¬æ¢DOMå…ƒç´ å’Œå®ƒçš„å­å…ƒç´ ã€‚</p>
<p>Angularjsæ‹¥æœ‰ä¸€äº›å†…å»ºçš„æŒ‡ä»¤ï¼ŒåƒngBindã€ngModelå’ŒngClassã€‚éå¸¸ç±»ä¼¼äºä½ åˆ›å»ºè‡ªå·±çš„controllerå’Œserviceï¼Œä½ å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„æŒ‡ä»¤ä¸ªangularjsä½¿ç”¨ï¼Œå½“angularåˆå§‹åŒ–å¯åŠ¨ä½ çš„åº”ç”¨ç¨‹åºï¼Œhtmlç¼–è¯‘å™¨å°†éå†ä½ çš„DOMå…ƒç´ å¹¶ä¸”å»åŒ¹é…æŒ‡ä»¤ã€‚</p>
<a id="more"></a>
<p>å®ä¾‹è§£æexpander</p>
<p>å®ä¾‹è§£æaccordion</p>
<p>æŒ‡ä»¤çš„è¿è¡ŒåŸç† compileå’Œlink</p>
<p><img src="/images/ng-link.png" alt="img"></p>
<h3 id="æŒ‡ä»¤å®šä¹‰çš„åŸºç¡€"><a href="#æŒ‡ä»¤å®šä¹‰çš„åŸºç¡€" class="headerlink" title="æŒ‡ä»¤å®šä¹‰çš„åŸºç¡€"></a>æŒ‡ä»¤å®šä¹‰çš„åŸºç¡€</h3><p>åœ¨Angularä¸­ï¼Œå®šä¹‰æŒ‡ä»¤éœ€è¦è°ƒç”¨<code>directive</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'myapp'</span>, []);</div><div class="line">app.directive(name, fn);</div></pre></td></tr></table></figure>
<p>åœ¨å®šä¹‰çš„æ¨¡å—ä¸Šä½¿ç”¨<code>directive</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæŒ‡ä»¤ï¼Œnameä¸ºæŒ‡ä»¤çš„åç§°ï¼Œfnæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå®šä¹‰äº†è¿™ä¸ªæŒ‡ä»¤çš„å…¨éƒ¨è¡Œä¸º</p>
<h4 id="restrictåŒ¹é…æ¨¡å¼"><a href="#restrictåŒ¹é…æ¨¡å¼" class="headerlink" title="restrictåŒ¹é…æ¨¡å¼"></a>restrictåŒ¹é…æ¨¡å¼</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  &lt;ts-hello&gt;&lt;/ts-hello&gt;</div><div class="line">  &lt;div ts-hello&gt;&lt;/div&gt;</div><div class="line">  &lt;div class="ts-hello"&gt;&lt;/div&gt;</div><div class="line">  &lt;div data-ts-hello&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;script&gt;</div><div class="line">  <span class="keyword">var</span> app = angular.module(<span class="string">'myapp'</span>, []);</div><div class="line">  app.directive(<span class="string">'tsHello'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">'EAC'</span>,</div><div class="line">      <span class="attr">template</span>: <span class="string">'&lt;h3&gt;Hello, Angular!&lt;/h3&gt;'</span></div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<p><img src="/images/ng-restrict.png" alt="img"></p>
<hr>
<h3 id="è®¾ç½®æŒ‡ä»¤å¯¹è±¡çš„åŸºç¡€å±æ€§"><a href="#è®¾ç½®æŒ‡ä»¤å¯¹è±¡çš„åŸºç¡€å±æ€§" class="headerlink" title="è®¾ç½®æŒ‡ä»¤å¯¹è±¡çš„åŸºç¡€å±æ€§"></a>è®¾ç½®æŒ‡ä»¤å¯¹è±¡çš„åŸºç¡€å±æ€§</h3><h4 id="templateUrl-å®ƒçš„å±æ€§å€¼æ˜¯ä¸€ä¸ªURLåœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ä¸€ä¸ªæ¨¡æ¿é¡µé¢"><a href="#templateUrl-å®ƒçš„å±æ€§å€¼æ˜¯ä¸€ä¸ªURLåœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ä¸€ä¸ªæ¨¡æ¿é¡µé¢" class="headerlink" title="templateUrl:å®ƒçš„å±æ€§å€¼æ˜¯ä¸€ä¸ªURLåœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ä¸€ä¸ªæ¨¡æ¿é¡µé¢"></a>templateUrl:å®ƒçš„å±æ€§å€¼æ˜¯ä¸€ä¸ªURLåœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘ä¸€ä¸ªæ¨¡æ¿é¡µé¢</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line"></div><div class="line"><span class="comment">//æ³¨å°„å™¨åŠ è½½å®Œæ‰€æœ‰æ¨¡å—æ—¶ï¼Œæ­¤æ–¹æ³•æ‰§è¡Œä¸€æ¬¡</span></div><div class="line">myModule.run(<span class="function"><span class="keyword">function</span>(<span class="params">$templateCache</span>)</span>&#123;</div><div class="line">  <span class="comment">//æŠŠå†…å®¹ç¼“å­˜èµ·æ¥</span></div><div class="line">	$templateCache.put(<span class="string">"hello.html"</span>,<span class="string">"&lt;div&gt;Hello everyone!!!!!!&lt;/div&gt;"</span>);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$templateCache</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">restrict</span>: <span class="string">'AECM'</span>,</div><div class="line">      <span class="comment">//æŠŠç¼“å­˜å–å‡ºæ¥</span></div><div class="line">        template: $templateCache.get(<span class="string">"hello.html"</span>),</div><div class="line">        <span class="attr">replace</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="replaceå¼€å¯çš„è¯ï¼Œå°±ä¼šæŠŠæˆ‘ä»¬æ¨¡æ¿é‡Œé¢çš„å†…å®¹æ›¿æ¢æ‰"><a href="#replaceå¼€å¯çš„è¯ï¼Œå°±ä¼šæŠŠæˆ‘ä»¬æ¨¡æ¿é‡Œé¢çš„å†…å®¹æ›¿æ¢æ‰" class="headerlink" title="replaceå¼€å¯çš„è¯ï¼Œå°±ä¼šæŠŠæˆ‘ä»¬æ¨¡æ¿é‡Œé¢çš„å†…å®¹æ›¿æ¢æ‰"></a>replaceå¼€å¯çš„è¯ï¼Œå°±ä¼šæŠŠæˆ‘ä»¬æ¨¡æ¿é‡Œé¢çš„å†…å®¹æ›¿æ¢æ‰</h4><p>å®ƒçš„å±æ€§å€¼æ˜¯å¸ƒå°”ç±»å‹ï¼Œå½“è¯¥å±æ€§å€¼ä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºç”¨æ¨¡æ¿ä¸­çš„å†…å®¹æ›¿æ¢æŒ‡ä»¤æ ‡è®°ï¼Œå¦åˆ™åˆ™ä¸æ›¿æ¢ï¼Œç›´æ¥æ˜¾ç¤ºæŒ‡ä»¤æ ‡è®°ï¼Œé»˜è®¤ä¸ºfalse</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span></div><div class="line">          //å½“æˆ‘ä»¬çš„é¡µé¢å¯åŠ¨åå°±ä¼šæŠŠè¿™æ®µå†…å®¹æ›¿æ¢æ‰</div><div class="line">			<span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™é‡Œæ˜¯æŒ‡ä»¤å†…éƒ¨çš„å†…å®¹ã€‚<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">hello</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"replace.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">    	<span class="attr">restrict</span>:<span class="string">"AE"</span>,</div><div class="line">    	<span class="attr">template</span>:<span class="string">"&lt;div&gt;Hello everyone!&lt;/div&gt;"</span>,</div><div class="line">    	<span class="attr">replace</span>:<span class="literal">true</span></div><div class="line">    &#125; </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="AngularæŒ‡ä»¤å¯¹è±¡çš„é‡è¦å±æ€§"><a href="#AngularæŒ‡ä»¤å¯¹è±¡çš„é‡è¦å±æ€§" class="headerlink" title="AngularæŒ‡ä»¤å¯¹è±¡çš„é‡è¦å±æ€§"></a>AngularæŒ‡ä»¤å¯¹è±¡çš„é‡è¦å±æ€§</h3><h4 id="ng-transclude"><a href="#ng-transclude" class="headerlink" title="ng-transclude"></a>ng-transclude</h4><p>åªæœ‰è¿™ä¸ªæŒ‡ä»¤å¯ä»¥ä½¿ç”¨å¤šä¸ªæŒ‡ä»¤ä¹‹é—´çš„å¤šå±‚åµŒå¥—ï¼Œæ‰€ä»¥å¾ˆé‡è¦</p>
<p>å±æ€§çš„å€¼æ˜¯å¸ƒå°”å€¼ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºä¸å¼€å¯ï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™å¼€å¯è¯¥å±æ€§ï¼Œå½“å¼€å¯åï¼Œåˆ™å¯ä»¥åœ¨æ¨¡æ¿ä¸­é€šè¿‡<code>ng-transclude</code>æ–¹å¼æ›¿æ¢æŒ‡ä»¤å…ƒç´ ä¸­çš„å†…å®¹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™é‡Œæ˜¯æŒ‡ä»¤å†…éƒ¨çš„å†…å®¹ã€‚<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">hello</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"transclude.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">    	<span class="attr">restrict</span>:<span class="string">"AE"</span>,</div><div class="line">    	<span class="attr">transclude</span>:<span class="literal">true</span>,</div><div class="line">    	<span class="comment">// ng-transcludeå‘Šè¯‰angularè¢«æ›¿æ¢çš„å†…å®¹å¡«å……åˆ°å“ªé‡Œå»</span></div><div class="line">    	template:<span class="string">"&lt;div&gt;Hello everyone!&lt;div ng-transclude&gt;&lt;/div&gt;&lt;/div&gt;"</span></div><div class="line">    &#125; </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="link"><a href="#link" class="headerlink" title="link"></a>link</h4><p>å–å±æ€§çš„æ–¹å¼æ·»åŠ ç›‘å¬äº‹ä»¶ï¼Œä»¥åŠå®ç°æŒ‡ä»¤ä¸å¤šä¸ªæ§åˆ¶å™¨ä¹‹é—´è¿›è¡Œäº¤äº’</p>
<p>æŒ‡ä»¤å¯¹è±¡ä¸­çš„<code>link</code>å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯ä»¥æ“æ§DOMå…ƒç´ å¯¹è±¡ï¼ŒåŒ…æ‹¬ç»‘å®šå…ƒç´ çš„å„ç±»äº‹ä»¶ï¼Œå®šä¹‰äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œçš„å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">link: function(scope, element, attrs) &#123;</div><div class="line">  // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>link</code>å‡½æ•°åŒ…å«3ä¸ªä¸»è¦çš„å‚æ•°ï¼š</p>
<ul>
<li><code>scope</code>å‚æ•°è¡¨ç¤ºæŒ‡ä»¤æ‰€åœ¨çš„ä½œç”¨åŸŸ</li>
<li><code>element</code>å‚æ•°è¡¨ç¤ºæŒ‡ä»¤ä¸­çš„å…ƒç´ ï¼Œæ”¹å…ƒç´ å¯ä»¥é€šè¿‡Angularå†…éƒ¨å°è£…çš„jqLiteæ¡†æ¶è¿›è¡Œè°ƒç”¨</li>
<li><code>attrs</code>å‚æ•°è¡¨ç¤ºæŒ‡ä»¤å…ƒç´ çš„å±æ€§é›†åˆé€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥è·å–å…ƒç´ ä¸­çš„å„ç±»å±æ€§</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"MyCtrl"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">loader</span> <span class="attr">howToLoad</span>=<span class="string">"loadData()"</span>&gt;</span>æ»‘åŠ¨åŠ è½½<span class="tag">&lt;/<span class="name">loader</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"MyCtrl2"</span>&gt;</span></div><div class="line">          //å®šä¹‰å±æ€§è¿™æ ·è®©æˆ‘ä»¬çš„directiveå»è°ƒç”¨</div><div class="line">			<span class="tag">&lt;<span class="name">loader</span> <span class="attr">howToLoad</span>=<span class="string">"loadData2()"</span>&gt;</span>æ»‘åŠ¨åŠ è½½<span class="tag">&lt;/<span class="name">loader</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"Directive&amp;Controller.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">	$scope.loadData=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"åŠ è½½æ•°æ®ä¸­..."</span>);</div><div class="line">    &#125;</div><div class="line">&#125;]);</div><div class="line">myModule.controller(<span class="string">'MyCtrl2'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">    $scope.loadData2=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">"åŠ è½½æ•°æ®ä¸­...22222"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;]);</div><div class="line">myModule.directive(<span class="string">"loader"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">    	<span class="attr">restrict</span>:<span class="string">"AE"</span>,</div><div class="line">    	<span class="attr">link</span>:<span class="function"><span class="keyword">function</span>(<span class="params">scope,element,attrs</span>)</span>&#123;</div><div class="line">          <span class="comment">//è¿™é‡Œå’Œjqueryä¸€æ ·ï¼Œç»™è¿™ä¸ªloader directiveå…ƒç´ æ·»åŠ ä¸€ä¸ªmouseenteräº‹ä»¶ï¼Œç„¶åå»è°ƒç”¨ä¸Šé¢çš„å‡½æ•°</span></div><div class="line">    		element.bind(<span class="string">'mouseenter'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    			<span class="comment">//scope.loadData();</span></div><div class="line">              <span class="comment">//å¼ºåˆ¶åˆ·æ–°ä»¥åŠè°ƒç”¨ä¸Šé¢çš„å‡½æ•°</span></div><div class="line">    			<span class="comment">// scope.$apply("loadData()");</span></div><div class="line">    			<span class="comment">// æ³¨æ„è¿™é‡Œçš„å‘ï¼ŒhowToLoadä¼šè¢«è½¬æ¢æˆå°å†™çš„howtoload</span></div><div class="line">                <span class="comment">//ç»™æˆ‘ä»¬çš„é¡µé¢ä¸Šçš„æŒ‡ä»¤åŠ äº†å±æ€§ï¼Œç„¶åé€šè¿‡ä¸åŒçš„å±æ€§æ¥è°ƒç”¨ä¸åŒå‡½æ•°ï¼Œè¿™æ ·å­ä¹Ÿå®ç°äº†æŒ‡ä»¤</span></div><div class="line">                <span class="comment">//å¤ç”¨ï¼ŒæŒ‡ä»¤å°±æ˜¯ä¸ºäº†å¤ç”¨ï¼Œå°±å¯ä»¥åœ¨ä¸åŒçš„æ§åˆ¶å™¨ä¸­å»å¤ç”¨æŒ‡ä»¤ï¼Œä»¥åŠå®ç°æ•°æ®äº¤äº’</span></div><div class="line">    			scope.$apply(attrs.howtoload);</div><div class="line">    		&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125; </div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>linkå®ç°å¤šä¸ªæŒ‡ä»¤ä¹‹é—´çš„é€šä¿¡</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"Directive&amp;Directive.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-3"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">superman</span> <span class="attr">strength</span>&gt;</span>åŠ¨æ„Ÿè¶…äºº---åŠ›é‡<span class="tag">&lt;/<span class="name">superman</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-3"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">superman</span> <span class="attr">strength</span> <span class="attr">speed</span>&gt;</span>åŠ¨æ„Ÿè¶…äºº2---åŠ›é‡+æ•æ·<span class="tag">&lt;/<span class="name">superman</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-3"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">superman</span> <span class="attr">strength</span> <span class="attr">speed</span> <span class="attr">light</span>&gt;</span>åŠ¨æ„Ÿè¶…äºº3---åŠ›é‡+æ•æ·+å‘å…‰<span class="tag">&lt;/<span class="name">superman</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line">myModule.directive(<span class="string">"superman"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="comment">//åˆ›å»ºç‹¬ç«‹ä½œç”¨åŸŸï¼Œä¸‹é¢ä¸€ä¸ªä¾‹å­ä¼šè®²è§£ç‹¬ç«‹scope</span></div><div class="line">        scope: &#123;&#125;,</div><div class="line">        <span class="attr">restrict</span>: <span class="string">'AE'</span>,</div><div class="line">      <span class="comment">//æŒ‡ä»¤å†…éƒ¨çš„controllerï¼Œä½œç”¨æ˜¯æˆ‘ä»¬çš„æŒ‡ä»¤æš´éœ²å‡ºpublicæ–¹æ³•ä¾›å¤–éƒ¨ä½¿ç”¨</span></div><div class="line">        controller: <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">            $scope.abilities = [];</div><div class="line">            <span class="keyword">this</span>.addStrength = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                $scope.abilities.push(<span class="string">"strength"</span>);</div><div class="line">            &#125;;</div><div class="line">            <span class="keyword">this</span>.addSpeed = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                $scope.abilities.push(<span class="string">"speed"</span>);</div><div class="line">            &#125;;</div><div class="line">            <span class="keyword">this</span>.addLight = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                $scope.abilities.push(<span class="string">"light"</span>);</div><div class="line">            &#125;;</div><div class="line">        &#125;,</div><div class="line">      <span class="comment">//linkæ˜¯æŒ‡ä»¤å†…éƒ¨çš„ä¸€äº›æ–¹æ³•</span></div><div class="line">        link: <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs</span>) </span>&#123;</div><div class="line">          <span class="comment">//ç»™æˆ‘ä»¬çš„å…ƒç´ å¢åŠ classname</span></div><div class="line">            element.addClass(<span class="string">'btn btn-primary'</span>);</div><div class="line">          <span class="comment">//ç»‘å®šäº‹ä»¶</span></div><div class="line">            element.bind(<span class="string">"mouseenter"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(scope.abilities);</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">myModule.directive(<span class="string">"strength"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="comment">//requireæ˜¯è¯´strengthæŒ‡ä»¤ä¾èµ–äºsupermanè¿™ä¸ªæŒ‡ä»¤</span></div><div class="line">        <span class="built_in">require</span>: <span class="string">'^superman'</span>,</div><div class="line">      <span class="comment">//å½“æœ‰äº†ä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ³¨å…¥ç¬¬å››ä¸ªå‚æ•°äº†ï¼Œè¿™æ ·å­æˆ‘ä»¬å°±å¯ä»¥è®¿é—®åˆ°supermanCtrlé‡Œé¢æš´éœ²å‡ºæ¥çš„å…¬ç”¨æ–¹æ³•äº†</span></div><div class="line">        link: <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs, supermanCtrl</span>) </span>&#123;</div><div class="line">            supermanCtrl.addStrength();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">myModule.directive(<span class="string">"speed"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">require</span>: <span class="string">'^superman'</span>,</div><div class="line">        <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs, supermanCtrl</span>) </span>&#123;</div><div class="line">            supermanCtrl.addSpeed();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">myModule.directive(<span class="string">"light"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">require</span>: <span class="string">'^superman'</span>,</div><div class="line">        <span class="attr">link</span>: <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs, supermanCtrl</span>) </span>&#123;</div><div class="line">            supermanCtrl.addLight();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="ç‹¬ç«‹scope"><a href="#ç‹¬ç«‹scope" class="headerlink" title="ç‹¬ç«‹scope"></a>ç‹¬ç«‹scope</h4><p>åœ¨AngularæŒ‡ä»¤å¯¹è±¡ä¸­ï¼Œ<code>scope</code>å±æ€§ä½¿ç”¨é¢‘ç‡å¾ˆé«˜ï¼Œå®ƒçš„å€¼åŒ…å«ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯å¸ƒå°”å€¼ï¼Œå¦ä¸€ç±»æ˜¯JSONå¯¹è±¡</p>
<h5 id="scopeå±æ€§æ˜¯å¸ƒå°”å€¼"><a href="#scopeå±æ€§æ˜¯å¸ƒå°”å€¼" class="headerlink" title="scopeå±æ€§æ˜¯å¸ƒå°”å€¼"></a>scopeå±æ€§æ˜¯å¸ƒå°”å€¼</h5><p>ä½¿ç”¨<code>scope</code>å±æ€§è‡ªå®šä¹‰æŒ‡ä»¤æ—¶ï¼Œé»˜è®¤æ˜¯å¸ƒå°”ç±»å‹ï¼Œåˆå§‹å€¼ä¸ºfalseã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŒ‡ä»¤ä¸­çš„ä½œç”¨åŸŸå°±æ˜¯æŒ‡ä»¤å…ƒç´ æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚æˆ‘ä»¬å°†æŒ‡ä»¤ä¸­çš„ä½œç”¨åŸŸç§°ä¸ºå­ä½œç”¨åŸŸï¼ŒæŠŠæŒ‡ä»¤å…ƒç´ æ‰€åœ¨ä½œç”¨åŸŸç§°ä¸ºçˆ¶ä½œç”¨åŸŸï¼Œå½“<code>scope</code>ä¸º<code>false</code>æ—¶ï¼Œå­ä½œç”¨åŸŸå’Œçˆ¶ä½œç”¨åŸŸå®Œå…¨ç›¸åŒï¼Œä¸€æ–¹å˜åŒ–ï¼Œåˆ™å¦ä¸€æ–¹ä¹Ÿä¼šè‡ªåŠ¨å‘ç”Ÿå˜åŒ–</p>
<p>å½“<code>scope</code>ä¸º<code>true</code>æ—¶ï¼Œåˆ™è¡¨ç¤ºå­ä½œç”¨åŸŸæ˜¯ç‹¬ç«‹åˆ›å»ºçš„ï¼Œçˆ¶ä½œç”¨åŸŸä¸­å†…å®¹çš„æ”¹å˜ä¼šå½±å“å­ä½œç”¨åŸŸï¼Œä½†å­ä½œç”¨åŸŸçš„å†…å®¹å‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä¸ä¼šä¿®æ”¹çˆ¶ä½œç”¨åŸŸä¸­çš„å†…å®¹</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;script type="text/ng-template" id="tpl"&gt;</div><div class="line">  &lt;div&gt;&#123;&#123;message&#125;&#125;&lt;/div&gt;</div><div class="line">  &lt;button ng-transclude&gt;&lt;/button&gt;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line">&lt;div&gt;</div><div class="line">  &lt;input type="text" ng-model="message" placeholder="è¯·è¾“å…¥æç¤ºå†…å®¹"&gt;</div><div class="line">  &lt;ts-message&gt;å›ºå®š&lt;/ts-message&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">  var app = angular.module('myapp', []);</div><div class="line">  app.directive('tsMessage', function () &#123;</div><div class="line">    return &#123;</div><div class="line">      restrict: 'EAC',</div><div class="line">      templateUrl: 'tpl',</div><div class="line">      transclude: true,</div><div class="line">      scope: true,</div><div class="line">      link: function (scope, element, attrs) &#123;</div><div class="line">        element.bind('click', function () &#123;</div><div class="line">          scope.$apply(function () &#123;</div><div class="line">            scope.message = 'è¿™æ˜¯å•å‡»åçš„å€¼';</div><div class="line">          &#125;)</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒä¸ªä¾‹å­</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"myCtrl"</span>&gt;</span></div><div class="line">  çˆ¶äº²: &#123;&#123;name&#125;&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"name"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">my-directive</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>, [])</div><div class="line">  app.controller(<span class="string">'myCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.name = <span class="string">'leifeng'</span>;</div><div class="line">  &#125;]);</div><div class="line">  app.directive(<span class="string">'myDirective'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">'EA'</span>,</div><div class="line">      <span class="attr">scope</span>: <span class="literal">true</span>,    <span class="comment">//çˆ¶ä½œç”¨åŸŸå‘ç”Ÿæ”¹å˜ï¼Œå­ä½œç”¨åŸŸä¼šå˜åŒ–ï¼Œå­ä½œç”¨åŸŸçš„å˜åŒ–ä¸ä¼šå½±å“çˆ¶ä½œç”¨åŸŸ</span></div><div class="line">      template: <span class="string">'&lt;div&gt;å„¿å­: &#123;&#123;name&#125;&#125;&lt;input ng-model="name"&gt;&lt;/div&gt;'</span></div><div class="line">    &#125;</div><div class="line">  &#125;);</div></pre></td></tr></table></figure>
<h5 id="scopeå±æ€§æ˜¯å¯¹è±¡"><a href="#scopeå±æ€§æ˜¯å¯¹è±¡" class="headerlink" title="scopeå±æ€§æ˜¯å¯¹è±¡"></a>scopeå±æ€§æ˜¯å¯¹è±¡</h5><p>é™¤äº†å°†scopeå±æ€§è®¾ç½®ä¸ºå¸ƒå°”å€¼ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®æˆä¸€ä¸ªJSONå¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆçˆ¶ä½œç”¨åŸŸä¸å­ä½œç”¨åŸŸæ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œä¸å­˜åœ¨ä»»ä½•å…³è”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">app.directive(&apos;myDirective&apos;, function () &#123;</div><div class="line">  return &#123;</div><div class="line">    resrict: &apos;EA&apos;,</div><div class="line">    scope: &#123;&#125;,  //çˆ¶ä½œç”¨åŸŸä¸å­ä½œç”¨åŸŸç›¸äº’ä¸å½±å“ï¼Œæ”¹å˜ä»»æ„ä¸€æ–¹éƒ½ä¸ä¼šæ”¹å˜å¦ä¸€æ–¹</div><div class="line">    template: //....</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>è¿™æ—¶ï¼Œå­ä½œç”¨åŸŸä¸­å¦‚æœéœ€è¦æ·»åŠ å±æ€§ï¼Œåˆ™å¯ä»¥é€šè¿‡<code>link</code>å‡½æ•°ï¼Œåœ¨<code>scope</code>ä¸Šæ·»åŠ ï¼Œå¦‚æœå­ä½œç”¨åŸŸéœ€è¦ä¸è°ƒç”¨çˆ¶ä½œç”¨åŸŸçš„å±æ€§å’Œæ–¹æ³•ï¼Œåˆ™éœ€è¦åœ¨è¿™ä¸ªJSONå¯¹è±¡ä¸­æ·»åŠ ç»‘å®šç­–ç•¥</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"IsolateScope.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line">myModule.directive(<span class="string">"hello"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">restrict</span>: <span class="string">'AE'</span>,</div><div class="line">       <span class="comment">// scope:&#123;&#125;,// å¦‚æœä¸åŠ è¿™ä¸ªå‚æ•°çš„è¯ï¼Œæˆ‘ä»¬é¡µé¢ä¸­æ‰€æœ‰çš„æŒ‡ä»¤éƒ½ä¼šåŒæ—¶å‘ç”Ÿæ”¹å˜äº’ç›¸å½±å“ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„</span></div><div class="line">        template: <span class="string">'&lt;div&gt;&lt;input type="text" ng-model="userName"/&gt;&#123;&#123;userName&#125;&#125;&lt;/div&gt;'</span>,</div><div class="line">        <span class="attr">replace</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h5 id="scopeç»‘å®šç­–ç•¥"><a href="#scopeç»‘å®šç­–ç•¥" class="headerlink" title="scopeç»‘å®šç­–ç•¥"></a>scopeç»‘å®šç­–ç•¥</h5><p>åœ¨JSONå¯¹è±¡ä¸­æ·»åŠ çš„æœ‰3ç§ç»‘å®šç­–ç•¥ï¼Œåˆ†åˆ«æ˜¯<code>@</code>ã€<code>=</code>å’Œ<code>&amp;</code></p>
<p><img src="/images/ng-scope.png" alt="img"></p>
<p>@ç»‘å®š</p>
<p>å¦‚æœçˆ¶ä½œç”¨åŸŸçš„å±æ€§å†…å®¹ä¿®æ”¹äº†ï¼Œå­ä½œç”¨åŸŸå¯¹åº”çš„å±æ€§å†…å®¹ä¹Ÿä¼šéšä¹‹ä¿®æ”¹ï¼Œè€Œå¦‚æœå­ä½œç”¨åŸŸå±æ€§å†…å®¹ä¿®æ”¹äº†ï¼Œæ˜¯ä¸ä¼šå½±å“çˆ¶ä½œç”¨åŸŸå¯¹åº”çš„å±æ€§å†…å®¹çš„ã€‚</p>
<p>æ¡ˆä¾‹ä¸€</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"myCtrl"</span>&gt;</span></div><div class="line">  çˆ¶äº²: &#123;&#123;name&#125;&#125;</div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-model</span>=<span class="string">"name"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">my-directive</span> <span class="attr">name</span>=<span class="string">"&#123;&#123;name&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">my-directive</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>, [])</div><div class="line">  app.controller(<span class="string">'myCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$scope</span>) </span>&#123;</div><div class="line"></div><div class="line">  &#125;]);</div><div class="line">  app.directive(<span class="string">'myDirective'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">'EA'</span>,</div><div class="line">      <span class="attr">scope</span>: &#123;</div><div class="line">        <span class="attr">name</span>: <span class="string">'@'</span>  <span class="comment">//æŒ‡ä»¤ä½œç”¨åŸŸä¸­å˜é‡ä¸çˆ¶ä½œç”¨åŸŸä¸­ä¸€è‡´ï¼Œç›´æ¥ä½¿ç”¨@ç»‘å®š</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">replace</span>: <span class="literal">true</span>,</div><div class="line">      <span class="attr">template</span>: <span class="string">'&lt;div&gt;å„¿å­: &#123;&#123;name&#125;&#125;&lt;input ng-model="name"&gt;&lt;/div&gt;'</span></div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>æ¡ˆä¾‹äºŒ</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"MyCtrl"</span>&gt;</span></div><div class="line">          //éœ€è¦æ³¨æ„çš„æ˜¯@ç»‘å®šä¼ é€’çš„æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å¯¹è±¡</div><div class="line">			<span class="tag">&lt;<span class="name">drink</span> <span class="attr">flavor</span>=<span class="string">"&#123;&#123;ctrlFlavor&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">drink</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"ScopeAt.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">  <span class="comment">//æ§åˆ¶å™¨ä¸Šé¢åŠ ä¸ªä¸€ä¸ªå±æ€§</span></div><div class="line">	$scope.ctrlFlavor=<span class="string">"ç™¾å¨"</span>;</div><div class="line">&#125;])</div><div class="line">myModule.directive(<span class="string">"drink"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">    	<span class="attr">restrict</span>:<span class="string">'AE'</span>,</div><div class="line">        <span class="attr">scope</span>:&#123;</div><div class="line">          <span class="comment">//è€Œè¿™ç§æ–¹å¼angularåˆ™ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨ç»‘å®šæ•°æ®</span></div><div class="line">        	flavor:<span class="string">'@'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">template</span>:<span class="string">"&lt;div&gt;&#123;&#123;flavor&#125;&#125;&lt;/div&gt;"</span></div><div class="line">        <span class="comment">// ,</span></div><div class="line">      <span class="comment">//ä¸‹é¢è¿™ç§æ–¹å¼æŒ‡å®šæˆ‘ä»¬çš„flavorçš„æ•°æ®æ˜¯æˆ‘ä»¬çš„æ§åˆ¶å™¨ä¸­çš„æ•°æ®</span></div><div class="line">        <span class="comment">// link:function(scope,element,attrs)&#123;</span></div><div class="line">        <span class="comment">// 	scope.flavor=attrs.flavor;</span></div><div class="line">        <span class="comment">// &#125;</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ScopeEqualç»‘å®š è¿›è¡ŒåŒå‘æ•°æ®ç»‘å®šï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ§åˆ¶å™¨ä¸æŒ‡ä»¤ä¹‹é—´è¿›è¡ŒåŒå‘çš„æ•°æ®ç»‘å®š</p>
<p><code>=ç»‘å®š</code>çš„åŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªçˆ¶ä½œç”¨åŸŸä¸å­ä½œç”¨åŸŸå¯ä»¥åŒæ—¶å…±äº«çš„å±æ€§ï¼Œå³çˆ¶ä½œç”¨åŸŸä¿®æ”¹äº†è¯¥å±æ€§ï¼Œå­ä½œç”¨åŸŸä¹Ÿéšä¹‹æ”¹å˜ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"MyCtrl"</span>&gt;</span></div><div class="line">			Ctrl:</div><div class="line">			<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">          //è¿™å„¿æ˜¯æˆ‘ä»¬æ§åˆ¶å™¨ä¸­çš„ctrlFlavor</div><div class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"ctrlFlavor"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">			Directive:</div><div class="line">			<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">          //è¿™å„¿å±•ç¤ºæˆ‘ä»¬æŒ‡ä»¤ä¸­çš„flavor</div><div class="line">			<span class="tag">&lt;<span class="name">drink</span> <span class="attr">flavor</span>=<span class="string">"ctrlFlavor"</span>&gt;</span><span class="tag">&lt;/<span class="name">drink</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"ScopeEqual.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, []);</div><div class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">	$scope.ctrlFlavor=<span class="string">"ç™¾å¨"</span>;</div><div class="line">&#125;])</div><div class="line">myModule.directive(<span class="string">"drink"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">    	<span class="attr">restrict</span>:<span class="string">'AE'</span>,</div><div class="line">        <span class="attr">scope</span>:&#123;</div><div class="line">          <span class="comment">//ç”¨=ç»‘å®šå°±å¯ä»¥åªè¦æ”¹å˜æˆ‘ä»¬æŒ‡ä»¤ä¸­çš„flavorå°±å¯ä»¥æ”¹å˜æˆ‘ä»¬çš„æ§åˆ¶å™¨ä¸­çš„ctrlFlavorï¼Œåä¹‹æˆ‘ä»¬æ”¹å˜æ§åˆ¶å™¨ä¸­çš„ä¹Ÿå¯ä»¥æ”¹å˜æŒ‡ä»¤ä¸­çš„</span></div><div class="line">        	flavor:<span class="string">'='</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">template</span>:<span class="string">'&lt;input type="text" ng-model="flavor"/&gt;'</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>&amp;scope  å®ç°æ§åˆ¶å™¨ä¸æŒ‡ä»¤ä¹‹é—´çš„äº¤äº’ï¼Œæ¯”<code>link</code>è¦æ–¹ä¾¿,ä¼ é€’ä¸€ä¸ªæ¥è‡ªçˆ¶scopeçš„å‡½æ•°ï¼Œç¨åè°ƒç”¨</p>
<p><code>&amp;ç»‘å®š</code>çš„åŠŸèƒ½å¯ä»¥åœ¨ç‹¬ç«‹çš„å­ä½œç”¨åŸŸä¸­ç›´æ¥è°ƒç”¨çˆ¶ä½œç”¨åŸŸçš„æ–¹æ³•ï¼Œåœ¨è°ƒç”¨æ—¶å¯ä»¥å‘å‡½æ•°ä¼ é€’å‚æ•°ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"MyCtrl"</span>&gt;</span></div><div class="line">          //è¿™é‡Œæˆ‘ä»¬ä¼ é€’çš„å‚æ•°æ˜¯å¯¹è±¡ï¼Œè·Ÿä¸Šé¢è¯´çš„@scopeä¸åŒ</div><div class="line">			<span class="tag">&lt;<span class="name">greeting</span> <span class="attr">greet</span>=<span class="string">"sayHello(name)"</span>&gt;</span><span class="tag">&lt;/<span class="name">greeting</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">greeting</span> <span class="attr">greet</span>=<span class="string">"sayHello(name)"</span>&gt;</span><span class="tag">&lt;/<span class="name">greeting</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">greeting</span> <span class="attr">greet</span>=<span class="string">"sayHello(name)"</span>&gt;</span><span class="tag">&lt;/<span class="name">greeting</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"ScopeAnd.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">"MyModule"</span>, [] ;</div><div class="line">myModule.controller(<span class="string">'MyCtrl'</span>, [<span class="string">'$scope'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">  <span class="comment">//æš´éœ²å‡ºä¸€ä¸ªæ–¹æ³•å°±å¯ä»¥è¢«æˆ‘ä»¬çš„æŒ‡ä»¤è¿›è¡Œè°ƒç”¨</span></div><div class="line">	$scope.sayHello=<span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">		alert(<span class="string">"Hello "</span>+name);</div><div class="line">	&#125;</div><div class="line">&#125;])</div><div class="line">myModule.directive(<span class="string">"greeting"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">    	<span class="attr">restrict</span>:<span class="string">'AE'</span>,</div><div class="line">        <span class="attr">scope</span>:&#123;</div><div class="line">        	<span class="attr">greet</span>:<span class="string">'&amp;'</span></div><div class="line">        &#125;,</div><div class="line">      <span class="comment">//åœ¨ä¸‹é¢æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–¹æ³•è¿›è¡Œè°ƒç”¨æˆ‘ä»¬ä¸Šé¢çš„æ§åˆ¶å™¨æš´éœ²å‡ºæ¥çš„sayHelloæ–¹æ³•</span></div><div class="line">      <span class="comment">//ä¼ é€’å‚æ•°çš„å½¢å¼æ˜¯å¯¹è±¡çš„å½¢å¼</span></div><div class="line">        template:<span class="string">'&lt;input type="text" ng-model="userName" /&gt;&lt;br/&gt;'</span>+</div><div class="line">        		 <span class="string">'&lt;button class="btn btn-default" ng-click="greet(&#123;name:userName&#125;)"&gt;Greeting&lt;/button&gt;&lt;br/&gt;'</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="AngularæŒ‡ä»¤å¯¹è±¡çš„requireå’Œcontrollerå±æ€§"><a href="#AngularæŒ‡ä»¤å¯¹è±¡çš„requireå’Œcontrollerå±æ€§" class="headerlink" title="AngularæŒ‡ä»¤å¯¹è±¡çš„requireå’Œcontrollerå±æ€§"></a>AngularæŒ‡ä»¤å¯¹è±¡çš„requireå’Œcontrollerå±æ€§</h3><p><code>require</code>å’Œ<code>controller</code>ä¸¤ä¸ªå±æ€§å¸¸ç”¨äºå¤šä¸ªè‡ªå®šä¹‰æŒ‡ä»¤å…ƒç´ åµŒå¥—æ—¶ï¼Œå³å½“ä¸€ä¸ªå­å…ƒç´ æŒ‡ä»¤éœ€è¦ä¸çˆ¶å…ƒç´ æŒ‡ä»¤é€šä¿¡æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¿™ä¸¤ä¸ªå±æ€§</p>
<h4 id="requireå’Œcontrollerå±æ€§çš„æ¦‚å¿µ"><a href="#requireå’Œcontrollerå±æ€§çš„æ¦‚å¿µ" class="headerlink" title="requireå’Œcontrollerå±æ€§çš„æ¦‚å¿µ"></a>requireå’Œcontrollerå±æ€§çš„æ¦‚å¿µ</h4><p><code>require</code>å±æ€§åœ¨åˆ›å»ºå­å…ƒç´ æŒ‡ä»¤æ—¶æ·»åŠ ï¼Œå®ƒçš„å±æ€§å€¼ç”¨äºæè¿°ä¸çˆ¶å…ƒç´ æŒ‡ä»¤é€šä¿¡æ—¶çš„æ–¹å¼ï¼Œå¦‚<code>^</code>ç¬¦å·è¡¨ç¤ºå‘å¤–å±‚å¯»æ‰¾æŒ‡å®šåç§°çš„æŒ‡ä»¤ï¼Œ<code>?</code>ç¬¦å·è¡¨ç¤ºå³ä½¿æ²¡æœ‰æ‰¾åˆ°ï¼Œä¹Ÿä¸ä¼šå‡ºç°å¼‚å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">require: &quot;^?myDirective&quot;</div></pre></td></tr></table></figure>
<p><code>controller</code>å±æ€§å€¼æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåœ¨åˆ›å»ºçˆ¶å…ƒç´ æŒ‡ä»¤æ—¶æ·»åŠ ï¼Œå¹¶å¯ä»¥åœ¨å‡½æ•°ä¸­åˆ›å»ºå¤šä¸ªå±æ€§æˆ–æ–¹æ³•ã€‚åœ¨æ·»åŠ åï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•éƒ½ä¼šè¢«å®ä¾‹çš„å¯¹è±¡æ‰€ç»§æ‰¿ï¼Œè€Œè¿™ä¸ªå®ä¾‹å¯¹è±¡åˆ™æ˜¯å­å…ƒç´ æŒ‡ä»¤ä¸­<code>link</code>å‡½æ•°çš„ç¬¬4ä¸ªå‚æ•°</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“åœ¨å­å…ƒç´ æŒ‡ä»¤ä¸­æ·»åŠ äº†<code>require</code>å±æ€§ï¼Œå¹¶é€šè¿‡å±æ€§å€¼æŒ‡å®šçˆ¶å…ƒç´ æŒ‡ä»¤çš„åç§°ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å­å…ƒç´ æŒ‡ä»¤ä¸­<code>link</code>å‡½æ•°çš„ç¬¬4ä¸ªå‚æ•°æ¥è®¿é—®çˆ¶å…ƒç´ æŒ‡ä»¤ä¸­<code>controller</code>å±æ€§æ·»åŠ çš„æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">controller: function () &#123;</div><div class="line">  this.a = function (childDirective) &#123;</div><div class="line">    // æ–¹æ³•açš„å‡½æ•°ä½“</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><code>controller</code>çš„å±æ€§å€¼å¯¹åº”ä¸€ä¸ªæ„é€ å‡½æ•°</li>
<li><code>this</code>ä»£è¡¨çˆ¶å…ƒç´ æŒ‡ä»¤æœ¬èº«</li>
<li><code>a</code>è¡¨ç¤ºæ„é€ å‡½æ•°ä¸­çš„ä¸€ä¸ªä»»æ„çš„æ–¹æ³•</li>
<li><code>childDirective</code>å½¢å‚è¡¨ç¤ºå­å…ƒç´ æŒ‡ä»¤ä¸­çš„<code>scope</code>å¯¹è±¡</li>
</ul>
<p>html:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--çˆ¶å…ƒç´ æŒ‡ä»¤--&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">ts-parent</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;ptip&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--å­å…ƒç´ æŒ‡ä»¤--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ts-child</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;ctip&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ts-child</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"click()"</span>&gt;</span>æ¢ä½<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">ts-parent</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>javascript:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  <span class="keyword">var</span> app = angular.module(<span class="string">'myApp'</span>, []);</div><div class="line"></div><div class="line">  app.directive(<span class="string">'tsParent'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">'EA'</span>,</div><div class="line">      <span class="attr">controller</span>: <span class="function"><span class="keyword">function</span> (<span class="params">$scope, $compile, $http</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.addChild = <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</div><div class="line">          $scope.ptip = <span class="string">'ä»Šå¤©å¤©æ°”ä¸é”™!'</span>;</div><div class="line">          $scope.click = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            $scope.tmp = $scope.ptip;</div><div class="line">            $scope.ptip = c.ctip;</div><div class="line">            c.ctip = $scope.tmp;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  app.directive(<span class="string">'tsChild'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">restrict</span>: <span class="string">'EA'</span>,</div><div class="line">      <span class="comment">// ä¸çˆ¶å…ƒç´ æŒ‡ä»¤tsParentè¿›è¡Œé€šä¿¡</span></div><div class="line">      <span class="built_in">require</span>: <span class="string">'^?tsParent'</span>,</div><div class="line">      <span class="comment">// ç¬¬4ä¸ªå‚æ•°è¡¨ç¤ºçˆ¶å…ƒç´ æŒ‡ä»¤æœ¬èº«ï¼Œå¯ä»¥è°ƒç”¨å®šä¹‰åœ¨å…¶ä¸Šçš„æ–¹æ³•</span></div><div class="line">      link: <span class="function"><span class="keyword">function</span> (<span class="params">scope, element, attrs, ctrl</span>) </span>&#123;</div><div class="line">        scope.ctip = <span class="string">'æ°”æ¸©æ­£å¥½18æ‘„æ°åº¦'</span>;</div><div class="line">        ctrl.addChild(scope);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;);</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p>angularå†…ç½®æŒ‡ä»¤åœ¨æˆ‘ç”¨çš„1.3.11ä¸­å…±è®¡63ä¸ª</p>
<p><img src="/images/ng-zhiling.png" alt="img"></p>
<h5 id="formæŒ‡ä»¤"><a href="#formæŒ‡ä»¤" class="headerlink" title="formæŒ‡ä»¤"></a>formæŒ‡ä»¤</h5><p><img src="/images/ng-form.png" alt="img"></p>
<p>FormBasic</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">'TestFormModule'</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"FormBasic.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"myForm"</span> <span class="attr">ng-submit</span>=<span class="string">"save()"</span> <span class="attr">ng-controller</span>=<span class="string">"TestFormModule"</span>&gt;</span></div><div class="line">          //requiredå±æ€§å°±æ˜¯æˆ‘ä»¬çš„angularå¸®æˆ‘ä»¬è‡ªåŠ¨æ ¡éªŒ</div><div class="line">			  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"userName"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"user.userName"</span> <span class="attr">required</span>/&gt;</span></div><div class="line">			  <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">ng-model</span>=<span class="string">"user.password"</span> <span class="attr">required</span>/&gt;</span></div><div class="line">          //ng-disabledæŠŠå®ƒç»‘å®šåˆ°myForm.$invalidä¸Šå°±å¯ä»¥åˆ¤æ–­æˆ‘ä»¬çš„æŒ‰é’®æ˜¯å¦å¯ç”¨çš„çŠ¶æ€</div><div class="line">			  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">ng-disabled</span>=<span class="string">"myForm.$invalid"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> appModule = angular.module(<span class="string">'TestFormModule'</span>, []);</div><div class="line">appModule.controller(<span class="string">"TestFormModule"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</div><div class="line">	$scope.user=&#123;</div><div class="line">		<span class="attr">userName</span>:<span class="string">'damoqiongqiu'</span>,</div><div class="line">		<span class="attr">password</span>:<span class="string">''</span></div><div class="line">	&#125;;</div><div class="line">	$scope.save=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		alert(<span class="string">"ä¿å­˜æ•°æ®!"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>formadv1 ä¸‹é¢æ˜¯å¤æ‚ä¸€ç‚¹çš„è¡¨å•</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"FormAdv1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"Controller"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">form</span> <span class="attr">name</span>=<span class="string">"form"</span> <span class="attr">class</span>=<span class="string">"css-form"</span> <span class="attr">novalidate</span>&gt;</span></div><div class="line">				Name:</div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"user.name"</span> <span class="attr">name</span>=<span class="string">"uName"</span> <span class="attr">required</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">				E-mail:</div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">ng-model</span>=<span class="string">"user.email"</span> <span class="attr">name</span>=<span class="string">"uEmail"</span> <span class="attr">required</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">              //æ ¡éªŒæˆ‘ä»¬çš„Emailæ˜¯å¦åˆæ³•form.uEmail.$dirty &amp;&amp; form.uEmail.$invalid</div><div class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-show</span>=<span class="string">"form.uEmail.$dirty &amp;&amp; form.uEmail.$invalid"</span>&gt;</span></div><div class="line">					Invalid:</div><div class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-show</span>=<span class="string">"form.uEmail.$error.required"</span>&gt;</span>Tell us your email.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">					<span class="tag">&lt;<span class="name">span</span> <span class="attr">ng-show</span>=<span class="string">"form.uEmail.$error.email"</span>&gt;</span>This is not a valid email.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">				Gender:<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">ng-model</span>=<span class="string">"user.gender"</span> <span class="attr">value</span>=<span class="string">"male"</span> /&gt;</span></div><div class="line">				male</div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">ng-model</span>=<span class="string">"user.gender"</span> <span class="attr">value</span>=<span class="string">"female"</span> /&gt;</span></div><div class="line">				female<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">ng-model</span>=<span class="string">"user.agree"</span> <span class="attr">name</span>=<span class="string">"userAgree"</span> <span class="attr">required</span> /&gt;</span></div><div class="line">				I agree:</div><div class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">ng-show</span>=<span class="string">"user.agree"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">ng-model</span>=<span class="string">"user.agreeSign"</span> <span class="attr">required</span> /&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-show</span>=<span class="string">"!user.agree || !user.agreeSign"</span>&gt;</span></div><div class="line">					Please agree and sign.</div><div class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"reset()"</span> <span class="attr">ng-disabled</span>=<span class="string">"isUnchanged(user)"</span>&gt;</span></div><div class="line">					RESET</div><div class="line">				<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">button</span> <span class="attr">ng-click</span>=<span class="string">"update(user)"</span> <span class="attr">ng-disabled</span>=<span class="string">"form.$invalid || isUnchanged(user)"</span>&gt;</span></div><div class="line">					SAVE</div><div class="line">				<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">			<span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Controller</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">	$scope.master = &#123;&#125;;</div><div class="line"></div><div class="line">	$scope.update = <span class="function"><span class="keyword">function</span>(<span class="params">user</span>) </span>&#123;</div><div class="line">		$scope.master = angular.copy(user);</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	$scope.reset = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">		$scope.user = angular.copy($scope.master);</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	$scope.isUnchanged = <span class="function"><span class="keyword">function</span>(<span class="params">user</span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> angular.equals(user, $scope.master);</div><div class="line">	&#125;;</div><div class="line"></div><div class="line">	$scope.reset();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢è¯´ä¸€ä¸ªæ¯”è¾ƒé…·çš„åŠŸèƒ½</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"form-example2"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"../bootstrap/css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">media</span>=<span class="string">"screen"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"FormCustom.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></div><div class="line">			div[contentEditable] &#123;</div><div class="line">				cursor: pointer;</div><div class="line">				background-color: #D0D0D0;</div><div class="line">			&#125;</div><div class="line">		<span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">          //å¼€å¯contentEditableå¯ä»¥è®©æˆ‘ä»¬çš„divæœ‰inputçš„åŠŸèƒ½</div><div class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">contentEditable</span>=<span class="string">"true"</span> <span class="attr">ng-model</span>=<span class="string">"content"</span> <span class="attr">title</span>=<span class="string">"Click to edit"</span>&gt;</span>Some<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">pre</span>&gt;</span>model = &#123;&#123;content&#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">'form-example2'</span>, []).directive(<span class="string">'contenteditable'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="attr">require</span> : <span class="string">'ngModel'</span>,</div><div class="line">		<span class="attr">link</span> : <span class="function"><span class="keyword">function</span>(<span class="params">scope, elm, attrs, ctrl</span>) </span>&#123;</div><div class="line">			<span class="comment">// view -&gt; model</span></div><div class="line">			elm.bind(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				scope.$apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">					ctrl.$setViewValue(elm.text());</div><div class="line">				&#125;);</div><div class="line">			&#125;);</div><div class="line"></div><div class="line">			<span class="comment">// model -&gt; view</span></div><div class="line">			ctrl.$render = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				elm.html(ctrl.$viewValue);</div><div class="line">			&#125;;</div><div class="line"></div><div class="line">			<span class="comment">// load init value from DOM</span></div><div class="line">			ctrl.$setViewValue(elm.html());</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰æŒ‡ä»¤</h3><p><img src="/images/expander.png" alt="img"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">'expanderModule'</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"ExpanderSimple.css"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"ExpanderSimple.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">'SomeController'</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">expander</span> <span class="attr">class</span>=<span class="string">'expander'</span> <span class="attr">expander-title</span>=<span class="string">'title'</span>&gt;</span></div><div class="line">				&#123;&#123;text&#125;&#125;</div><div class="line">			<span class="tag">&lt;/<span class="name">expander</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> expanderModule=angular.module(<span class="string">'expanderModule'</span>, []);</div><div class="line">expanderModule.directive(<span class="string">'expander'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">      <span class="comment">//è¿™é‡Œæˆ‘ä»¬çš„åŒ¹é…æ¨¡å¼å®šä¹‰çš„æ˜¯ä¹Ÿå¯ä»¥ç”¨å…ƒç´ ä¹Ÿå¯ä»¥ç”¨å±æ€§</span></div><div class="line">		restrict : <span class="string">'EA'</span>,</div><div class="line">      <span class="comment">// æ›¿æ¢</span></div><div class="line">		replace : <span class="literal">true</span>,</div><div class="line">      <span class="comment">//å†…éƒ¨çš„å†…å®¹æ˜¯å¯ä»¥å˜æ¢çš„</span></div><div class="line">		transclude : <span class="literal">true</span>,</div><div class="line">		<span class="attr">scope</span> : &#123;</div><div class="line">          <span class="comment">//ç”¨=å·è¿›è¡ŒscopeåŒå‘æ•°æ®ç»‘å®š</span></div><div class="line">			title : <span class="string">'=expanderTitle'</span></div><div class="line">		&#125;,</div><div class="line">      <span class="comment">//ng-click="toggle()è¿™é‡Œçš„clickåªèƒ½è°ƒç”¨æˆ‘ä»¬å†…éƒ¨çš„toggle</span></div><div class="line">		template : <span class="string">'&lt;div&gt;'</span></div><div class="line">				 + <span class="string">'&lt;div class="title" ng-click="toggle()"&gt;&#123;&#123;title&#125;&#125;&lt;/div&gt;'</span></div><div class="line">				 + <span class="string">'&lt;div class="body" ng-show="showMe" ng-transclude&gt;&lt;/div&gt;'</span></div><div class="line">				 + <span class="string">'&lt;/div&gt;'</span>,</div><div class="line">		<span class="attr">link</span> : <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs</span>) </span>&#123;</div><div class="line">			scope.showMe = <span class="literal">false</span>;</div><div class="line">          <span class="comment">//è¿™é‡Œæˆ‘ä»¬å®šä¹‰çš„toggleåªèƒ½åœ¨æŒ‡ä»¤å†…éƒ¨è¿›è¡Œè°ƒç”¨</span></div><div class="line">			scope.toggle = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				scope.showMe = !scope.showMe;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line">expanderModule.controller(<span class="string">'SomeController'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">    $scope.title = <span class="string">'ç‚¹å‡»å±•å¼€'</span>;</div><div class="line">	$scope.text = <span class="string">'è¿™é‡Œæ˜¯å†…éƒ¨çš„å†…å®¹ã€‚'</span>;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.expander</span> &#123;</div><div class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid black;</div><div class="line">	<span class="attribute">width</span>: <span class="number">250px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.expander</span>&gt;<span class="selector-class">.title</span> &#123;</div><div class="line">	<span class="attribute">background-color</span>: black;</div><div class="line">	<span class="attribute">color</span>: white;</div><div class="line">	<span class="attribute">padding</span>: .<span class="number">1em</span> .<span class="number">3em</span>;</div><div class="line">	<span class="attribute">cursor</span>: pointer;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.expander</span>&gt;<span class="selector-class">.body</span> &#123;</div><div class="line">	<span class="attribute">padding</span>: .<span class="number">1em</span> .<span class="number">3em</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å†æ¥ä¸€ä¸ª</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"expanderModule"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"Accordion.css"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"Accordion.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-controller</span>=<span class="string">'SomeController'</span> &gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">accordion</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">expander</span> <span class="attr">class</span>=<span class="string">'expander'</span> <span class="attr">ng-repeat</span>=<span class="string">'expander in expanders'</span> <span class="attr">expander-title</span>=<span class="string">'expander.title'</span>&gt;</span></div><div class="line">				&#123;&#123;expander.text&#125;&#125;</div><div class="line">			<span class="tag">&lt;/<span class="name">expander</span>&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">accordion</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> expModule=angular.module(<span class="string">'expanderModule'</span>,[])</div><div class="line">expModule.directive(<span class="string">'accordion'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="attr">restrict</span> : <span class="string">'EA'</span>,</div><div class="line">		<span class="attr">replace</span> : <span class="literal">true</span>,</div><div class="line">		<span class="attr">transclude</span> : <span class="literal">true</span>,</div><div class="line">		<span class="attr">template</span> : <span class="string">'&lt;div ng-transclude&gt;&lt;/div&gt;'</span>,</div><div class="line">      <span class="comment">//å¯¹å¤–æš´éœ²æ–¹æ³•</span></div><div class="line">		controller : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">			<span class="keyword">var</span> expanders = [];</div><div class="line">			<span class="keyword">this</span>.gotOpened = <span class="function"><span class="keyword">function</span>(<span class="params">selectedExpander</span>) </span>&#123;</div><div class="line">				angular.forEach(expanders, <span class="function"><span class="keyword">function</span>(<span class="params">expander</span>) </span>&#123;</div><div class="line">					<span class="keyword">if</span> (selectedExpander != expander) &#123;</div><div class="line">						expander.showMe = <span class="literal">false</span>;</div><div class="line">					&#125;</div><div class="line">				&#125;);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">this</span>.addExpander = <span class="function"><span class="keyword">function</span>(<span class="params">expander</span>) </span>&#123;</div><div class="line">				expanders.push(expander);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">expModule.directive(<span class="string">'expander'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> &#123;</div><div class="line">		<span class="attr">restrict</span> : <span class="string">'EA'</span>,</div><div class="line">		<span class="attr">replace</span> : <span class="literal">true</span>,</div><div class="line">		<span class="attr">transclude</span> : <span class="literal">true</span>,</div><div class="line">      <span class="comment">//ä¾èµ–äºaccordionæŒ‡ä»¤</span></div><div class="line">		<span class="built_in">require</span> : <span class="string">'^?accordion'</span>,</div><div class="line">		<span class="attr">scope</span> : &#123;</div><div class="line">			<span class="attr">title</span> : <span class="string">'=expanderTitle'</span></div><div class="line">		&#125;,</div><div class="line">		<span class="attr">template</span> : <span class="string">'&lt;div&gt;'</span></div><div class="line">				  + <span class="string">'&lt;div class="title" ng-click="toggle()"&gt;&#123;&#123;title&#125;&#125;&lt;/div&gt;'</span></div><div class="line">				  + <span class="string">'&lt;div class="body" ng-show="showMe" ng-transclude&gt;&lt;/div&gt;'</span></div><div class="line">				  + <span class="string">'&lt;/div&gt;'</span>,</div><div class="line">		<span class="attr">link</span> : <span class="function"><span class="keyword">function</span>(<span class="params">scope, element, attrs, accordionController</span>) </span>&#123;</div><div class="line">			scope.showMe = <span class="literal">false</span>;</div><div class="line">			accordionController.addExpander(scope);</div><div class="line">			scope.toggle = <span class="function"><span class="keyword">function</span> <span class="title">toggle</span>(<span class="params"></span>) </span>&#123;</div><div class="line">				scope.showMe = !scope.showMe;</div><div class="line">				accordionController.gotOpened(scope);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">expModule.controller(<span class="string">"SomeController"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line">	$scope.expanders = [&#123;</div><div class="line">		<span class="attr">title</span> : <span class="string">'Click me to expand'</span>,</div><div class="line">		<span class="attr">text</span> : <span class="string">'Hi there folks, I am the content that was hidden but is now shown.'</span></div><div class="line">	&#125;, &#123;</div><div class="line">		<span class="attr">title</span> : <span class="string">'Click this'</span>,</div><div class="line">		<span class="attr">text</span> : <span class="string">'I am even better text than you have seen previously'</span></div><div class="line">	&#125;, &#123;</div><div class="line">		<span class="attr">title</span> : <span class="string">'Test'</span>,</div><div class="line">		<span class="attr">text</span> : <span class="string">'test'</span></div><div class="line">	&#125;];</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.expander</span> &#123;</div><div class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid black;</div><div class="line">	<span class="attribute">width</span>: <span class="number">250px</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.expander</span>&gt;<span class="selector-class">.title</span> &#123;</div><div class="line">	<span class="attribute">background-color</span>: black;</div><div class="line">	<span class="attribute">color</span>: white;</div><div class="line">	<span class="attribute">padding</span>: .<span class="number">1em</span> .<span class="number">3em</span>;</div><div class="line">	<span class="attribute">cursor</span>: pointer;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-class">.expander</span>&gt;<span class="selector-class">.body</span> &#123;</div><div class="line">	<span class="attribute">padding</span>: .<span class="number">1em</span> .<span class="number">3em</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>çœ‹åˆ°æ²¡ï¼Œå…¶å®ç¼–å†™è‡ªå®šä¹‰æŒ‡ä»¤è¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»å¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹çš„æŒ‡ä»¤åº“</p>
<p><img src="/images/angular-ui.png" alt="img"></p>
<p>è¿™æ ·å­ï¼Œå°±å¯ä»¥æå¤§åœ°æ–¹ä¾¿å®ç°æˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½äº†</p>
<p>å†æ¥ä¸ªéš¾ä¸€ç‚¹çš„è‡ªå®šä¹‰æŒ‡ä»¤</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">ng-app</span>=<span class="string">"MyModule"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"framework/bootstrap-3.0.0/css/bootstrap.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"common.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/angular-1.3.0.14/angular.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"framework/ui-bootstrap-tpls-0.11.0.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"Accordion-ngui.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"AccordionDemoCtrl"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-default btn-md"</span> <span class="attr">ng-click</span>=<span class="string">"status.open = !status.open"</span>&gt;</span>Toggle last panel<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-default btn-md"</span> <span class="attr">ng-click</span>=<span class="string">"status.isFirstDisabled = ! status.isFirstDisabled"</span>&gt;</span>Enable / Disable first panel<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line">                    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"checkbox"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">ng-model</span>=<span class="string">"oneAtATime"</span>&gt;</span>Open only one at a time</div><div class="line">                    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">accordion</span> <span class="attr">close-others</span>=<span class="string">"oneAtATime"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">accordion-group</span> <span class="attr">heading</span>=<span class="string">"Static Header, initially expanded"</span> <span class="attr">is-open</span>=<span class="string">"status.isFirstOpen"</span> <span class="attr">is-disabled</span>=<span class="string">"status.isFirstDisabled"</span>&gt;</span></div><div class="line">                            This content is straight in the template.</div><div class="line">                        <span class="tag">&lt;/<span class="name">accordion-group</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">accordion-group</span> <span class="attr">heading</span>=<span class="string">"&#123;&#123;group.title&#125;&#125;"</span> <span class="attr">ng-repeat</span>=<span class="string">"group in groups"</span>&gt;</span></div><div class="line">                            &#123;&#123;group.content&#125;&#125;</div><div class="line">                        <span class="tag">&lt;/<span class="name">accordion-group</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">accordion-group</span> <span class="attr">heading</span>=<span class="string">"Dynamic Body Content"</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">p</span>&gt;</span>The body of the accordion group grows to fit the contents<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn btn-default btn-md"</span> <span class="attr">ng-click</span>=<span class="string">"addItem()"</span>&gt;</span>Add Item<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-repeat</span>=<span class="string">"item in items"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">accordion-group</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">accordion-group</span> <span class="attr">is-open</span>=<span class="string">"status.open"</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">accordion-heading</span>&gt;</span></div><div class="line">                                I can have markup, too! <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"pull-right glyphicon"</span> <span class="attr">ng-class</span>=<span class="string">"&#123;'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;/<span class="name">accordion-heading</span>&gt;</span></div><div class="line">                            This is just some content to illustrate fancy headings.</div><div class="line">                        <span class="tag">&lt;/<span class="name">accordion-group</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">accordion</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myModule = angular.module(<span class="string">'MyModule'</span>, [<span class="string">'ui.bootstrap'</span>]);</div><div class="line">myModule.controller(<span class="string">'AccordionDemoCtrl'</span>, [<span class="string">'$scope'</span>,</div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</div><div class="line"></div><div class="line">        $scope.oneAtATime = <span class="literal">true</span>;</div><div class="line"></div><div class="line">        $scope.groups = [&#123;</div><div class="line">            <span class="attr">title</span>: <span class="string">'Dynamic Group Header - 1'</span>,</div><div class="line">            <span class="attr">content</span>: <span class="string">'Dynamic Group Body - 1'</span></div><div class="line">        &#125;, &#123;</div><div class="line">            <span class="attr">title</span>: <span class="string">'Dynamic Group Header - 2'</span>,</div><div class="line">            <span class="attr">content</span>: <span class="string">'Dynamic Group Body - 2'</span></div><div class="line">        &#125;];</div><div class="line"></div><div class="line">        $scope.items = [<span class="string">'Item 1'</span>, <span class="string">'Item 2'</span>, <span class="string">'Item 3'</span>];</div><div class="line"></div><div class="line">        $scope.addItem = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> newItemNo = $scope.items.length + <span class="number">1</span>;</div><div class="line">            $scope.items.push(<span class="string">'Item '</span> + newItemNo);</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        $scope.status = &#123;</div><div class="line">            <span class="attr">isFirstOpen</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">isFirstDisabled</span>: <span class="literal">false</span></div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">])</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çªç„¶é—´ä¹‹å‰ä¸€ä¸ªåŒäº‹é—®æˆ‘angularè‡ªå®šä¹‰æŒ‡ä»¤æ˜¯ä»€ä¹ˆé¬¼ï¼Œæˆ‘ä¹Ÿçªç„¶é—´è’™äº†ï¼Œä½†æ˜¯æˆ‘ä¹ŸçŸ¥é“æ€ä¹ˆç”¨ï¼Œå°±æ˜¯è¡¨è¿°ä¸æ¸…æ¥šäº†ï¼Œæ‰€ä»¥è¿™ä¸¤å¤©æŸ¥äº†æŸ¥google angularçš„APIï¼Œæœ¬ç€ä¸è¯¯äººå­å¼Ÿçš„åŸåˆ™ï¼Œæˆ‘å†™ä¸‹äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åˆ°ä½ &lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯æŒ‡ä»¤å‘¢ï¼Ÿæˆ‘ä»¬å…ˆçœ‹å®˜æ–¹çš„è¯´æ³•&lt;/p&gt;
&lt;h5 id=&quot;What-are-Directives&quot;&gt;&lt;a href=&quot;#What-are-Directives&quot; class=&quot;headerlink&quot; title=&quot;What are Directives?&quot;&gt;&lt;/a&gt;What are Directives?&lt;/h5&gt;&lt;p&gt;At a high level, directives are markers on a DOM element (such as an attribute, element name, comment or CSS class) that tell AngularJSâ€™s &lt;strong&gt;HTML compiler&lt;/strong&gt; (&lt;a href=&quot;https://docs.angularjs.org/api/ng/service/$compile&quot;&gt;&lt;code&gt;$compile&lt;/code&gt;&lt;/a&gt;) to attach a specified behavior to that DOM element (e.g. via event listeners), or even to transform the DOM element and its children.&lt;/p&gt;
&lt;p&gt;AngularJS comes with a set of these directives built-in, like &lt;code&gt;ngBind&lt;/code&gt;, &lt;code&gt;ngModel&lt;/code&gt;, and &lt;code&gt;ngClass&lt;/code&gt;. Much like you create controllers and services, you can create your own directives for AngularJS to use. When AngularJS &lt;a href=&quot;https://docs.angularjs.org/guide/bootstrap&quot;&gt;bootstraps&lt;/a&gt; your application, the &lt;a href=&quot;https://docs.angularjs.org/guide/compiler&quot;&gt;HTML compiler&lt;/a&gt; traverses the DOM matching directives against the DOM elements.&lt;/p&gt;
&lt;p&gt;åœ¨é«˜çš„å±‚é¢ä¸Šè®²ï¼ŒæŒ‡ä»¤æ˜¯DOMå…ƒç´ ä¸­çš„æ ‡è®°(ä¾‹å¦‚ä¸€ä¸ªå±æ€§ï¼Œä¸€ä¸ªèŠ‚ç‚¹åï¼Œæ³¨é‡Šæˆ–è€…CSSç±»)ï¼Œå®ƒå‘Šè¯‰angularjsç¼–è¯‘å™¨å»ç»™è¿™ä¸ªå…ƒç´ é™„åŠ ä¸€ä¸ªæŒ‡ä»¤çš„è¡Œä¸ºæˆ–è€…è½¬æ¢DOMå…ƒç´ å’Œå®ƒçš„å­å…ƒç´ ã€‚&lt;/p&gt;
&lt;p&gt;Angularjsæ‹¥æœ‰ä¸€äº›å†…å»ºçš„æŒ‡ä»¤ï¼ŒåƒngBindã€ngModelå’ŒngClassã€‚éå¸¸ç±»ä¼¼äºä½ åˆ›å»ºè‡ªå·±çš„controllerå’Œserviceï¼Œä½ å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„æŒ‡ä»¤ä¸ªangularjsä½¿ç”¨ï¼Œå½“angularåˆå§‹åŒ–å¯åŠ¨ä½ çš„åº”ç”¨ç¨‹åºï¼Œhtmlç¼–è¯‘å™¨å°†éå†ä½ çš„DOMå…ƒç´ å¹¶ä¸”å»åŒ¹é…æŒ‡ä»¤ã€‚&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>AMDä¹‹require.js</title>
    <link href="http://xuhongbo.com/2017/01/26/%E8%A7%84%E8%8C%83/AMD%E4%B9%8Brequirejs/"/>
    <id>http://xuhongbo.com/2017/01/26/è§„èŒƒ/AMDä¹‹requirejs/</id>
    <published>2017-01-25T18:09:23.000Z</published>
    <updated>2017-03-15T09:18:18.082Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆè¯´ä¸€ä¸‹ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ä¹‹å‰æˆ‘ä¸€ä¸ªå¥½å‹ç»™æˆ‘çš„æ–‡æ¡£ï¼Œå¹¶éåŸåˆ› å¦‚æœ‰ä¾µæƒè¯·è”ç³» xuhongbo@outlook.com</p>
<p>è¿˜æœ‰å°±æ˜¯å¦‚æœé—®æˆ‘ä¸ºä»€ä¹ˆä¸åˆ†äº«CMDçš„ï¼Œæˆ‘æ„Ÿè§‰sea.jsçš„ä¸­æ–‡ç¤¾åŒºå¾ˆæ´»è·ƒï¼Œè¿˜æœ‰å°±æ˜¯ç‰ä¼¯çš„sea.jsä¸­çš„issueä¸­çš„è§£é‡Šä¹Ÿéƒ½å¾ˆæ¸…æ™° <a href="https://github.com/seajs/seajs/issues/547" target="_blank" rel="external">#547</a>å…¶ä»–çš„issueè‡ªå·±å»æ‰¾ï¼Œéƒ½å¯ä»¥æ‰¾å¾—åˆ°çš„</p>
<a id="more"></a>
<h3 id="ä¸€ï¼šä¸ºä»€ä¹ˆä½¿ç”¨require-jsï¼Ÿ"><a href="#ä¸€ï¼šä¸ºä»€ä¹ˆä½¿ç”¨require-jsï¼Ÿ" class="headerlink" title="ä¸€ï¼šä¸ºä»€ä¹ˆä½¿ç”¨require.jsï¼Ÿ"></a>ä¸€ï¼šä¸ºä»€ä¹ˆä½¿ç”¨require.jsï¼Ÿ</h3><p>æœ€æ—©çš„æ—¶å€™ï¼Œæ‰€æœ‰javascriptä»£ç éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œåªè¦åŠ è½½ä¸€ä¸ªæ–‡ä»¶å°±å¤Ÿäº†ï¼Œåæ¥ï¼Œä»£ç è¶Šæ¥è¶Šå¤šï¼Œä¸€ä¸ªæ–‡ä»¶ä¸å¤Ÿï¼Œå¿…é¡»åˆ†æˆå¤šä¸ªæ–‡ä»¶ï¼Œä¾æ¬¡åŠ è½½ã€‚<br><code>&lt;script src=&quot;1.js&quot;&gt;&lt;/script&gt;</code><br><code>&lt;script src=&quot;2.js&quot;&gt;&lt;/script&gt;</code><br><code>&lt;script src=&quot;3.js&quot;&gt;&lt;/script&gt;</code><br><code>&lt;script src=&quot;4.js&quot;&gt;&lt;/script&gt;</code><br><code>&lt;script src=&quot;5.js&quot;&gt;&lt;/script&gt;</code><br><code>&lt;script src=&quot;6.js&quot;&gt;&lt;/script&gt;</code><br>è¿™æ®µä»£ç ä¾æ¬¡åŠ è½½å¤šä¸ªjsæ–‡ä»¶ã€‚<br>è¿™æ ·çš„å†™æ³•æœ‰å¾ˆå¤§ç¼ºç‚¹ï¼Œé¦–å…ˆï¼ŒåŠ è½½çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šåœæ­¢ç½‘é¡µæ¸²æŸ“ï¼ŒåŠ è½½æ–‡ä»¶è¶Šå¤šï¼Œç½‘é¡µå¤±å»å“åº”çš„æ—¶é—´å°±ä¼šè¶Šé•¿ï¼›å…¶æ¬¡ï¼Œç”±äºjsæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œå› æ­¤å¿…é¡»ä¸¥æ ¼ä¿è¯åŠ è½½é¡ºåºã€‚<br>require.jsè§£å†³ä¸¤å¤§é—®é¢˜ï¼š<br>(1) å®ç°jsæ–‡ä»¶çš„å¼‚æ­¥åŠ è½½ï¼Œé¿å…ç½‘é¡µå¤±å»å“åº”ã€‚<br>(2) ç®¡ç†æ¨¡å—ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œä¾¿äºä»£ç çš„ç¼–å†™å’Œç»´æŠ¤ã€‚</p>
<h3 id="äºŒï¼šrequire-jsåŠ è½½ï¼Ÿ"><a href="#äºŒï¼šrequire-jsåŠ è½½ï¼Ÿ" class="headerlink" title="äºŒï¼šrequire.jsåŠ è½½ï¼Ÿ"></a>äºŒï¼šrequire.jsåŠ è½½ï¼Ÿ</h3><p>ä½¿ç”¨require.jsçš„ç¬¬ä¸€æ­¥ï¼Œå…ˆå»å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ã€‚<br>ä¸‹è½½åï¼Œå‡å®šæŠŠå®ƒæ”¾åœ¨jså­ç›®å½•ä¸‹ï¼Œå°±å¯ä»¥åŠ è½½äº†ã€‚<br><code>&lt;script src=&quot;js/require.js&quot;&gt;&lt;/script&gt;</code><br>åŠ è½½è¿™ä¸ªæ–‡ä»¶ï¼Œå¯èƒ½é€ æˆç½‘é¡µå¤±å»å“åº”ã€‚è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æŠŠè„šæœ¬æ”¾åœ¨ç½‘é¡µåº•éƒ¨åŠ è½½ï¼Œå¦ä¸€ä¸ªå†™æˆä¸‹é¢è¿™æ ·ï¼š<br><code>&lt;script src=&quot;js/require.js&quot; defer async=&quot;true&quot; &gt;&lt;/script&gt;</code><br>asyncå±æ€§è¡¨æ˜è¿™ä¸ªæ–‡ä»¶éœ€è¦å¼‚æ­¥åŠ è½½ï¼Œé¿å…ç½‘é¡µå¤±å»å“åº”ã€‚ä½†IEä¸æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œåªæ”¯æŒdeferï¼Œæ‰€ä»¥æŠŠdeferä¹Ÿå†™ä¸Šã€‚<br>åŠ è½½require.jsä»¥åï¼Œä¸‹ä¸€æ­¥å°±è¦åŠ è½½æˆ‘ä»¬è‡ªå·±çš„ä»£ç äº†ã€‚å‡å®šæˆ‘ä»¬è‡ªå·±çš„ä»£ç æ–‡ä»¶æ˜¯main.js,ä¹Ÿæ”¾åœ¨jsç›®å½•ä¸‹é¢ã€‚é‚£ä¹ˆï¼Œåªéœ€è¦å†™æˆä¸‹é¢è¿™æ ·å°±è¡Œäº†ï¼š<br><code>&lt;script src=&quot;js/require.js&quot; data-main=&quot;js/main&quot;&gt;&lt;/script&gt;</code><br>data-mainå±æ€§çš„ä½œç”¨æ˜¯ï¼ŒæŒ‡å®šç½‘é¡µç¨‹åºçš„ä¸»æ¨¡å—ã€‚å°±æ˜¯jsä¸‹é¢çš„main.jsï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šç¬¬ä¸€ä¸ªè¢«require.jsåŠ è½½ã€‚ç”±äºrequire.jsé»˜è®¤çš„æ–‡ä»¶åç¼€åæ˜¯jsï¼Œæ‰€ä»¥å¯ä»¥æŠŠmain.jsç®€å†™ä¸ºmainã€‚</p>
<h3 id="ä¸‰ã€ä¸»æ¨¡å—å†™æ³•ï¼š"><a href="#ä¸‰ã€ä¸»æ¨¡å—å†™æ³•ï¼š" class="headerlink" title="ä¸‰ã€ä¸»æ¨¡å—å†™æ³•ï¼š"></a>ä¸‰ã€ä¸»æ¨¡å—å†™æ³•ï¼š</h3><p>ä¸»æ¨¡å—ä¾èµ–ä¸å…¶ä»–çš„æ¨¡å—ï¼Œè¿™æ—¶å°±è¦ä½¿ç”¨AMDè§„èŒƒå®šä¹‰çš„require()å‡½æ•°ã€‚<br>//main.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">'moduleA'</span>,<span class="string">'moduleB'</span>,<span class="string">'moduleC'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">moduleA,moduleB,moduleC</span>)</span>&#123;</div><div class="line">    <span class="comment">//code</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>require()å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºä¾èµ–çš„æ¨¡å—ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“å‰é¢æŒ‡å®šçš„æ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œä»–ä¼šè¢«è°ƒç”¨ï¼Œ<br>åŠ è½½çš„æ¨¡å—ä¼šä»¥å‚æ•°çš„å½¢å¼ä¼ å…¥è¯¥å‡½æ•°ï¼Œä»è€Œåœ¨å›è°ƒä¸­å¯ä»¥ä½¿ç”¨è¿™äº›æ¨¡å—ã€‚<br>require()å¼‚æ­¥åŠ è½½moduleA,moduleB,moduleC,æµè§ˆå™¨ä¸ä¼šå¤±å»å“åº”ï¼Œä»–æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œåªæœ‰å½“å‰é¢çš„æ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œæ‰ä¼šè¿è¡Œï¼Œè§£å†³äº†ä¾èµ–æ€§çš„é—®é¢˜ã€‚<br>å‡å®šä¸»æ¨¡å—ä¾èµ–jquery,underscoreå’Œbackboneè¿™ä¸‰ä¸ªæ¨¡å—ï¼Œmain.jså°±å¯ä»¥è¿™æ ·å†™ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">'jquery'</span>,<span class="string">'underscore'</span>,<span class="string">'backbone'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">$,_,Backbone</span>)</span>&#123;</div><div class="line">    <span class="comment">//code</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>require.jsä¼šå…ˆåŠ è½½jquery,underscoreå’Œbackbone,ç„¶åå†è¿è¡Œå›è°ƒå‡½æ•°ï¼Œä¸»æ¨¡å—çš„ä»£ç å°±å†™åœ¨å›è°ƒå‡½æ•°ä¸­ã€‚</p>
<h3 id="å››ã€æ¨¡å—çš„åŠ è½½ï¼š"><a href="#å››ã€æ¨¡å—çš„åŠ è½½ï¼š" class="headerlink" title="å››ã€æ¨¡å—çš„åŠ è½½ï¼š"></a>å››ã€æ¨¡å—çš„åŠ è½½ï¼š</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œrequire.jså‡å®šè¿™ä¸‰ä¸ªæ¨¡å—ä¸main.jsåœ¨åŒä¸€ä¸ªç›®å½•ï¼Œæ–‡ä»¶ååˆ†åˆ«ä¸ºjquery.jsï¼Œunderscore.jså’Œbackbone.jsï¼Œç„¶åè‡ªåŠ¨åŠ è½½ã€‚<br>ä½¿ç”¨require.config()æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¨¡å—çš„åŠ è½½è¡Œä¸ºè¿›è¡Œå®šä¹‰ï¼Œrequire.config()å°±å†™åœ¨ä¸»æ¨¡å—ï¼ˆmain.jsï¼‰çš„å¤´éƒ¨ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„pathså±æ€§æŒ‡å®šå„ä¸ªæ¨¡å—çš„åŠ è½½è·¯å¾„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">    <span class="attr">paths</span>:&#123;</div><div class="line">        <span class="string">"jQuery"</span>:jquery.min<span class="string">""</span>,</div><div class="line">        <span class="string">"underscore"</span>:<span class="string">"underscore.min"</span>,</div><div class="line">        <span class="string">"backbone"</span>:<span class="string">"backbone.min"</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç ç»™å‡ºäº†ä¸‰ä¸ªæ¨¡å—çš„æ–‡ä»¶åï¼Œè·¯å¾„é»˜è®¤ä¸main.jsåœ¨åŒä¸€ä¸ªç›®å½•ï¼Œå¦‚æœè¿™äº›æ¨¡å—åœ¨å…¶ä»–ç›®å½•ï¼Œæ¯”å¦‚js/libç›®å½•ï¼Œåˆ™æœ‰ä¸¤ç§å†™æ³•ï¼Œä¸€ç§æ˜¯é€ä¸€æŒ‡å®šè·¯å¾„ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">    <span class="attr">paths</span>:&#123;</div><div class="line">    <span class="string">"jquery"</span>:<span class="string">"lib/jquery.min"</span>,</div><div class="line">    <span class="string">"underscore"</span>: <span class="string">"lib/underscore.min"</span>,</div><div class="line">ã€€ã€€ <span class="string">"backbone"</span>: <span class="string">"lib/backbone.min"</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>å¦ä¸€ç§æ˜¯ç›´æ¥æ”¹å˜åŸºç›®å½•ï¼ˆbaseUrlï¼‰<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">    <span class="attr">baseUrl</span>:<span class="string">"js/lib"</span>,</div><div class="line">    <span class="attr">paths</span>:&#123;</div><div class="line">        <span class="string">"jQuery"</span>:jquery.min<span class="string">""</span>,</div><div class="line">        <span class="string">"underscore"</span>:<span class="string">"underscore.min"</span>,</div><div class="line">        <span class="string">"backbone"</span>:<span class="string">"backbone.min"</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>å¦‚æœæŸä¸ªæ¨¡å—åœ¨å¦ä¸€ä¸ªä¸»æœºä¸Šï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šä»–çš„ç½‘å€ï¼Œ<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">    <span class="attr">paths</span>:&#123;</div><div class="line">        <span class="string">"jquery"</span>:<span class="string">"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min"</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="äº”ã€AMDæ¨¡å—å†™æ³•ï¼š"><a href="#äº”ã€AMDæ¨¡å—å†™æ³•ï¼š" class="headerlink" title="äº”ã€AMDæ¨¡å—å†™æ³•ï¼š"></a>äº”ã€AMDæ¨¡å—å†™æ³•ï¼š</h3><p>require.jsåŠ è½½çš„æ¨¡å—ï¼Œé‡‡ç”¨AMDè§„èŒƒï¼Œå…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ¨¡å—å¿…é¡»é‡‡ç”¨ç‰¹å®šçš„define()å‡½æ•°æ¥å®šä¹‰ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—ä¸ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å®šä¹‰åœ¨define()å‡½æ•°ä¸­ã€‚<br>å‡å®šç°åœ¨æœ‰ä¸€ä¸ªmain.jsæ–‡ä»¶ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªmathæ¨¡å—ï¼Œ<br>//math.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> add=<span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> x+y;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">add</span>:add</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>åŠ è½½æ–¹æ³•å¦‚ä¸‹ï¼š<br>//main.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">'math'</span>],<span class="function"><span class="keyword">function</span>(<span class="params">math</span>)</span>&#123;</div><div class="line">    alert(math.add(<span class="number">1</span>,<span class="number">1</span>));</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>å¦‚æœè¿™ä¸ªæ¨¡å—è¿˜ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆdefine()å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒæŒ‡æ˜è¯¥æ¨¡å—çš„ä¾èµ–æ€§ã€‚<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ã€€define([<span class="string">'myLib'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">myLib</span>)</span>&#123;</div><div class="line">ã€€ã€€ã€€ã€€<span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">ã€€ã€€ã€€ã€€ã€€ã€€myLib.doSomething();</div><div class="line">ã€€ã€€ã€€ã€€&#125;</div><div class="line">ã€€ã€€ã€€ã€€<span class="keyword">return</span> &#123;</div><div class="line">ã€€ã€€ã€€ã€€ã€€ã€€<span class="attr">foo</span> : foo</div><div class="line">ã€€ã€€ã€€ã€€&#125;;</div><div class="line">ã€€ã€€&#125;);</div></pre></td></tr></table></figure></p>
<p>å½“require()å‡½æ•°åŠ è½½ä¸Šé¢è¿™ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šå…ˆåŠ è½½myLib.jsæ–‡ä»¶ã€‚</p>
<h3 id="å…­ã€åŠ è½½éè§„èŒƒçš„æ¨¡å—"><a href="#å…­ã€åŠ è½½éè§„èŒƒçš„æ¨¡å—" class="headerlink" title="å…­ã€åŠ è½½éè§„èŒƒçš„æ¨¡å—"></a>å…­ã€åŠ è½½éè§„èŒƒçš„æ¨¡å—</h3><p>ä¸¾ä¾‹æ¥è¯´ï¼Œunderscoreå’Œbackboneè¿™ä¸¤ä¸ªåº“ï¼Œéƒ½æ²¡æœ‰é‡‡ç”¨AMDè§„èŒƒç¼–å†™ã€‚å¦‚æœè¦åŠ è½½å®ƒä»¬çš„è¯ï¼Œå¿…é¡»å…ˆå®šä¹‰å®ƒä»¬çš„ç‰¹å¾ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">	<span class="attr">shim</span>:&#123;</div><div class="line">	    <span class="string">'underscore'</span>:&#123;</div><div class="line">	        <span class="attr">exports</span>:<span class="string">'_'</span></div><div class="line">	    &#125;,</div><div class="line">	    <span class="string">'backbone'</span>:&#123;</div><div class="line">	        <span class="attr">deps</span>:[<span class="string">'underscore'</span>,<span class="string">'jquery'</span>],</div><div class="line">	        <span class="attr">exports</span>:<span class="string">'Backbone'</span></div><div class="line">	    &#125;</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>require.config()æ¥å—ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é™¤äº†æœ‰å‰é¢è¯´çš„pathså±æ€§å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªshimå±æ€§ï¼Œä¸“é—¨æ¥é…ç½®ä¸å…¼å®¹çš„æ¨¡å—ï¼Œå…·ä½“æ¥è¯´ï¼Œæ¯ä¸ªæ¨¡å—è¦å®šä¹‰ï¼ˆ1ï¼‰exportså€¼ï¼ˆè¾“å‡ºçš„å˜é‡åï¼‰ï¼Œ<br>è¡¨æ˜è¿™ä¸ªæ¨¡å—å¤–éƒ¨è°ƒç”¨æ—¶çš„åç§°ï¼›ï¼ˆ2ï¼‰depsæ•°ç»„ï¼Œè¡¨æ˜è¯¥æ¨¡å—çš„ä¾èµ–æ€§ã€‚<br>æ¯”å¦‚ï¼Œjqueryå¯ä»¥è¿™æ ·å®šä¹‰ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">shim:&#123;</div><div class="line">    <span class="string">'jquery.scroll'</span>:&#123;</div><div class="line">        <span class="attr">deps</span>:[<span class="string">'jquery'</span>],</div><div class="line">        <span class="attr">exports</span>:<span class="string">'jQuery.fn.scroll'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¦–å…ˆè¯´ä¸€ä¸‹ï¼Œè¿™ç¯‡æ–‡ç« æ˜¯ä¹‹å‰æˆ‘ä¸€ä¸ªå¥½å‹ç»™æˆ‘çš„æ–‡æ¡£ï¼Œå¹¶éåŸåˆ› å¦‚æœ‰ä¾µæƒè¯·è”ç³» xuhongbo@outlook.com&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰å°±æ˜¯å¦‚æœé—®æˆ‘ä¸ºä»€ä¹ˆä¸åˆ†äº«CMDçš„ï¼Œæˆ‘æ„Ÿè§‰sea.jsçš„ä¸­æ–‡ç¤¾åŒºå¾ˆæ´»è·ƒï¼Œè¿˜æœ‰å°±æ˜¯ç‰ä¼¯çš„sea.jsä¸­çš„issueä¸­çš„è§£é‡Šä¹Ÿéƒ½å¾ˆæ¸…æ™° &lt;a href=&quot;https://github.com/seajs/seajs/issues/547&quot;&gt;#547&lt;/a&gt;å…¶ä»–çš„issueè‡ªå·±å»æ‰¾ï¼Œéƒ½å¯ä»¥æ‰¾å¾—åˆ°çš„&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>åœ¨github pagesåˆ©ç”¨hexoå¿«é€Ÿæ­å»ºé™æ€ä¸ªäººä¸»é¡µä»¥åŠæ›´æ”¹åŸŸå</title>
    <link href="http://xuhongbo.com/2017/01/18/%E5%B7%A5%E5%85%B7%E7%B1%BB/%E5%9C%A8github%20pages%E5%88%A9%E7%94%A8hexo%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5%E4%BB%A5%E5%8F%8A%E6%9B%B4%E6%94%B9%E5%9F%9F%E5%90%8D/"/>
    <id>http://xuhongbo.com/2017/01/18/å·¥å…·ç±»/åœ¨github pagesåˆ©ç”¨hexoå¿«é€Ÿæ­å»ºé™æ€ä¸ªäººä¸»é¡µä»¥åŠæ›´æ”¹åŸŸå/</id>
    <published>2017-01-18T06:41:30.000Z</published>
    <updated>2017-03-03T02:07:12.338Z</updated>
    
    <content type="html"><![CDATA[<p>github pagesæ˜¯ä¸€ç§æä¾›å…è´¹æ‰˜ç®¡é™æ€é¡µé¢çš„å·¥å…·ï¼Œå¯ä»¥å…è´¹ä½œä¸ºæˆ‘ä»¬çš„ä¸ªäººä¸»é¡µè¿›è¡Œä½¿ç”¨<br><a id="more"></a></p>
<p><a href="https://pages.github.com/" target="_blank" rel="external">å®˜æ–¹åœ°å€</a></p>
<p>æ—¢ç„¶çŸ¥é“å·¥å…·æ˜¯åšä»€ä¹ˆçš„äº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹è¿›è¡Œæ“ä½œå§</p>
<h6 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h6><ol>
<li>é¦–å…ˆä½ è¦ç¡®ä¿çš„æ˜¯ä½ æœ‰ä¸€ä¸ªgithubè´¦å· <a href="https://github.com/" target="_blank" rel="external">ä¼ é€é—¨</a></li>
<li>è¿˜è¦ç¡®ä¿ä½ çš„ç”µè„‘ä¸Šæœ‰å®‰è£…æœ‰git</li>
<li>æœ€åè¿˜è¦æœ‰nodejs</li>
</ol>
<p>###åœ¨githubä¸Šç”³è¯·github pagesç©ºé—´<br>å¦‚æœä½ å·²ç»çœ‹åˆ°è¿™äº†  æˆ‘å·²ç»é»˜è®¤ä½ å…·å¤‡äº†ä¸Šé¢çš„ä¸‰ä¸ªæ¡ä»¶äº†ï¼<br>å¦‚æœä½ çœ‹äº†ä¸Šé¢çš„ä»‹ç» ä½ åº”è¯¥å·²ç»çŸ¥é“äº†æ€ä¹ˆå»ç”³è¯·è¿™ä¸ªç©ºé—´äº† ä½†æ˜¯ä¸ºäº†é¿å…æœ‰çš„äººè¿˜æ˜¯çŠ¯è¿·ç³Šæˆ‘ä¸‹é¢è¿˜æ˜¯è®²ä¸€ä¸‹æ€ä¹ˆç”³è¯·è¿™ä¸ªgithub pagesç©ºé—´å§ï¼Œé¿å…ç¬¬ä¸€æ­¥å°±å¡æ­»è¿™<br>ç™»é™†æˆ‘ä»¬çš„github</p>
<p>ç‚¹å‡»è¿™é‡Œæ–°å»ºä¸€ä¸ªä»“å‚¨</p>
<p><img src="/images/github0.png" alt="img"></p>
<p>ç„¶åæˆ‘ä»¬åˆ°äº†è¿™ä¸ªé¡µé¢  æˆ‘ä»¬æŒ‰ç…§æˆ‘å†™çš„è¿™ä¸ªé¡ºåºè¿›è¡Œæ“ä½œ</p>
<p><img src="/images/github2.png" alt="img">æˆ‘ä»¬çš„ä»“å‚¨åæ ¼å¼æ˜¯xxx.github.io<br>ç„¶åé€‰æ‹©public<br>ç„¶åé€‰æ‹©åŒæ„ å°±å¯ä»¥äº†</p>
<p>ç„¶åæˆ‘ä»¬è¿™ä¸ªä»“å‚¨å°±åˆ›å»ºå¥½äº†ï¼Œå›¾ä¸­çš„åœ°å€ä¸€å®šè¦è®°å¥½ï¼Œåé¢æˆ‘ä»¬å°±æœ‰ç”¨äº†</p>
<p><img src="/images/github4.png" alt="img"></p>
<h3 id="å®‰è£…hexoä»¥åŠåˆå§‹åŒ–"><a href="#å®‰è£…hexoä»¥åŠåˆå§‹åŒ–" class="headerlink" title="å®‰è£…hexoä»¥åŠåˆå§‹åŒ–"></a>å®‰è£…hexoä»¥åŠåˆå§‹åŒ–</h3><h5 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h5><p>é¦–å…ˆä½ å¯ä»¥è‡ªå·±çœ‹çœ‹hexoçš„å®˜ç½‘ <a href="https://hexo.io/" target="_blank" rel="external">ä¼ é€é—¨</a><br>é¦–å…ˆåœ¨å…¨å±€å®‰è£…hexoçš„è„šæ‰‹æ¶åœ¨cmdå‘½ä»¤è¡Œä¸­è¾“å…¥ <code>$ npm install hexo-cli -g</code> </p>
<p>ç­‰æˆ‘ä»¬åœ¨å…¨å±€å®‰è£…å¥½ä»¥åï¼Œæ‰¾åˆ°ä½ æƒ³æ”¾ç½®ä½ åšå®¢æ–‡ä»¶çš„ç›®å½• ç„¶åæ‰§è¡Œ<code>hexo init blogName</code> æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</p>
<p><img src="/images/HEXO1.png" alt="img"></p>
<p>ç„¶åæˆ‘ä»¬å°±åœ¨æœ¬åœ°æœ‰äº†ä¸€ä¸ªblogçš„æ–‡ä»¶å¤¹ï¼Œç„¶åæˆ‘ä»¬è¾“å…¥<code>cd blogName</code> ç„¶åæ‰§è¡Œ<code>hexo server</code>å°±å¯ä»¥åœ¨æœ¬åœ°çœ‹åˆ°ä½ çš„blogäº†ï¼Œä½†æ˜¯æ˜¾ç„¶åªæ˜¯æœ¬åœ°ï¼Œä½ å¹¶ä¸æ»¡è¶³</p>
<p><img src="/images/HEXO2.png" alt="img"></p>
<p>çœ‹åˆ°è¿™é‡Œ  ä½ æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆç®€å•å‘€</p>
<p>å¯¹ å°±æ˜¯è¿™ä¹ˆç®€å•</p>
<p>ä¸‹é¢æˆ‘ä»¬è¦åšçš„å°±æ˜¯å¾€æˆ‘ä»¬çš„gitä»“åº“é‡Œé¢è¿›è¡Œpushäº†</p>
<p>åœ¨hexoè¿™ä¸ªå·¥å…·ä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥é…ç½®æˆ‘ä»¬çš„gitåœ°å€</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># Deployment</div><div class="line">## Docs: https://hexo.io/docs/deployment.html</div><div class="line">deploy:</div><div class="line">  type: git</div><div class="line">	//æ ¼å¼å¦‚ä¸‹ https://è´¦æˆ·:å¯†ç @ä½ çš„ä»“å‚¨åœ°å€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¦ä½ è®°ä½çš„åœ°å€</div><div class="line">  repo: https://è´¦æˆ·:å¯†ç @github.com/xuhongbo/xuhongbo.github.io.git</div></pre></td></tr></table></figure>
<p>åœ¨ä½ æ‰§è¡Œè¿‡ä¸Šé¢é‚£ä¸€æ­¥ä¹‹å  ä½ å°±ç¦»æˆåŠŸåªå‰©ä¸€æ­¥äº†</p>
<p>ä¸‹é¢æˆ‘ä»¬å†å®‰è£…ä¸€ä¸ªæ’ä»¶<code>npm install hexo-deployer-git --save</code>å½“ç„¶äº†ï¼Œè¿™ä¸ªæ“ä½œä¹Ÿæ˜¯åœ¨æˆ‘ä»¬çš„é¡¹ç›®æ ¹ç›®å½•ä¸­</p>
<p>ç„¶åå°±å¯ä»¥è¿›è¡Œå‘å¸ƒäº†<code>hexo generate --deploy</code></p>
<p><img src="/images/HEXO5.png" alt="img"></p>
<p>è‡³æ­¤ ä½ å·²ç»å¯ä»¥åœ¨ä½ çš„github pagesä¸Šçœ‹åˆ°ä½ çš„ä¸ªäººåšå®¢äº†</p>
<p>å¦‚æœä½ æ²¡æœ‰ç»‘å®šä¸ªäººåŸŸåçš„éœ€æ±‚ï¼Œå°±è¿™æ ·å°±ä¸ç”¨å¾€ä¸‹é¢çœ‹äº†</p>
<h3 id="ç»‘å®šä¸ªäººåŸŸå"><a href="#ç»‘å®šä¸ªäººåŸŸå" class="headerlink" title="ç»‘å®šä¸ªäººåŸŸå"></a>ç»‘å®šä¸ªäººåŸŸå</h3><p>é¦–å…ˆæˆ‘ä»¬è¦æœ‰ä¸€ä¸ªåŸŸåï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œè‡ªå·±æƒ³åŠæ³•å“ˆï¼Œè¿™ä¸ªæˆ‘æ˜¯å¸®ä¸äº†ä½ </p>
<p>æˆ‘åœ¨è¿™é‡Œè¯´ä¸€ä¸‹æ€ä¹ˆé…dnså’Œhexoä¸­åŠ å…¥CNAMEè¿™ä¸¤ä»¶äº‹</p>
<p>åœ¨è¿™é‡Œæˆ‘æ‹¿ä¸‡ç½‘ä½œä¸ºä¾‹å­</p>
<p>åœ¨dnsè§£æä¸­æˆ‘ä»¬åŠ å…¥ä»¥ä¸‹ä¸‰æ¡è®°å½•</p>
<p>åˆ†åˆ«æ˜¯ä¸¤æ¡github pages ip å’Œä¸€æ¡ä½ çš„github pagesåœ°å€åå¦‚<code>xxx.github.io.</code>æ³¨æ„å“ˆï¼Œæœ€åçš„é‚£ä¸ªç‚¹åƒä¸‡åˆ«å¿˜äº†</p>
<p><img src="/images/wanwang.png" alt="img"></p>
<p>å¯¹äº†ä¸‹é¢æˆ‘ä»¬æœ€å¥½è¿˜æ˜¯åœ¨é˜¿é‡Œäº‘é‡Œé¢å¼€äº†æˆ‘ä»¬çš„å…è´¹çš„cdnåŠ é€Ÿä¼šæ¯”è¾ƒå¥½</p>
<p><img src="/images/cdn.png" alt="img"></p>
<p>ç„¶åä¸‹é¢æ·»åŠ CNAMEæ–‡ä»¶åŠ å…¥sourceæ–‡ä»¶å¤¹ä¸­ï¼Œç„¶ååœ¨æ­¤æ–‡ä»¶ä¸­å†™å…¥ä½ çš„åŸŸåè®°ä½ä¸å¸¦å‰é¢çš„httpä»€ä¹ˆé¬¼çš„ åªè¦ express.com è¿™ä¸€æ®µç„¶åå†æ‰§è¡Œä¸€æ¬¡ <code>hexo generate --deploy</code>  </p>
<p><img src="/images/CNAME.png" alt="img"><img src="/images/CNAME2.png" alt="img"></p>
<p>å—¯ æ‰€æœ‰å·¥ä½œå·²ç»åšå®Œäº†  ä½ ç°åœ¨å‡ºå»æºœè¾¾ä¸€ä¼š  ç­‰ä¸ªåæ¥åˆ†é’Ÿ  å°±å¯ä»¥è®¿é—®äº†</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;github pagesæ˜¯ä¸€ç§æä¾›å…è´¹æ‰˜ç®¡é™æ€é¡µé¢çš„å·¥å…·ï¼Œå¯ä»¥å…è´¹ä½œä¸ºæˆ‘ä»¬çš„ä¸ªäººä¸»é¡µè¿›è¡Œä½¿ç”¨&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JSè¿ç®—ç¬¦</title>
    <link href="http://xuhongbo.com/2017/01/08/JavaScript/%E8%BF%90%E7%AE%97%E7%AC%A6/"/>
    <id>http://xuhongbo.com/2017/01/08/JavaScript/è¿ç®—ç¬¦/</id>
    <published>2017-01-08T07:02:02.000Z</published>
    <updated>2017-03-02T14:13:00.445Z</updated>
    
    <content type="html"><![CDATA[<ul>
<li>ç¨‹åºä¸­æœ€ç®€å•çš„è¡¨è¾¾å¼å°±æ˜¯ï¼Œç¨‹åºä¸­çš„å¸¸é‡</li>
<li>å˜é‡åä¹Ÿæ˜¯ä¸€ç§ç®€å•çš„è¡¨è¾¾å¼</li>
<li>å¤æ‚çš„è¡¨è¾¾å¼æ˜¯ç”±ç®€å•çš„è¡¨è¾¾å¼ç»„æˆçš„</li>
<li>å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼æ˜¯ç”±å‡½æ•°å¯¹è±¡çš„è¡¨è¾¾å¼å’Œ0ä¸ªæˆ–å¤šä¸ªå‚æ•°è¡¨è¾¾å¼æ„æˆ</li>
<li>å¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦æ¥å°†ç®€å•çš„è¡¨è¾¾å¼æ¥ç»„åˆæˆå¤æ‚çš„è¡¨è¾¾å¼<a id="more"></a>
<h2 id="åŸå§‹è¡¨è¾¾å¼"><a href="#åŸå§‹è¡¨è¾¾å¼" class="headerlink" title="åŸå§‹è¡¨è¾¾å¼"></a>åŸå§‹è¡¨è¾¾å¼</h2></li>
</ul>
<p>â€œåŸå§‹è¡¨è¾¾å¼â€ï¼Œè¯´ç®€å•ç‚¹å°±æ˜¯æœ€ç®€å•çš„è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸å†åŒ…å«å…¶ä»–è¡¨è¾¾å¼   </p>
<blockquote>
<p>jsä¸­åŸå§‹è¡¨è¾¾å¼æœ‰ä»¥ä¸‹ï¼š</p>
<ul>
<li>å¸¸é‡</li>
<li>ç›´æ¥é‡</li>
<li>å…³é”®å­—</li>
<li>å˜é‡</li>
</ul>
<p>æ —å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt; //ç›´æ¥é‡          </div><div class="line">&gt; 1.23 // æ•°å­—ç›´æ¥é‡</div><div class="line">&gt; &quot;hello&quot; // å­—ç¬¦ä¸²ç›´æ¥é‡</div><div class="line">&gt; /pattern/ // æ­£åˆ™è¡¨è¾¾å¼ç›´æ¥</div><div class="line">&gt; //ä¿ç•™å­—   </div><div class="line">&gt; true</div><div class="line">&gt; false</div><div class="line">&gt; null // è¿”å›ç©º</div><div class="line">&gt; this // è¿”å›â€œå½“å‰å¯¹è±¡â€</div><div class="line">&gt; //å˜é‡         </div><div class="line">&gt; i // è¿”å›içš„å€¼</div><div class="line">&gt; sum // è¿”å›sumçš„å€¼</div><div class="line">&gt; undefined // undefinedæ˜¯å…¨å±€å˜é‡ï¼Œå’Œnullä¸åŒï¼Œä¸æ˜¯ä¸€ä¸ªå…³é”®å­—</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<h2 id="å¯¹è±¡å’Œæ•°ç»„çš„åˆå§‹åŒ–è¡¨è¾¾å¼"><a href="#å¯¹è±¡å’Œæ•°ç»„çš„åˆå§‹åŒ–è¡¨è¾¾å¼" class="headerlink" title="å¯¹è±¡å’Œæ•°ç»„çš„åˆå§‹åŒ–è¡¨è¾¾å¼"></a>å¯¹è±¡å’Œæ•°ç»„çš„åˆå§‹åŒ–è¡¨è¾¾å¼</h2><p>å¯¹è±¡å’Œæ•°ç»„çš„åˆå§‹åŒ–è¡¨è¾¾å¼å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡å’Œæ•°ç»„ï¼Œå¹¶ä¸æ˜¯åŸå§‹è¡¨è¾¾å¼</p>
<h3 id="æ•°ç»„åˆå§‹åŒ–è¡¨è¾¾å¼"><a href="#æ•°ç»„åˆå§‹åŒ–è¡¨è¾¾å¼" class="headerlink" title="æ•°ç»„åˆå§‹åŒ–è¡¨è¾¾å¼"></a>æ•°ç»„åˆå§‹åŒ–è¡¨è¾¾å¼</h3><blockquote>
<p>æ —å­:</p>
<ul>
<li><code>[] //ç©ºæ•°ç»„</code></li>
<li><code>[1+2,3+4] // 2ä¸ªå…ƒç´ æ•°ç»„ [3,7]</code></li>
<li><code>var matrix = [[1,2],[3,4]]  // æ•°ç»„å¯åµŒå¥—</code></li>
</ul>
</blockquote>
<p>jså¯¹æ•°ç»„åˆå§‹åŒ–è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼æ—¶å€™ï¼Œæ•°ç»„è¡¨è¾¾å¼ä¸­çš„æ‰€æœ‰å…ƒç´ è¡¨è¾¾å¼ä¹Ÿä¼šå„è‡ªè®¡ç®—ä¸€æ¬¡</p>
<p>æ•°ç»„ç›´æ¥é‡çš„å…ƒç´ è¡¨è¾¾å¼åœ¨é€—å·ä¹‹é—´å…ƒç´ å¯ä»¥çœç•¥ï¼Œç©ºä½é»˜è®¤å¡«å……undefinedã€‚<br><code>var array = [1,,3] // æ•°ç»„åŒ…å«3ä¸ªå…ƒç´ ã€‚[1,undefined,3]</code></p>
<p>ä½†æ˜¯åˆ—è¡¨ç»“å°¾å¤„å¯ä»¥ç•™ä¸‹å•ä¸ªé€—å·ï¼Œè¿™æ—¶ä¸ä¼šåˆ›å»ºæ–°çš„undefinedå…ƒç´ </p>
<h3 id="å¯¹è±¡åˆå§‹åŒ–è¡¨è¾¾å¼"><a href="#å¯¹è±¡åˆå§‹åŒ–è¡¨è¾¾å¼" class="headerlink" title="å¯¹è±¡åˆå§‹åŒ–è¡¨è¾¾å¼"></a>å¯¹è±¡åˆå§‹åŒ–è¡¨è¾¾å¼</h3><p>å¯¹è±¡åˆå§‹åŒ–è¡¨è¾¾å¼ä¸æ•°ç»„åˆå§‹åŒ–è¡¨è¾¾å¼éå¸¸æ¥è¿‘ï¼Œå°†[]æ›¿æ¢æˆ{},æ¯ä¸ªå­è¡¨è¾¾å¼éƒ½åŒ…å«ä¸€ä¸ªå±æ€§åå’Œå†’å·ä¸ºå‰ç¼€</p>
<blockquote>
<p>æ —å­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; var p = &#123; x:2, y:3 &#125;; // å¸¦2ä¸ªå±æ€§çš„å¯¹è±¡p</div><div class="line">&gt; var q = &#123;&#125;; // ç©ºå¯¹è±¡</div><div class="line">&gt; q.x = 2; q.y =3; // qçš„å±æ€§æˆå‘˜ä¸pä¸€è‡´</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>å¯¹è±¡ç›´æ¥é‡ä¹Ÿæ˜¯å…è®¸åµŒå¥—çš„</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt; var rect = &#123;</div><div class="line">&gt;   upLeft: &#123; x:2, y:3&#125;,</div><div class="line">&gt;   bottomRight: &#123; x:4, y:1&#125;</div><div class="line">&gt; &#125;;</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>jsæ±‚å¯¹è±¡åˆå§‹åŒ–è¡¨è¾¾å¼æ—¶å€™ï¼Œå¯¹è±¡å…ƒç´ è¡¨è¾¾å¼ä¹Ÿä¼šå„è‡ªéƒ½è®¡ç®—ä¸€æ¬¡ï¼Œå¹¶ä¸”å…ƒç´ è¡¨è¾¾å¼ä¸å¿…åŒ…å«å¸¸æ•°å€¼ï¼Œå¯ä»¥æ˜¯<br>ä»»æ„çš„jsè¡¨è¾¾å¼ã€‚</p>
<p>å¯¹è±¡ç›´æ¥é‡ä¸­å±æ€§çš„åå­—å¯ä»¥æ˜¯å­—ç¬¦ä¸²è€Œä¸æ˜¯æ ‡ç¤ºç¬¦</p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; var side = 1;</div><div class="line">&gt; var square = &#123;</div><div class="line">&gt;   &quot;upLeft&quot;: &#123; x: p.x, y: p.y&#125;,</div><div class="line">&gt;   &quot;bottomRight&quot;: &#123;x: p.x+side, y: p.y+side&#125;</div><div class="line">&gt; &#125;;</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<h2 id="å‡½æ•°è¡¨è¾¾å¼"><a href="#å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="å‡½æ•°è¡¨è¾¾å¼"></a>å‡½æ•°è¡¨è¾¾å¼</h2><p>å‡½æ•°å®šä¹‰è¡¨è¾¾å¼å®šä¹‰ä¸€ä¸ªjså‡½æ•°ï¼Œè¡¨è¾¾å¼çš„å€¼æ˜¯è¿™ä¸ªæ–°å®šä¹‰çš„å‡½æ•°ã€‚å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var square = function (x)&#123;</div><div class="line">  return x * x;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="å±æ€§è®¿é—®è¡¨è¾¾å¼"><a href="#å±æ€§è®¿é—®è¡¨è¾¾å¼" class="headerlink" title="å±æ€§è®¿é—®è¡¨è¾¾å¼"></a>å±æ€§è®¿é—®è¡¨è¾¾å¼</h2><p>å±æ€§è®¿é—®è¡¨è¾¾å¼å¾—åˆ°ä¸€ä¸ªå¯¹è±¡å±æ€§æˆ–ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„å€¼ã€‚ä¸»è¦æœ‰<code>.</code>å’Œ<code>[]</code>ä¸¤ç§å½¢å¼</p>
<blockquote>
<p>æ —å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt; var o = &#123; x:1, y:&#123; z:3 &#125; &#125;;</div><div class="line">&gt; var a = [o, 4, [5,6]];</div><div class="line">&gt; o.x // =&gt;1 è¡¨è¾¾å¼oçš„xå±æ€§</div><div class="line">&gt; o.y.z // =&gt;3 è¡¨è¾¾å¼o.yçš„zå±æ€§</div><div class="line">&gt; o[&quot;x&quot;] // =&gt;1 è¡¨è¾¾å¼oçš„xå±æ€§</div><div class="line">&gt; a[1] // =&gt;4 è¡¨è¾¾å¼açš„ç´¢å¼•ä¸º1çš„å…ƒç´ </div><div class="line">&gt; a[2][&quot;1&quot;] // =&gt;6 è¡¨è¾¾å¼a[2] çš„ç´¢å¼•ä¸º1çš„å…ƒç´ </div><div class="line">&gt; a[0].x // =&gt;1 è¡¨è¾¾å¼a[0]çš„xå±æ€§</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>åœ¨<code>.</code> å’Œ <code>[]</code>ä¹‹å‰çš„è¡¨è¾¾å¼æ€»ä¼šé¦–å…ˆè®¡ç®—ã€‚å¦‚æœè®¡ç®—å‡ºç»“æœä¸ºnull æˆ–è€… undefinedï¼Œè¡¨è¾¾å¼ä¼šæŠ›å‡ºç±»å‹é”™è¯¯å¼‚å¸¸ã€‚<br>å¦‚æœè¿ç®—ç»“æœä¸æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œjsä¼šå°†å…¶è½¬æ¢ä¸ºå¯¹è±¡ã€‚</p>
<p>å¦‚æœå¯¹è±¡è¡¨è¾¾å¼åé¢è·Ÿéšå¥ç‚¹å’Œæ ‡ç¤ºç¬¦ï¼Œåˆ™ä¼šæŸ¥æ‰¾ç”±è¿™ä¸ªæ ‡ç¤ºç¬¦æ‰€æŒ‡å®šçš„å±æ€§çš„å€¼ï¼Œç„¶åä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼è¿”å›ã€‚</p>
<p>å¦‚æœè¡¨è¾¾å¼åé¢è·Ÿéšä¸€å¯¹æ‹¬å·ï¼Œåˆ™ä¼šè®¡ç®—æ–¹æ‹¬å·é‡Œé¢è¡¨è¾¾å¼å€¼å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæŸ¥æ‰¾å¯¹åº”å±æ€§çš„å€¼</p>
<p>å¦‚æœä»¥ä¸Šä¸¤ç§æƒ…å†µï¼Œå‘½åå±æ€§å¹¶ä¸å­˜åœ¨ï¼Œåˆ™æ•´ä¸ªå±æ€§è®¿é—®è¡¨è¾¾å¼çš„å€¼å°±æ˜¯undefined</p>
<ul>
<li><code>.</code>å†™æ³•é€‚åˆè¦è®¿é—®çš„å±æ€§åæ˜¯åˆæ³•æ ‡ç¤ºç¬¦ï¼Œå¹¶ä¸”éœ€è¦çŸ¥é“è¦è®¿é—®å±æ€§åå­—</li>
<li><code>[]</code> å†™æ³•é€‚åˆè¦è®¿é—®çš„å±æ€§åä¸æ˜¯åˆæ³•å­—ç¬¦ï¼Œæˆ–è€…è®¿é—®çš„å±æ€§åæ˜¯éœ€è¦è¿ç®—å¾—å‡ºçš„ã€‚å¯¹äºæ•°ç»„åˆ™å¿…é¡»ä½¿ç”¨è¿™ç§å†™æ³•</li>
</ul>
<h2 id="è°ƒç”¨è¡¨è¾¾å¼"><a href="#è°ƒç”¨è¡¨è¾¾å¼" class="headerlink" title="è°ƒç”¨è¡¨è¾¾å¼"></a>è°ƒç”¨è¡¨è¾¾å¼</h2><p>jsè°ƒç”¨è¡¨è¾¾å¼ï¼Œæ˜¯ä¸€ç§è°ƒç”¨ï¼ˆæ‰§è¡Œï¼‰å‡½æ•°æˆ–æ–¹æ³•çš„è¯­æ³•ã€‚å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">func(0) // fæ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œ0æ˜¯ä¸€ä¸ªå‚æ•°è¡¨è¾¾å¼</div><div class="line">Math.max(x,y,z) // Math.maxæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œx,y,zæ˜¯å‚æ•°</div><div class="line">a.sort() // a.sortæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æ²¡æœ‰å‚æ•°</div></pre></td></tr></table></figure>
<p>å¯¹è°ƒç”¨è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼æ—¶å€™ï¼Œé¦–å…ˆè®¡ç®—å‡½æ•°è¡¨è¾¾å¼ï¼Œç„¶åè®¡ç®—å‚æ•°è¡¨è¾¾å¼ï¼Œå¾—åˆ°ä¸€ç»„å‚æ•°å€¼ã€‚</p>
<p>å¦‚æœå‡½æ•°è¡¨è¾¾å¼ä¸æ˜¯ä¸€ä¸ªå¯ä»¥è°ƒç”¨çš„å¯¹è±¡ï¼Œä¼šæŠ›å‡ºç±»å‹é”™è¯¯å¼‚å¸¸</p>
<p>å¦‚æœå‡½æ•°è¡¨è¾¾å¼ä½¿ç”¨returnè¯­å¥è¿”å›ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼å°±æ˜¯æ•´ä¸ªè°ƒç”¨è¡¨è¾¾å¼çš„å€¼ï¼Œå¦åˆ™è¡¨è¾¾å¼çš„å€¼å°±æ˜¯undefined</p>
<h2 id="å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼"><a href="#å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼" class="headerlink" title="å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼"></a>å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼</h2><p>å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œåˆå§‹åŒ–æ–°å¯¹è±¡çš„å±æ€§ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">new Object()</div><div class="line">new Point(2,6)</div></pre></td></tr></table></figure>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼ä¸éœ€è¦ä¼ å…¥ä»»ä½•å‚æ•°ç»™æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç©ºæ‹¬å·å¯ä»¥çœç•¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">new Object</div><div class="line">new Date</div></pre></td></tr></table></figure>
<h2 id="è¿ç®—ç¬¦æ¦‚è¿°"><a href="#è¿ç®—ç¬¦æ¦‚è¿°" class="headerlink" title="è¿ç®—ç¬¦æ¦‚è¿°"></a>è¿ç®—ç¬¦æ¦‚è¿°</h2><p>å¤§å¤šæ•°è¿ç®—ç¬¦éƒ½æ˜¯ç”±æ ‡ç‚¹ç¬¦å·è¡¨ç¤ºçš„ï¼Œå¦‚â€+â€,â€=â€ã€‚è€Œå¦å¤–ä¸€äº›è¿ç®—ç¬¦åˆ™æ˜¯ç”±å…³é”®å­—è¡¨ç¤ºçš„ï¼Œæ¯”å¦‚deleteå’Œinstanceofã€‚</p>
<p>ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼Œè™šçº¿åˆ†å‰²å¼€çš„è¿ç®—ç¬¦ä¸åŒä¼˜å…ˆçº§ã€‚</p>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>æ“ä½œ</th>
<th>ç»“åˆæ€§</th>
<th>æ“ä½œæ•°ä¸ªæ•°</th>
<th>ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>++</td>
<td>å‰/åå¢é‡</td>
<td>R</td>
<td>1</td>
<td>lval =&gt; num</td>
</tr>
<tr>
<td>â€“</td>
<td>å‰/åå‡é‡</td>
<td>R</td>
<td>1</td>
<td>lval =&gt; num</td>
</tr>
<tr>
<td>-</td>
<td>æ±‚å</td>
<td>R</td>
<td>1</td>
<td>num =&gt; num</td>
</tr>
<tr>
<td>+</td>
<td>è½¬æ¢ä¸ºæ•°å­—</td>
<td>R</td>
<td>1</td>
<td>num =&gt; num</td>
</tr>
<tr>
<td>~</td>
<td>æŒ‰ä½æ±‚å</td>
<td>R</td>
<td>1</td>
<td>int =&gt; int</td>
</tr>
<tr>
<td>!</td>
<td>é€»è¾‘é</td>
<td>R</td>
<td>1</td>
<td>bool =&gt; bool</td>
</tr>
<tr>
<td>delete</td>
<td>åˆ é™¤å±æ€§</td>
<td>R</td>
<td>1</td>
<td>lval =&gt; bool</td>
</tr>
<tr>
<td>typeof</td>
<td>æ£€æµ‹æ“ä½œæ•°ç±»å‹</td>
<td>R</td>
<td>1</td>
<td>any =&gt; str</td>
</tr>
<tr>
<td>void</td>
<td>è¿”å›undefined</td>
<td>R</td>
<td>1</td>
<td>any =&gt; undef</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>*,/,%</td>
<td>ä¹˜ã€é™¤ã€å–ä½™</td>
<td>L</td>
<td>2</td>
<td>num,num =&gt; num</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>+ã€-</td>
<td>åŠ ã€å‡</td>
<td>L</td>
<td>2</td>
<td>num,num =&gt; num</td>
</tr>
<tr>
<td>+</td>
<td>å­—ç¬¦ä¸²è¿æ¥</td>
<td>L</td>
<td>2</td>
<td>str,str =&gt; str</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>å·¦ç§»ä½</td>
<td>L</td>
<td>2</td>
<td>int,int =&gt; int</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>æ— ç¬¦å·å³ç§»ä½</td>
<td>L</td>
<td>2</td>
<td>int,int =&gt; int</td>
</tr>
<tr>
<td>&gt;&gt;&gt;</td>
<td>æœ‰ç¬¦å·å³ç§»ä½</td>
<td>L</td>
<td>2</td>
<td>int,int =&gt; int</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>&lt;,&lt;=,&gt;,&gt;=</td>
<td>æ¯”è¾ƒæ•°å­—é¡ºåº</td>
<td>L</td>
<td>2</td>
<td>num,num =&gt; bool</td>
</tr>
<tr>
<td>&lt;,&lt;=,&gt;,&gt;=</td>
<td>æ¯”è¾ƒåœ¨å­—æ¯è¡¨é¡ºåº</td>
<td>L</td>
<td>2</td>
<td>str,str =&gt; bool</td>
</tr>
<tr>
<td>instanceof</td>
<td>æµ‹è¯•å¯¹è±¡ç±»</td>
<td>L</td>
<td>2</td>
<td>obj,func =&gt; bool</td>
</tr>
<tr>
<td>in</td>
<td>æµ‹è¯•å±æ€§æ˜¯å¦å­˜åœ¨</td>
<td>L</td>
<td>2</td>
<td>str,obj =&gt; bool</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”â€”â€“</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>==</td>
<td>åˆ¤æ–­ç›¸ç­‰</td>
<td>L</td>
<td>2</td>
<td>any,any   =&gt;bool</td>
</tr>
<tr>
<td>!=</td>
<td>åˆ¤æ–­ä¸ç­‰</td>
<td>L</td>
<td>2</td>
<td>any,any =&gt; bool</td>
</tr>
<tr>
<td>===</td>
<td>åˆ¤æ–­æ’ç­‰</td>
<td>L</td>
<td>2</td>
<td>any,any =&gt; bool</td>
</tr>
<tr>
<td>!==</td>
<td>åˆ¤æ–­éæ’ç­‰</td>
<td>L</td>
<td>2</td>
<td>any,any =&gt; bool</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>&amp;</td>
<td>æŒ‰ä½ä¸</td>
<td>L</td>
<td>2</td>
<td>int,int =&gt; int</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>^</td>
<td>æŒ‰ä½å¼‚æˆ–</td>
<td>L</td>
<td>2</td>
<td>int,int =&gt; int</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>ï½œ</td>
<td>æŒ‰ä½æˆ–</td>
<td>L</td>
<td>2</td>
<td>int,int =&gt; int</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>é€»è¾‘ä¸</td>
<td>L</td>
<td>2</td>
<td>any,any =&gt; any</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>ï½œï½œ</td>
<td>é€»è¾‘æˆ–</td>
<td>L</td>
<td>2</td>
<td>any,any =&gt; any</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>?:</td>
<td>æ¡ä»¶è¿ç®—ç¬¦</td>
<td>L</td>
<td>3</td>
<td>bool,any,any =&gt; any</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>=</td>
<td>èµ‹å€¼è¿ç®—ç¬¦</td>
<td>R</td>
<td>2</td>
<td>lval,any =&gt; any</td>
</tr>
<tr>
<td>*=,/=,%=,+=,-=,&amp;=</td>
<td>è¿ç®—ä¸”èµ‹å€¼</td>
<td>R</td>
<td>2</td>
<td>lval,any =&gt; any</td>
</tr>
<tr>
<td>^=,ï½œï½œ=,&lt;&lt;=,&gt;&gt;=,&gt;&gt;&gt;=</td>
<td>è¿ç®—ä¸”èµ‹å€¼</td>
<td>R</td>
<td>2</td>
<td>lval,any =&gt; any</td>
</tr>
<tr>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”â€”â€”â€”â€”</td>
<td>â€”</td>
<td>â€“</td>
<td>â€”â€”â€”</td>
</tr>
<tr>
<td>,</td>
<td>å¿½ç•¥ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼Œè¿”å›ç¬¬äºŒä¸ªæ“ä½œæ•°</td>
<td>L</td>
<td>2</td>
<td>any,any =&gt; any</td>
</tr>
</tbody>
</table>
<h3 id="å·¦å€¼"><a href="#å·¦å€¼" class="headerlink" title="å·¦å€¼"></a>å·¦å€¼</h3><p>ä¸Šè¡¨ä¸­å‡ºç°çš„lvalæŒ‡çš„æ˜¯å·¦å€¼ï¼Œæ„æ€æ˜¯è¡¨è¾¾å¼åªèƒ½å‡ºç°åœ¨èµ‹å€¼è¿ç®—ç¬¦çš„å·¦ä¾§</p>
<p>åœ¨jsä¸­ï¼Œå˜é‡ã€å¯¹è±¡å±æ€§ã€å’Œæ•°ç»„å…ƒç´ éƒ½æ˜¯å·¦å€¼ã€‚</p>
<p>ECMAScriptå…è®¸å†…ç½®å‡½æ•°è¿”å›å·¦å€¼ï¼Œä½†è‡ªå®šä¹‰å‡½æ•°ä¸èƒ½è¿”å›å·¦å€¼</p>
<h3 id="æ“ä½œæ•°ç±»å‹å’Œç»“æœç±»å‹"><a href="#æ“ä½œæ•°ç±»å‹å’Œç»“æœç±»å‹" class="headerlink" title="æ“ä½œæ•°ç±»å‹å’Œç»“æœç±»å‹"></a>æ“ä½œæ•°ç±»å‹å’Œç»“æœç±»å‹</h3><p>jsè¿ç®—ç¬¦é€šå¸¸ä¼šæ ¹æ®éœ€è¦å¯¹æ“ä½œæ•°è¿›è¡Œç±»å‹è½¬æ¢</p>
<p><code>*</code>å¸Œæœ›æ“ä½œæ•°ä¸ºæ•°å­—ï¼Œä½†æ˜¯è¡¨è¾¾å¼<code>&quot;3&quot;*&quot;5&quot;</code>å´æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºjsä¼šæŠŠæ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—</p>
<p>æœ‰äº›æ“ä½œç¬¦å¯¹æ“ä½œæ•°ç±»å‹æœ‰ä¸€å®šç¨‹åº¦ä¾èµ–ï¼Œæ¯”å¦‚<code>ï¼‹</code>è¿ç®—ç¬¦ã€‚å¯ä»¥å¯¹æ•°å­—è¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œä¹Ÿå¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œè¿æ¥ã€‚</p>
<h3 id="è¿ç®—ç¬¦ä¼˜å…ˆçº§"><a href="#è¿ç®—ç¬¦ä¼˜å…ˆçº§" class="headerlink" title="è¿ç®—ç¬¦ä¼˜å…ˆçº§"></a>è¿ç®—ç¬¦ä¼˜å…ˆçº§</h3><p>ä¸Šè¡¨ä¸­è¿ç®—ç¬¦æŒ‰ç…§ä¼˜å…ˆçº§ä»é«˜åˆ°ä½æ’åºï¼Œæ¯ä¸ªè™šçº¿å†…çš„ä¸€ç»„è¿ç®—ç¬¦å…·æœ‰ç›¸åŒä¼˜å…ˆçº§ã€‚</p>
<p>ä¼˜å…ˆçº§é«˜çš„è¿ç®—ç¬¦æ‰§è¡Œæ€»æ˜¯å…ˆäºä¼˜å…ˆçº§ä½çš„è¿ç®—ç¬¦<br>ä¸¾ä¸ªæ —å­ï¼š<code>m = x + y*z;</code><br><code>*</code>è¿ç®—ç¬¦æ¯”<code>ï¼‹</code>è¿ç®—ç¬¦ä¼˜å…ˆçº§é«˜ï¼Œä¼˜å…ˆè®¡ç®—<code>y*z</code>ï¼Œè·å¾—ç»“æœå†ä¸xç›¸åŠ ã€‚<code>=</code>èµ‹å€¼è¿ç®—ç¬¦ä¼˜å…ˆçº§æœ€ä½ï¼Œå³ä¾§è¡¨è¾¾å¼<br>è®¡ç®—å‡ºç»“æœåèµ‹å€¼ç»™m</p>
<p>å¾ˆå¤šæ—¶å€™ä¸ºäº†ä»£ç é€»è¾‘æ¸…æ™°ï¼ŒåŠ ä¸Šä¸€äº›æ‹¬å·æ¥é‡å†™ä¼˜å…ˆçº§ï¼Œæ¥é¿å…ä¸€äº›ä¼˜å…ˆçº§å¼•èµ·çš„bugæˆ–è€…æ‰§è¡Œé¡ºåºä¸è®¾è®¡ä¸ç¬¦<br><code>m = (x + y) * z</code></p>
<h3 id="è¿ç®—ç¬¦çš„ç»“åˆæ€§"><a href="#è¿ç®—ç¬¦çš„ç»“åˆæ€§" class="headerlink" title="è¿ç®—ç¬¦çš„ç»“åˆæ€§"></a>è¿ç®—ç¬¦çš„ç»“åˆæ€§</h3><p>ä¸Šè¡¨ä¸­è¯´æ˜äº†è¿ç®—ç¬¦çš„ç»“åˆæ€§ã€‚</p>
<ul>
<li>L æŒ‡ä»å·¦åˆ°å³ç»“åˆ,æ‰§è¡Œæ—¶æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºè¿›è¡Œ</li>
<li>R æŒ‡ä»å³åˆ°å·¦ç»“åˆ,æ‰§è¡Œæ—¶æŒ‰ç…§ä»å³åˆ°å·¦çš„é¡ºåºè¿›è¡Œ</li>
</ul>
<p>ä¸¾ä¸ªæ —å­ï¼š<code>-</code>è¿ç®—ç¬¦ä»å·¦åˆ°å³ç»“åˆï¼Œå› æ­¤<code>w = x - y - z</code> ç­‰ä»·äº <code>w = ((x - y) - z)</code></p>
<h3 id="è¿ç®—é¡ºåº"><a href="#è¿ç®—é¡ºåº" class="headerlink" title="è¿ç®—é¡ºåº"></a>è¿ç®—é¡ºåº</h3><p>è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å’Œç»“åˆæ€§è§„å®šäº†åœ¨å¤æ‚è¡¨è¾¾å¼ä¸­çš„è¿ç®—é¡ºåºï¼Œä½†æ˜¯æ²¡æœ‰è§„å®šå­è¡¨è¾¾å¼çš„è®¡ç®—è¿‡ç¨‹ä¸­çš„è¿ç®—é¡ºåº</p>
<p>jsä¸­ï¼Œæ€»æ˜¯ä¸¥æ ¼æŒ‰ç…§ä»å·¦åˆ°å³è®¡ç®—å­è¡¨è¾¾å¼ã€‚ä¾‹å¦‚<code>w=x+y*z</code>ï¼Œé¦–å…ˆè®¡ç®—w,ç„¶åè®¡ç®—x,y,zçš„å€¼ï¼Œç„¶åyçš„å€¼å’Œzçš„å€¼ç›¸æ‰¿<br>ä¹‹åï¼Œå†åŠ ä¸Šxçš„å€¼ï¼Œæœ€åå°†å…¶ç»“æœèµ‹å€¼ç»™wã€‚ç»™è¡¨è¾¾å¼åŠ æ‹¬å·ä¼šæ”¹å˜ä¹˜æ³•åŠ æ³•å’Œèµ‹å€¼è¿ç®—çš„é¡ºåºï¼Œä½†æ˜¯å­è¡¨è¾¾å¼çš„è®¡ç®—<br>é¡ºåºä»ç„¶æ˜¯ä»å·¦è‡³å³çš„é¡ºåº</p>
<p>åªæœ‰ä¸€ç§æƒ…å†µä¾‹å¤–ï¼Œå½“ä»»ä½•ä¸€ä¸ªè¡¨è¾¾å¼å…·æœ‰å‰¯ä½œç”¨è€Œå½±å“å…¶ä»–è¡¨è¾¾å¼æ—¶å€™ï¼Œæ±‚å€¼é¡ºåºæ‰ä¼šæœ‰æ‰€ä¸åŒã€‚<br>ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ä¸­xçš„ä¸€ä¸ªå˜é‡è‡ªå¢1ï¼Œè¿™ä¸ªå˜é‡åœ¨zä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå®é™…ä¸Šæ˜¯å…ˆè®¡ç®—äº†xçš„å€¼å†è®¡ç®—zçš„å€¼ï¼Œè¿™ä¸€ç‚¹ä¸€å®šè¦æ³¨æ„</p>
<p>ä¸‹é¢è¿™ä¸ªæ —å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">a = 1;</div><div class="line">b = (a++) + a;</div></pre></td></tr></table></figure>
<p>å¦‚æœæŒ‰ç…§å‰é¢é‚£ç§ä¸è€ƒè™‘å‰¯ä½œç”¨æ—¶çš„é¡ºåºæ˜¯ 1) è®¡ç®—b, 2)è®¡ç®—a++ä¸ºc, 3ï¼‰è®¡ç®—aï¼Œ4ï¼‰è®¡ç®—cï¼‹a, 5ï¼‰å°†c+aç»“æœèµ‹å€¼ç»™b</p>
<p>æŒ‰ç…§<code>++</code>çš„å½±å“ï¼Œ1) è®¡ç®—b, 2)a++ç»“æœä»ç„¶ä¸º1,c=1,éšå³aç«‹å³è‡ªå¢1, 3ï¼‰è®¡ç®—aï¼Œaå·²ç»æ˜¯2ï¼Œ4ï¼‰è®¡ç®—cï¼‹aï¼3,5ï¼‰å°†c+aç»“æœèµ‹å€¼ç»™bï¼Œæ‰€ä»¥bï¼3</p>
<p><strong>åˆ‡è®°ï¼Œaå¢1çš„æ“ä½œæ˜¯åœ¨è¡¨è¾¾å¼è®¡ç®—ä¸­å°±å·²ç»æ‰§è¡Œäº†ï¼Œä¸æ˜¯åœ¨æ•´ä¸ªè¡¨è¾¾å¼è®¡ç®—å®Œæˆä¹‹åæ‰§è¡Œçš„</strong></p>
<h2 id="ç®—æœ¯è¡¨è¾¾å¼"><a href="#ç®—æœ¯è¡¨è¾¾å¼" class="headerlink" title="ç®—æœ¯è¡¨è¾¾å¼"></a>ç®—æœ¯è¡¨è¾¾å¼</h2><p>åŸºæœ¬ç®—æ•°è¿ç®—ç¬¦åŒ…æ‹¬<code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>%</code></p>
<h3 id="â€œ-â€è¿ç®—ç¬¦"><a href="#â€œ-â€è¿ç®—ç¬¦" class="headerlink" title="â€œ+â€è¿ç®—ç¬¦"></a>â€œ+â€è¿ç®—ç¬¦</h3><ul>
<li>å¯¹2ä¸ªæ•°å­—è¿›è¡ŒåŠ æ³•æ“ä½œ</li>
<li>å­—ç¬¦ä¸²è¿æ¥æ“ä½œ</li>
</ul>
<p><strong>é’ˆå¯¹ä¸åŒæ“ä½œæ•°ï¼Œï¼‹è¿ç®—ç¬¦è¡Œä¸ºè¡¨ç°æœ‰äº›ä¸åŒ</strong></p>
<ul>
<li>ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œå¯¹è±¡ä¼šéµå¾ªå¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢è§„åˆ™è½¬æ¢ä¸ºåŸå§‹å€¼<ul>
<li>æ—¥æœŸå¯¹è±¡ï¼štoString()æ‰§è¡Œè½¬æ¢</li>
<li>å…¶ä»–å¯¹è±¡é€šè¿‡valueOf()è½¬æ¢ï¼Œå¦‚æœvalueOf()ä¸å¯ç”¨ï¼Œä¼šé€šè¿‡toString()æ–¹æ³•è½¬æ¢</li>
</ul>
</li>
<li>åœ¨è¿›è¡Œå¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢åï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°ä¹Ÿä¼šè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œç„¶åè¿æ¥</li>
<li>å¦åˆ™ï¼Œä¸¤ä¸ªæ“ä½œæ•°éƒ½è½¬æ¢æˆæ•°å­—æˆ–è€…NaNï¼Œç„¶åè¿›è¡ŒåŠ æ³•æ“ä½œ</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€äº›æ —å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1 + 2 // =&gt;3</div><div class="line">&quot;1&quot; + 2 // =&gt; &quot;12&quot;</div><div class="line">&quot;12&quot; + &quot;3&quot; // =&gt; &quot;123&quot;</div><div class="line">1 + &#123;&#125; // &quot;1[object object]&quot;ï¼Œå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²</div><div class="line">true + true // 2 ï¼Œboolè½¬æ¢ä¸ºæ•°å­—åšåŠ æ³•</div><div class="line"></div><div class="line">2 + null // =&gt;2,nullè½¬æ¢ä¸º0</div><div class="line">2 + undefined // =&gt; NaN, undefinedè½¬æ¢ä¸ºNaNååšåŠ æ³•</div></pre></td></tr></table></figure>
<p><strong>æœ€åï¼Œè¿˜éœ€è¦è€ƒè™‘ï¼ŒåŠ æ³•çš„ç»“åˆæ€§å¯¹è¿ç®—é¡ºåºçš„å½±å“</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1 + 2 + &quot;hello&quot; // &quot;3hello&quot;</div><div class="line">1 + (2 + &quot;hello&quot;) // &quot;12hello&quot;</div></pre></td></tr></table></figure>
<h3 id="ä¸€å…ƒç®—æœ¯è¿ç®—ç¬¦"><a href="#ä¸€å…ƒç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ä¸€å…ƒç®—æœ¯è¿ç®—ç¬¦"></a>ä¸€å…ƒç®—æœ¯è¿ç®—ç¬¦</h3><p>ä¸€å…ƒè¿ç®—ç¬¦ä½œç”¨äºä¸€ä¸ªå•ç‹¬æ“ä½œæ•°ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°å€¼</p>
<p>jsä¸­ä¸€å…ƒè¿ç®—ç¬¦ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œå¹¶ä¸”éƒ½æ˜¯å³ç»“åˆ</p>
<p><code>+</code>/<code>-</code>ï¼Œæ—¢æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œä¹Ÿæ˜¯äºŒå…ƒè¿ç®—ç¬¦</p>
<ul>
<li><p>ä¸€å…ƒåŠ æ³•(<code>+</code>)</p>
<blockquote>
<p>æ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—ï¼ˆæˆ–è€…NaNï¼‰ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªè½¬æ¢åçš„æ•°å­—ã€‚å¦‚æœå·²ç»æ˜¯æ•°å­—ï¼Œç›´æ¥è¿”å›</p>
</blockquote>
</li>
<li><p>ä¸€å…ƒå‡æ³•(<code>-</code>)</p>
<blockquote>
<p>æ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—ï¼ˆæˆ–è€…NaNï¼‰ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªè½¬æ¢åçš„æ•°å­—ï¼Œç„¶åæ”¹å˜è¿ç®—ç»“æœç¬¦å·</p>
</blockquote>
</li>
<li><p>é€’å¢(<code>++</code>)</p>
<blockquote>
<p>å‰å¢é‡ <code>++a</code>ï¼Œå…ˆè¿›è¡Œå¢é‡è¿ç®—å¹¶ä¸”è¿”å›è¿ç®—ç»“æœ<br>åå¢é‡ <code>a++</code>ï¼Œå…ˆè¿›è¡Œå¢é‡è®¡ç®—ï¼Œè¿”å›æœªåšå¢é‡è¿ç®—çš„å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; var i=1, j=i++; // i=2,j=1</div><div class="line">&gt; var i=1, j=++i; // i=2,j=2</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>é€’å‡(<code>--</code>)</p>
<blockquote>
<p>å‰å‡é‡ <code>--a</code>ï¼Œå…ˆè¿›è¡Œå‡é‡è¿ç®—å¹¶ä¸”è¿”å›è¿ç®—ç»“æœ<br>åå‡é‡ <code>a--</code>ï¼Œå…ˆè¿›è¡Œå‡é‡è®¡ç®—ï¼Œè¿”å›æœªåšå‡é‡è¿ç®—çš„å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt; var i=1, j=i--; // i=0,j=1</div><div class="line">&gt; var i=1, j=--i; // i=0,j=0</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h3 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a>ä½è¿ç®—ç¬¦</h3><ul>
<li><p><code>&amp;</code> æŒ‰ä½ä¸</p>
<blockquote>
<p><code>0x1234 &amp; 0x00ff = 0x0034</code></p>
</blockquote>
</li>
<li><p><code>|</code> æŒ‰ä½æˆ–</p>
<blockquote>
<p><code>0x1234 | 0x00ff = 0x12ff</code></p>
</blockquote>
</li>
<li><p><code>^</code> æŒ‰ä½å¼‚æˆ–</p>
<blockquote>
<p><code>0xff00 ^ 0xf0f0 = 0x0ff0</code></p>
</blockquote>
</li>
<li><p><code>~</code> æŒ‰ä½é</p>
<blockquote>
<p><code>~0x0f = 0xfffffff0</code></p>
</blockquote>
</li>
<li><p><code>&lt;&lt;</code> å·¦ç§»</p>
<blockquote>
<p><code>7 &lt;&lt; 2 = 28</code>,å·¦ç§»ä¸€ä½ç›¸å½“äºç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¹˜ä»¥2<br>ç§»åŠ¨ä½æ•° 0ï½31</p>
</blockquote>
</li>
<li><p><code>&gt;&gt;</code> å¸¦ç¬¦å·å³ç§»</p>
<blockquote>
<p>å¸¦ç¬¦å·å³ç§»æ—¶å€™å¡«è¡¥åœ¨å·¦è¾¹çš„ä½ç”±åŸæ¥çš„æ•°çš„ç¬¦å·å†³å®šï¼Œä»¥ä¾¿ä¿æŒå’ŒåŸæ“ä½œæ•°ä¸€è‡´<br>ç§»åŠ¨ä½æ•° 0ï½31<br><code>7 &gt;&gt; 1 = 3</code><br><code>-7 &gt;&gt; 1 = -4</code></p>
</blockquote>
</li>
<li><p><code>&gt;&gt;&gt;</code> æ— ç¬¦å·å³ç§»</p>
<blockquote>
<p>æ— ç¬¦å·å³ç§»æ—¶å€™å¡«è¡¥åœ¨å·¦è¾¹çš„ä½ç›´æ¥å¡«è¡¥0ï¼Œä¸åŸæ“ä½œæ•°æ— å…³<br>ç§»åŠ¨ä½æ•° 0ï½31<br><code>-1 &gt;&gt; 4 = 1</code><br><code>-1 &gt;&gt;&gt; 4 = 0x0fffffff</code></p>
</blockquote>
</li>
</ul>
<h2 id="å…³ç³»è¡¨è¾¾å¼"><a href="#å…³ç³»è¡¨è¾¾å¼" class="headerlink" title="å…³ç³»è¡¨è¾¾å¼"></a>å…³ç³»è¡¨è¾¾å¼</h2><p>ä¸»è¦åŒ…æ‹¬ç›¸ç­‰å’Œä¸ç›¸ç­‰è¿ç®—ç¬¦ã€æ¯”è¾ƒè¿ç®—ç¬¦ã€inã€instanceof</p>
<h3 id="ç›¸ç­‰å’Œä¸ç›¸ç­‰è¿ç®—ç¬¦"><a href="#ç›¸ç­‰å’Œä¸ç›¸ç­‰è¿ç®—ç¬¦" class="headerlink" title="ç›¸ç­‰å’Œä¸ç›¸ç­‰è¿ç®—ç¬¦"></a>ç›¸ç­‰å’Œä¸ç›¸ç­‰è¿ç®—ç¬¦</h3><p>jså®šä¹‰äº†4ä¸ªç¬¦å·<code>==</code>,<code>===</code>,<code>!=</code>,<code>!==</code></p>
<ul>
<li><code>==</code>ï¼šç›¸ç­‰</li>
<li><code>===</code>: æ’ç­‰</li>
<li><code>!=</code>: ä¸ç›¸ç­‰</li>
<li><code>!==</code>: ä¸æ’ç­‰</li>
</ul>
<p>ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦<code>===</code>é¦–å…ˆè®¡ç®—å…¶æ“ä½œæ•°çš„å€¼ï¼Œç„¶åæ¯”è¾ƒè¿™ä¸¤ä¸ªå€¼ï¼Œæ²¡æœ‰ç±»å‹è½¬æ¢</p>
<ul>
<li>å¦‚æœä¸¤ä¸ªå€¼ç±»å‹ä¸ç›¸åŒï¼Œåˆ™å®ƒä»¬ä¸ç›¸ç­‰</li>
<li>å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯nullæˆ–è€…éƒ½æ˜¯undefinedï¼Œåˆ™å®ƒä»¬ä¸ç›¸ç­‰</li>
<li>å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯å¸ƒå°”å€¼trueæˆ–è€…falseï¼Œï¼Œåˆ™å®ƒä»¬ç›¸ç­‰</li>
<li>å¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼æ˜¯NaNï¼Œæˆ–è€…2ä¸ªå€¼éƒ½æ˜¯NaNï¼Œåˆ™å®ƒä»¬ä¸ç›¸ç­‰ã€‚NaNå’Œå…¶ä»–ä»»ä½•å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼ŒåŒ…æ‹¬è‡ªèº«ã€‚é€šè¿‡X!==Xæ¥åˆ¤æ–­xæ˜¯å¦ä¸ºNaNï¼Œåªæœ‰xä¸ºNaNæ—¶å€™ï¼Œè¡¨è¾¾å¼æ‰ä¸ºtrue</li>
<li>å¦‚æœä¸¤ä¸ªå€¼ä¸ºæ•°å­—ä¸”æ•°å€¼ç›¸ç­‰ï¼Œåˆ™ä»–ä»¬ç›¸ç­‰ã€‚å¦‚æœä¸€ä¸ªå€¼ä¸º0ï¼Œå¦ä¸€ä¸ªä¸ºï¼0ï¼ŒåŒæ ·ç›¸ç­‰</li>
<li>å¦‚æœä¸¤ä¸ªå€¼ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”æ‰€å«å¯¹åº”ä½ä¸Š16ä½æ•°å®Œå…¨ç›¸ç­‰ï¼Œåˆ™ä»–ä»¬ç›¸å½“ã€‚å¦‚æœå®ƒä»¬é•¿åº¦æˆ–å†…å®¹ä¸åŒï¼Œåˆ™å®ƒä»¬ä¸ç›¸ç­‰ã€‚</li>
<li>ä¸¤ä¸ªå­—ç¬¦ä¸²å¯èƒ½å«ä¹‰å®Œå…¨ä¸€æ ·ä¸”æ˜¾ç¤ºå­—ç¬¦ä¸€æ ·ï¼Œä½†å…·æœ‰ä¸åŒç¼–ç çš„16ä½å€¼ã€‚jsä¸ä¼šå¯¹Unicodeè¿›è¡Œæ ‡å‡†åŒ–è½¬æ¢ï¼Œåƒè¿™æ ·å­—ç¬¦ä¸²é€šè¿‡â€===â€å’Œâ€==â€è¿ç®—ç¬¦æ¯”è¾ƒç»“æœä¹Ÿæ˜¯ä¸ç›¸ç­‰</li>
<li>å¦‚æœä¸¤ä¸ªå¼•ç”¨å€¼æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€æ•°ç»„æˆ–è€…å‡½æ•°ï¼Œåˆ™ç›¸ç­‰ã€‚å¦‚æœæŒ‡å‘ä¸åŒå¯¹è±¡ï¼Œåˆ™å®ƒä»¬ä¸ç›¸ç­‰ï¼Œå°½ç®¡ä¸¤ä¸ªå¯¹è±¡å®Œå…¨ä¸€æ ·çš„å±æ€§ã€‚</li>
</ul>
<p>ç›¸ç­‰è¿ç®—ç¬¦<code>==</code>å’Œæ’ç­‰è¿ç®—ç¬¦ç›¸ä¼¼ï¼Œä½†ç›¸ç­‰è¿ç®—ç¬¦å¹¶ä¸ä¸¥æ ¼ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°ä¸æ˜¯åŒä¸€ç±»å‹ï¼Œé‚£ä¹ˆç›¸ç­‰çš„è¿ç®—ç¬¦ä¼šè¿›è¡Œä¸€äº›ç±»å‹è½¬æ¢ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒ</p>
<ul>
<li>å¦‚æœä¸¤ä¸ªæ“ä½œæ•°çš„ç±»å‹ç›¸åŒï¼Œåˆ™å’Œä¸Šæ–‡æ‰€å±çš„ä¸¥æ ¼ç›¸ç­‰çš„æ¯”è¾ƒè§„åˆ™ä¸€æ ·ã€‚å¦‚æœä¸¥æ ¼ç›¸ç­‰ï¼Œåˆ™æ¯”è¾ƒç»“æœç›¸ç­‰ï¼Œå¦‚æœä¸ä¸¥æ ¼ç›¸ç­‰ï¼Œåˆ™å®ƒä»¬ä¸ç›¸ç­‰</li>
<li>å¦‚æœä¸¤ä¸ªæ“ä½œæ•°ç±»å‹ä¸åŒï¼Œ<code>==</code>ç›¸ç­‰æ“ä½œç¬¦ä¹Ÿå¯èƒ½è®¤ä¸ºä»–ä»¬ç›¸ç­‰ã€‚æ£€æµ‹ç›¸ç­‰ä¼šéµå®ˆä»¥ä¸‹è§„åˆ™å’Œç±»å‹è½¬æ¢å¦‚æœä¸€ä¸ªå€¼æ˜¯nullï¼Œå¦ä¸€ä¸ªæ˜¯undefined,åˆ™ä»–ä»¬ç›¸ç­‰å¦‚æœä¸€ä¸ªå€¼æ˜¯æ•°å­—ï¼Œå¦ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²ï¼Œå…ˆå°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—ï¼Œç„¶åä½¿ç”¨è½¬æ¢åçš„å€¼ï¼Œè¿›è¡Œæ¯”è¾ƒå¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼æ˜¯trueï¼Œåˆ™å°†å…¶è½¬æ¢ä¸º1å†è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªå€¼æ˜¯falseï¼Œåˆ™å°†å…¶è½¬åŒ–ä¸º0ï¼Œåœ¨è¿›è¡Œæ¯”è¾ƒå¦‚æœä¸€ä¸ªå€¼æ˜¯å¯¹è±¡ï¼Œå¦ä¸€ä¸ªå€¼æ˜¯æ•°å­—æˆ–å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šä½¿ç”¨ä¹‹å‰æåˆ°çš„å¯¹è±¡åˆ°æ•°å­—æˆ–å­—ç¬¦ä¸²çš„è½¬æ¢è§„åˆ™å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒã€‚å…¶ä»–çš„ç±»å‹ä¹‹é—´çš„æ¯”è¾ƒå‡ä¸ç›¸ç­‰</li>
</ul>
<p>ä¸¾ä¸ªæ —å­ï¼š<code>&quot;1&quot; == true</code><br>è¿™ä¸ªè¡¨è¾¾å¼ç»“æœæ˜¯trueï¼Œè¡¨æ˜ä¸åŒç±»å‹ä¹‹é—´çš„å€¼æ¯”è¾ƒç»“æœç›¸ç­‰ã€‚å¸ƒå°”å€¼é¦–å…ˆè½¬æ¢ä¸ºæ•°å­—1ï¼Œç„¶åå­—ç¬¦ä¸²1ä¹Ÿè½¬æ¢æˆæ•°å­—1ï¼Œå› ä¸ºä¸¤ä¸ªæ•°å­—ç›¸ç­‰ï¼Œæ‰€ä»¥ç»“æœä¸ºtrue</p>
<h3 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h3><p>æ¯”è¾ƒè¿ç®—ç¬¦æœ‰4ä¸ª</p>
<ul>
<li><code>&lt;</code> å°äº</li>
<li><code>&gt;</code> å¤§äº</li>
<li><code>&lt;=</code> å°äºç­‰äº</li>
<li><code>&gt;=</code> å¤§äºç­‰äº</li>
</ul>
<p>æ¯”è¾ƒè¿ç®—ç¬¦çš„æ“ä½œæ•°å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œç„¶ååªæœ‰å­—ç¬¦ä¸²å’Œæ•°å­—æ‰èƒ½çœŸæ­£çš„æ‰§è¡Œæ¯”è¾ƒæ“ä½œï¼Œä¸æ˜¯è¿™ä¸¤ç§ç±»å‹çš„éƒ½å°†è¿›è¡Œç±»å‹è½¬æ¢ã€‚<br>ç±»å‹è½¬æ¢è§„åˆ™ï¼š</p>
<ul>
<li>å¦‚æœæ“ä½œæ•°ä¸ºå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†æŒ‰ç…§å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢ï¼ˆå…·ä½“å¯ä»¥çœ‹ä¸Šç¯‡ï¼‰</li>
<li>åœ¨å¯¹è±¡è½¬æ¢åˆ°åŸå§‹å€¼åï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°†æŒ‰ç…§å­—æ¯è¡¨é¡ºåºè¿›è¡Œæ¯”è¾ƒï¼ˆå­—æ¯è¡¨æŒ‡çš„unicode 16ä½å­—ç¬¦çš„ç´¢å¼•é¡ºåºï¼‰</li>
<li>å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼åï¼Œå¦‚æœä¸€ä¸ªæ“ä½œæ•°ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä¸¤ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—ä¹‹åè¿›è¡Œæ¯”è¾ƒã€‚<ul>
<li>0å’Œï¼0æ˜¯ç›¸ç­‰çš„</li>
<li>Infinityæ¯”å…¶ä»–ä»»ä½•æ•°å­—éƒ½å¤§ï¼ˆé™¤äº†è‡ªèº«ï¼‰</li>
<li>ï¼Infinityæ¯”å…¶ä»–æ•°å­—éƒ½å°(é™¤äº†è‡ªèº«)</li>
<li>å¦‚æœä¸€ä¸ªæ“ä½œæ•°è½¬æ¢æˆæ•°å­—ä¹‹åæ˜¯NaNï¼Œé‚£ä¹ˆæ¯”è¾ƒæ“ä½œç¬¦æ€»æ˜¯è¿”å›false</li>
</ul>
</li>
</ul>
<p>åœ¨ä¸Šé¢è§„åˆ™ä¸­ï¼Œå­—ç¬¦ä¸²æ¯”è¾ƒéœ€è¦æ³¨æ„ï¼š   </p>
<ul>
<li>å­—ç¬¦ä¸²æ¯”è¾ƒæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œæ‰€æœ‰çš„å¤§å†™asciiå­—ç¬¦éƒ½æ˜¯å°äºå°å†™çš„asciiå­—ç¬¦</li>
<li>å¯¹äºæ•°å­—å’Œå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œåªæœ‰ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œæ‰ä¼šè¿›è¡Œå­—ç¬¦ä¸²æ¯”è¾ƒ</li>
</ul>
<h3 id="inè¿ç®—ç¬¦"><a href="#inè¿ç®—ç¬¦" class="headerlink" title="inè¿ç®—ç¬¦"></a><code>in</code>è¿ç®—ç¬¦</h3><p><code>in</code>è¿ç®—ç¬¦çš„å·¦è¾¹æ€»æ˜¯å¸Œæœ›æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³è¾¹æ“ä½œæ•°æ€»æ˜¯å¸Œæœ›æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœå³è¾¹å¯¹è±¡æ‹¥æœ‰å·¦æ“ä½œå€¼çš„å±æ€§åï¼Œä¼šè¿”å›true</p>
<p>å¯¹è±¡ï¼Œä¼šå€¾å‘æŸ¥æ‰¾å±æ€§å</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var point = &#123; x:1, y:1&#125;;</div><div class="line">&quot;x&quot; in point // ï¼&gt; true, å¯¹è±¡æ‹¥æœ‰åä¸ºâ€œxâ€çš„å±æ€§</div><div class="line">&quot;z&quot; in point // =&gt; false, å¯¹è±¡ä¸å­˜åœ¨åä¸º&quot;z&quot;çš„å±æ€§</div><div class="line">&quot;toString&quot; in point // =&gt; trueï¼Œå¯¹è±¡ç»§æ‰¿äº†é»˜è®¤çš„toString()æ–¹æ³•</div></pre></td></tr></table></figure>
<p>æ•°ç»„ï¼Œä¼šå€¾å‘æŸ¥æ‰¾ç´¢å¼•</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var data = [1,2,3]</div><div class="line">&quot;0&quot; in data // trueï¼Œæ•°ç»„åŒ…å«ç´¢å¼•0çš„å…ƒç´ </div><div class="line">1 in data // trueï¼Œæ•°ç»„åŒ…å«ç´¢å¼•1çš„å…ƒç´ </div><div class="line">3 in data // false æ•°ç»„ä¸åŒ…å«ç´¢å¼•3çš„å…ƒç´ </div></pre></td></tr></table></figure>
<h3 id="instanceof-è¿ç®—ç¬¦"><a href="#instanceof-è¿ç®—ç¬¦" class="headerlink" title="instanceof è¿ç®—ç¬¦"></a><code>instanceof</code> è¿ç®—ç¬¦</h3><p><code>instanceof</code>è¿ç®—ç¬¦å¸Œæœ›å·¦æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå³æ“ä½œæ•°æ ‡è¯†å¯¹è±¡çš„ç±»ï¼Œå¦‚æœå·¦ä¾§çš„å¯¹è±¡æ˜¯å³ä¾§ç±»çš„å®ä¾‹ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var d = new Date();</div><div class="line">d instanceof Date;  // trueï¼Œdæ˜¯ç”±Date()åˆ›å»ºçš„</div><div class="line">d instanceof Object; //  true,æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯Objectå®ä¾‹</div><div class="line">d instanceof Number; // false, dä¸æ˜¯Numberçš„å®ä¾‹</div></pre></td></tr></table></figure>
<h2 id="é€»è¾‘è¡¨è¾¾å¼"><a href="#é€»è¾‘è¡¨è¾¾å¼" class="headerlink" title="é€»è¾‘è¡¨è¾¾å¼"></a>é€»è¾‘è¡¨è¾¾å¼</h2><p>é€»è¾‘è¿ç®—ç¬¦æ˜¯è¿›è¡Œå¸ƒå°”è¿ç®—ä½¿ç”¨çš„ï¼Œä¸»è¦æœ‰</p>
<ul>
<li><code>&amp;&amp;</code> é€»è¾‘ä¸</li>
<li><code>||</code> é€»è¾‘æˆ–</li>
<li><code>!</code> é€»è¾‘é</li>
</ul>
<h3 id="é€»è¾‘ä¸-amp-amp"><a href="#é€»è¾‘ä¸-amp-amp" class="headerlink" title="é€»è¾‘ä¸(&amp;&amp;)"></a>é€»è¾‘ä¸(&amp;&amp;)</h3><p>å½“æ“ä½œæ•°éƒ½æ˜¯å¸ƒå°”å€¼æ—¶ï¼Œ<code>&amp;&amp;</code>å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œå¸ƒå°”ä¸æ“ä½œï¼Œç¬¬ä¸€ä¸ªä¸ç¬¬äºŒä¸ªæ“ä½œæ•°éƒ½æ˜¯trueæ—¶ï¼Œæ‰è¿”å›trueï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯falseï¼Œå°±ä¼šè¿”å›false</p>
<p>å½“æ“ä½œæ•°ä¸éƒ½æ˜¯å¸ƒå°”å€¼æ—¶ï¼Œ<code>&amp;&amp;</code>ä¸ä¸€å®šä¼šè¿”å›å¸ƒå°”å€¼ã€‚</p>
<ul>
<li>é€»è¾‘ä¸è¿ç®—ç¬¦ï¼Œé¦–å…ˆè®¡ç®—å·¦ä¾§çš„å€¼ï¼Œå¦‚æœè®¡ç®—ç»“æœæ˜¯å‡æ¤ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼éƒ½æ˜¯å‡æ¤ï¼Œå› æ­¤ä¼šç®€å•çš„è¿”å›å·¦ä¾§æ“ä½œæ•°çš„å€¼</li>
<li>å¦‚æœå·¦ä¾§å€¼æ˜¯çœŸå€¼ï¼Œé‚£ä¹ˆæ•´ä¸ªè¡¨è¾¾å¼ç»“æœä¾èµ–äºå³ä¾§çš„å€¼ï¼Œå› æ­¤ï¼Œ<code>&amp;&amp;</code>è¿ç®—ç¬¦ç¬¦ä¼šè®¡ç®—å³ä¾§æ“ä½œæ•°çš„å€¼ï¼Œå¹¶ä¸”å°†å…¶è¿”å›ä½œä¸ºæ•´ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var o =&#123; x:1 &#125;;</div><div class="line">var p = null;</div><div class="line">o &amp;&amp; o.x; // =&gt;1 ï¼Œoå¯¹è±¡æ˜¯çœŸå€¼ï¼Œè¿”å›o.x</div><div class="line">p &amp;&amp; p.x; // =&gt; null ï¼Œpæ˜¯å‡å€¼ï¼Œå°†å…¶è¿”å›ï¼Œä¸ä¼šè®¡ç®—p.x</div></pre></td></tr></table></figure>
<p>ä¸Šé¢é‚£ç§è¡Œä¸ºï¼Œè¢«ç§°ä¸º <strong>çŸ­è·¯</strong>,è¿™ä¸€ç‰¹æ€§éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é€‰æ‹©æ€§æ‰§è¡Œä»£ç ã€‚ ä¾‹å¦‚ï¼š<br><code>if ( a == b ) stop();</code> ç­‰ä»·äº <code>( a == b ) &amp;&amp; stop();</code></p>
<h3 id="é€»è¾‘æˆ–"><a href="#é€»è¾‘æˆ–" class="headerlink" title="é€»è¾‘æˆ–(||)"></a>é€»è¾‘æˆ–(||)</h3><p>å½“æ“ä½œæ•°éƒ½æ˜¯å¸ƒå°”å€¼æ—¶ï¼Œ<code>||</code>å¯¹ä¸¤ä¸ªæ“ä½œæ•°ä½œå¸ƒå°”æˆ–è¿ç®—ï¼Œä¸¤ä¸ªæ“ä½œæ•°æœ‰ä¸€ä¸ªä¸ºçœŸï¼Œè¿”å›trueï¼Œä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å‡ï¼Œæ‰ä¼šè¿”å›false</p>
<p>å½“æ“ä½œæ•°ä¸éƒ½æ˜¯å¸ƒå°”å€¼ï¼Œ<code>||</code>ä¸ä¸€å®šè¿”å›å¸ƒå°”å€¼</p>
<ul>
<li>é€»è¾‘æˆ–è¿ç®—ç¬¦ï¼Œé¦–å…ˆè®¡ç®—å·¦ä¾§çš„å€¼ï¼Œå¦‚æœè®¡ç®—ç»“æœæ˜¯çœŸå€¼ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼éƒ½æ˜¯çœŸå€¼ï¼Œå› æ­¤ä¼šè¿”å›è¿™ä¸ªçœŸå€¼</li>
<li>å¦åˆ™å†è®¡ç®—ç¬¬äºŒä¸ªæ“ä½œæ•°çš„å€¼ï¼Œå†è¿”å›è¿™ä¸ªè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœ</li>
</ul>
<p><code>||</code>åŒæ ·æ˜¯éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ä»ä¸€ç»„å¤‡é€‰è¡¨è¾¾å¼ä¸­é€‰å‡ºç¬¬ä¸€ä¸ªçœŸå€¼è¡¨è¾¾å¼ã€‚è¿™ç§åšæ³•ç»å¸¸åœ¨å‡½æ•°ä½“å†…ï¼Œç»™å‚æ•°æä¾›é»˜è®¤å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var max = max_width || preference.max_width || 500;</div></pre></td></tr></table></figure>
<h3 id="é€»è¾‘é"><a href="#é€»è¾‘é" class="headerlink" title="é€»è¾‘é(!)"></a>é€»è¾‘é(!)</h3><p><code>!</code> è¿ç®—ç¬¦æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œæ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ“ä½œæ•°å‰ï¼Œå¯¹æ“ä½œæ•°å¸ƒå°”å€¼è¿›è¡Œæ±‚å</p>
<p><code>!</code>è¿ç®—ç¬¦é¦–å…ˆå°†æ“ä½œæ•°è½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼Œå†è¿›è¡Œæ±‚åï¼Œæœ€ç»ˆåªä¼šè¿”å›trueæˆ–è€…false</p>
<p>ä½œä¸ºä¸€å…ƒè¿ç®—ç¬¦ï¼Œä¼˜å…ˆçº§éå¸¸é«˜ï¼Œå¹¶ä¸”å’Œæ“ä½œæ•°å¯†åˆ‡ç»‘å®šã€‚<br>å¾·æ‘©æ ¹å…¬å¼:    </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">!(p &amp;&amp; q) === !p || !q</div><div class="line">!(p || q) === !p &amp;&amp; !q</div></pre></td></tr></table></figure>
<h2 id="èµ‹å€¼è¡¨è¾¾å¼"><a href="#èµ‹å€¼è¡¨è¾¾å¼" class="headerlink" title="èµ‹å€¼è¡¨è¾¾å¼"></a>èµ‹å€¼è¡¨è¾¾å¼</h2><p>js ä½¿ç”¨<code>=</code>è¿ç®—ç¬¦ç»™å˜é‡æˆ–è€…å±æ€§è¿›è¡Œèµ‹å€¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">i = 0;</div><div class="line">0.x = 1;</div></pre></td></tr></table></figure>
<p>é™¤äº†å¸¸è§„çš„èµ‹å€¼è¿ç®—ç¬¦ï¼Œè¿˜æœ‰ä¸€äº›å¸¦èµ‹å€¼æ“ä½œçš„è¿ç®—ç¬¦<code>+=</code>,<code>-=</code>,<code>*=</code>,<code>&amp;=</code>ç­‰ç­‰<br>åªæœ‰<code>+=</code>å¯ä»¥ç”¨äºæ•°å­—æˆ–å­—ç¬¦ä¸²è¿æ¥ï¼Œå…¶ä»–éƒ½åå‘äºæ•°å€¼æ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">a = 10;</div><div class="line">b = &apos;1&apos;;</div><div class="line">a += 10; // =&gt; 10 + 10 =20</div><div class="line">b += 10; // =&gt; &apos;1&apos;+10 = &quot;110&quot;</div><div class="line">a -= 10; // =&gt; 20 - 10 = 10</div><div class="line">b -= 10; // =&gt; 110 - 10 = 10</div></pre></td></tr></table></figure>
<h2 id="è¡¨è¾¾å¼è®¡ç®—"><a href="#è¡¨è¾¾å¼è®¡ç®—" class="headerlink" title="è¡¨è¾¾å¼è®¡ç®—"></a>è¡¨è¾¾å¼è®¡ç®—</h2><p>jså¯ä»¥é€šè¿‡<code>eval()</code>æ¥åŠ¨æ€åˆ¤æ–­æºä»£ç ä¸­çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æ‰§è¡Œ</p>
<p><code>eval()</code>åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥è¿”å›è¿™ä¸ªå‚æ•°ã€‚å¦‚æœå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šæŠŠå­—ç¬¦ä¸²å½“æˆä»£ç è¿›è¡Œç¼–è¯‘ã€‚<br>å¦‚æœç¼–è¯‘å¤±è´¥ï¼Œåˆ™è¿”å›ä¸€ä¸ªè¯­æ³•é”™è¯¯å¼‚å¸¸ã€‚å¦‚æœç¼–è¯‘æˆåŠŸï¼Œåˆ™ä¼šæ‰§è¡Œè¿™æ®µä»£ç ï¼Œå¹¶ä¸”è¿”å›å­—ç¬¦ä¸²æœ€åä¸€ä¸ªè¡¨è¾¾å¼æˆ–è€…è¯­å¥çš„å€¼ã€‚<br>å¦‚æœæœ€åä¸€ä¸ªè¡¨è¾¾å¼æˆ–è¯­å¥æ²¡æœ‰å€¼ï¼Œåˆ™æœ€ç»ˆè¿”å›undefined</p>
<p><code>eval()</code>ä½¿ç”¨æ¥è°ƒç”¨å®ƒçš„å˜é‡ä½œç”¨åŸŸç¯å¢ƒï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥æ‰¾å˜é‡ä¼šå’Œå±€éƒ¨ä½œç”¨åŸŸä»£ç å®Œå…¨ä¸€æ ·ã€‚</p>
<p>å¦‚æœå°†<code>eval()</code>é‡å‘½åä¸ºå…¶ä»–æ–¹å¼æ¥è°ƒç”¨ï¼Œåˆ™ä½¿ç”¨å…¨å±€å¯¹è±¡ä½œä¸ºä¸Šä¸‹æ–‡ä½œç”¨åŸŸï¼Œå¹¶ä¸”æ— æ³•è¯»ã€å†™ã€å®šä¹‰å±€éƒ¨å˜é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">var geval = eval; // geval æ˜¯è°ƒç”¨å…¨å±€eval</div><div class="line">var x = &quot;global&quot;;</div><div class="line">var y = &quot;global&quot;;</div><div class="line">function f()&#123;</div><div class="line">  var x = &quot;local&quot;;  // å®šä¹‰å±€éƒ¨å˜é‡ xï¼Œå±€éƒ¨ä½œç”¨åŸŸx ï¼ â€œlocalâ€</div><div class="line">  eval(&quot;x+=&apos;changed&apos;;&quot;); //  ç›´æ¥evalæ›´æ”¹å±€éƒ¨å˜é‡xçš„å€¼</div><div class="line">  return x; // è¿”å›æ›´æ”¹åçš„xå€¼</div><div class="line">&#125;</div><div class="line">function g()&#123;</div><div class="line">  var y = &quot;local&quot;;  // å®šä¹‰å±€éƒ¨å˜é‡ yï¼Œå±€éƒ¨ä½œç”¨åŸŸy ï¼ â€œlocalâ€</div><div class="line">  geval(&quot;y+=&apos;changed&apos;;&quot;); // é—´æ¥è°ƒç”¨æ”¹å˜å…¨å±€å˜é‡çš„å€¼</div><div class="line">  return y; // è¿”å›ä¸ºæ›´æ”¹çš„å±€éƒ¨å˜é‡</div><div class="line">&#125;</div><div class="line">console.log(f(),x); // æ›´æ”¹æ¥å±€éƒ¨å˜é‡ï¼Œè¾“å‡º&quot;localchanged global&quot;</div><div class="line">console.log(g(),y); // æ›´æ”¹å…¨å±€å˜é‡ï¼Œè¾“å‡ºâ€œlocal globalchangedâ€</div></pre></td></tr></table></figure>
<h2 id="å…¶ä»–è¿ç®—ç¬¦"><a href="#å…¶ä»–è¿ç®—ç¬¦" class="headerlink" title="å…¶ä»–è¿ç®—ç¬¦"></a>å…¶ä»–è¿ç®—ç¬¦</h2><h3 id="æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰"><a href="#æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ-ï¼‰" class="headerlink" title="æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ?:ï¼‰"></a>æ¡ä»¶è¿ç®—ç¬¦ï¼ˆ?:ï¼‰</h3><p>æ¡ä»¶è¿ç®—ç¬¦æ˜¯å”¯ä¸€ä¸€ä¸ªä¸‰å…ƒè¿ç®—ç¬¦<br><code>(---1---) ? (---2---) : (---3---)</code></p>
<p>ç¬¬ä¸€ä¸ªæ“ä½œæ•°å½“æˆå¸ƒå°”å€¼ï¼Œå¦‚æœæ˜¯çœŸå€¼ï¼Œé‚£ä¹ˆè®¡ç®—ç¬¬äºŒä¸ªæ“ä½œæ•°ï¼Œå¹¶è¿”å›ç»“æœã€‚å¦åˆ™å¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å‡æ¤ï¼Œé‚£ä¹ˆè®¡ç®—ç¬¬ä¸‰ä¸ªæ•°ï¼Œè¿”å›è®¡ç®—ç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">x &gt; 0 ? x : -x // æ±‚xçš„ç»å¯¹å€¼</div></pre></td></tr></table></figure>
<h3 id="typeofè¿ç®—ç¬¦"><a href="#typeofè¿ç®—ç¬¦" class="headerlink" title="typeofè¿ç®—ç¬¦"></a>typeofè¿ç®—ç¬¦</h3><h3 id="deleteè¿ç®—ç¬¦"><a href="#deleteè¿ç®—ç¬¦" class="headerlink" title="deleteè¿ç®—ç¬¦"></a>deleteè¿ç®—ç¬¦</h3><p>deleteè¿ç®—ç¬¦ï¼Œç”¨æ¥åˆ é™¤å¯¹è±¡å±æ€§æˆ–è€…æ•°ç»„å…ƒç´ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var o = &#123; x:1, y:2&#125;;</div><div class="line">delete o.x; // åˆ é™¤ä¸€ä¸ªå±æ€§</div><div class="line">&quot;x&quot; in o; // falseï¼Œoå¯¹è±¡ä¸­ä¸å­˜åœ¨å±æ€§x</div><div class="line"></div><div class="line">var a = [1,23,4];</div><div class="line">delete a[2]; //åˆ é™¤ç¬¬ä¸‰ä¸ªå…ƒç´ </div><div class="line">2 in a ; // false, ç´¢å¼•2çš„å…ƒç´ åœ¨æ•°ç»„ä¸­å·²ç»ä¸å­˜åœ¨</div></pre></td></tr></table></figure>
<p>deleteåˆ é™¤æˆåŠŸä¼šè¿”å›trueã€‚ç„¶åä¸æ˜¯æ‰€æœ‰å±æ€§éƒ½å¯åˆ é™¤çš„</p>
<ul>
<li>ä¸€äº›å†…ç½®æ ¸å¿ƒå’Œå®¢æˆ·ç«¯å±æ€§æ˜¯ä¸èƒ½åˆ é™¤çš„</li>
<li>ä½¿ç”¨varè¯­å¥ç”Ÿå£°æ˜çš„å˜é‡ä¸èƒ½åˆ é™¤</li>
<li>é€šè¿‡functionå®šä¹‰çš„å‡½æ•°å’Œå‡½æ•°å‚æ•°ä¸èƒ½åˆ é™¤ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var 0 = &#123; x:1, y:2&#125;;</div><div class="line">delete o.x; // true, åˆ é™¤å¯¹è±¡å±æ€§æˆåŠŸ</div><div class="line">typeof o.x; // undefined ï¼Œ å±æ€§ä¸å­˜åœ¨</div><div class="line">delete o.x; // true, åˆ é™¤ä¸å­˜åœ¨çš„å±æ€§ï¼Œè¿”å›true</div><div class="line">delete o; // false ï¼Œä¸èƒ½åˆ é™¤varå£°æ˜å˜é‡</div><div class="line"></div><div class="line">delete 1; // true, å‚æ•°ä¸æ˜¯ä¸€ä¸ªå·¦å€¼ï¼Œè¿”å›true</div><div class="line">this.x = 1; // å®šä¹‰å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±æ€§</div><div class="line">delete x; // è¯•å›¾åˆ é™¤å…¨å±€å˜é‡çš„å±æ€§ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿”å›true</div><div class="line">x; // è¿è¡Œæ—¶é”™è¯¯ï¼Œæ²¡æœ‰å®šä¹‰x</div></pre></td></tr></table></figure>
<h3 id="void-è¿ç®—ç¬¦"><a href="#void-è¿ç®—ç¬¦" class="headerlink" title="void è¿ç®—ç¬¦"></a>void è¿ç®—ç¬¦</h3><p>void æ˜¯ä¸€å…ƒè¿ç®—ç¬¦ï¼Œæ“ä½œæ•°ç…§å¸¸è®¡ç®—ï¼Œä½†æ˜¯å¿½ç•¥è®¡ç®—ç»“æœå¹¶ä¸”è¿”å›undefined</p>
<p>è¿™ä¸ªæ“ä½œç¬¦ç»å¸¸ç”¨ä½œå®¢æˆ·ç«¯URLï¼<code>javascript:URL</code>,é€šè¿‡ä½¿ç”¨voidåˆ™è®©æµè§ˆå™¨ä¸å¿…æ˜¾ç¤ºè¿™ä¸ªè¡¨è¾¾å¼è®¡ç®—ç»“æœ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a href=&quot;javascript:void window.open();&quot;&gt;æ‰“å¼€ä¸€ä¸ªæ–°çª—å£&lt;/a&gt;</div></pre></td></tr></table></figure>
<h3 id="é€—å·è¿ç®—ç¬¦"><a href="#é€—å·è¿ç®—ç¬¦" class="headerlink" title="é€—å·è¿ç®—ç¬¦"></a>é€—å·è¿ç®—ç¬¦</h3><p>é€—å·è¿ç®—ç¬¦ï¼Œé¦–å…ˆè®¡ç®—å·¦æ“ä½œæ•°ï¼Œç„¶åè®¡ç®—å³æ“ä½œæ•°ï¼Œæœ€åè¿”å›å³æ“ä½œæ•°çš„å€¼ã€‚</p>
<p>æ€»ä¼šè®¡ç®—å·¦ä¾§çš„è¡¨è¾¾å¼ï¼Œä½†è®¡ç®—ç»“æœå¿½ç•¥æ‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å·¦ä¾§è¡¨è¾¾å¼æœ‰å‰¯ä½œç”¨æ—¶ï¼Œï¼Œæ‰ä¼šä½¿ç”¨é€—å·è¡¨è¾¾å¼è®©ä»£ç æ›´é€šé¡ºã€‚</p>
<p>ç»å¸¸åœ¨forå¾ªç¯ä¸­ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for(var i=0,j=10;i&lt;j;i++,j--)&#123;</div><div class="line">  console.log(i+j);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ–‡ï¼zhaolionï¼ˆç®€ä¹¦ä½œè€…ï¼‰<br>åŸæ–‡é“¾æ¥ï¼š<a href="http://www.jianshu.com/p/ff845f40f036" target="_blank" rel="external">http://www.jianshu.com/p/ff845f40f036</a><br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œå¹¶æ ‡æ³¨â€œç®€ä¹¦ä½œè€…â€ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;ç¨‹åºä¸­æœ€ç®€å•çš„è¡¨è¾¾å¼å°±æ˜¯ï¼Œç¨‹åºä¸­çš„å¸¸é‡&lt;/li&gt;
&lt;li&gt;å˜é‡åä¹Ÿæ˜¯ä¸€ç§ç®€å•çš„è¡¨è¾¾å¼&lt;/li&gt;
&lt;li&gt;å¤æ‚çš„è¡¨è¾¾å¼æ˜¯ç”±ç®€å•çš„è¡¨è¾¾å¼ç»„æˆçš„&lt;/li&gt;
&lt;li&gt;å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼æ˜¯ç”±å‡½æ•°å¯¹è±¡çš„è¡¨è¾¾å¼å’Œ0ä¸ªæˆ–å¤šä¸ªå‚æ•°è¡¨è¾¾å¼æ„æˆ&lt;/li&gt;
&lt;li&gt;å¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦æ¥å°†ç®€å•çš„è¡¨è¾¾å¼æ¥ç»„åˆæˆå¤æ‚çš„è¡¨è¾¾å¼
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Angular-ui-router</title>
    <link href="http://xuhongbo.com/2016/12/14/%E6%A1%86%E6%9E%B6/angular/ui-router/"/>
    <id>http://xuhongbo.com/2016/12/14/æ¡†æ¶/angular/ui-router/</id>
    <published>2016-12-14T05:57:30.000Z</published>
    <updated>2017-03-15T09:16:44.772Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸ºä»€ä¹ˆç”¨-Route"><a href="#ä¸ºä»€ä¹ˆç”¨-Route" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨ Route"></a>ä¸ºä»€ä¹ˆç”¨ Route</h2><ul>
<li>AJAX è¯·æ±‚ä¸ä¼šç•™ä¸‹ History è®°å½•</li>
<li>ç”¨æˆ·æ— æ³•ç›´æ¥é€šè¿‡ URL è¿›å…¥åº”ç”¨ä¸­çš„æŒ‡å®šé¡µé¢(ä¿å­˜ä¹¦ç­¾ã€é“¾æ¥åˆ†äº«ç»™æœ‹å‹)</li>
<li><p>AJAX å¯¹ SEO æ˜¯ä¸ªç¾éš¾</p>
<a id="more"></a>
<h2 id="å‰ç«¯è·¯ç”±çš„åŸºæœ¬åŸç†"><a href="#å‰ç«¯è·¯ç”±çš„åŸºæœ¬åŸç†" class="headerlink" title="å‰ç«¯è·¯ç”±çš„åŸºæœ¬åŸç†"></a>å‰ç«¯è·¯ç”±çš„åŸºæœ¬åŸç†</h2></li>
<li><p>å“ˆå¸Œ #</p>
</li>
<li><p>HTML5 ä¸­æ–°çš„ history API</p>
</li>
<li><p>è·¯ç”±çš„æ ¸å¿ƒæ˜¯ç»™åº”ç”¨å®šä¹‰ â€œçŠ¶æ€â€</p>
</li>
<li><p>ä½¿ç”¨è·¯ç”±æœºåˆ¶ä¼šå½±å“åˆ°åº”ç”¨çš„æ•´ä½“ç¼–ç æ–¹å¼(éœ€é¢„å…ˆå®šä¹‰å¥½çŠ¶æ€)</p>
</li>
<li><p>è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ä¸ â€œä¼˜é›…é™çº§â€</p>
<p>â€‹</p>
<p>â€‹</p>
</li>
</ul>
<p>1.å¤šè§†å›¾ç”¨@ï¼ŒåµŒå¥—ç”¨parent.childè¿™ç§å­è·¯ç”±</p>
<blockquote>
<p>è¦åˆ‡æ¢çš„è§†å›¾(main)ç”¨ui-view,å§‹ç»ˆä¸ä¼šå˜æˆå…¶ä»–å†…å®¹çš„ä¸éœ€è¦è·¯ç”±</p>
</blockquote>
<p>2.è¦åˆ‡æ¢çš„è·¯ç”±ui-srefç”¨å­è·¯ç”±</p>
<p>1.æ–‡ä»¶ç»“æ„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">D:.douban</div><div class="line">|</div><div class="line">â”‚  index.html                       </div><div class="line">â”‚                                   </div><div class="line">â”œâ”€css                               </div><div class="line">â”‚      bootstrap.css                </div><div class="line">â”‚      index.css                    </div><div class="line">â”‚                                   </div><div class="line">â”œâ”€js                                </div><div class="line">â”‚      angular-1.3.0.js             </div><div class="line">â”‚      angular-animate.js           </div><div class="line">â”‚      angular-ui-router.js         </div><div class="line">â”‚      app.js                       </div><div class="line">â”‚      ui-bootstrap-tpls-0.11.0.js  </div><div class="line">â”‚                                   </div><div class="line">â””â”€src                               </div><div class="line">        addUser.html                </div><div class="line">        bottomBar.html              </div><div class="line">        home.html                   </div><div class="line">        index.html                  </div><div class="line">        userInfo.html</div></pre></td></tr></table></figure>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> &gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/bootstrap.css"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/angular-1.3.0.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/angular-animate.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/angular-ui-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/app.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	</div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined">.active &#123; color: red; font-weight: bold; &#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"helloworld"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ui-view</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>app.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myApp = angular.module(<span class="string">'helloworld'</span>, [<span class="string">'ui.router'</span>]);</div><div class="line"><span class="comment">// è·¯ç”±æœºåˆ¶</span></div><div class="line"><span class="comment">//è¿™ä¸€è¡Œå£°æ˜äº†æŠŠ$stateProviderå’Œ$urlRouterProviderè·¯ç”±å¼•æ“ä½œä¸ºå‡½æ•°å‚æ•°ä¼ å…¥ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯æ˜“ä¸ºè¿™ä¸ªåº”ç”¨ç¨‹åºé…ç½®è·¯ç”±äº†</span></div><div class="line">myApp.config(<span class="function"><span class="keyword">function</span>(<span class="params">$stateProvider, $urlRouterProvider</span>) </span>&#123;</div><div class="line">  <span class="comment">//ä¸‹é¢ä¸€è¡Œçš„æ„æ€æ˜¯ï¼šå¦‚æœæ²¡æœ‰è·¯ç”±å¼•æ“èƒ½åŒ¹é…å½“å‰çš„å¯¼èˆªçŠ¶æ€ï¼Œé‚£å®ƒå°±ä¼šé»˜è®¤å°†è·¯å¾„è·¯ç”±è‡³PageTab.htmlï¼Œè¿™ä¸ªé¡µé¢å°±æ˜¯çŠ¶æ€åç§°è¢«å£°æ˜çš„åœ°æ–¹ã€‚åªè¦ç†è§£äº†è¿™ä¸ªï¼Œé‚£ä¹ˆå®ƒå°±åƒswitch caseè¯­å¥ä¸­çš„defaulté€‰é¡¹</span></div><div class="line">  $urlRouterProvider.otherwise(<span class="string">'/index'</span>);</div><div class="line">  $stateProvider</div><div class="line">    .state(<span class="string">'index'</span>, &#123;</div><div class="line">      <span class="attr">url</span>: <span class="string">'/index'</span>,</div><div class="line"><span class="comment">// view ç”¨åœ¨è¯¥çŠ¶æ€ä¸‹æœ‰å¤šä¸ª ui-view çš„æƒ…å†µï¼Œå¯ä»¥å¯¹ä¸åŒçš„ ui-view ä½¿ç”¨ç‰¹å®šçš„ template, controller, resolve data</span></div><div class="line"><span class="comment">// ç»å¯¹ view ä½¿ç”¨ '@' ç¬¦å·æ¥åŒºåˆ«ï¼Œæ¯”å¦‚ 'foo@bar' è¡¨æ˜åä¸º 'foo' çš„ ui-view ä½¿ç”¨äº† 'bar' çŠ¶æ€çš„æ¨¡æ¿(template)ï¼Œç›¸å¯¹ view åˆ™æ— </span></div><div class="line">      views: &#123;</div><div class="line">        <span class="comment">//æ— åview</span></div><div class="line">        <span class="string">''</span>: &#123;</div><div class="line">         <span class="comment">//é…ç½®templateUrlå±æ€§ï¼Œæ¥åŠ è½½æŒ‡å®šä½ç½®çš„æ¨¡æ¿ï¼Œè¿™æ˜¯è®¾ç½®æ¨¡æ¿çš„å¸¸ç”¨æ–¹æ³•</span></div><div class="line">          templateUrl: <span class="string">'src/index.html'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="comment">//mainåœ¨indexæ¨¡å—ä¸­</span></div><div class="line">        <span class="string">'main@index'</span>: &#123;</div><div class="line">          <span class="attr">templateUrl</span>: <span class="string">'src/home.html'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="string">'tabBar@index'</span>: &#123;</div><div class="line">          <span class="attr">templateUrl</span>: <span class="string">'src/bottomBar.html'</span></div><div class="line">          <span class="comment">//åœ¨ä¸‹é¢ä¹Ÿå¯ä»¥ç›´æ¥åŠ å‚æ•°</span></div><div class="line">          <span class="comment">//controller:'è·¯ç”±åˆ°çš„é¡µé¢çš„æ§åˆ¶å™¨åç§°'</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  <span class="comment">//index.userInfoè¡¨ç¤ºè·¯ç”±ç»“æ„  index/userInfo</span></div><div class="line">    .state(<span class="string">'index.userInfo'</span>, &#123;</div><div class="line">      <span class="attr">url</span>: <span class="string">'/userInfo'</span>,</div><div class="line">      <span class="attr">views</span>: &#123;</div><div class="line">        <span class="comment">//æ›¿æ¢ä¹‹å‰å ä½çš„home.html æ›¿æ¢æˆuserInfo.html</span></div><div class="line">        <span class="string">'main@index'</span>: &#123;</div><div class="line">          <span class="attr">templateUrl</span>: <span class="string">'src/userInfo.html'</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  <span class="comment">//index.userInfo.addUserè¡¨ç¤ºè·¯ç”±ç»“æ„  index/userInfo/addUser</span></div><div class="line">    .state(<span class="string">'index.userInfo.addUser'</span>, &#123;</div><div class="line">        <span class="attr">url</span>: <span class="string">'/addUser'</span>,</div><div class="line">        <span class="attr">templateUrl</span>: <span class="string">'src/addUser.html'</span></div><div class="line">    &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>srcç›®å½•</p>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">ui-view</span>=<span class="string">"main"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">ui-view</span>=<span class="string">"tabBar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>home.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"jumbotron text-center"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">        é¦–é¡µçš„å½¢å¼ä¸€èˆ¬æ¯”è¾ƒ<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text-danger"</span>&gt;</span>çµæ´»<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ï¼Œè€Œä¸”å¯èƒ½éšæ—¶å‘ç”Ÿå˜åŒ–ã€‚</div><div class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>bottomBar.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-inverse"</span> <span class="attr">role</span>=<span class="string">"navigation"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"nav navbar-nav"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">ui-sref</span>=<span class="string">"index"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">ui-sref</span>=<span class="string">"index.userInfo"</span>&gt;</span>ç”¨æˆ·ç®¡ç†<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        </div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div></pre></td></tr></table></figure>
<p>userInfo.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-3"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list-group"</span>&gt;</span></div><div class="line">             //å¯¼èˆª</div><div class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">ui-sref</span>=<span class="string">"index.userInfo.addUser"</span> <span class="attr">class</span>=<span class="string">"list-group-item"</span>&gt;</span>adduser<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">                    </div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-9"</span>&gt;</span></div><div class="line">      //è§†å›¾</div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">ui-view</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="ui-sref-ä¼ å‚"><a href="#ui-sref-ä¼ å‚" class="headerlink" title="ui-sref ä¼ å‚"></a>ui-sref ä¼ å‚</h3><h5 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"phones"</span>&gt;</span></div><div class="line">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"thumbnail phone-list-item"</span> <span class="attr">ng-repeat</span>=<span class="string">"phone in phone_list"</span>&gt;</span></div><div class="line">           //è¦ä¼ çš„å‚æ•°</div><div class="line">           <span class="tag">&lt;<span class="name">a</span> <span class="attr">ui-sref</span>=<span class="string">"detail(&#123;id:phone.id&#125;)"</span> <span class="attr">class</span>=<span class="string">"thumb"</span>&gt;</span></div><div class="line">             <span class="tag">&lt;<span class="name">img</span> <span class="attr">ng-src</span>=<span class="string">"&#123;&#123; phone.imageUrl &#125;&#125;"</span> <span class="attr">alt</span>=<span class="string">"&#123;&#123; phone.id &#125;&#125;"</span> /&gt;</span></div><div class="line">           <span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">a</span> <span class="attr">ui-sref</span>=<span class="string">"detail(&#123;id:phone.id&#125;)"</span>&gt;</span>&#123;&#123; phone.name &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">           <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; phone.snippet &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">         <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'detail'</span>,&#123;</div><div class="line">	<span class="attr">url</span>:<span class="string">'/detail/:id'</span>,<span class="comment">//åé¢æ˜¯è¿™ç§å½¢å¼çš„å‚æ•°http://127.0.0.1:3333/#/detail/motorola-xoom  æŠŠå‚æ•°å†™åœ¨è·¯å¾„é‡Œ</span></div><div class="line">	templateUrl:<span class="string">'app/detail/detail.html'</span>,</div><div class="line">	<span class="attr">contorller</span>: <span class="string">'detailListController'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h5 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">.controller(<span class="string">'detailListController'</span>, [</div><div class="line">		<span class="string">'$scope'</span>,</div><div class="line">		<span class="string">'$http'</span>,</div><div class="line">		<span class="string">'$stateParams'</span>,<span class="comment">//æ‰¿è½½ä¸Šä¸€çº§ä¼ è¿‡æ¥çš„å‚æ•°</span></div><div class="line">		<span class="function"><span class="keyword">function</span>(<span class="params">$scope, $http,$stateParams</span>) </span>&#123;</div><div class="line">			<span class="built_in">console</span>.log($stateParams)</div><div class="line">		&#125;</div><div class="line">	])</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¸ºä»€ä¹ˆç”¨-Route&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆç”¨-Route&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆç”¨ Route&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆç”¨ Route&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;AJAX è¯·æ±‚ä¸ä¼šç•™ä¸‹ History è®°å½•&lt;/li&gt;
&lt;li&gt;ç”¨æˆ·æ— æ³•ç›´æ¥é€šè¿‡ URL è¿›å…¥åº”ç”¨ä¸­çš„æŒ‡å®šé¡µé¢(ä¿å­˜ä¹¦ç­¾ã€é“¾æ¥åˆ†äº«ç»™æœ‹å‹)&lt;/li&gt;
&lt;li&gt;&lt;p&gt;AJAX å¯¹ SEO æ˜¯ä¸ªç¾éš¾&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æ·±å…¥ç†è§£J avaScript ç³»åˆ—ï¼ˆç»“å±€ç¯‡ï¼‰</title>
    <link href="http://xuhongbo.com/2016/11/12/JavaScript/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3javascript/51%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3J%20avaScript%20%E7%B3%BB%E5%88%97%EF%BC%88%E7%BB%93%E5%B1%80%E7%AF%87%EF%BC%89/"/>
    <id>http://xuhongbo.com/2016/11/12/JavaScript/æ·±å…¥ç†è§£javascript/51æ·±å…¥ç†è§£J avaScript ç³»åˆ—ï¼ˆç»“å±€ç¯‡ï¼‰/</id>
    <published>2016-11-12T04:02:02.000Z</published>
    <updated>2017-03-02T14:12:17.023Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å‡ ä¸ªæœˆå¿™å¾—å®åœ¨æ˜¯ä¸å¯å¼€äº¤ï¼Œç»ˆäºæŠŠã€Šæ·±å…¥ç†è§£ JavaScript ç³»åˆ—ã€‹çš„æœ€åä¸¤ç¯‡â€œè¡¥å…¨â€äº†ï¼Œæ‰€è°“çš„å…¨æ˜¯ä¸å‡†ç¡®çš„ï¼Œå› ä¸ºå¾ˆå¤šå†…å®¹éƒ½æ²¡æœ‰å†™å‘¢ï¼Œæ¯”å¦‚é«˜æ€§èƒ½ã€Ajax å®‰å…¨ã€DOM è¯¦è§£ã€JavaScript æ¶æ„ç­‰ç­‰ã€‚ä½†å› ä¸ºç»å†æ‰€é™ï¼ŒåŠ ä¸Šå¤§å”å¸Œæœ›æ¥ä¸‹æ¥å†™ç‚¹å…¶å®ƒä¸œè¥¿ï¼Œæ‰€ä»¥æ­¤ç¯‡æ–‡å­—å°±æš‚ä¸”å½“å‰å®Œç»“ç¯‡çš„æ€»ç»“å§ï¼Œä»¥åæœ‰æ—¶é—´çš„è¯ï¼Œå¯ä»¥ç»§ç»­åŠ ä¸Šä¸€äº›æœªæ¶‰åŠçš„ä¸“é¢˜å†…å®¹ã€‚<br><a id="more"></a></p>
<h2 id="ç½‘ç»œæ–‡ç« æ¥æº"><a href="#ç½‘ç»œæ–‡ç« æ¥æº" class="headerlink" title="ç½‘ç»œæ–‡ç« æ¥æº"></a>ç½‘ç»œæ–‡ç« æ¥æº</h2><p>æœ¬ç³»åˆ—æ–‡ç« å‚è€ƒäº†å¤§é‡çš„äº’è”ç½‘ç½‘ç«™ï¼Œåœ¨æ­¤å‘å„ä½ç½‘ç«™æ‹¥æœ‰è€…ã€åšä¸»ã€æåˆ°çš„ä»¥åŠæœªæåˆ°çš„ä½œè€…ä»¬è¯´ä¸€å£°ï¼šå¤šè°¢æ„Ÿè°¢äº†ã€‚</p>
<p>æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦å‚è€ƒäº†å¦‚ä¸‹ç«™ç‚¹ï¼š</p>
<p>äº”å¤§åŸåˆ™ï¼š<a href="http://freshbrewedcode.com/derekgreer" target="_blank" rel="external">http://freshbrewedcode.com/derekgreer</a></p>
<p>ECMAScript262 ç³»åˆ—ï¼š<a href="http://dmitrysoshnikov.com/" target="_blank" rel="external">http://dmitrysoshnikov.com/</a></p>
<p>DOM ç³»åˆ—æ–‡ç« ï¼š<a href="http://net.tutsplus.com/" target="_blank" rel="external">http://net.tutsplus.com</a></p>
<p>è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« å‚è€ƒå¦‚ä¸‹ä¸‰ä¸ªç½‘ç«™ï¼š</p>
<p><a href="http://www.addyosmani.com/resources/essentialjsdesignpatterns/book/" target="_blank" rel="external">http://www.addyosmani.com/resources/essentialjsdesignpatterns/book/</a></p>
<p><a href="http://shichuan.github.com/javascript-patterns/" target="_blank" rel="external">http://shichuan.github.com/javascript-patterns/</a></p>
<p><a href="https://github.com/tcorral/Design-Patterns-in-Javascript/" target="_blank" rel="external">https://github.com/tcorral/Design-Patterns-in-Javascript/</a></p>
<p>å…¶å®ƒæ–‡ç« ï¼Œæ€»ç»“è‡ªè‡ªå·±çš„æ”¶è—ã€å¿ƒå¾—ï¼Œç»“åˆäº†äº’è”ç½‘ä¸Šçš„å„ä½å¤§ç‰›çš„åšå®¢æ€»ç»“æ•´ç†è€Œæˆï¼Œå› ä¸ºå‚è€ƒåœ°å€å¤ªå¤šï¼Œæ— æ³•ä¸€ä¸€åˆ—å‡ºï¼Œå¦‚æœå¿˜è®°äº†å„ä½å„ç§çš„ç‰ˆæƒå£°æ˜ï¼Œè¯·åŠæ—¶å‘ŠçŸ¥ï¼Œä»¥ä¾¿åŠæ—¶å¤„ç†ï¼Œå¤šè°¢ï¼</p>
<h2 id="å‚è€ƒä¹¦ç±"><a href="#å‚è€ƒä¹¦ç±" class="headerlink" title="å‚è€ƒä¹¦ç±"></a>å‚è€ƒä¹¦ç±</h2><p>è¿™é‡Œåˆ—å‡ºçš„ä¹¦ç±æ˜¯å¤§å”æ›¾ç»è¯»è¿‡çš„ï¼Œä¹Ÿæ˜¯åœ¨æ•´ç†åšæ–‡çš„æ—¶å€™ç»å¸¸å‚è€ƒçš„ä¹¦ç±ï¼Œæ¨èç»™å¤§å®¶é˜…è¯»ã€‚</p>
<h3 id="åˆçº§è¯»ç‰©"><a href="#åˆçº§è¯»ç‰©" class="headerlink" title="åˆçº§è¯»ç‰©"></a>åˆçº§è¯»ç‰©</h3><p>ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹ï¼šä¸€æœ¬éå¸¸å®Œæ•´çš„ç»å…¸å…¥é—¨ä¹¦ç±ï¼Œè¢«èª‰ä¸º JavaScript åœ£ç»ä¹‹ä¸€ï¼Œè¯¦è§£çš„éå¸¸è¯¦ç»†ï¼Œæœ€æ–°ç‰ˆç¬¬ä¸‰ç‰ˆå·²ç»å‘å¸ƒäº†ï¼Œå»ºè®®è´­ä¹°ã€‚</p>
<h3 id="ä¸­çº§è¯»ç‰©"><a href="#ä¸­çº§è¯»ç‰©" class="headerlink" title="ä¸­çº§è¯»ç‰©"></a>ä¸­çº§è¯»ç‰©</h3><p>ã€ŠJavaScript æƒå¨æŒ‡å—ã€‹ï¼šå¦å¤–ä¸€æœ¬ JavaScript åœ£ç»ï¼Œè®²è§£çš„ä¹Ÿéå¸¸è¯¦ç»†ï¼Œå±äºä¸­çº§è¯»ç‰©ï¼Œå»ºè®®è´­ä¹°ã€‚</p>
<p>ã€ŠJavaScript.The.Good.Partsã€‹ï¼šYahoo å¤§ç‰›ï¼ŒJavaScript ç²¾ç¥é¢†è¢– Douglas Crockford çš„å¤§ä½œï¼Œè™½ç„¶æ‰ 100 å¤šé¡µï¼Œä½†æ˜¯å­—å­—ç ç‘å•Šï¼å¼ºçƒˆå»ºè®®é˜…è¯»ã€‚</p>
<p>ã€Šé«˜æ€§èƒ½ JavaScriptã€‹ï¼šã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹ä½œè€… Nicholas C. Zakas çš„åˆä¸€å¤§ä½œã€‚</p>
<p>ã€ŠEloquent JavaScriptã€‹ï¼šè¿™æœ¬ä¹¦æ‰ 200 å¤šé¡µï¼Œéå¸¸çŸ­å°ï¼Œä½†æ˜¯æ”¹å˜äº†æˆ‘å†™ä½œçš„ä¹ æƒ¯ï¼Œæœ¬ä¹¦é€šè¿‡å‡ ä¸ªéå¸¸ç»å…¸çš„ä¾‹å­ï¼ˆè‰¾ç±³ä¸½å§¨å¦ˆçš„çŒ«ã€æ‚²æƒ¨çš„éšå£«ã€æ¨¡æ‹Ÿç”Ÿæ€åœˆã€æ¨ç®±å­æ¸¸æˆç­‰ç­‰ï¼‰æ¥ä»‹ç» JavaScript æ–¹æ–¹é¢é¢çš„çŸ¥è¯†å’Œåº”ç”¨æ–¹æ³•ï¼Œéå¸¸å€¼å¾—ä¸€è¯»ï¼ŒåŒæ—¶è¿™æœ¬ä¹¦çš„ä¸­æ–‡ç‰ˆä¹Ÿæ˜¯å¤§å”ç¿»è¯‘çš„ï¼Œç‚¹å‡»å±å¹•å³ä¸Šè§’å¯ä»¥è®¢è´­ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒã€‚</p>
<h3 id="é«˜çº§è¯»ç‰©"><a href="#é«˜çº§è¯»ç‰©" class="headerlink" title="é«˜çº§è¯»ç‰©"></a>é«˜çº§è¯»ç‰©</h3><p>ã€ŠJavaScript Patterns ã€‹ï¼šä¹¦ä¸­ä»‹ç»åˆ°äº†å„ç§ç»å…¸çš„æ¨¡å¼ï¼Œå¦‚æ„é€ å‡½æ•°ã€å•ä¾‹ã€å·¥å‚ç­‰ç­‰ï¼Œå€¼å¾—å­¦ä¹ ã€‚</p>
<p>ã€ŠPro.JavaScript.Design.Patternsã€‹ï¼šApress å‡ºç‰ˆç¤¾è®²è§£ JavaScript è®¾è®¡æ¨¡å¼çš„ä¹¦ï¼Œéå¸¸ä¸é”™ã€‚</p>
<p>ã€ŠDeveloping JavaScript Web Applicationsã€‹ï¼šæ„å»ºå¯Œåº”ç”¨çš„å¥½ä¹¦ï¼Œé’ˆå¯¹ MVC æ¨¡å¼æœ‰è¾ƒä¸ºæ·±å…¥çš„è®²è§£ï¼ŒåŒæ—¶ä¹Ÿå¯¹ä¸€äº›æµç¨‹çš„åº“è¿›è¡Œäº†è®²è§£ã€‚</p>
<p>ã€ŠDeveloping Large Web Applicationsã€‹ï¼šå°†è¿™æœ¬ä¹¦å½’ç»“åœ¨è¿™é‡Œï¼Œè²Œä¼¼æœ‰ç‚¹ä¸å¦¥ï¼Œå› ä¸ºè¿™é‡Œä¸ä»…æœ‰ JavaScript æ–¹é¢çš„ä»‹ç»ï¼Œè¿˜æœ‰ CSSã€HTML æ–¹é¢çš„ä»‹ç»ï¼Œä½†æ˜¯ä»‹ç»çš„å†…å®¹å´éƒ½éå¸¸ä¸é”™ï¼ŒçœŸæ­£è€ƒè™‘åˆ°äº†ä¸€ä¸ªå¤§å‹çš„ Web ç¨‹åºä¸‹ï¼Œå¦‚ä½•è¿›è¡Œ JavaScript æ¶æ„è®¾è®¡ï¼Œå€¼å¾—ä¸€è¯»ã€‚</p>
<h3 id="å…¶å®ƒå‚è€ƒä¹¦ç±"><a href="#å…¶å®ƒå‚è€ƒä¹¦ç±" class="headerlink" title="å…¶å®ƒå‚è€ƒä¹¦ç±"></a>å…¶å®ƒå‚è€ƒä¹¦ç±</h3><p>ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹ï¼šåšæ–‡é‡Œå…³äºè®¾è®¡æ¨¡å¼çš„æ–‡ç« ï¼Œæœ‰äº›æ€»ç»“æ€§çš„æ–‡å­—æ¥è‡ªäºæ­¤ã€‚</p>
<p>ã€Šè®¾è®¡æ¨¡å¼â€”â€”å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹ï¼šåšæ–‡é‡Œå…³äºè®¾è®¡æ¨¡å¼çš„æ–‡ç« ï¼Œæœ‰äº›ä»‹ç»æ€§å’Œæ€»ç»“æ€§çš„æ–‡ç« æ¥è‡ªäºæ­¤ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨å†™æ­¤ç³»åˆ—æ–‡ç« æœŸé—´ï¼Œå¤§å”ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šå¾ˆå¤šå†…å®¹ã€‚åŒæ—¶ä¸ºäº†ä¸è¯¯äººå­å¼Ÿï¼Œå¤§å”å‚è€ƒäº†å¾ˆå¤šå¾ˆå¤šæ–‡ç« ï¼ŒåŒæ—¶ä¹Ÿé˜…è¯»äº†é‚£ä¹ˆå¤šä¹¦ç±ï¼Œä½†åšå®¢é‡Œçš„æ–‡ç« ï¼Œå¯èƒ½ä¾ç„¶æœ‰å¾ˆå¤šé”™è¯¯ï¼Œå¸Œæœ›å„ä½å¦‚æœå‘ç°é”™è¯¯çš„è¯ï¼Œè¯·åŠæ—¶å‘ŠçŸ¥ï¼Œä»¥ä¾¿åŠæ—¶ä¿®æ­£è€Œä¸å†ç»§ç»­è¯¯å¯¼å…¶å®ƒäººã€‚</p>
<p>åŒæ—¶ï¼Œå¤§å®¶åœ¨é˜…è¯»è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»»ä½•é—®é¢˜éƒ½å¯ä»¥åœ¨ç›¸åº”çš„æ–‡ç« é‡Œç•™è¨€ï¼Œå¤§å”å°†åœ¨ä¸è€½è¯¯å·¥ä½œçš„æƒ…å†µä¸‹å°½åŠ›å›å¤ã€‚</p>
<h2 id="åŒæ­¥ä¸æ¨è"><a href="#åŒæ­¥ä¸æ¨è" class="headerlink" title="åŒæ­¥ä¸æ¨è"></a>åŒæ­¥ä¸æ¨è</h2><p>æ·±å…¥ç†è§£ JavaScript ç³»åˆ—æ–‡ç« ï¼ŒåŒ…æ‹¬äº†åŸåˆ›ï¼Œç¿»è¯‘ï¼Œè½¬è½½ç­‰å„ç±»å‹çš„æ–‡ç« ï¼Œå¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œè¯·æ¨èæ”¯æŒä¸€æŠŠï¼Œç»™å¤§å”å†™ä½œçš„åŠ¨åŠ›ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å‡ ä¸ªæœˆå¿™å¾—å®åœ¨æ˜¯ä¸å¯å¼€äº¤ï¼Œç»ˆäºæŠŠã€Šæ·±å…¥ç†è§£ JavaScript ç³»åˆ—ã€‹çš„æœ€åä¸¤ç¯‡â€œè¡¥å…¨â€äº†ï¼Œæ‰€è°“çš„å…¨æ˜¯ä¸å‡†ç¡®çš„ï¼Œå› ä¸ºå¾ˆå¤šå†…å®¹éƒ½æ²¡æœ‰å†™å‘¢ï¼Œæ¯”å¦‚é«˜æ€§èƒ½ã€Ajax å®‰å…¨ã€DOM è¯¦è§£ã€JavaScript æ¶æ„ç­‰ç­‰ã€‚ä½†å› ä¸ºç»å†æ‰€é™ï¼ŒåŠ ä¸Šå¤§å”å¸Œæœ›æ¥ä¸‹æ¥å†™ç‚¹å…¶å®ƒä¸œè¥¿ï¼Œæ‰€ä»¥æ­¤ç¯‡æ–‡å­—å°±æš‚ä¸”å½“å‰å®Œç»“ç¯‡çš„æ€»ç»“å§ï¼Œä»¥åæœ‰æ—¶é—´çš„è¯ï¼Œå¯ä»¥ç»§ç»­åŠ ä¸Šä¸€äº›æœªæ¶‰åŠçš„ä¸“é¢˜å†…å®¹ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æµ…è°ˆæ¨¡å—åŒ–å¼€å‘ä»¥åŠå®ç°</title>
    <link href="http://xuhongbo.com/2016/10/20/%E8%A7%84%E8%8C%83/Common&amp;AMD&amp;CMD/"/>
    <id>http://xuhongbo.com/2016/10/20/è§„èŒƒ/Common&amp;AMD&amp;CMD/</id>
    <published>2016-10-20T15:02:33.000Z</published>
    <updated>2017-03-15T08:39:59.724Z</updated>
    
    <content type="html"><![CDATA[<p>å‰è¨€ï¼šä¸ªäººè®¤ä¸ºæƒ³è¦æœ€å¿«çš„å»å­¦ä¹ æŸä¸ªæ–°çš„æŠ€æœ¯æœ€ç›´æ¥çš„æ˜¯è¦çŸ¥é“å®ƒèƒ½è§£å†³ä»€ä¹ˆäº‹æƒ…ï¼Œå¦‚æœä¸çŸ¥é“ä»–è¦åšä»€ä¹ˆï¼Œæˆ‘æ„Ÿè§‰æºç è®©ä½ çœ‹çƒ‚ä¹Ÿä¸è¡Œï¼Œä¸‹é¢æˆ‘å°†åœ¨ä¸‹é¢çš„å‡ ä¸ªæ–¹é¢è®²è¿°ä¸€ä¸‹å‰ç«¯æ¨¡å—åŒ–çš„å¿…è¦æ€§ï¼Œè¿™é‡Œ<a href="https://github.com/seajs/seajs/issues/547" target="_blank" rel="external">#547 </a>ç‰ä¼¯ä¹Ÿå°±æ˜¯sea.jsä½œè€…è¯´çš„ç‰¹åˆ«æ¸…æ¥š ï¼Œä»¥åŠå®ç°çš„æ–¹å¼ï¼Œ</p>
<p><strong>è®°ä½AMD&amp;CMDè§£å†³çš„æ˜¯æ–‡ä»¶ä¹‹é—´ç›¸äº’ä¾èµ–çš„æƒ…å†µä¸‹scriptæ ‡ç­¾é¡ºåºé—®é¢˜è€Œå¯¼è‡´ä¾èµ–å…³ç³»å‘ç”Ÿé”™è¯¯ï¼Œè¿˜æœ‰å°±æ˜¯jsæ–‡ä»¶çš„åŠ è½½ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ï¼Œä½¿ç”¨AMD&amp;CMDæˆ‘ä»¬å°±å¯ä»¥ç­‰åˆ°ç›¸å…³çš„jsä¾èµ–åŠ è½½å®Œæ¯•åï¼Œå†å»æ‰§è¡Œæˆ‘ä»¬åé¢çš„ä»£ç ï¼ˆrequirejsæ˜¯æ‰§è¡Œåé¢çš„å›è°ƒå‡½æ•°ï¼Œseajsæ˜¯ä¾èµ–å°±è¿‘ï¼‰</strong></p>
<a id="more"></a>
<h3 id="JavaScriptè¯­è¨€çš„ä¸è¶³"><a href="#JavaScriptè¯­è¨€çš„ä¸è¶³" class="headerlink" title="JavaScriptè¯­è¨€çš„ä¸è¶³"></a>JavaScriptè¯­è¨€çš„ä¸è¶³</h3><p>å¯¹äºJavaScriptæ–‡ä»¶ï¼š</p>
<ul>
<li>æ–‡ä»¶æŒ‰<code>&lt;script&gt;</code>é¡ºåºåŠ è½½ï¼ŒJavaScriptæœ¬èº«ç¼ºå°‘å¯¹æ–‡ä»¶ä¾èµ–å…³ç³»çš„ç®¡ç†ã€‚æ›´é‡è¦çš„æ˜¯ï¼šjsæ–‡ä»¶çš„åŠ è½½ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ã€‚</li>
<li>åœ¨å•é¡µé¢Webåº”ç”¨ä¸­ï¼Œåªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œä½†è®¸å¤šscriptä¸éœ€è¦åœ¨é¡µé¢åˆå§‹åŒ–çš„æ—¶å€™ä¸€æ¬¡æ€§åŠ è½½ï¼Œåªéœ€è¦åœ¨åŠ è½½äº†æŸä¸ªå­é¡µé¢æ—¶åŠ è½½â€”â€”è¿™åœ¨Pythonå«æ¨¡å—åŠ¨æ€åŠ è½½ã€å¾ˆè‡ªç„¶ï¼›è€ŒåŸç”ŸJavaScriptä¸­æ˜¯æ²¡æœ‰ä»»ä½•æœºåˆ¶å¯ä»¥å®ç°çš„ã€‚â€”â€” è¿™æ˜¯ä¸€ä¸ªæ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<p>å¯¹äºå…¨å±€å‘½åç©ºé—´ï¼š</p>
<ul>
<li>JavaScriptæ‰€æœ‰æ–‡ä»¶ä¸­çš„ä»£ç éƒ½åœ¨åŒä¸€ä¸ªå…¨å±€å‘½åç©ºé—´ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ä»»ä½•æ–‡ä»¶å®šä¹‰çš„å…¨å˜é‡å’Œå…¨å±€å‡½æ•°éƒ½åœ¨å…¨å±€å‘½åç©ºé—´ã€‚â€”â€”è¿™æ ¹pythonä¹‹ç±»çš„è¯­è¨€åˆå¤§ä¸ä¸€æ ·ã€‚è¿™æ¡ç‰¹æ€§æœ‰åˆ©äºæ–‡ä»¶é—´å…±äº«æ•°æ®ï¼Œä½†å…¨å±€ç©ºé—´å¤ªå®¹æ˜“å¤±æ§è€Œå¼•å…¥Bugã€‚</li>
</ul>
<p>å¯¹äºä»£ç çš„æ¨¡å—åŒ–ï¼š</p>
<ul>
<li>å³ä½¿ä¸å‡ºç°ä¸Šè¿°é—®é¢˜ï¼Œæ¨¡å—åŒ–æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªéœ€æ±‚ã€‚æ¨¡å—åŒ–å¯ä»¥å®ç°é«˜å†…èšã€ä½è€¦åˆçš„è‰¯å¥½ç³»ç»Ÿï¼Œä½†JavaScriptæ²¡æœ‰æä¾›æ¨¡å—åŒ–å·¥å…·â€”â€”æˆ‘ä»¬è‡³å°‘éœ€è¦â€œå®šä¹‰æ¨¡å—â€å’Œâ€œå¼•ç”¨æ¨¡å—â€çš„åŠŸèƒ½ã€‚</li>
</ul>
<h3 id="æ³¨æ„åˆ°æ²¡ï¼šJavaScriptçš„ç¬¬ä¸‰æ–¹åº“ï¼Œéƒ½æ˜¯å•JSæ–‡ä»¶ï¼ï¼ï¼"><a href="#æ³¨æ„åˆ°æ²¡ï¼šJavaScriptçš„ç¬¬ä¸‰æ–¹åº“ï¼Œéƒ½æ˜¯å•JSæ–‡ä»¶ï¼ï¼ï¼" class="headerlink" title="æ³¨æ„åˆ°æ²¡ï¼šJavaScriptçš„ç¬¬ä¸‰æ–¹åº“ï¼Œéƒ½æ˜¯å•JSæ–‡ä»¶ï¼ï¼ï¼"></a>æ³¨æ„åˆ°æ²¡ï¼šJavaScriptçš„ç¬¬ä¸‰æ–¹åº“ï¼Œéƒ½æ˜¯å•JSæ–‡ä»¶ï¼ï¼ï¼</h3><p>ä¸è®ºå¤šå¤§ã€ä¸è®ºå¤šå°‘è¡Œå†…ï¼@#ï¿¥%â€¦â€¦&amp;*ï¼ˆï¼‰â€”â€”</p>
<h3 id="æ‰€ä»¥æˆ‘ä»¬çš„jsä¸­è¯ç”Ÿäº†æ¨¡å—åŒ–è¿™ä¸ªæ¦‚å¿µâ€¦â€¦â€¦"><a href="#æ‰€ä»¥æˆ‘ä»¬çš„jsä¸­è¯ç”Ÿäº†æ¨¡å—åŒ–è¿™ä¸ªæ¦‚å¿µâ€¦â€¦â€¦" class="headerlink" title="æ‰€ä»¥æˆ‘ä»¬çš„jsä¸­è¯ç”Ÿäº†æ¨¡å—åŒ–è¿™ä¸ªæ¦‚å¿µâ€¦â€¦â€¦"></a>æ‰€ä»¥æˆ‘ä»¬çš„jsä¸­è¯ç”Ÿäº†æ¨¡å—åŒ–è¿™ä¸ªæ¦‚å¿µâ€¦â€¦â€¦</h3><p><strong>CommonJS åŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„  <a href="https://github.com/seajs/seajs/issues/269" target="_blank" rel="external">#269</a> ï¼Œæ‰€ä»¥åªæœ‰åŠ è½½å®Œæˆæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚åƒNode.jsä¸»è¦ç”¨äºæœåŠ¡å™¨çš„ç¼–ç¨‹ï¼ŒåŠ è½½çš„æ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨æœ¬åœ°ç¡¬ç›˜ï¼Œæ‰€ä»¥åŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œä¸ç”¨è€ƒè™‘å¼‚æ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ‰€ä»¥CommonJSè§„èŒƒæ¯”è¾ƒé€‚ç”¨ã€‚ä½†å¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¦ä»æœåŠ¡å™¨åŠ è½½æ¨¡å—ï¼Œè¿™æ˜¯å°±å¿…é¡»é‡‡ç”¨å¼‚æ­¥æ¨¡å¼ã€‚æ‰€ä»¥å°±æœ‰äº† AMD  CMD è§£å†³æ–¹æ¡ˆã€‚</strong> </p>
<p>ä¸‹é¢å†è¯´ä¸€ä¸‹AMDä¸CMDçš„åŒºåˆ«</p>
<p>CMDå’ŒAMDçš„åŒºåˆ«æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p>1.å¯¹äºä¾èµ–çš„æ¨¡å—AMDæ˜¯æå‰æ‰§è¡Œï¼ŒCMDæ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚ä¸è¿‡RequireJSä»2.0å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸é€šè¿‡ï¼‰ã€‚</p>
<p>2.CMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMDæ¨å´‡ä¾èµ–å‰ç½®ã€‚</p>
<p>è™½ç„¶ AMDä¹Ÿæ”¯æŒCMDå†™æ³•ï¼Œä½†ä¾èµ–å‰ç½®æ˜¯å®˜æ–¹æ–‡æ¡£çš„é»˜è®¤æ¨¡å—å®šä¹‰å†™æ³•ã€‚</p>
<p>3.AMDçš„apié»˜è®¤æ˜¯ä¸€ä¸ªå½“å¤šä¸ªç”¨ï¼ŒCMDä¸¥æ ¼çš„åŒºåˆ†æ¨å´‡èŒè´£å•ä¸€ã€‚ä¾‹å¦‚ï¼šAMDé‡Œrequireåˆ†å…¨å±€çš„å’Œå±€éƒ¨çš„ã€‚CMDé‡Œé¢æ²¡æœ‰å…¨å±€çš„ require,æä¾› seajs.use()æ¥å®ç°æ¨¡å—ç³»ç»Ÿçš„åŠ è½½å¯åŠ¨ã€‚CMDé‡Œæ¯ä¸ªAPIéƒ½ç®€å•çº¯ç²¹ã€‚</p>
<p>##ç€é‡è®²è§£ä¸€ä¸‹AMD</p>
<h3 id="AMD-å¼‚æ­¥æ¨¡å—åŠ è½½"><a href="#AMD-å¼‚æ­¥æ¨¡å—åŠ è½½" class="headerlink" title="AMD å¼‚æ­¥æ¨¡å—åŠ è½½"></a>AMD å¼‚æ­¥æ¨¡å—åŠ è½½</h3><p>AMDçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œ<strong>æŒ‰éœ€åŠ è½½JSæ¨¡å—</strong>ã€‚</p>
<p>åŸºäº AMDï¼ˆAsynchronous Module Definitionï¼‰çš„ JavaScript è®¾è®¡å·²ç»åœ¨ç›®å‰è¾ƒä¸ºæµè¡Œçš„å‰ç«¯æ¡†æ¶ä¸­å¤§è¡Œå…¶é“ï¼ŒjQueryã€Dojoã€MooToolsã€EmbedJS ç­‰çº·çº·åœ¨å…¶æœ€æ–°ç‰ˆæœ¬ä¸­åŠ å…¥äº†å¯¹ AMD çš„æ”¯æŒã€‚</p>
<p>RequireJSå‘¢ã€æ˜¯AMDè§„èŒƒæœ€å¥½çš„å®ç°è€…ä¹‹ä¸€ã€‚</p>
<h2 id="RequireJSæ¦‚è¿°"><a href="#RequireJSæ¦‚è¿°" class="headerlink" title="RequireJSæ¦‚è¿°"></a>RequireJSæ¦‚è¿°</h2><p>RequireJS æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—åŠ è½½å™¨ã€‚å®ƒèšç„¦äºJavaScriptçš„æ¨¡å—ç®¡ç†å’Œæ–‡ä»¶ç®¡ç†ã€ä¸ä½†è§£å†³äº†ä¸Šè¯‰æ‰€æœ‰JavaScriptçš„é—ç•™é—®é¢˜ï¼Œè€Œä¸”æä¾›äº†æŸäº›é¢å¤–çš„ä¾¿åˆ©ï¼ˆç¨ååˆ†è§£ï¼‰ã€‚</p>
<h3 id="Why-RequireJSï¼Ÿ"><a href="#Why-RequireJSï¼Ÿ" class="headerlink" title="Why RequireJSï¼Ÿ"></a>Why RequireJSï¼Ÿ</h3><p>æ‰€ä»¥ï¼ŒçŸ¥é“äº†RequireJSæ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä¹Ÿå·®ä¸å¤šçŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨RequireJSäº†ã€‚ä¸è¿‡è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹ç”¨RequireJSçš„å¥½å¤„å§ã€‚</p>
<ul>
<li>å¼‚æ­¥â€œåŠ è½½â€ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œé€šå¸¸ç½‘ç«™éƒ½ä¼šæŠŠscriptè„šæœ¬çš„æ”¾åœ¨htmlçš„æœ€åï¼Œè¿™æ ·å°±å¯ä»¥é¿å…æµè§ˆå™¨æ‰§è¡Œjså¸¦æ¥çš„é¡µé¢é˜»å¡ã€‚ä½¿ç”¨RequireJSï¼Œ<strong>ä¼šåœ¨ç›¸å…³çš„jsåŠ è½½åæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥çš„</strong>ï¼Œæ‰€ä»¥å®ƒä¸ä¼šé˜»å¡é¡µé¢ã€‚</li>
<li>æŒ‰éœ€åŠ è½½ã€‚é€šè¿‡RequireJSï¼Œä½ å¯ä»¥åœ¨éœ€è¦åŠ è½½jsé€»è¾‘çš„æ—¶å€™å†åŠ è½½å¯¹åº” çš„jsæ¨¡å—ï¼Œè¿™æ ·é¿å…äº†åœ¨åˆå§‹åŒ–ç½‘é¡µçš„æ—¶å€™å‘ç”Ÿå¤§é‡çš„è¯·æ±‚å’Œæ•°æ®ä¼ è¾“ï¼Œæˆ–è®¸å¯¹äºä¸€äº›äººæ¥è¯´ï¼ŒæŸäº›æ¨¡å—å¯èƒ½ä»–æ ¹æœ¬å°±ä¸éœ€è¦ï¼Œé‚£å°±æ˜¾å¾—æ²¡æœ‰å¿…è¦ã€‚</li>
<li>æ›´åŠ æ–¹ä¾¿çš„æ¨¡å—ä¾èµ–ç®¡ç†ã€‚ç›¸ä¿¡ä½ æ›¾ç»ä¸€å®šé‡åˆ°è¿‡å› ä¸ºscriptæ ‡ç­¾é¡ºåºé—®é¢˜è€Œå¯¼è‡´ä¾èµ–å…³ç³»å‘ç”Ÿé”™è¯¯ï¼Œè¿™ä¸ªå‡½æ•°æœªå®šä¹‰ï¼Œé‚£ä¸ªå˜é‡undefineä¹‹ç±»çš„ã€‚<strong>é€šè¿‡RequireJSçš„æœºåˆ¶ï¼Œä½ èƒ½ç¡®ä¿åœ¨æ‰€æœ‰çš„ä¾èµ–æ¨¡å—éƒ½åŠ è½½ä»¥åå†æ‰§è¡Œç›¸å…³çš„æ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥èµ·åˆ°ä¾èµ–ç®¡ç†çš„ä½œç”¨</strong>ã€‚</li>
<li>æ›´åŠ é«˜æ•ˆçš„ç‰ˆæœ¬ç®¡ç†ã€‚æƒ³ä¸€æƒ³ï¼Œå¦‚æœä½ è¿˜æ˜¯ç”¨çš„scriptè„šæœ¬å¼•å…¥çš„æ–¹å¼æ¥å¼•å…¥ä¸€ä¸ªjQuery2.xçš„æ–‡ä»¶ï¼Œç„¶åä½ æœ‰100ä¸ªé¡µé¢éƒ½æ˜¯è¿™ä¹ˆå¼•ç”¨çš„ï¼Œé‚£å½“ä½ æƒ³æ¢æˆjQuery3.xï¼Œé‚£ä½ å°±ä¸å¾—ä¸å»æ”¹è¿™100ä¸ªé¡µé¢ã€‚ä½†æ˜¯å¦‚æœä½ çš„requireJSæœ‰åœ¨configä¸­åšjQueryçš„pathæ˜ å°„ï¼Œé‚£ä½ åªéœ€è¦æ”¹ä¸€å¤„åœ°æ–¹å³å¯ã€‚</li>
<li>å½“ç„¶è¿˜æœ‰ä¸€äº›è¯¸å¦‚cdnåŠ è½½ä¸åˆ°jsæ–‡ä»¶ï¼Œå¯ä»¥è¯·æ±‚æœ¬åœ°æ–‡ä»¶ç­‰å…¶å®ƒçš„ä¼˜ç‚¹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚</li>
</ul>
<h3 id="RequireJSæ¨¡å—"><a href="#RequireJSæ¨¡å—" class="headerlink" title="RequireJSæ¨¡å—"></a>RequireJSæ¨¡å—</h3><p>æ—¢ç„¶æ˜¯ä¸€ä¸ªæ¨¡å—åŠ è½½å™¨ï¼ŒRequireJSè‚¯å®šä¼šå®šä¹‰ä¸€ç§requireJSé£æ ¼çš„æ¨¡å—ï¼Œä»¥åŠé…å¥—çš„APIã€‚</p>
<h3 id="æ¨¡å—åŒ–è„šæœ¬"><a href="#æ¨¡å—åŒ–è„šæœ¬" class="headerlink" title="æ¨¡å—åŒ–è„šæœ¬"></a>æ¨¡å—åŒ–è„šæœ¬</h3><p>å°†ä¸€ä¸ªjsè„šæœ¬æ–‡ä»¶ä¸­çš„æ‰€æœ‰ä»£ç ï¼Œéƒ½å®šä¹‰åœ¨ä¸€ä¸ªrequireJSæ¨¡å—ä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªè„šæœ¬å°±æ˜¯â€œæ¨¡å—åŒ–è„šæœ¬â€ã€‚<br>ç”±æ­¤å¯ä»¥çœ‹ä¹¦ï¼Œçº¦å®šçš„æ€ç»´æ˜¯ï¼šä¸€ä¸ªjsæ–‡ä»¶å¯¹åº”ä¸€ä¸ªrequireJSæ¨¡å—</p>
<p>RequireJSç”±James Burkeåˆ›å»ºï¼Œä»–ä¹Ÿæ˜¯AMDè§„èŒƒçš„åˆ›å§‹äººã€‚</p>
<h2 id="RequireJSçš„ä½¿ç”¨"><a href="#RequireJSçš„ä½¿ç”¨" class="headerlink" title="RequireJSçš„ä½¿ç”¨"></a>RequireJSçš„ä½¿ç”¨</h2><p>RequireJSä¼šè®©ä½ ä»¥ä¸åŒäºå¾€å¸¸çš„æ–¹å¼å»å†™JavaScriptã€‚ä½ å°†ä¸å†ä½¿ç”¨scriptæ ‡ç­¾åœ¨HTMLä¸­å¼•å…¥JSæ–‡ä»¶ï¼Œä»¥åŠä¸ç”¨é€šè¿‡scriptæ ‡ç­¾é¡ºåºå»ç®¡ç†ä¾èµ–å…³ç³»ã€‚<br>å½“ç„¶ä¹Ÿä¸ä¼šæœ‰é˜»å¡ï¼ˆblockingï¼‰çš„æƒ…å†µå‘ç”Ÿ</p>
<h3 id="RequireJSå¼•å…¥ä¸‰ä¸ªå…¨å±€å˜é‡"><a href="#RequireJSå¼•å…¥ä¸‰ä¸ªå…¨å±€å˜é‡" class="headerlink" title="RequireJSå¼•å…¥ä¸‰ä¸ªå…¨å±€å˜é‡"></a>RequireJSå¼•å…¥ä¸‰ä¸ªå…¨å±€å˜é‡</h3><p>requireä¼šå®šä¹‰ä¸‰ä¸ªå˜é‡ï¼šdefine,require,requirejs</p>
<ul>
<li>define ç”¨æ¥å®šä¹‰ä¸€ä¸ªæ¨¡å—</li>
<li>require åŠ è½½ä¾èµ–æ¨¡å—ï¼Œå¹¶æ‰§è¡ŒåŠ è½½å®Œåçš„å›è°ƒå‡½æ•°<br>å…¶ä¸­ï¼Œrequireå³ä½¿å‡½æ•°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å®ƒä¸Šé¢æŒ‚äº†ä¸€äº›æˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•å¦‚require.config()</li>
<li>require === requirejs</li>
</ul>
<h3 id="1ã€å¼•å…¥RequireJS"><a href="#1ã€å¼•å…¥RequireJS" class="headerlink" title="1ã€å¼•å…¥RequireJS"></a>1ã€å¼•å…¥RequireJS</h3><p>ä½¿ç”¨requirejså¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨headä¸­é€šè¿‡scriptæ ‡ç­¾å¼•å…¥å®ƒ â€”â€” å®é™…ä¸Šé™¤äº†require.jsï¼Œå…¶å®ƒæ–‡ä»¶æ¨¡å—éƒ½ä¸å†ä½¿ç”¨scriptæ ‡ç­¾å¼•å…¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script data-main=&quot;script/main&quot; src=&quot;require.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<h4 id="data-mainæŒ‡å®šä¸»æ¨¡å—"><a href="#data-mainæŒ‡å®šä¸»æ¨¡å—" class="headerlink" title="data-mainæŒ‡å®šä¸»æ¨¡å—"></a>data-mainæŒ‡å®šä¸»æ¨¡å—</h4><p>ç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°scriptæ ‡ç­¾ä¸Šäº†å¤šäº†ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼šdata-main=â€script/mainâ€ï¼Œç­‰å·å³è¾¹çš„mainæŒ‡çš„main.jsã€‚å½“ç„¶å¯ä»¥ä½¿ç”¨ä»»æ„çš„åç§°ã€‚è¿™ä¸ªmainæŒ‡ä¸»æ¨¡å—æˆ–å…¥å£æ¨¡å—ï¼Œå¥½æ¯”cæˆ–javaçš„ä¸»å‡½æ•°mainã€‚<br>é€šå¸¸åœ¨ä¸»æ¨¡å—ä¸­ï¼Œè¿›è¡ŒRequireJSå…¨å±€é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">require.config(&#123;</div><div class="line">    paths: &#123;</div><div class="line">        jquery: &apos;jquery-1.7.2&apos;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="å‰¯ä½œç”¨ï¼šdata-mainåŒæ—¶æŒ‡å®šäº†é»˜è®¤çš„jsè·¯å¾„"><a href="#å‰¯ä½œç”¨ï¼šdata-mainåŒæ—¶æŒ‡å®šäº†é»˜è®¤çš„jsè·¯å¾„" class="headerlink" title="å‰¯ä½œç”¨ï¼šdata-mainåŒæ—¶æŒ‡å®šäº†é»˜è®¤çš„jsè·¯å¾„"></a>å‰¯ä½œç”¨ï¼šdata-mainåŒæ—¶æŒ‡å®šäº†é»˜è®¤çš„jsè·¯å¾„</h4><p>ä¸Šè¿°main.jsä½äºscript/ï¼Œæ‰€ä»¥ä¹‹åæœ¬åœ°æ–‡ä»¶çš„æŸ¥æ‰¾ã€ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„åŒ–ã€å°±ä¼šç›¸å¯¹äºè¿™ä¸ªè·¯å¾„å»æŸ¥æ‰¾ã€‚</p>
<h3 id="2ã€require-configï¼šå…¨å±€é…ç½®"><a href="#2ã€require-configï¼šå…¨å±€é…ç½®" class="headerlink" title="2ã€require.configï¼šå…¨å±€é…ç½®"></a>2ã€require.configï¼šå…¨å±€é…ç½®</h3><p>requireæ–¹æ³•æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªconfigæ–¹æ³•ï¼Œç”¨æ¥é…ç½®require.jsè¿è¡Œå‚æ•°ã€‚</p>
<p>åº”ç”¨ä¸­æ‰€æœ‰çš„jsæ¨¡å—éƒ½åº”è¯¥åœ¨è¿™é‡Œé…ç½®ç›¸å…³çš„ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åŒ…å«äº†æ¯ä¸ªæ¨¡å—çš„ä½ç½®å•¥çš„ï¼Œè§£å†³äº†åˆ°å“ªé‡Œå»æ‰¾åˆ°æ¨¡å—çš„é—®é¢˜ã€‚è¿™å—é…ç½®æ˜¯å…¨å±€çš„ã€‚</p>
<p>configæ–¹æ³•æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ä¸€èˆ¬é…ç½®é¡¹éƒ½åœ¨é¡µé¢data-mainæ‰€æŒ‡çš„jsä¸­ â€”â€” è¿™å„¿æ˜¯jsä»£ç çš„æ€»å…¥å£ã€‚<br>å¸¸ç”¨çš„é…ç½®æœ‰baseUrlï¼Œpathsç­‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">require.config(&#123;</div><div class="line">    baseUrl: &quot;javascript&quot;,</div><div class="line">    paths: &#123;jquery: [&apos;http//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.0/jquery.min.js&apos;,&apos;lib/jquery.min&apos;],</div><div class="line">            bootstrap: &apos;lib/bootstrap&apos;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="baseUrl-é…ç½®æœ¬åœ°è·¯å¾„çš„åŸºå‡†è·¯å¾„"><a href="#baseUrl-é…ç½®æœ¬åœ°è·¯å¾„çš„åŸºå‡†è·¯å¾„" class="headerlink" title="baseUrl é…ç½®æœ¬åœ°è·¯å¾„çš„åŸºå‡†è·¯å¾„"></a>baseUrl é…ç½®æœ¬åœ°è·¯å¾„çš„åŸºå‡†è·¯å¾„</h4><p>baseUrlå‚æ•°æŒ‡å®šæœ¬åœ°æ¨¡å—ä½ç½®çš„åŸºå‡†ç›®å½•ï¼Œå³æœ¬åœ°æ¨¡å—çš„è·¯å¾„æ˜¯ç›¸å¯¹äºå“ªä¸ªç›®å½•çš„ã€‚è¯¥å±æ€§é€šå¸¸ç”±require.jsåŠ è½½æ—¶çš„data-mainå±æ€§æŒ‡å®šï¼Œæ­¤æ—¶å¯ä»¥çœç•¥baseUrl</p>
<h4 id="paths-é…ç½®æ¯ä¸ªæ¨¡å—çš„ä½ç½®"><a href="#paths-é…ç½®æ¯ä¸ªæ¨¡å—çš„ä½ç½®" class="headerlink" title="paths é…ç½®æ¯ä¸ªæ¨¡å—çš„ä½ç½®"></a>paths é…ç½®æ¯ä¸ªæ¨¡å—çš„ä½ç½®</h4><p>pathså‚æ•°æŒ‡å®šå„ä¸ªæ¨¡å—çš„ä½ç½®ã€‚è¿™ä¸ªä½ç½®å¯ä»¥æ˜¯åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„ç›¸å¯¹ä½ç½®ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤–éƒ¨ç½‘å€ã€‚<br>å¯ä»¥ä¸ºæ¯ä¸ªæ¨¡å—å®šä¹‰å¤šä¸ªä½ç½®ï¼Œå¦‚æœç¬¬ä¸€ä¸ªä½ç½®åŠ è½½å¤±è´¥ï¼Œåˆ™åŠ è½½ç¬¬äºŒä¸ªä½ç½®ï¼Œä¸Šé¢çš„ç¤ºä¾‹å°±è¡¨ç¤ºå¦‚æœCDNåŠ è½½å¤±è´¥ï¼Œåˆ™åŠ è½½æœåŠ¡å™¨ä¸Šçš„å¤‡ç”¨è„šæœ¬ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„2ç‚¹ï¼š</p>
<ul>
<li>å…³äºåç¼€å â€” <strong>æŒ‡å®šæœ¬åœ°æ–‡ä»¶è·¯å¾„æ—¶ï¼Œå¯ä»¥çœç•¥æ–‡ä»¶æœ€åçš„jsåç¼€åã€‚</strong></li>
<li>å…³äºbaseUrl â€” æœ¬åœ°æ¨¡å—çš„è·¯å¾„æ˜¯ç›¸å¯¹äºbaseUrlå»å®šä¹‰çš„ã€‚</li>
</ul>
<h4 id="ä»€ä¹ˆæ ·çš„æ¨¡å—å¯ä»¥ä¸é…ç½®pathï¼Ÿ"><a href="#ä»€ä¹ˆæ ·çš„æ¨¡å—å¯ä»¥ä¸é…ç½®pathï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ ·çš„æ¨¡å—å¯ä»¥ä¸é…ç½®pathï¼Ÿ"></a>ä»€ä¹ˆæ ·çš„æ¨¡å—å¯ä»¥ä¸é…ç½®pathï¼Ÿ</h4><p>å¦‚æœæ¨¡å—moudleA.jsè·Ÿå¼•ç”¨å®ƒçš„æ–‡ä»¶æ˜¯åŒä¸€è·¯å¾„ä¸‹çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ç”¨<code>require([&quot;moduleA&quot;], function(ma){})</code>æ¥å¼•ç”¨è¯¥æ¨¡å—ï¼Œä¸éœ€è¦é…ç½®path â€”â€” è¿™ç§å†™æ³•æˆ‘ä¹Ÿä¸å»ºè®®ã€‚</p>
<h4 id="shim-åŠ è½½éAMDè§„èŒƒçš„js"><a href="#shim-åŠ è½½éAMDè§„èŒƒçš„js" class="headerlink" title="shim åŠ è½½éAMDè§„èŒƒçš„js"></a>shim åŠ è½½éAMDè§„èŒƒçš„js</h4><p>é€šè¿‡requireåŠ è½½çš„æ¨¡å—ä¸€èˆ¬éƒ½éœ€è¦ç¬¦åˆAMDè§„èŒƒï¼Œå³ä½¿ç”¨defineæ¥ç”³æ˜æ¨¡å—<br>ä½†æ˜¯éƒ¨åˆ†æ—¶å€™éœ€è¦åŠ è½½éAMDè§„èŒƒçš„jsï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°å¦ä¸€ä¸ªåŠŸèƒ½ï¼šshimï¼Œshimè§£é‡Šèµ·æ¥ä¹Ÿæ¯”è¾ƒéš¾ç†è§£ï¼Œshimç›´æ¥ç¿»è¯‘ä¸ºâ€å«â€ï¼Œå…¶å®ä¹Ÿæ˜¯æœ‰è¿™å±‚æ„æ€çš„ã€‚<br>éAMDæ¨¡å—è¾“å‡ºï¼Œå°†éæ ‡å‡†çš„AMDæ¨¡å—â€å«â€æˆå¯ç”¨çš„æ¨¡å—ï¼Œä¾‹å¦‚ï¼šåœ¨è€ç‰ˆæœ¬çš„jqueryä¸­ï¼Œæ˜¯æ²¡æœ‰ç»§æ‰¿AMDè§„èŒƒçš„ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥require[â€œjqueryâ€],<br>è¿™æ—¶å€™å°±éœ€è¦shimï¼Œé‚£æˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">require.config(&#123;</div><div class="line">  baseUrl: &quot;javascript&quot;,</div><div class="line">  paths: &#123;</div><div class="line">    jquery: &apos;lib/jquery.1.6&apos;,</div><div class="line">    bootstrap: &apos;lib/bootstrap&apos;</div><div class="line">  &#125;,</div><div class="line">  shim: &#123;</div><div class="line">    &quot;jquery&quot; : &#123;</div><div class="line">      exports : &quot;$&quot;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è¿™æ ·é…ç½®åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å…¶ä»–æ¨¡å—ä¸­å¼•ç”¨jqueryæ¨¡å—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">require([&apos;jquery&apos;], function ($) &#123;</div><div class="line">    //do something....</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="jQueryä¸RequireJS"><a href="#jQueryä¸RequireJS" class="headerlink" title="jQueryä¸RequireJS ???"></a>jQueryä¸RequireJS ???</h4><p>æˆ‘ä»¬çŸ¥é“jQueryä»1.7åå¼€å§‹æ”¯æŒAMDè§„èŒƒï¼Œå³å¦‚æœjQueryä½œä¸ºä¸€ä¸ªAMDæ¨¡å—è¿è¡Œæ—¶ï¼Œå®ƒçš„æ¨¡å—åæ˜¯â€œjqueryâ€ã€‚æ³¨æ„â€œjqueryâ€æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½å†™â€œjQueryâ€æˆ–å…¶å®ƒã€‚</p>
<p>æ³¨ï¼šå¦‚æœæ–‡ä»¶åâ€œjquery-1.7.2.jsâ€æ”¹ä¸ºâ€œjquery.jsâ€å°±ä¸å¿…é…ç½®pathså‚æ•°äº†ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“jQueryæœ€ç»ˆå‘å¤–æš´éœ²çš„æ˜¯å…¨å±€çš„jQueryå’Œ $ã€‚å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">window.jQuery = window.$ = jQuery;</div></pre></td></tr></table></figure>
<p>å¦‚æœå°†jQueryåº”ç”¨åœ¨æ¨¡å—åŒ–å¼€å‘æ—¶ï¼Œå…¶å®å¯ä»¥ä¸ä½¿ç”¨å…¨å±€çš„ï¼Œå³å¯ä»¥ä¸æš´éœ²å‡ºæ¥ã€‚éœ€è¦ç”¨åˆ°jQueryæ—¶ä½¿ç”¨requireå‡½æ•°å³å¯</p>
<h3 id="3ã€defineæ–¹æ³•-å®šä¹‰è‡ªå·±çš„æ¨¡å—"><a href="#3ã€defineæ–¹æ³•-å®šä¹‰è‡ªå·±çš„æ¨¡å—" class="headerlink" title="3ã€defineæ–¹æ³•: å®šä¹‰è‡ªå·±çš„æ¨¡å—"></a>3ã€defineæ–¹æ³•: å®šä¹‰è‡ªå·±çš„æ¨¡å—</h3><p>defineæ–¹æ³•ç”¨äºå®šä¹‰æ¨¡å—ï¼ŒRequireJSè¦æ±‚æ¯ä¸ªæ¨¡å—æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶é‡Œã€‚<br>æŒ‰ç…§æ˜¯å¦ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µè®¨è®ºã€‚</p>
<ul>
<li>ç¬¬ä¸€ç§æƒ…å†µæ˜¯å®šä¹‰ç‹¬ç«‹æ¨¡å—ï¼Œå³æ‰€å®šä¹‰çš„æ¨¡å—ä¸ä¾èµ–å…¶ä»–æ¨¡å—ï¼›</li>
<li>ç¬¬äºŒç§æƒ…å†µæ˜¯å®šä¹‰éç‹¬ç«‹æ¨¡å—ï¼Œå³æ‰€å®šä¹‰çš„æ¨¡å—ä¾èµ–äºå…¶ä»–æ¨¡å—ã€‚</li>
</ul>
<h4 id="å®šä¹‰æ²¡æœ‰ä¾èµ–çš„ç‹¬ç«‹æ¨¡å—"><a href="#å®šä¹‰æ²¡æœ‰ä¾èµ–çš„ç‹¬ç«‹æ¨¡å—" class="headerlink" title="å®šä¹‰æ²¡æœ‰ä¾èµ–çš„ç‹¬ç«‹æ¨¡å—"></a>å®šä¹‰æ²¡æœ‰ä¾èµ–çš„ç‹¬ç«‹æ¨¡å—</h4><p>å¦‚æœè¢«å®šä¹‰çš„æ¨¡å—æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œä¸éœ€è¦ä¾èµ–ä»»ä½•å…¶ä»–æ¨¡å—ï¼Œå¯ä»¥ç›´æ¥ç”¨defineæ–¹æ³•ç”Ÿæˆã€‚</p>
<ul>
<li><p>defineçš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶è¯¥å¯¹è±¡å°±æ˜¯è¾“å‡ºçš„æ¨¡å—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">define(&#123;</div><div class="line">  method1: function() &#123;&#125;,</div><div class="line">  method2: function() &#123;&#125;,</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>defineçš„å‚æ•°ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ­¤æ—¶è¯¥å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯è¾“å‡ºçš„æ¨¡å—ã€‚â€”â€” æ˜¾ç„¶è¿™ç§å†™æ³•æ›´å…·æœ‰é€šç”¨æ€§ï¼Œå»ºè®®ç»Ÿä¸€è¿™æ ·å†™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// math.js</div><div class="line">define(function ()&#123;</div><div class="line">  var add = function (x,y)&#123;</div><div class="line">    return x+y;</div><div class="line">  &#125;;</div><div class="line">  return &#123;</div><div class="line">    add: add</div><div class="line">  &#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="å®šä¹‰æœ‰ä¾èµ–æ¨¡å—çš„æ¨¡å—"><a href="#å®šä¹‰æœ‰ä¾èµ–æ¨¡å—çš„æ¨¡å—" class="headerlink" title="å®šä¹‰æœ‰ä¾èµ–æ¨¡å—çš„æ¨¡å—"></a>å®šä¹‰æœ‰ä¾èµ–æ¨¡å—çš„æ¨¡å—</h4><p>éç‹¬ç«‹æ¨¡å—å¦‚æœè¢«å®šä¹‰çš„æ¨¡å—éœ€è¦ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œåˆ™defineæ–¹æ³•å¿…é¡»é‡‡ç”¨ä¸‹é¢çš„æ ¼å¼:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">define([&apos;module1&apos;, &apos;module2&apos;], function(m1, m2) &#123;</div><div class="line"> ...</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>defineæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„æˆå‘˜æ˜¯å½“å‰æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—ã€‚<br>æ¯”å¦‚ï¼Œ[â€˜module1â€™, â€˜module2â€™]è¡¨ç¤ºæˆ‘ä»¬å®šä¹‰çš„è¿™ä¸ªæ–°æ¨¡å—ä¾èµ–äºmodule1æ¨¡å—å’Œmodule2æ¨¡å—ï¼Œåªæœ‰å…ˆåŠ è½½è¿™ä¸¤ä¸ªæ¨¡å—ï¼Œæ–°æ¨¡å—æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚<br>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œmodule1æ¨¡å—å’Œmodule2æ¨¡å—æŒ‡çš„æ˜¯ï¼Œå½“å‰ç›®å½•ä¸‹çš„module1.jsæ–‡ä»¶å’Œmodule2.jsæ–‡ä»¶ï¼Œç­‰åŒäºå†™æˆ[â€˜./module1â€™, â€˜./module2â€™]ã€‚</p>
</li>
</ul>
<blockquote>
<p>æ€è€ƒï¼Ÿ å¦‚æœæ–°æ¨¡å—åŒå±äºmoduleæ–‡ä»¶ä¸‹ï¼Œå¦‚ä½•å®šä¹‰å¼•å…¥æ–‡ä»¶è·¯å¾„ï¼Ÿ</p>
</blockquote>
<ul>
<li><p>defineæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“å‰é¢æ•°ç»„çš„æ‰€æœ‰æˆå‘˜åŠ è½½æˆåŠŸåï¼Œå®ƒå°†è¢«è°ƒç”¨ã€‚</p>
<p>â€‹</p>
<p>å®ƒçš„å‚æ•°ä¸æ•°ç»„çš„æˆå‘˜ä¸€ä¸€å¯¹åº”ï¼Œæ¯”å¦‚function(m1, m2)å°±è¡¨ç¤ºï¼Œè¿™ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°m1å¯¹åº”module1æ¨¡å—ï¼Œç¬¬äºŒä¸ªå‚æ•°m2å¯¹åº”module2æ¨¡å—ã€‚è¿™ä¸ªå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œä¾›å…¶ä»–æ¨¡å—è°ƒç”¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">define([&apos;module1&apos;, &apos;module2&apos;], function(m1, m2) &#123;</div><div class="line">return &#123;</div><div class="line">  method: function() &#123;</div><div class="line">    m1.methodA();</div><div class="line">    m2.methodB();</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="defineå›è°ƒå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Ÿï¼Ÿ"><a href="#defineå›è°ƒå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Ÿï¼Ÿ" class="headerlink" title="defineå›è°ƒå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Ÿï¼Ÿ"></a>defineå›è°ƒå¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Ÿï¼Ÿ</h4><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå›è°ƒå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯ä½ å®šä¹‰çš„æ¨¡å—ã€‚<br>å¦‚æœä¾èµ–çš„æ¨¡å—å¾ˆå¤šï¼Œå‚æ•°ä¸æ¨¡å—ä¸€ä¸€å¯¹åº”çš„å†™æ³•éå¸¸éº»çƒ¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">    [       &apos;dep1&apos;, &apos;dep2&apos;, &apos;dep3&apos;, &apos;dep4&apos;, &apos;dep5&apos;, &apos;dep6&apos;, &apos;dep7&apos;, &apos;dep8&apos;],</div><div class="line">    function(dep1,   dep2,   dep3,   dep4,   dep5,   dep6,   dep7,   dep8)&#123;</div><div class="line">        ...</div><div class="line">    &#125;</div><div class="line">);</div></pre></td></tr></table></figure>
<p>å¯¹äºä¾èµ–æ¨¡å—ç‰¹åˆ«å¤šçš„æƒ…å†µï¼ŒRequireJSæœ‰å¦ä¸€ç§ç­‰ä»·å†™æ³•ï¼š â€”â€” è¿˜æ˜¯ç«–ç‰ˆçš„å¥½å§ã€‚ã€‚ã€‚ï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">define(</div><div class="line">  function (require) &#123;</div><div class="line">    var dep1 = require(&apos;dep1&apos;),</div><div class="line">      dep2 = require(&apos;dep2&apos;),</div><div class="line">      dep3 = require(&apos;dep3&apos;),</div><div class="line">      dep4 = require(&apos;dep4&apos;),</div><div class="line">      â€¦â€¦</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="ç¬¦åˆAMDè§„èŒƒçš„æ¨¡å—"><a href="#ç¬¦åˆAMDè§„èŒƒçš„æ¨¡å—" class="headerlink" title="ç¬¦åˆAMDè§„èŒƒçš„æ¨¡å—"></a>ç¬¦åˆAMDè§„èŒƒçš„æ¨¡å—</h4><p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœä½ æƒ³æŠŠjqueryã€é€šè¿‡RequireJSã€å½“åšä¸€ä¸ªæ¨¡å—çš„æ–¹å¼å¼•å…¥è¿›æ¥ï¼Œå°±åƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">require.config(&#123;</div><div class="line">    paths: &#123;</div><div class="line">        jquery: &apos;jquery-1.7.2&apos;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆjqueryå¿…é¡»é¦–å…ˆå°±æ˜¯ä¸€ä¸ªrequirejsæ¨¡å—ï¼Œä¹Ÿå°±æ˜¯è¯´ â€”â€” jqueryå¿…é¡»æŠŠæ‰€æœ‰ä»£ç åŒ…è£…åœ¨require.defineçš„å›è°ƒå‡½æ•°é‡Œã€å¹¶ä¸”è¿”å›$å˜é‡ï¼Œå¯¹ä¸å¯¹ï¼Ÿ</p>
<p>æ‰€æœ‰è¿™æ ·çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå°±å«åšâ€œç¬¦åˆAMDè§„èŒƒçš„æ¨¡å—â€</p>
<h3 id="4-requireæ–¹æ³•ï¼šåœ¨JSæ–‡ä»¶å¤´éƒ¨ã€å£°æ˜ä¾èµ–æ¨¡å—"><a href="#4-requireæ–¹æ³•ï¼šåœ¨JSæ–‡ä»¶å¤´éƒ¨ã€å£°æ˜ä¾èµ–æ¨¡å—" class="headerlink" title="4. requireæ–¹æ³•ï¼šåœ¨JSæ–‡ä»¶å¤´éƒ¨ã€å£°æ˜ä¾èµ–æ¨¡å—"></a>4. requireæ–¹æ³•ï¼šåœ¨JSæ–‡ä»¶å¤´éƒ¨ã€å£°æ˜ä¾èµ–æ¨¡å—</h3><p>requireæ–¹æ³•ç”¨äºè°ƒç”¨æ¨¡å—ã€‚å®ƒçš„å‚æ•°ä¸defineæ–¹æ³•ç±»ä¼¼ã€‚<br>1.æ™®é€šåŠ è½½æ–¹å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">require([&apos;jquery&apos;,&apos;bootstrap&apos;], function ($) &#123;</div><div class="line">    $(&apos;.carousel&apos;).carousel(&#123;</div><div class="line">        interval: 3000</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>ä¸Šé¢æ–¹æ³•è¡¨ç¤ºåŠ è½½jqueryå’Œbootstrapä¸¤ä¸ªæ¨¡å—ï¼Œå½“è¿™ä¸¤ä¸ªæ¨¡å—éƒ½åŠ è½½æˆåŠŸåï¼Œæ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚<br>è¯¥å›è°ƒå‡½æ•°å°±ç”¨æ¥å®Œæˆå…·ä½“çš„ä»»åŠ¡ã€‚requireæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªè¡¨ç¤ºä¾èµ–å…³ç³»çš„æ•°ç»„ã€‚</p>
<h3 id="æœ‰çš„æ¨¡å—ä¼šè¿”å›ä¸ªå¯¹è±¡ï¼Œæœ‰çš„æ²¡æœ‰è¿”å›"><a href="#æœ‰çš„æ¨¡å—ä¼šè¿”å›ä¸ªå¯¹è±¡ï¼Œæœ‰çš„æ²¡æœ‰è¿”å›" class="headerlink" title="æœ‰çš„æ¨¡å—ä¼šè¿”å›ä¸ªå¯¹è±¡ï¼Œæœ‰çš„æ²¡æœ‰è¿”å›"></a>æœ‰çš„æ¨¡å—ä¼šè¿”å›ä¸ªå¯¹è±¡ï¼Œæœ‰çš„æ²¡æœ‰è¿”å›</h3><p>å¦‚ä¸Šï¼Œbootstrapå°±æ²¡æœ‰è¿”å›å€¼ã€‚jqueryæœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥åœ¨functionä¸­å£°æ˜$ä»£è¡¨jqueryæ¨¡å—è¿”å›çš„å€¼ã€‚<br>æ³¨æ„å‰åæ˜¯æŒ‰é¡ºåºä¸€ä¸€å¯¹åº”çš„<br>æ¨¡å—è¾“å‡ºå˜é‡ï¼Œå¦‚æœæŸä¸ªæ¨¡å—ä¸è¾“å‡ºå˜é‡å€¼ï¼Œåˆ™æ²¡æœ‰ï¼Œæ‰€ä»¥å°½é‡å°†è¾“å‡ºçš„æ¨¡å—å†™åœ¨å‰é¢ï¼Œé˜²æ­¢ä½ç½®é”™ä¹±å¼•å‘è¯¯è§£</p>
<blockquote>
<p>å¯ä»¥çœ‹å‡ºJavaScriptè¿™é£æ ¼è·Ÿæˆ‘ä»¬ä»å‰çš„äººç”Ÿã€å¤šä¹ˆçš„ä¸åŒï¼ï¼åŒæ ·æ˜¯åœ¨æ–‡ä»¶å¤´éƒ¨å£°æ˜ä¾èµ–æ¨¡å—ï¼Œäººå®¶æ¨ªç€å†™ã€‚ã€‚ã€‚è€Œä¸”ä¸å¹²ä¸å‡€ã€‚ã€‚</p>
</blockquote>
<h2 id="å°ç»“ï¼šRequireJSçš„é£æ ¼"><a href="#å°ç»“ï¼šRequireJSçš„é£æ ¼" class="headerlink" title="å°ç»“ï¼šRequireJSçš„é£æ ¼"></a>å°ç»“ï¼šRequireJSçš„é£æ ¼</h2><ul>
<li>ä¸€ä¸ªæ–‡ä»¶å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œç”¨æ–‡ä»¶è·¯å¾„å®šä¹‰æ¨¡å—åï¼Œé€šè¿‡æ¨¡å—åå£°æ˜æ¨¡å—åŠ è½½</li>
<li>åœ¨æ–‡ä»¶å¤´éƒ¨å£°æ˜ä¾èµ–æ¨¡å—ï¼Œäººå®¶æ˜¯æ¨ªç€å†™çš„å“¦</li>
<li>.jså¸¸å¸¸å¯ä»¥çœç•¥<br>æ¯”å¦‚main-dataä¸­æŒ‡å®šçš„jsæ–‡ä»¶ï¼Œå¯ä»¥çœç•¥è·¯å¾„ï¼›pathä¸­æŒ‡å®šçš„ä½ç½®ã€å¦‚æœæ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œå¯ä»¥çœç•¥åç¼€</li>
<li>ç”¨åˆ«åä»£æ›¿å…¨è·¯å¾„</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰è¨€ï¼šä¸ªäººè®¤ä¸ºæƒ³è¦æœ€å¿«çš„å»å­¦ä¹ æŸä¸ªæ–°çš„æŠ€æœ¯æœ€ç›´æ¥çš„æ˜¯è¦çŸ¥é“å®ƒèƒ½è§£å†³ä»€ä¹ˆäº‹æƒ…ï¼Œå¦‚æœä¸çŸ¥é“ä»–è¦åšä»€ä¹ˆï¼Œæˆ‘æ„Ÿè§‰æºç è®©ä½ çœ‹çƒ‚ä¹Ÿä¸è¡Œï¼Œä¸‹é¢æˆ‘å°†åœ¨ä¸‹é¢çš„å‡ ä¸ªæ–¹é¢è®²è¿°ä¸€ä¸‹å‰ç«¯æ¨¡å—åŒ–çš„å¿…è¦æ€§ï¼Œè¿™é‡Œ&lt;a href=&quot;https://github.com/seajs/seajs/issues/547&quot;&gt;#547 &lt;/a&gt;ç‰ä¼¯ä¹Ÿå°±æ˜¯sea.jsä½œè€…è¯´çš„ç‰¹åˆ«æ¸…æ¥š ï¼Œä»¥åŠå®ç°çš„æ–¹å¼ï¼Œ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è®°ä½AMD&amp;amp;CMDè§£å†³çš„æ˜¯æ–‡ä»¶ä¹‹é—´ç›¸äº’ä¾èµ–çš„æƒ…å†µä¸‹scriptæ ‡ç­¾é¡ºåºé—®é¢˜è€Œå¯¼è‡´ä¾èµ–å…³ç³»å‘ç”Ÿé”™è¯¯ï¼Œè¿˜æœ‰å°±æ˜¯jsæ–‡ä»¶çš„åŠ è½½ä¼šé˜»å¡é¡µé¢æ¸²æŸ“ï¼Œä½¿ç”¨AMD&amp;amp;CMDæˆ‘ä»¬å°±å¯ä»¥ç­‰åˆ°ç›¸å…³çš„jsä¾èµ–åŠ è½½å®Œæ¯•åï¼Œå†å»æ‰§è¡Œæˆ‘ä»¬åé¢çš„ä»£ç ï¼ˆrequirejsæ˜¯æ‰§è¡Œåé¢çš„å›è°ƒå‡½æ•°ï¼Œseajsæ˜¯ä¾èµ–å°±è¿‘ï¼‰&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Zeptoæºç è§£è¯» ä»¥åŠå‰æœŸçŸ¥è¯†ç‚¹å‡†å¤‡</title>
    <link href="http://xuhongbo.com/2016/10/14/%E6%A1%86%E6%9E%B6/zepto/zepto%E6%BA%90%E7%A0%81/"/>
    <id>http://xuhongbo.com/2016/10/14/æ¡†æ¶/zepto/zeptoæºç /</id>
    <published>2016-10-14T14:57:30.000Z</published>
    <updated>2017-03-06T13:03:12.142Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ å¸¸ç”¨zeptoï¼Œå´æ²¡æœ‰è¯•ç€æ·±å…¥zeptoæºç å»çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œä½ ä¸å¥½å¥‡å—ï¼Ÿè·Ÿéšæˆ‘ï¼Œæ‰“å¼€zeptoçš„æºç æ¥åˆ†æä¸€ä¸‹ï¼Œçœ‹çœ‹zeptoæ˜¯ç”¨ä½•ç§æ–¹å¼åšæˆäº†æµè¡Œå…¨ä¸–ç•Œçš„jsåº“ã€‚</p>
<p>æœ¬è¯¾ç¨‹å†…å®¹ä¸»è¦æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>åˆ†æzeptoçš„è®¾è®¡æ€æƒ³ï¼Œå¹¶æ€è€ƒå¦‚ä½•æ‰èƒ½å®ç°è¿™ç§è®¾è®¡ï¼›</li>
<li>æ‰“å¼€zeptoæºç ï¼Œçœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼›</li>
</ul>
<p>æ‰©å±•å†…å®¹ï¼š</p>
<ul>
<li>ä½œè€…æ ‡æ³¨çš„ zepto coreæ¨¡å—çš„æºç æ³¨è§†ï¼›</li>
</ul>
<blockquote>
<p>è‡³äºä¸ºä½•è¦è§£è¯»æºç å’Œè®¾è®¡ï¼Ÿæˆ‘æƒ³æ—¢ç„¶æ¥çœ‹è¯¥æ•™ç¨‹çš„æœ‹å‹ï¼Œåº”è¯¥éƒ½çŸ¥é“å®ƒçš„æ„ä¹‰ï¼Œè¿™é‡Œä¸å†å” å¨ã€‚æ€»ä¹‹ï¼Œ<strong>æ‹œè¯»ç»å…¸æ¡†æ¶çš„æºç ã€å­¦ä¹ è®¾è®¡æ€æƒ³ï¼Œå°±ç­‰äºç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š</strong>ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="é¢å‘çš„ç”¨æˆ·"><a href="#é¢å‘çš„ç”¨æˆ·" class="headerlink" title="é¢å‘çš„ç”¨æˆ·"></a>é¢å‘çš„ç”¨æˆ·</h2><ul>
<li>ç”¨è¿‡zeptoï¼Œç†Ÿæ‚‰zeptoçš„å¸¸ç”¨APIï¼ˆé»˜è®¤ä½ æœ‰jsåŸºç¡€ï¼‰</li>
<li>æœ‰åŸºç¡€å¹¶ä¸”æƒ³æ·±å…¥å­¦ä¹ çš„ã€æ–°å…µã€</li>
</ul>
<h2 id="å…³äºæ—¶é—´"><a href="#å…³äºæ—¶é—´" class="headerlink" title="å…³äºæ—¶é—´"></a>å…³äºæ—¶é—´</h2><p>ç°è¯´ä¸€ä¸‹ï¼Œè¯¥æ•™ç¨‹è®²ä¹‰å‡†å¤‡çš„æ—¶é—´æ˜¯2016å¹´7æœˆä»½ã€‚æ‚¨çœ‹åˆ°è¯¥æ•™ç¨‹çš„æ—¶é—´å¯èƒ½ä¼šæ¯”è¿™ä¸ªæ—¶é—´æ™šå¾ˆå¤šï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œè¯¥æ•™ç¨‹è®²è§£çš„å†…å®¹åº”è¯¥ä¼šä¸€ç›´æœ‰æ•ˆã€‚åŸå› æœ‰äºŒï¼š</p>
<ul>
<li>zeptoè‡³ä»Šæ—©å°±ç¨³å®šäº†ï¼Œä»£ç ä¸ä¼šæœ‰å¾ˆå¤§çš„å˜åŒ–ï¼›</li>
<li>åªè¦ES6æ²¡æœ‰å®Œå…¨æµè¡Œå¼€ï¼ˆå°šéœ€babelè½¬ä¹‰ï¼‰ï¼Œjsçš„è¯­æ³•æ˜¯ä¸ä¼šå˜çš„ï¼›</li>
</ul>
<p><strong>å› æ­¤ï¼Œé‚£äº›æŠ±æ€¨å‰ç«¯å˜åŒ–å¿«çš„åŒå­¦ï¼Œæ‚¨è¯¥è½¬å˜ä¸€ä¸‹è§‚å¿µäº†</strong> â€”â€”æˆ‘ä¸€ç›´è§‰å¾—å‰ç«¯å¿«çš„åªæ˜¯ä¸€å°éƒ¨åˆ†ï¼Œå½“ç„¶è¿™æ˜¯é¢˜å¤–è¯ã€‚</p>
<h2 id="å…³äºæ–‡æ¡£å½¢å¼"><a href="#å…³äºæ–‡æ¡£å½¢å¼" class="headerlink" title="å…³äºæ–‡æ¡£å½¢å¼"></a>å…³äºæ–‡æ¡£å½¢å¼</h2><p>ä»”ç»†è€ƒè™‘ä»¥ä¸‹é—®é¢˜ï¼š</p>
<blockquote>
<p>è§†é¢‘æ•™ç¨‹è¯¥ç”¨æ–‡æ¡£è¿˜æ˜¯ç”¨pptï¼Ÿ</p>
</blockquote>
<ul>
<li>äº§å“åŒ–ï¼ˆæ–‡æ¡£ - äº§å“ï¼›ppt - äº‹ä»¶ï¼‰</li>
<li>æŒç»­åŒ–ï¼ˆæ–‡æ¡£æ›´æ˜“äº‹åæŸ¥é˜…ï¼‰</li>
<li>ç»“æ„åŒ–ï¼ˆä½¿çŸ¥è¯†æ›´åŠ ä½“ç³»ï¼Œä¸é›¶æ•£ï¼‰</li>
</ul>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æœ¬æ•™ç¨‹ä¸­ï¼Œè®²è§£è®¾è®¡çš„éƒ¨åˆ†å¤§çº¦å ä¸€åŠæ—¶é—´ï¼Œåˆ†ææºç å å¦ä¸€åŠæ—¶é—´ã€‚å› ä¸ºæˆ‘è§‰å¾—ï¼Œåˆ†æå’Œå­¦ä¹ è®¾è®¡ï¼Œæ¯”çœ‹æºç è¦æ›´åŠ é‡è¦ã€‚</p>
<p>è€Œå¦ä¸€åŠæ—¶é—´çœ‹æºç è‚¯å®šæ˜¯çœ‹ä¸å®Œçš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¿…è¦çœ‹å®Œï¼Œå¤§å®¶éƒ½æŒºå¿™çš„ï¼Œå’±ä»¬å°±å¥½é’¢ç”¨åœ¨åˆ€åˆƒä¸Šã€‚äº†è§£äº†å…³é”®çš„ä»£ç ï¼Œå‰©ä¸‹çš„å®Œå…¨å¯ä»¥è‡ªå·±æ¥è½»æ¾çœ‹å®Œâ€”â€”åªè¦ä½ æƒ³çœ‹ã€‚</p>
<p>æˆ‘æ­£å¼è¯»è¿‡æºç çš„ç»å…¸æ¡†æ¶æœ‰4ä¸ªï¼Œæˆ‘è‡ªå·±çš„æ„Ÿè§‰å°±æ˜¯â€”â€”<strong>è§£è¯»æºç ä¹‹åï¼ŒçœŸæ­£ç•™åœ¨è‡ªå·±è„‘å­é‡Œé¢çš„ï¼Œæ˜¯è¿™ä¸ªæ¡†æ¶çš„è®¾è®¡æ€æƒ³</strong>ã€‚å½“è·Ÿæˆ‘çœ‹å®Œzepto-coreçš„æºç ä¹‹åï¼Œä½ åº”è¯¥ä¼šæœ‰è¿™ç§ä½“ä¼šã€‚</p>
<h2 id="è¯¡å¼‚çš„æ•°ç»„"><a href="#è¯¡å¼‚çš„æ•°ç»„" class="headerlink" title="è¯¡å¼‚çš„æ•°ç»„"></a>è¯¡å¼‚çš„æ•°ç»„</h2><p>é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œå…ˆé€šè¿‡æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­çœ‹ä¸€çœ¼zeptoçš„è®¾è®¡ã€‚å…ˆæ¥ä¸€ä¸ªå¾ˆç®€å•çš„htmlé¡µé¢ï¼Œ``ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;p id=&quot;p1&quot;&gt;æµ‹è¯•&lt;/p&gt;</div><div class="line">&lt;div&gt;</div><div class="line">    &lt;span&gt;test&lt;/span&gt;</div><div class="line">    &lt;span&gt;test&lt;/span&gt;</div><div class="line">    &lt;span&gt;test&lt;/span&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;js/zepto-1.1.6.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>è¿è¡Œé¡µé¢ï¼Œç„¶ååœ¨chromeçš„æ§åˆ¶å°ä¸­è¾“å…¥ä»£ç åšæµ‹è¯•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var $p = $(&apos;p&apos;);  // $p æ˜¯æ•°ç»„</div><div class="line">var $span = $(&apos;span&apos;);  // $span æ˜¯æ•°ç»„</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ä¸­ï¼Œ<code>$p</code>å’Œ<code>$span</code>çœ‹èµ·æ¥éƒ½æ˜¯æ•°ç»„ï¼Œè¿™æ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯æˆ‘ä»¬é€šè¿‡APIçŸ¥é“ï¼Œ<code>$p.addClass</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸€èˆ¬çš„æ•°ç»„æ²¡æœ‰<code>addClass</code>è¿™ä¸ªå‡½æ•°ã€‚</p>
<p>å¦‚æœéƒ½æ˜¯ä¸€æ ·çš„æ•°ç»„ï¼Œé‚£ä¹ˆ<code>$p.addClass</code>æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿæ˜¾ç„¶<code>$p</code>ä¸æ˜¯ä¸€ä¸ªå¸¸è§„çš„æ•°ç»„ã€‚å…¶å®æˆ‘ä»¬è¿˜æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥è¯æ˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3];</div><div class="line">var $p = $(&apos;p&apos;);</div><div class="line"></div><div class="line">// å¯¹æ¯”1</div><div class="line">arr.__proto__.constructor === Array;  // true</div><div class="line">$p.__proto__.constructor === Array;  // false</div><div class="line"></div><div class="line">// å¯¹æ¯”2</div><div class="line">arr instanceof Array;  // true</div><div class="line">$p instanceof Array;  // false</div></pre></td></tr></table></figure>
<p>ç§ç§è¿¹è±¡è¡¨æ˜ï¼Œ<code>$p</code>æ˜¯ä¸€ä¸ªçœ‹ä¼¼æ•°ç»„ï¼Œè€Œéæ•°ç»„çš„ä¸œè¥¿ã€‚åƒã€ŠèŠæ–‹ã€‹é‡Œçš„ç”»çš®ï¼Œæ˜¯å¦å¾ˆè¯¡å¼‚ã€‚ã€‚ã€‚</p>
<h2 id="å…ˆæ‰’ä¸€å±‚çš®"><a href="#å…ˆæ‰’ä¸€å±‚çš®" class="headerlink" title="å…ˆæ‰’ä¸€å±‚çš®"></a>å…ˆæ‰’ä¸€å±‚çš®</h2><p>å¦‚æœä½ å¯¹jsè¯­æ³•ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œä¼°è®¡åˆšæ‰å°±è¢«è¿™ä½ã€ç”»çš®ã€å“è’™äº†ã€‚ä¸è¿‡åˆ«ç€æ€¥ï¼Œå¦‚æœå®ƒæ˜¯ç”»çš®ï¼Œæˆ‘å°±æ˜¯ä¸€ä¸ªç§°èŒçš„è€é“å£«ã€‚ç°åœ¨å…ˆæ‹¿ä¸€å¼ é“ç¬¦æŠŠå®ƒç‚¹ç ´ï¼Œç„¶åä¸‹ä¸€èŠ‚å†æ•™ä½ ä¸€æ‹›æ¡Œå¦–å¤§æ³•ï¼Œè®©ä½ å½»åº•æŠŠå®ƒæ‰“è´¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3];</div><div class="line">console.log(arr.__proto__);  // è¾“å…¥ä¸€ä¸ªå¯¹è±¡</div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šä»£ç ï¼Œ<code>arr.__proto__</code>è¾“å‡ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œé¢åŒ…å«äº†æˆ‘ä»¬å¸¸ç”¨çš„æ“ä½œæ•°ç»„çš„å‡½æ•°ï¼Œä¾‹å¦‚<code>concat</code>,<code>push</code>,<code>map</code>ç­‰ï¼Œ<strong>å…ˆä¸è¦ç®¡è¿™ä¸ª<strong>proto</strong>æ˜¯ä»€ä¹ˆæ„æ€</strong>ã€‚å°±æ˜¯å› ä¸ºè¿™ä¸ª<code>__proto__</code>æœ‰äº†è¿™äº›å‡½æ•°ï¼Œ<code>arr</code>æ‰èƒ½ä½¿ç”¨ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764b28657.png" alt="img"></p>
<p>jsè¯­æ³•éå¸¸çµæ´»ï¼ˆå·ç§°æœ€å¤§çš„åº•çº¿å°±æ˜¯æ— åº•çº¿ï¼‰ï¼Œå¯¹è±¡æ˜¯å¯ä»¥éšä¾¿èµ‹å€¼çš„ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥å°†<code>__proto__</code>é‡æ–°èµ‹å€¼ï¼Œè®©æ•°ç»„å…·æœ‰å…¶ä»–å‡½æ•°çš„åŠŸèƒ½å•Šï¼Œä¾‹å¦‚åŠ ä¸€ä¸ª<code>addClass</code>å‡½æ•°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3];</div><div class="line">arr.__proto__ = &#123;</div><div class="line">    addClass: function () &#123;</div><div class="line">        console.log(123);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">arr.addClass();   // 123</div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œç»è¿‡è¿™ä¸€æ­¥ï¼Œ<code>arr.concat</code>ç­‰å…¶ä»–åŠŸèƒ½å°±æ²¡æœ‰ï¼Œæ­¤æ—¶<code>arr</code>å°±åªæœ‰<code>addClass</code>è¿™ä¸€ä¸ªå‡½æ•°ç›¸ä¾ä¸ºå‘½äº†ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764cbc605.png" alt="img"></p>
<p>ä½†æ˜¯æ— è®ºå¦‚ä½•ï¼Œæ­¤æ—¶æˆ‘ä»¬å†å»æ‹¿<code>arr</code>æ¥åšç¬¬ä¸€æ¬¡çš„é‚£å‡ ä¸ªéªŒè¯ï¼Œå¾—åˆ°çš„ç»“æœå°±å’Œä¹‹å‰çš„<code>$p</code>ä¸€æ ·äº†ï¼Œå³<code>arr</code>æ­¤æ—¶ä¹Ÿç§°äº†ä¸€ä¸ªä¸æ˜¯æ•°ç»„çš„æ•°ç»„ã€‚</p>
<p>è€Œzeptoä¹Ÿå°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚</p>
<h2 id="javascript-ä¸‰åº§å¤§å±±"><a href="#javascript-ä¸‰åº§å¤§å±±" class="headerlink" title="javascript ä¸‰åº§å¤§å±±"></a>javascript ä¸‰åº§å¤§å±±</h2><p>è¿™ä¸ªæ ‡é¢˜å…¶å®æˆ‘è‡ªå·±æ€»ç»“çš„ï¼Œç›®å‰ç½‘ç»œä¸Šæ²¡æœ‰ç›¸å…³çš„è¯´æ³•ã€‚æ„æ€å°±æ˜¯javascriptä¸­æ¯”è¾ƒé‡è¦éš¾æ‡‚çš„ä¸‰ç‚¹çŸ¥è¯†ã€‚ç†Ÿç»ƒæŒæ¡äº†è¿™ä¸‰ç‚¹ï¼Œä½ çš„javascriptçš„åŸºæœ¬åŠŸæ‰ç®—æ˜¯è¿‡å…³ã€‚å¦åˆ™ï¼Œä½ å»BATè¿™ç§å…¬å¸å»é¢è¯•å‰ç«¯ï¼Œä¼°è®¡æ˜¯è¿‡ä¸äº†å…³ã€‚</p>
<ul>
<li><strong>åŸå‹å’ŒåŸå‹é“¾</strong></li>
<li><strong>ä¸Šä¸‹æ–‡ç¯å¢ƒå’Œä½œç”¨åŸŸ</strong></li>
<li><strong>å•çº¿ç¨‹å’Œå¼‚æ­¥</strong></li>
</ul>
<p>ä»¥ä¸Šè¿™ã€ä¸‰åº§å¤§å±±ã€æˆ‘å¸Œæœ›èƒ½æ‰¾æœºä¼šè·Ÿå¤§å®¶å•ç‹¬åˆ†äº«ï¼Œæ­¤å¤„åªè®²ç¬¬ä¸€ä¸ªçš„ä¸€éƒ¨åˆ†ï¼Œå³è®²åˆ°ä½ èƒ½çœ‹æ‡‚åé¢zeptoçš„è®¾è®¡ï¼Œå°±å¤Ÿäº†ã€‚</p>
<h2 id="Array-prototype"><a href="#Array-prototype" class="headerlink" title="Array.prototype"></a><code>Array.prototype</code></h2><p>å…ˆè®°ä½ä¸€å¥è¯â€”â€”<strong>æ¯ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§</strong>â€”â€”æ¯ä¸€ä¸ªå‡½æ•°ï¼Œæ— è®ºæ˜¯ä½ è‡ªå®šä¹‰çš„ï¼Œè¿˜æ˜¯ç³»ç»Ÿå†…ç½®çš„ã€‚ä¸ä¿¡å¯ä»¥è¯•è¯•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var fn = function() &#123;&#125;</div><div class="line">console.log( fn.prototype );</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ‰“å°å‡ºæ¥çš„<code>fn.prototype</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåªæœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§ï¼ŒæŒ‡å‘è¯¥å‡½æ•°è‡ªèº«ï¼Œå³<code>fn.prototype.constructor === fn</code>ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764cd4521.png" alt="img"></p>
<p>ä»¥ä¸Šæ˜¯è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œæ•°ç»„æ„é€ å‡½æ•°<code>Array</code>ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåªä¸è¿‡æ˜¯æµè§ˆå™¨å†…ç½®çš„å‡½æ•°ï¼Œå®ƒä¹Ÿå¾—ç¬¦åˆä»¥ä¸Šé‚£å¥è¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">console.log( typeof Array );   // &apos;function&apos;</div><div class="line">console.log( Array.prototype );</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæ‰“å°å‡ºæ¥çš„<code>Array.prototype</code>ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¹Ÿæœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§ï¼ŒæŒ‡å‘è¯¥å‡½æ•°è‡ªèº«ã€‚åªä¸è¿‡è¿˜å†…ç½®äº†å…¶ä»–çš„å±æ€§â€”â€”åºŸè¯ï¼Œå†…ç½®çš„å¯¹è±¡æ¯›ç”¨æ²¡æœ‰è¿˜å†…ç½®ä¸ªåµåŠ²å•Šã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764d259d6.png" alt="img"></p>
<h2 id="proto"><a href="#proto" class="headerlink" title="[].__proto__"></a><code>[].__proto__</code></h2><p>ç„¶åï¼Œå†è®°ä½ä¸€å¥è¯â€”â€”<strong>æ‰€æœ‰é€šè¿‡å‡½æ•°newå‡ºæ¥çš„ä¸œè¥¿ï¼Œè¿™ä¸ªä¸œè¥¿éƒ½æœ‰ä¸€ä¸ª<strong>proto</strong>æŒ‡å‘è¿™ä¸ªå‡½æ•°çš„prototype</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬ç»™ä»–ä»¬åˆ†åˆ«å–ä¸€ä¸ªä¸­æ–‡åå­—ï¼š</p>
<ul>
<li><code>prototype</code> ï¼ˆæ˜¾ç¤ºï¼‰åŸå‹</li>
<li><code>__proto__</code> éšå¼åŸå‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var arr = [];  // ç­‰ä»·äº var arr = new Array()</div><div class="line">arr.__proto__ === Array.prototype;  // true</div></pre></td></tr></table></figure>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764d3a167.png" alt="img"></p>
<p>ç„¶åï¼Œå†è®°ä½ä¸€å¥è¯â€”â€”<strong>å½“ä½ æƒ³è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…ä¸€ä¸ªæ•°ç»„ï¼‰çš„æŸä¸ªåŠŸèƒ½æ—¶ï¼šå¦‚æœè¯¥å¯¹è±¡æœ¬èº«å…·æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›å¦‚æœè¯¥å¯¹è±¡æœ¬èº«æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œåˆ™å»<strong>proto</strong>ä¸­æ‰¾</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">    fn1: function () &#123;</div><div class="line">        console.log(&apos;fn1&apos;);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">obj.fn1();  // &apos;fn1&apos;</div><div class="line">obj.toString();  // &apos;[object Object]&apos;  ï¼ˆåœ¨ obj.__proto__ ä¸­æ‰¾åˆ°ï¼‰</div></pre></td></tr></table></figure>
<p>æ•°ç»„ä¹Ÿä¸€æ ·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var arr = [];</div><div class="line">arr.push(1);   // åœ¨ arr.__proto__ ä¸­æ‰¾åˆ°äº† push  æ–¹æ³•</div></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯ä¸ºä½•æ•°ç»„ä¼šæœ‰<code>concat</code>ã€<code>push</code>ç­‰æ–¹æ³•ï¼Œé¡ºè—¤æ‘¸ç“œæœ€ç»ˆæ‘¸åˆ°äº†<code>Array.prototype</code>ä¸­æ¥äº†ã€‚</p>
<p>å› æ­¤ï¼Œä¸‹åˆ—ä»£ç æ˜¯æˆç«‹çš„</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[].concat === Array.prototype.concat;</div><div class="line">[].push === Array.prototype.push;</div><div class="line">[].map === Array.prototype.map;</div></pre></td></tr></table></figure>
<h2 id="proto-æ˜¯å¯ä¿®æ”¹çš„"><a href="#proto-æ˜¯å¯ä¿®æ”¹çš„" class="headerlink" title="__proto__æ˜¯å¯ä¿®æ”¹çš„"></a><code>__proto__</code>æ˜¯å¯ä¿®æ”¹çš„</h2><p>ä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´è¿‡ï¼Œ<code>__proto__</code>å°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„jså¯¹è±¡ï¼Œæ ¹æ®jsæ— åº•çº¿çš„è¯­æ³•è§„åˆ™ï¼Œå®ƒæ˜¯å®Œå…¨å¯ä»¥è¢«ä¿®æ”¹æˆ–è€…é‡å†™çš„ã€‚è¿™é‡Œä¸å¦¨å°±å†å¤šå” å¨ä¸¤å¥ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764d558af.png" alt="img"></p>
<p>ä¿®æ”¹<code>__proto__</code>çš„ä¾‹å­ã€‚ä¿®æ”¹äº†ä¹‹åï¼Œ<code>arr</code>ä¸ä»…æœ‰å†…ç½®çš„<code>concat</code>ã€<code>push</code>ç­‰åŠŸèƒ½ï¼Œè¿˜å¤šäº†ä¸€ä¸ª<code>addClass</code>åŠŸèƒ½ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3];</div><div class="line">arr.__proto__.addClass = function () &#123;</div><div class="line">    console.log(123);</div><div class="line">&#125;</div><div class="line">arr.push(4);</div><div class="line">arr.addClass();   // 123</div></pre></td></tr></table></figure>
<p>å®Œå…¨é‡å†™ <code>__proto__</code> çš„ä¾‹å­ï¼Œä¸Šä¸€èŠ‚è®²è¿‡ã€‚è¿˜æ˜¯æ³¨æ„ï¼Œé‡å†™<code>__proto__</code>ä¹‹åï¼Œ<code>arr</code>å¯å°±å¤±å»äº†<code>concat</code>ã€<code>push</code>ç­‰äº²äººäº†ï¼Œåªæœ‰ä¸€ä¸ª<code>addClass</code>åŠŸèƒ½äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3];</div><div class="line">arr.__proto__ = &#123;</div><div class="line">    addClass: function () &#123;</div><div class="line">        console.log(123);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">arr.addClass();   // 123</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç¬¬ä¸€ï¼Œä¸Šæ–‡ä¸­æœ‰ä¸‰å¥è¯è¦è®°ä½å¹¶ä¸”ç†è§£ï¼›<br>ç¬¬äºŒï¼Œæœ‰äº†è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œå†å»æ‰’zeptoçš„çš®å°±è½»è€Œæ˜“ä¸¾äº†ï¼›<br>ç¬¬ä¸‰ï¼Œå…³äºjsçš„åŸå‹å’ŒåŸå‹é“¾çš„çŸ¥è¯†ï¼ŒçœŸçš„è¿˜æœ‰å¾ˆå¤šè¯æ²¡æœ‰è¯´ï¼›</p>
<h2 id="å›é¡¾zeptoå¯¹è±¡"><a href="#å›é¡¾zeptoå¯¹è±¡" class="headerlink" title="å›é¡¾zeptoå¯¹è±¡"></a>å›é¡¾zeptoå¯¹è±¡</h2><p>ç»è¿‡äº†ä¸Šä¸€èŠ‚çš„çŸ¥è¯†è¡¥å……ä¹‹åï¼Œæˆ‘ä»¬å†å›åˆ°å…ˆå‰zeptoçš„é‚£ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"p1"</span>&gt;</span>æµ‹è¯•<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>test<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>test<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>test<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/zepto-1.1.6.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> $p1 = $(<span class="string">'#p1'</span>);</div><div class="line">    <span class="built_in">console</span>.log($p1);</div><div class="line"></div><div class="line">    <span class="keyword">var</span> $span = $(<span class="string">'span'</span>);</div><div class="line">    <span class="built_in">console</span>.log($span);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¹‹å‰å°±äº†è§£åˆ°<code>$p</code>æˆ–è€…<code>$span</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯åˆæ‰©å±•äº†å…¶ä»–åŠŸèƒ½ï¼ˆä¾‹å¦‚ <code>$p.addClass</code>ï¼‰ï¼Œè¿™é‡Œå¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œ<code>$p.__proto__</code>è‚¯å®šæ˜¯è¢«ä¿®æ”¹è¿‡çš„ï¼Œè€Œä¸ä»…ä»…æ˜¯<code>Array.prototype</code>ï¼Œå¦åˆ™ä¸ä¼šæœ‰<code>addClass</code>åŠŸèƒ½ã€‚</p>
<h2 id="å¦‚ä½•åšåˆ°çš„"><a href="#å¦‚ä½•åšåˆ°çš„" class="headerlink" title="å¦‚ä½•åšåˆ°çš„"></a>å¦‚ä½•åšåˆ°çš„</h2><p>æºç ä¸­å¦‚ä½•åšçš„ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šæœ‰è¯¦ç»†çš„æè¿°ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œå¯ä»¥ä½¿ç”¨è‡ªå·±çš„ä»£ç ç®€å•æ¨¡æ‹Ÿä¸€ä¸‹ã€‚å…¶å®éå¸¸ç®€å•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3];</div><div class="line">arr.__proto__ = &#123;</div><div class="line">    addClass: function  () &#123;</div><div class="line">        console.log(&apos;this is addClass&apos;);</div><div class="line">    &#125;,</div><div class="line">    concat: Array.prototype.concat,</div><div class="line">    push: Array.prototype.push</div><div class="line">&#125;;</div><div class="line"></div><div class="line">arr.push(4);</div><div class="line">arr.addClass();</div></pre></td></tr></table></figure>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764d79a55.png" alt="img"></p>
<p><em>PSï¼šå…¶å®æºç åœ¨å®ç°è¿™ä¸ªè®¾è®¡çš„æ—¶å€™ï¼Œå¹¶ä¸åƒä¸Šé¢ä»£ç é‚£ä¹ˆç®€å•ï¼Œåªä¸è¿‡åŸç†æ˜¯ä¸€æ ·çš„ã€‚æºç å…·ä½“çš„å®ç°æ–¹å¼ï¼Œè¿˜å¾—è¾¹è§£è¯»è¾¹äº†è§£ã€‚</em></p>
<h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>ä»¥ä¸Šè‡ªå·±æ‰‹å†™äº†å‡ è¡Œä»£ç ï¼Œå°±ç®€å•æ¨¡æ‹Ÿäº†ä¸€ä¸ªzeptoçš„è®¾è®¡ç»“æ„ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯å’Œzeptoä¸€æ ·å‘¢ï¼Ÿæˆ‘ä»¬è¿™é‡Œç®€å•éªŒè¯ä¸€ä¸‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var $p = $(&apos;p&apos;);</div><div class="line"></div><div class="line">// ä½¿ç”¨ constructor éªŒè¯</div><div class="line">arr.__proto__.constructor === $p.__proto__.constructor; // true</div><div class="line"></div><div class="line">// ä½¿ç”¨ instanceof éªŒè¯</div><div class="line">console.log( $p instanceof Array );  // false</div><div class="line">console.log(arr instanceof Array );  // false</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¦‚æœä½ ä»…ä»…æ˜¯æƒ³äº†è§£ä¸€ä¸‹zeptoçš„åŸç†ï¼Œä»¥ä¸Šè¿™äº›å†…å®¹åŸºæœ¬å¤Ÿç”¨äº†ï¼Œè‡³å°‘ä½ åœ¨å…¬å¸æ‹¿å®ƒåšä¸ªä¸€å°æ—¶çš„æŠ€æœ¯åˆ†äº«æ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<p>ä¸è¿‡ï¼Œä½ å¦‚æœæ„Ÿè§‰çœ‹åˆ°è¿™é‡Œå°±æ”¶è·é¢‡ä¸°ï¼Œé‚£ä¹ˆæˆ‘å»ºè®®ä½ ç»§ç»­è·Ÿç€æˆ‘å¾€ä¸‹çœ‹ï¼Œä½ ä¼šæ”¶è·æ›´å¤šæ›´å®ç”¨ä»·å€¼çš„ä¸œè¥¿ï¼</p>
<h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p>å°†zepto-coreçš„æºç ä¸‹è½½ä¸‹æ¥ï¼Œç„¶åçœ‹åˆ°æœ€å¤–å±‚çš„ç»“æ„æ˜¯è¿™æ ·çš„</p>
<p>é¦–å…ˆ<code>window.Zepto</code>å’Œ<code>window.$</code>éƒ½èµ‹å€¼äº†<code>Zepto</code>è¿™ä¸ªå˜é‡ï¼Œ<code>Zepto</code>æ˜¯ä¸ªè‡ªæ‰§è¡Œçš„åŒ¿åå‡½æ•°ï¼Œçœ‹æºä»£ç çš„æœ€åå‡ è¡Œï¼ŒåŒ¿åå‡½æ•°è¿”å›äº†<code>$</code>å˜é‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">return</span> $</div><div class="line">&#125;)()</div><div class="line"></div><div class="line"><span class="comment">// If `$` is not yet defined, point it to `Zepto`</span></div><div class="line"><span class="built_in">window</span>.Zepto = Zepto</div><div class="line"><span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto)</div></pre></td></tr></table></figure>
<p>è€Œä»£ç ä¸­æœ‰å¦‚ä¸‹å‡ è¡Œï¼Œè¯æ˜<code>Zepto</code>æœ€ç»ˆæ˜¯ä¸ªå‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> zepto.init(selector, context)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œåœ¨è¿è¡Œzeptoçš„é¡µé¢ä¸­æ¥éªŒè¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log( <span class="keyword">typeof</span> <span class="built_in">window</span>.$ ); <span class="comment">// 'function'</span></div></pre></td></tr></table></figure>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œç®€å•å†™æ¥ï¼Œè¿™ä¸ªç»“æ„å¯ä»¥ç®€å•æ¨¡æ‹Ÿæˆè¿™æ ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Zepto = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> $</div><div class="line"></div><div class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></div><div class="line"></div><div class="line">    $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> zepto.init(selector, context)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> $</div><div class="line">&#125;)()</div><div class="line"></div><div class="line"><span class="built_in">window</span>.Zepto = Zepto</div><div class="line"><span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto)</div></pre></td></tr></table></figure>
<p>è€Œä¸”ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ï¼Œå¹³å¸¸æˆ‘ä»¬<code>$(&#39;p&#39;)</code>ä½¿ç”¨zeptoçš„æ—¶å€™ï¼Œæœ€ç»ˆé¡ºè—¤æ‘¸ç“œä¼šæ‰§è¡Œåˆ°<code>$ = function(selector, context){</code>è¿™ä¸ªå‡½æ•°ä¸­ï¼ˆå…¶ä¸­çš„å†…å®¹å¯ä¸æ·±ç©¶ï¼‰ï¼Œè€Œ<code>p</code>è¿™ä¸ªé€‰æ‹©å™¨ä¹Ÿä¼šä¼ é€’ç»™<code>selector</code>å‚æ•°ã€‚è¿™æ˜¯æˆ‘ä»¬ä¸‹ä¸€èŠ‚è¦è®²è¿°çš„å†…å®¹ã€‚</p>
<h1 id="zepto-init-å‡½æ•°"><a href="#zepto-init-å‡½æ•°" class="headerlink" title="zepto.init å‡½æ•°"></a>zepto.init å‡½æ•°</h1><h2 id="å›é¡¾"><a href="#å›é¡¾" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h2><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬äº†è§£äº†zeptoä»£ç çš„æœ€ç¬¼ç»Ÿçš„ä¸€ä¸ªç»“æ„ï¼Œè€Œä¸”æ¨¡æ‹Ÿäº†ä¸€ä¸‹ä»£ç ã€‚å…¶å®å½“æ—¶è¿˜æ¼äº†ä¸€ç‚¹ï¼Œå°±æ˜¯ä»£ç é‡Œé¢æœ‰ä¸€ä¸ª<code>zepto</code>å˜é‡ä¸çŸ¥é“å“ªé‡Œå®šä¹‰çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Zepto = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> $,</div><div class="line">        zepto = &#123;&#125;</div><div class="line"></div><div class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></div><div class="line"></div><div class="line">    zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</div><div class="line">        <span class="comment">// å‡½æ•°å†…å®¹</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> zepto.init(selector, context)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> $</div><div class="line">&#125;)()</div><div class="line"></div><div class="line"><span class="built_in">window</span>.Zepto = Zepto</div><div class="line"><span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto)</div></pre></td></tr></table></figure>
<p>å³ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªzeptoå¯¹è±¡ä¾‹å¦‚æ‰§è¡Œ<code>$(&#39;p&#39;)</code>æ—¶ï¼Œä¼šè¿›å…¥<code>zepto.init</code>è¿™ä¸ªå‡½æ•°ï¼Œå¹¶å°†å‚æ•°ä¹Ÿå“åº”ä¼ é€’ã€‚æ¥ä¸‹æ¥å°±è¿›å…¥<code>zepto.init</code>çœ‹çœ‹è¿™ä¸ªå‡½æ•°ã€‚</p>
<h2 id="zepto-init-å‡½æ•°-1"><a href="#zepto-init-å‡½æ•°-1" class="headerlink" title="zepto.init å‡½æ•°"></a><code>zepto.init</code> å‡½æ•°</h2><p><code>zepto.init</code>å‡½æ•°å¤§çº¦æœ‰å‡ åè¡Œä»£ç ï¼ŒæŠŠä¸­é—´çš„é‚£äº›<code>if...else...</code>æ“ä½œå»æ‰ï¼Œå‰©ä¸‹çš„å°±æ˜¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> dom</div><div class="line"></div><div class="line">    <span class="comment">// ...æ­¤å¤„çœç•¥Nè¡Œ...</span></div><div class="line"></div><div class="line">    <span class="comment">// create a new Zepto collection from the nodes found</span></div><div class="line">    <span class="keyword">return</span> zepto.Z(dom, selector)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>ä¸­é—´çœç•¥çš„ä»£ç ï¼Œéƒ½æ˜¯æ ¹æ®ä¸åŒæ¡ä»¶ä¸‹å¯¹<code>dom</code>å˜é‡è¿›è¡Œèµ‹å€¼ã€‚<code>dom</code>ä»åå­—ä¹Ÿå¯ä»¥çŒœæµ‹å‡ºæ¥ï¼Œå®ƒå°†ä¼šèµ‹å€¼ä¸€ä¸ªæˆ–å¤šä¸ªDOMèŠ‚ç‚¹ã€‚æœ€ç»ˆï¼Œå®ƒå°†é€šè¿‡<code>selector</code>ä¸€èµ·ä¼ é€’ç»™<code>zepto.Z</code>å‡½æ•°å¹¶è¿”å›å€¼ã€‚</p>
<p>è‡³äº<code>zepto.Z</code>æ˜¯ä¸ªä»€ä¹ˆé¬¼æš‚ä¸”å…ˆä¸ç®¡ï¼Œå…ˆçœ‹çœ‹ä¸­é—´çœç•¥çš„ä»£ç æ˜¯ä»€ä¹ˆã€‚</p>
<ul>
<li><strong>æ— å‚æ•°ï¼Œå³$()</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If nothing given, return an empty Zepto collection</span></div><div class="line"><span class="keyword">if</span> (!selector) <span class="keyword">return</span> zepto.Z()</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°†è¿”å›ä¸€ä¸ªç©ºçš„zeptoé›†åˆï¼Œè¿˜æ˜¯äº¤ç»™<code>zepto.Z</code>æ¥å¤„ç†ï¼Œå…ˆä¸ç®¡ã€‚</p>
<ul>
<li><strong>selectorå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚$(â€˜pâ€™) $(â€˜â€™) $(â€˜#contentâ€™)</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">'string'</span>) &#123;</div><div class="line">  selector = selector.trim()</div><div class="line">  <span class="comment">// If it's a html fragment, create nodes from it</span></div><div class="line">  <span class="comment">// Note: In both Chrome 21 and Firefox 15, DOM error 12</span></div><div class="line">  <span class="comment">// is thrown if the fragment doesn't begin with &lt;</span></div><div class="line">  <span class="keyword">if</span> (selector[<span class="number">0</span>] == <span class="string">'&lt;'</span> &amp;&amp; fragmentRE.test(selector))</div><div class="line">    dom = zepto.fragment(selector, <span class="built_in">RegExp</span>.$<span class="number">1</span>, context), selector = <span class="literal">null</span></div><div class="line">  <span class="comment">// If there's a context, create a collection on that context first, and select</span></div><div class="line">  <span class="comment">// nodes from there</span></div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector)</div><div class="line">  <span class="comment">// If it's a CSS selector, use it to select nodes.</span></div><div class="line">  <span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ï¼Œå¦‚æœ<code>selector</code>æ˜¯å­—ç¬¦ä¸²ï¼Œæ¥ä¸‹æ¥ä¼šæœ‰ä¸‰ç§æƒ…å†µã€‚</p>
<p>æƒ…å†µ1ï¼Œå‚æ•°ä¸º<code>`è¿™ç§å½¢å¼ï¼Œå³æ˜¯ä¸€ä¸ªhtmlæ ‡ç­¾çš„ï¼Œé‚£ä¹ˆ</code>dom<code>å˜é‡ä¼šè¢«èµ‹å€¼ä¸ºç”¨è¿™ä¸ªæ ‡ç­¾åˆ›å»ºçš„DOMå¯¹è±¡ï¼Œå°±åƒ</code>dom = document.createElement(â€˜divâ€™)<code>å·®ä¸å¤šã€‚å…¶ä¸­æ¶‰åŠåˆ°äº†</code>fragmentRE<code>å’Œ</code>zepto.fragment`ä¸¤ä¸ªæˆ‘ä»¬å°šæœªäº†è§£çš„ä¸œä¸œï¼Œæ­¤å¤„ä¸è¦æ·±ç©¶ï¼ŒçŸ¥é“è¿™æ®µä»£ç çš„æ„æ€å³å¯ã€‚</p>
<p>æ³¨æ„ï¼Œé€šè¿‡æµ‹è¯•å‘ç°ï¼Œè¿™é‡Œç»™<code>dom</code>èµ‹å€¼çš„å…¶å®ä¸æ˜¯ä¸€ä¸ªdomèŠ‚ç‚¹å¯¹è±¡ï¼Œè€Œæ˜¯è¢«å°è£…ç§°äº†æ•°ç»„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If it's a html fragment, create nodes from it</span></div><div class="line"><span class="comment">// Note: In both Chrome 21 and Firefox 15, DOM error 12</span></div><div class="line"><span class="comment">// is thrown if the fragment doesn't begin with &lt;</span></div><div class="line"><span class="keyword">if</span> (selector[<span class="number">0</span>] == <span class="string">'&lt;'</span> &amp;&amp; fragmentRE.test(selector))</div><div class="line">  dom = zepto.fragment(selector, <span class="built_in">RegExp</span>.$<span class="number">1</span>, context), selector = <span class="literal">null</span></div></pre></td></tr></table></figure>
<p>æƒ…å†µ2ï¼Œå¦‚æœç¬¬äºŒä¸ªå‚æ•°æœ‰å€¼ï¼Œåˆ™å…ˆæ ¹æ®ç¬¬äºŒä¸ªå‚æ•°ç”Ÿæˆzeptoå¯¹è±¡ï¼Œç„¶åå†è°ƒç”¨<code>.find</code>æ¥è·å–ï¼Œä¾‹å¦‚<code>$(&#39;.item&#39;, &#39;#content&#39;)</code>è¿™ç§ç”¨æ³•ã€‚<code>find</code>æ–¹æ³•æ˜¯zeptoå¯¹è±¡çš„ä¸€ä¸ªå‡½æ•°ï¼ŒAPIä¸­ç”¨æ³•çš„ä»‹ç»ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If there's a context, create a collection on that context first, and select</span></div><div class="line"><span class="comment">// nodes from there</span></div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector)</div></pre></td></tr></table></figure>
<p>æƒ…å†µ3ï¼Œä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½ä¸æ˜¯ï¼Œåˆ™è°ƒç”¨<code>zepto.qsa</code>æ¥è·å–æ•°æ®ï¼Œåæ¥èŠè¿™ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°ã€‚<code>qsa</code>å³<code>querySelectAll</code>çš„ç¼©å†™ï¼Œçœ‹åå­—èƒ½å¤§ä½“æ˜ç™½äº†å§ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If it's a CSS selector, use it to select nodes.</span></div><div class="line"><span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector)</div></pre></td></tr></table></figure>
<ul>
<li><strong>selectorå‚æ•°æ˜¯å‡½æ•°ï¼Œä¾‹å¦‚$(function(){â€¦})</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If a function is given, call it when the DOM is ready</span></div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (isFunction(selector)) <span class="keyword">return</span> $(<span class="built_in">document</span>).ready(selector)</div></pre></td></tr></table></figure>
<p>è¿™ç§ç”¨æ³•ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œæ„æ€æ˜¯å¾…domåŠ è½½å®Œæ¯•å†æ‰§è¡Œå‡½æ•°ã€‚è¿™ä¸ª<code>ready</code>å‡½æ•°çš„å…·ä½“å®ç°åé¢ä¼šè®²åˆ°ï¼Œè¿™é‡Œå…ˆçŸ¥é“æ„æ€å³å¯ã€‚</p>
<ul>
<li><strong>selectoræœ¬èº«å°±æ˜¯ä¸ªzeptoå¯¹è±¡</strong></li>
</ul>
<p>è¿™ç§ç”¨æ³•æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½é¿å…ï¼Œä¾‹å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = $(<span class="string">'p'</span>);</div><div class="line">$(a);  <span class="comment">// è¿™é‡Œä¼ å…¥çš„ a æœ¬èº«å°±æ˜¯ä¸ª zepto å¯¹è±¡äº†ã€‚</span></div></pre></td></tr></table></figure>
<p>æºç ä¸­ä½¿ç”¨<code>zepto.isZ</code>æ¥åˆ¤æ–­ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œç›´æ¥å°±è¿”å›è‡ªèº«ã€‚<code>zepto.isZ</code>çš„å®ç°å¾ˆç®€å•ï¼Œçœ‹æºç å³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If a Zepto collection is given, just return it</span></div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (zepto.isZ(selector)) <span class="keyword">return</span> selector</div></pre></td></tr></table></figure>
<ul>
<li><strong>å…¶ä»–æƒ…å†µ</strong></li>
</ul>
<p>å½“ä»¥ä¸Šæƒ…å†µéƒ½ä¸ç¬¦åˆçš„æ—¶å€™ï¼Œå³<code>selector</code>å‚æ•°æ—¢ä¸æ˜¯ç©ºã€ä¹Ÿä¸æ˜¯å­—ç¬¦ä¸²ã€ä¹Ÿä¸æ˜¯å‡½æ•°çš„æ—¶å€™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">  <span class="comment">// normalize array if an array of nodes is given</span></div><div class="line">  <span class="keyword">if</span> (isArray(selector)) dom = compact(selector)</div><div class="line">  <span class="comment">// Wrap DOM nodes.</span></div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (isObject(selector))</div><div class="line">    dom = [selector], selector = <span class="literal">null</span></div><div class="line">  <span class="comment">// If it's a html fragment, create nodes from it</span></div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (fragmentRE.test(selector))</div><div class="line">    dom = zepto.fragment(selector.trim(), <span class="built_in">RegExp</span>.$<span class="number">1</span>, context), selector = <span class="literal">null</span></div><div class="line">  <span class="comment">// If there's a context, create a collection on that context first, and select</span></div><div class="line">  <span class="comment">// nodes from there</span></div><div class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector)</div><div class="line">  <span class="comment">// And last but no least, if it's a CSS selector, use it to select nodes.</span></div><div class="line">  <span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æƒ…å†µ1ï¼Œ<code>selector</code>å‚æ•°æ˜¯æ•°ç»„ï¼Œåˆ™é€šè¿‡ä¸€ä¸ª<code>compact</code>å¤„ç†ä¸€ä¸‹èµ‹å€¼ç»™<code>dom</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// normalize array if an array of nodes is given</span></div><div class="line"><span class="keyword">if</span> (isArray(selector)) dom = compact(selector)</div></pre></td></tr></table></figure>
<p>æƒ…å†µ2ï¼Œ<code>selector</code>å‚æ•°æ˜¯DOMèŠ‚ç‚¹ï¼Œåˆ™å°†å®ƒä½œä¸ºæ•°ç»„èµ‹å€¼ç»™<code>dom</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Wrap DOM nodes.</span></div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (isObject(selector))</div><div class="line">  dom = [selector], selector = <span class="literal">null</span></div></pre></td></tr></table></figure>
<p>å‰©ä½™æƒ…å†µï¼Œå…¶å®åœ¨<code>selector</code>æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™å°±å·²ç»è€ƒè™‘åˆ°äº†ï¼Œå› æ­¤æ„Ÿè§‰è¿™é‡Œå¤šä½™äº†ã€‚ä¸è¿‡ä¹Ÿå¯èƒ½æ˜¯æˆ‘è€ƒè™‘ä¸å‘¨åˆ°ï¼Œæœ‰ç–æ¼çš„åœ°æ–¹ï¼Œå¦‚æœè°å‘ç°äº†è¿˜æœ›ä¸åèµæ•™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// If it's a html fragment, create nodes from it</span></div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (fragmentRE.test(selector))</div><div class="line">  dom = zepto.fragment(selector.trim(), <span class="built_in">RegExp</span>.$<span class="number">1</span>, context), selector = <span class="literal">null</span></div><div class="line"><span class="comment">// If there's a context, create a collection on that context first, and select</span></div><div class="line"><span class="comment">// nodes from there</span></div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector)</div><div class="line"><span class="comment">// And last but no least, if it's a CSS selector, use it to select nodes.</span></div><div class="line"><span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector)</div></pre></td></tr></table></figure>
<p><strong>è¿™é‡Œè¯·æ³¨æ„ï¼Œè™½ç„¶æœ‰äº›å¤„ç†å‡½æ•°è¿™ä¸€èŠ‚æ²¡æœ‰è¯¦ç»†çœ‹ä»£ç å®ç°ï¼Œä½†æ˜¯æœ€ç»ˆï¼Œèµ‹å€¼ç»™domçš„å½¢å¼æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚å°±åƒè¿™æ®µä»£ç </strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Wrap DOM nodes.</span></div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (isObject(selector))</div><div class="line">  dom = [selector], selector = <span class="literal">null</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥é’ˆå¯¹ä¸åŒæƒ…å†µçš„<code>selector</code>ï¼Œè·Ÿè¸ªä»£ç çœ‹ä¸€ä¸‹ã€‚</p>
<h2 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>zepto.init</code>å‡½æ•°ç®—æ˜¯zeptoæºç ä¸­æ¯”è¾ƒå¤æ‚çš„ä¸€ä¸ªå‡½æ•°ï¼Œä¸€å¼€ç¯‡å°±é‡åˆ°äº†ä¸ªç¡¬éª¨å¤´ã€‚ä¸è¿‡æˆ‘ä»¬è¿™é‡Œæš‚ä¸”å…ˆæŠŠé‚£äº›åˆ†å‰æ”¾åœ¨ä¸€è¾¹ï¼Œå…ˆæŠŠå¤§è·¯ç–é€šï¼Œç„¶ååœ¨æ…¢æ…¢çš„å»ä¸€ä¸ªä¸€ä¸ªæ”»ç ´é‚£äº›åˆ†å‰ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æŠŠ<code>init</code>å‡½æ•°çš„ç»“æ„æ¢³ç†ä¸€ä¸‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> dom</div><div class="line"></div><div class="line">    <span class="comment">// åˆ†æƒ…å†µå¯¹domèµ‹å€¼ï¼š</span></div><div class="line">    <span class="comment">// 1. selector ä¸ºç©º</span></div><div class="line">    <span class="comment">// 2. selector æ˜¯å­—ç¬¦ä¸²ï¼Œå…¶ä¸­åˆåˆ†å¥½å‡ ç§æƒ…å†µ</span></div><div class="line">    <span class="comment">// 3. selector æ˜¯å‡½æ•°</span></div><div class="line">    <span class="comment">// 4. å…¶ä»–æƒ…å†µï¼Œä¾‹å¦‚ selector æ˜¯æ•°ç»„ã€å¯¹è±¡ç­‰</span></div><div class="line"></div><div class="line">    <span class="comment">// create a new Zepto collection from the nodes found</span></div><div class="line">    <span class="keyword">return</span> zepto.Z(dom, selector)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="zepto-Z-å‡½æ•°"><a href="#zepto-Z-å‡½æ•°" class="headerlink" title="zepto.Z å‡½æ•°"></a>zepto.Z å‡½æ•°</h1><p>åªè¦è¿˜èƒ½å¾€å‰èµ°ï¼Œå°±å…ˆèµ°ç€ï¼Œé‚£äº›å²”é“å›å¤´å†è¯´ã€‚åªè¦æ€è·¯æ‹é¡ºäº†ï¼Œé‚£äº›é›¶ç¢çš„é—®é¢˜ï¼Œéƒ½ä¸æ˜¯é—®é¢˜ã€‚</p>
<h2 id="zepto-Z-å‡½æ•°-1"><a href="#zepto-Z-å‡½æ•°-1" class="headerlink" title="zepto.Z å‡½æ•°"></a><code>zepto.Z</code> å‡½æ•°</h2><p>ä¸Šä¸€èŠ‚äº†è§£åˆ°<code>zepto.init</code>å‡½æ•°ä¸­ï¼Œæœ€ç»ˆåˆå°†æ•°æ®ä¼ é€’ç»™äº†<code>zepto.Z</code>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°å…¶å®éå¸¸ç®€å•ï¼Œå¦‚æœä½ çœ‹ä¸æ‡‚ï¼Œå¯èƒ½æ˜¯å¿˜è®°ä¹‹å‰è®²è¿‡çš„åŸå‹é“¾çš„çŸ¥è¯†äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// `$.zepto.Z` swaps out the prototype of the given `dom` array</span></div><div class="line"><span class="comment">// of nodes with `$.fn` and thus supplying all the Zepto functions</span></div><div class="line"><span class="comment">// to the array. Note that `__proto__` is not supported on Internet</span></div><div class="line"><span class="comment">// Explorer. This method can be overriden in plugins.</span></div><div class="line">zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</div><div class="line">  dom = dom || []</div><div class="line">  dom.__proto__ = $.fn</div><div class="line">  dom.selector = selector || <span class="string">''</span></div><div class="line">  <span class="keyword">return</span> dom</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç ä¸­ï¼Œ<code>dom</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”æŠŠå®ƒçš„éšå¼åŸå‹èµ‹å€¼<code>$.fn</code>ï¼Œè€Œè¿™é‡Œçš„<code>$.fn</code>å…¶å®å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„jså¯¹è±¡ï¼ˆé©¬ä¸Šè¦è¯´ï¼‰ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰è®²è¿°jsåŸå‹é“¾çš„æ—¶å€™ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<hr>
<p><strong>PSï¼šåæ¥å‘ç°ï¼Œæœ€æ–°çš„zepto.Zå®ç°ä¸Šç›®å‰ä¸ä¸€æ ·ï¼Œåˆ°æœ€åå†ç»™å¤§å®¶èŠèŠè¿™äº‹å„¿ã€‚ä¸è¿‡è¿™ä¸æ¯«ä¸å½±å“å…¶ä»–ä»£ç çš„è®²è§£ï¼Œè¯·æ”¾å¿ƒ</strong></p>
<h2 id="fnæ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ"><a href="#fnæ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ" class="headerlink" title="$.fnæ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ"></a><code>$.fn</code>æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼Ÿ</h2><p>æˆ‘ä»¬åœ¨ä¹‹å‰çš„ç« èŠ‚è¯´è¿‡ï¼Œ<code>$</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå³</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> zepto.init(selector, context)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è€Œå‡½æ•°ä¹Ÿåƒå¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥éšä¾¿å®šä¹‰å±æ€§èµ‹å€¼çš„ã€‚ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œæ¯ä¸ªå‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ªå†…ç½®çš„<code>prototype</code>å±æ€§ï¼Œè¿™æ˜¯å†…ç½®çš„ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå®Œå…¨å¯ä»¥çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$.fn = &#123;</div><div class="line">    a: 100</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>è€Œzeptoæºç ä¸­ï¼Œ<code>$.fn</code>æ˜¯è¿™æ ·èµ‹å€¼çš„ï¼Œå¯ä»¥å»æºç ä¸­æŒ¨ä¸ªçœ‹çœ‹å…¶ä¸­çš„å±æ€§ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-03_5778a76cc9f98.png" alt="img"></p>
<p>æˆ‘ä»¬ä¹‹å‰æ¨¡æ‹Ÿè¿‡ä¸€ä¸ªzeptoè®¾è®¡çš„ä»£ç ï¼Œè¿˜è®°å¾—å§ã€‚æˆ‘ä»¬ä»£ç åˆ†æåˆ°è¿™é‡Œï¼Œä½ å¯ä»¥å‘ç°ï¼Œzeptoçš„æºç å®ç°ï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰æ¨¡æ‹Ÿçš„ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p><em>å½“ç„¶ï¼Œä¹‹å‰çš„æ¨¡æ‹Ÿæ˜¯æˆ‘æ•…æ„é‚£ä¹ˆåšçš„ï¼Œç›®çš„æ˜¯ä¸ºäº†å°†å¤§å®¶æ›´å®¹æ˜“çš„å¸¦å…¥è¿›æ¥</em></p>
<h1 id="å›é¡¾-1"><a href="#å›é¡¾-1" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h1><p>æºç åˆ†æåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä»£ç ç»“æ„å¯¹ä¹‹å‰çš„å·¥ä½œåšä¸€ä¸ªæ€»ç»“ã€‚å¹¶ä¸”æ ¹æ®è¿™ä¸ªç»“æ„ï¼ŒæŠŠåˆå§‹åŒ–ä¸€ä¸ªzeptoå¯¹è±¡çš„è¿‡ç¨‹åœ¨æ‹ä¸€æ‹ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764d9fab9.png" alt="img"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Zepto = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> $,</div><div class="line">        zepto = &#123;&#125;</div><div class="line"></div><div class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></div><div class="line"></div><div class="line">    zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</div><div class="line">      dom = dom || []</div><div class="line">      dom.__proto__ = $.fn</div><div class="line">      dom.selector = selector || <span class="string">''</span></div><div class="line">      <span class="keyword">return</span> dom</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> dom</div><div class="line"></div><div class="line">        <span class="comment">// é’ˆå¯¹å‚æ•°æƒ…å†µï¼Œåˆ†åˆ«å¯¹domèµ‹å€¼</span></div><div class="line"></div><div class="line">        <span class="comment">// æœ€ç»ˆè°ƒç”¨ zepto.Z è¿”å›çš„æ•°æ®</span></div><div class="line">        <span class="keyword">return</span> zepto.Z(dom, selector)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> zepto.init(selector, context)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    $.fn = &#123;</div><div class="line">        <span class="comment">// é‡Œé¢æœ‰è‹¥å¹²ä¸ªå·¥å…·å‡½æ•°</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// ...çœç•¥Nè¡Œä»£ç ...</span></div><div class="line"></div><div class="line">    <span class="keyword">return</span> $</div><div class="line">&#125;)()</div><div class="line"></div><div class="line"><span class="built_in">window</span>.Zepto = Zepto</div><div class="line"><span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto)</div></pre></td></tr></table></figure>
<h1 id="æœ€æ–°çš„zepto-Zå‡½æ•°"><a href="#æœ€æ–°çš„zepto-Zå‡½æ•°" class="headerlink" title="æœ€æ–°çš„zepto.Zå‡½æ•°"></a>æœ€æ–°çš„zepto.Zå‡½æ•°</h1><h2 id="æ–°æ—§å¯¹æ¯”"><a href="#æ–°æ—§å¯¹æ¯”" class="headerlink" title="æ–°æ—§å¯¹æ¯”"></a>æ–°æ—§å¯¹æ¯”</h2><p>åœ¨å‡†å¤‡è¯¾ç¨‹çš„è¿™ä¸ªæ—¶é—´ <a href="https://github.com/madrobby/zepto/blob/master/src/zepto.js#files" target="_blank" rel="external">https://github.com/madrobby/zepto/blob/master/src/zepto.js#files</a> å…¶ä¸­çš„ä»£ç ä¸­ï¼Œ<code>zepto.Z</code>æ˜¯è¿™æ ·å®ç°çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Z</span>(<span class="params">dom, selector</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> i, len = dom ? dom.length : <span class="number">0</span></div><div class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) <span class="keyword">this</span>[i] = dom[i]</div><div class="line">  <span class="keyword">this</span>.length = len</div><div class="line">  <span class="keyword">this</span>.selector = selector || <span class="string">''</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// `$.zepto.Z` swaps out the prototype of the given `dom` array</span></div><div class="line"><span class="comment">// of nodes with `$.fn` and thus supplying all the Zepto functions</span></div><div class="line"><span class="comment">// to the array. This method can be overridden in plugins.</span></div><div class="line">zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Z(dom, selector)</div><div class="line">&#125;</div><div class="line"></div><div class="line">$.fn = &#123;</div><div class="line">  <span class="comment">// ...å¾ˆå¤šå±æ€§...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">zepto.Z.prototype = Z.prototype = $.fn</div></pre></td></tr></table></figure>
<p>å†æŠŠä¹‹å‰çš„æ‹¿å‡ºæ¥å¯¹æ¯”ä¸€ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// `$.zepto.Z` swaps out the prototype of the given `dom` array</span></div><div class="line"><span class="comment">// of nodes with `$.fn` and thus supplying all the Zepto functions</span></div><div class="line"><span class="comment">// to the array. Note that `__proto__` is not supported on Internet</span></div><div class="line"><span class="comment">// Explorer. This method can be overriden in plugins.</span></div><div class="line">zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</div><div class="line">  dom = dom || []</div><div class="line">  dom.__proto__ = $.fn</div><div class="line">  dom.selector = selector || <span class="string">''</span></div><div class="line">  <span class="keyword">return</span> dom</div><div class="line">&#125;</div><div class="line"></div><div class="line">$.fn = &#123;</div><div class="line">  <span class="comment">// ...å¾ˆå¤šå±æ€§...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ä¸¤è€…çš„å¼‚åŒ"><a href="#ä¸¤è€…çš„å¼‚åŒ" class="headerlink" title="ä¸¤è€…çš„å¼‚åŒ"></a>ä¸¤è€…çš„å¼‚åŒ</h2><p>ç¬¬äºŒç§å®ç°æ–¹å¼æˆ‘ä»¬å·²ç»è®²å®Œäº†ï¼Œæœ€ç»ˆå®ƒè¿”å›çš„ä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”å¼ºåˆ¶å°†<code>__proto__</code>ä¿®æ”¹ä¸º<code>$.fn</code>è¿™ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªä¿®æ”¹å‘ç”Ÿåœ¨å¯¹è±¡ä¸Šï¼Œä¿®æ”¹çš„éšå¼åŸå‹ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764d9fab9.png" alt="img"></p>
<p>è€Œç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼Œæ˜¯ç›´æ¥å°†æ„é€ å‡½æ•°çš„åŸå‹ä¿®æ”¹äº†ï¼Œå³ <code>Z.prototype = $.fn</code>ï¼Œç»è¿‡è¿™æ ·ä¸€æ”¹ï¼Œæ„é€ å‡½æ•°å†<code>new</code>å‡ºæ¥çš„å¯¹è±¡çš„éšå¼åŸå‹<code>__proto__</code>è‡ªç„¶å°±æŒ‡å‘äº†<code>$.fn</code>ã€‚</p>
<p><img src="http://box.kancloud.cn/2016-07-04_577a764dc04f6.png" alt="img"></p>
<p>å¦å¤–ï¼Œç¬¬ä¸€ç§æ–¹å¼è¿”å›çš„æ˜¯ä¸€ä¸ª<code>å¯¹è±¡æ•°ç»„</code>ï¼Œè€Œç¬¬äºŒç§è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ä½•è°“å¯¹è±¡æ•°ç»„ï¼Ÿâ€”â€”å³å¯ä»¥æ¨¡æ‹Ÿè¿›è¡Œæ•°ç»„æ“ä½œçš„å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> objArray = &#123;</div><div class="line">    <span class="number">0</span>: <span class="string">'abc'</span>,</div><div class="line">    <span class="number">1</span>: <span class="string">'bcd'</span>,</div><div class="line">    <span class="number">2</span>: <span class="string">'cde'</span>,</div><div class="line">    <span class="attr">length</span>: <span class="number">3</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( objArray[<span class="number">1</span>] )</div><div class="line"><span class="built_in">console</span>.log( objArray.length )</div></pre></td></tr></table></figure>
<p>é‚£ä¸ºä½•ä¸ç”¨æ•°ç»„ï¼Œè€Œç”¨å¯¹è±¡æ•°ç»„ï¼Ÿâ€”â€”å¯¹è±¡æœ¬è´¨ä¸Šæ›´åŠ çµæ´»ã€ç›´è§‚ï¼Œä¾‹å¦‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">objArray.selector = <span class="string">''</span>;</div></pre></td></tr></table></figure>
<h1 id="é™„ï¼šzepto-core-1-1-6-æºç æ³¨é‡Š"><a href="#é™„ï¼šzepto-core-1-1-6-æºç æ³¨é‡Š" class="headerlink" title="é™„ï¼šzepto-core-1.1.6 æºç æ³¨é‡Š"></a>é™„ï¼šzepto-core-1.1.6 æºç æ³¨é‡Š</h1><h2 id="æ˜¯å¦æœ‰å¿…è¦è®²è§£æ•´ä¸ªæºç ï¼Ÿ"><a href="#æ˜¯å¦æœ‰å¿…è¦è®²è§£æ•´ä¸ªæºç ï¼Ÿ" class="headerlink" title="æ˜¯å¦æœ‰å¿…è¦è®²è§£æ•´ä¸ªæºç ï¼Ÿ"></a>æ˜¯å¦æœ‰å¿…è¦è®²è§£æ•´ä¸ªæºç ï¼Ÿ</h2><p>æˆ‘ä¸ªäººè§‰å¾—æºç è¿˜å¾—é è‡ªå·±æ¥çœ‹ï¼Œä½†æ˜¯è‡ªå·±ç›´æ¥çœ‹æºç ä¼šæœ‰ç‚¹æ™•å¤´è½¬å‘ï¼Œå› æ­¤æœ¬æ•™ç¨‹åˆ†æäº†æ•´ä¸ªä»£ç çš„è®¾è®¡æ€æƒ³ï¼Œè¿™æ ·å†è¯»èµ·æ¥å°±æ–¹ä¾¿äº†ã€‚</p>
<p>ä¸è¿‡å¦‚æœå¤§éƒ¨åˆ†åŒå­¦è§‰å¾—æœ‰å¿…è¦æŠŠæºç å†åˆ†æä¸€éï¼Œæˆ‘å¯èƒ½ä¼šå‡†å¤‡è¿™æ ·ä¸€ä»½æ•™ç¨‹ç»™å¤§å®¶åˆ†äº«ã€‚</p>
<h2 id="æºç æ³¨è§†"><a href="#æºç æ³¨è§†" class="headerlink" title="æºç æ³¨è§†"></a>æºç æ³¨è§†</h2><p>ä»¥ä¸‹æ˜¯æˆ‘è¯»å®Œäº†å¹¶å†™äº†æ³¨é‡Šäº†zepto core æ¨¡å—çš„æºç ï¼Œå¦‚æœæ‚¨æƒ³ç»§ç»­é˜…è¯»å…¶ä»–æºç ï¼Œå¯å‚é˜…ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div><div class="line">942</div><div class="line">943</div><div class="line">944</div><div class="line">945</div><div class="line">946</div><div class="line">947</div><div class="line">948</div><div class="line">949</div><div class="line">950</div><div class="line">951</div><div class="line">952</div><div class="line">953</div><div class="line">954</div><div class="line">955</div><div class="line">956</div><div class="line">957</div><div class="line">958</div><div class="line">959</div><div class="line">960</div><div class="line">961</div><div class="line">962</div><div class="line">963</div><div class="line">964</div><div class="line">965</div><div class="line">966</div><div class="line">967</div><div class="line">968</div><div class="line">969</div><div class="line">970</div><div class="line">971</div><div class="line">972</div><div class="line">973</div><div class="line">974</div><div class="line">975</div><div class="line">976</div><div class="line">977</div><div class="line">978</div><div class="line">979</div><div class="line">980</div><div class="line">981</div><div class="line">982</div><div class="line">983</div><div class="line">984</div><div class="line">985</div><div class="line">986</div><div class="line">987</div><div class="line">988</div><div class="line">989</div><div class="line">990</div><div class="line">991</div><div class="line">992</div><div class="line">993</div><div class="line">994</div><div class="line">995</div><div class="line">996</div><div class="line">997</div><div class="line">998</div><div class="line">999</div><div class="line">1000</div><div class="line">1001</div><div class="line">1002</div><div class="line">1003</div><div class="line">1004</div><div class="line">1005</div><div class="line">1006</div><div class="line">1007</div><div class="line">1008</div><div class="line">1009</div><div class="line">1010</div><div class="line">1011</div><div class="line">1012</div><div class="line">1013</div><div class="line">1014</div><div class="line">1015</div><div class="line">1016</div><div class="line">1017</div><div class="line">1018</div><div class="line">1019</div><div class="line">1020</div><div class="line">1021</div><div class="line">1022</div><div class="line">1023</div><div class="line">1024</div><div class="line">1025</div><div class="line">1026</div><div class="line">1027</div><div class="line">1028</div><div class="line">1029</div><div class="line">1030</div><div class="line">1031</div><div class="line">1032</div><div class="line">1033</div><div class="line">1034</div><div class="line">1035</div><div class="line">1036</div><div class="line">1037</div><div class="line">1038</div><div class="line">1039</div><div class="line">1040</div><div class="line">1041</div><div class="line">1042</div><div class="line">1043</div><div class="line">1044</div><div class="line">1045</div><div class="line">1046</div><div class="line">1047</div><div class="line">1048</div><div class="line">1049</div><div class="line">1050</div><div class="line">1051</div><div class="line">1052</div><div class="line">1053</div><div class="line">1054</div><div class="line">1055</div><div class="line">1056</div><div class="line">1057</div><div class="line">1058</div><div class="line">1059</div><div class="line">1060</div><div class="line">1061</div><div class="line">1062</div><div class="line">1063</div><div class="line">1064</div><div class="line">1065</div><div class="line">1066</div><div class="line">1067</div><div class="line">1068</div><div class="line">1069</div><div class="line">1070</div><div class="line">1071</div><div class="line">1072</div><div class="line">1073</div><div class="line">1074</div><div class="line">1075</div><div class="line">1076</div><div class="line">1077</div><div class="line">1078</div><div class="line">1079</div><div class="line">1080</div><div class="line">1081</div><div class="line">1082</div><div class="line">1083</div><div class="line">1084</div><div class="line">1085</div><div class="line">1086</div><div class="line">1087</div><div class="line">1088</div><div class="line">1089</div><div class="line">1090</div><div class="line">1091</div><div class="line">1092</div><div class="line">1093</div><div class="line">1094</div><div class="line">1095</div><div class="line">1096</div><div class="line">1097</div><div class="line">1098</div><div class="line">1099</div><div class="line">1100</div><div class="line">1101</div><div class="line">1102</div><div class="line">1103</div><div class="line">1104</div><div class="line">1105</div><div class="line">1106</div><div class="line">1107</div><div class="line">1108</div><div class="line">1109</div><div class="line">1110</div><div class="line">1111</div><div class="line">1112</div><div class="line">1113</div><div class="line">1114</div><div class="line">1115</div><div class="line">1116</div><div class="line">1117</div><div class="line">1118</div><div class="line">1119</div><div class="line">1120</div><div class="line">1121</div><div class="line">1122</div><div class="line">1123</div><div class="line">1124</div><div class="line">1125</div><div class="line">1126</div><div class="line">1127</div><div class="line">1128</div><div class="line">1129</div><div class="line">1130</div><div class="line">1131</div><div class="line">1132</div><div class="line">1133</div><div class="line">1134</div><div class="line">1135</div><div class="line">1136</div><div class="line">1137</div><div class="line">1138</div><div class="line">1139</div><div class="line">1140</div><div class="line">1141</div><div class="line">1142</div><div class="line">1143</div><div class="line">1144</div><div class="line">1145</div><div class="line">1146</div><div class="line">1147</div><div class="line">1148</div><div class="line">1149</div><div class="line">1150</div><div class="line">1151</div><div class="line">1152</div><div class="line">1153</div><div class="line">1154</div><div class="line">1155</div><div class="line">1156</div><div class="line">1157</div><div class="line">1158</div><div class="line">1159</div><div class="line">1160</div><div class="line">1161</div><div class="line">1162</div><div class="line">1163</div><div class="line">1164</div><div class="line">1165</div><div class="line">1166</div><div class="line">1167</div><div class="line">1168</div><div class="line">1169</div><div class="line">1170</div><div class="line">1171</div><div class="line">1172</div><div class="line">1173</div><div class="line">1174</div><div class="line">1175</div><div class="line">1176</div><div class="line">1177</div><div class="line">1178</div><div class="line">1179</div><div class="line">1180</div><div class="line">1181</div><div class="line">1182</div><div class="line">1183</div><div class="line">1184</div><div class="line">1185</div><div class="line">1186</div><div class="line">1187</div><div class="line">1188</div><div class="line">1189</div><div class="line">1190</div><div class="line">1191</div><div class="line">1192</div><div class="line">1193</div><div class="line">1194</div><div class="line">1195</div><div class="line">1196</div><div class="line">1197</div><div class="line">1198</div><div class="line">1199</div><div class="line">1200</div><div class="line">1201</div><div class="line">1202</div><div class="line">1203</div><div class="line">1204</div><div class="line">1205</div><div class="line">1206</div><div class="line">1207</div><div class="line">1208</div><div class="line">1209</div><div class="line">1210</div><div class="line">1211</div><div class="line">1212</div><div class="line">1213</div><div class="line">1214</div><div class="line">1215</div><div class="line">1216</div><div class="line">1217</div><div class="line">1218</div><div class="line">1219</div><div class="line">1220</div><div class="line">1221</div><div class="line">1222</div><div class="line">1223</div><div class="line">1224</div><div class="line">1225</div><div class="line">1226</div><div class="line">1227</div><div class="line">1228</div><div class="line">1229</div><div class="line">1230</div><div class="line">1231</div><div class="line">1232</div><div class="line">1233</div><div class="line">1234</div><div class="line">1235</div><div class="line">1236</div><div class="line">1237</div><div class="line">1238</div><div class="line">1239</div><div class="line">1240</div><div class="line">1241</div><div class="line">1242</div><div class="line">1243</div><div class="line">1244</div><div class="line">1245</div><div class="line">1246</div><div class="line">1247</div><div class="line">1248</div><div class="line">1249</div><div class="line">1250</div><div class="line">1251</div><div class="line">1252</div><div class="line">1253</div><div class="line">1254</div><div class="line">1255</div><div class="line">1256</div><div class="line">1257</div><div class="line">1258</div><div class="line">1259</div><div class="line">1260</div><div class="line">1261</div><div class="line">1262</div><div class="line">1263</div><div class="line">1264</div><div class="line">1265</div><div class="line">1266</div><div class="line">1267</div><div class="line">1268</div><div class="line">1269</div><div class="line">1270</div><div class="line">1271</div><div class="line">1272</div><div class="line">1273</div><div class="line">1274</div><div class="line">1275</div><div class="line">1276</div><div class="line">1277</div><div class="line">1278</div><div class="line">1279</div><div class="line">1280</div><div class="line">1281</div><div class="line">1282</div><div class="line">1283</div><div class="line">1284</div><div class="line">1285</div><div class="line">1286</div><div class="line">1287</div><div class="line">1288</div><div class="line">1289</div><div class="line">1290</div><div class="line">1291</div><div class="line">1292</div><div class="line">1293</div><div class="line">1294</div><div class="line">1295</div><div class="line">1296</div><div class="line">1297</div><div class="line">1298</div><div class="line">1299</div><div class="line">1300</div><div class="line">1301</div><div class="line">1302</div><div class="line">1303</div><div class="line">1304</div><div class="line">1305</div><div class="line">1306</div><div class="line">1307</div><div class="line">1308</div><div class="line">1309</div><div class="line">1310</div><div class="line">1311</div><div class="line">1312</div><div class="line">1313</div><div class="line">1314</div><div class="line">1315</div><div class="line">1316</div><div class="line">1317</div><div class="line">1318</div><div class="line">1319</div><div class="line">1320</div><div class="line">1321</div><div class="line">1322</div><div class="line">1323</div><div class="line">1324</div><div class="line">1325</div><div class="line">1326</div><div class="line">1327</div><div class="line">1328</div><div class="line">1329</div><div class="line">1330</div><div class="line">1331</div><div class="line">1332</div><div class="line">1333</div><div class="line">1334</div><div class="line">1335</div><div class="line">1336</div><div class="line">1337</div><div class="line">1338</div><div class="line">1339</div><div class="line">1340</div><div class="line">1341</div><div class="line">1342</div><div class="line">1343</div><div class="line">1344</div><div class="line">1345</div><div class="line">1346</div><div class="line">1347</div><div class="line">1348</div><div class="line">1349</div><div class="line">1350</div><div class="line">1351</div><div class="line">1352</div><div class="line">1353</div><div class="line">1354</div><div class="line">1355</div><div class="line">1356</div><div class="line">1357</div><div class="line">1358</div><div class="line">1359</div><div class="line">1360</div><div class="line">1361</div><div class="line">1362</div><div class="line">1363</div><div class="line">1364</div><div class="line">1365</div><div class="line">1366</div><div class="line">1367</div><div class="line">1368</div><div class="line">1369</div><div class="line">1370</div><div class="line">1371</div><div class="line">1372</div><div class="line">1373</div><div class="line">1374</div><div class="line">1375</div><div class="line">1376</div><div class="line">1377</div><div class="line">1378</div><div class="line">1379</div><div class="line">1380</div><div class="line">1381</div><div class="line">1382</div><div class="line">1383</div><div class="line">1384</div><div class="line">1385</div><div class="line">1386</div><div class="line">1387</div><div class="line">1388</div><div class="line">1389</div><div class="line">1390</div><div class="line">1391</div><div class="line">1392</div><div class="line">1393</div><div class="line">1394</div><div class="line">1395</div><div class="line">1396</div><div class="line">1397</div><div class="line">1398</div><div class="line">1399</div><div class="line">1400</div><div class="line">1401</div><div class="line">1402</div><div class="line">1403</div><div class="line">1404</div><div class="line">1405</div><div class="line">1406</div><div class="line">1407</div><div class="line">1408</div><div class="line">1409</div><div class="line">1410</div><div class="line">1411</div><div class="line">1412</div><div class="line">1413</div><div class="line">1414</div><div class="line">1415</div><div class="line">1416</div><div class="line">1417</div><div class="line">1418</div><div class="line">1419</div><div class="line">1420</div><div class="line">1421</div><div class="line">1422</div><div class="line">1423</div><div class="line">1424</div><div class="line">1425</div><div class="line">1426</div><div class="line">1427</div><div class="line">1428</div><div class="line">1429</div><div class="line">1430</div><div class="line">1431</div><div class="line">1432</div><div class="line">1433</div><div class="line">1434</div><div class="line">1435</div><div class="line">1436</div><div class="line">1437</div><div class="line">1438</div><div class="line">1439</div><div class="line">1440</div><div class="line">1441</div><div class="line">1442</div><div class="line">1443</div><div class="line">1444</div><div class="line">1445</div><div class="line">1446</div><div class="line">1447</div><div class="line">1448</div><div class="line">1449</div><div class="line">1450</div><div class="line">1451</div><div class="line">1452</div><div class="line">1453</div><div class="line">1454</div><div class="line">1455</div><div class="line">1456</div><div class="line">1457</div><div class="line">1458</div><div class="line">1459</div><div class="line">1460</div><div class="line">1461</div><div class="line">1462</div><div class="line">1463</div><div class="line">1464</div><div class="line">1465</div><div class="line">1466</div><div class="line">1467</div><div class="line">1468</div><div class="line">1469</div><div class="line">1470</div><div class="line">1471</div><div class="line">1472</div><div class="line">1473</div><div class="line">1474</div><div class="line">1475</div><div class="line">1476</div><div class="line">1477</div><div class="line">1478</div><div class="line">1479</div><div class="line">1480</div><div class="line">1481</div><div class="line">1482</div><div class="line">1483</div><div class="line">1484</div><div class="line">1485</div><div class="line">1486</div><div class="line">1487</div><div class="line">1488</div><div class="line">1489</div><div class="line">1490</div><div class="line">1491</div><div class="line">1492</div><div class="line">1493</div><div class="line">1494</div><div class="line">1495</div><div class="line">1496</div><div class="line">1497</div><div class="line">1498</div><div class="line">1499</div><div class="line">1500</div><div class="line">1501</div><div class="line">1502</div><div class="line">1503</div><div class="line">1504</div><div class="line">1505</div><div class="line">1506</div><div class="line">1507</div><div class="line">1508</div><div class="line">1509</div><div class="line">1510</div><div class="line">1511</div><div class="line">1512</div><div class="line">1513</div><div class="line">1514</div><div class="line">1515</div><div class="line">1516</div><div class="line">1517</div><div class="line">1518</div><div class="line">1519</div><div class="line">1520</div><div class="line">1521</div><div class="line">1522</div><div class="line">1523</div><div class="line">1524</div><div class="line">1525</div><div class="line">1526</div><div class="line">1527</div><div class="line">1528</div><div class="line">1529</div><div class="line">1530</div><div class="line">1531</div><div class="line">1532</div><div class="line">1533</div><div class="line">1534</div><div class="line">1535</div><div class="line">1536</div><div class="line">1537</div><div class="line">1538</div><div class="line">1539</div><div class="line">1540</div><div class="line">1541</div><div class="line">1542</div><div class="line">1543</div><div class="line">1544</div><div class="line">1545</div><div class="line">1546</div><div class="line">1547</div><div class="line">1548</div><div class="line">1549</div><div class="line">1550</div><div class="line">1551</div><div class="line">1552</div><div class="line">1553</div><div class="line">1554</div><div class="line">1555</div><div class="line">1556</div><div class="line">1557</div><div class="line">1558</div><div class="line">1559</div><div class="line">1560</div><div class="line">1561</div><div class="line">1562</div><div class="line">1563</div><div class="line">1564</div><div class="line">1565</div><div class="line">1566</div><div class="line">1567</div><div class="line">1568</div><div class="line">1569</div><div class="line">1570</div><div class="line">1571</div><div class="line">1572</div><div class="line">1573</div><div class="line">1574</div><div class="line">1575</div><div class="line">1576</div><div class="line">1577</div><div class="line">1578</div><div class="line">1579</div><div class="line">1580</div><div class="line">1581</div><div class="line">1582</div><div class="line">1583</div><div class="line">1584</div><div class="line">1585</div><div class="line">1586</div><div class="line">1587</div><div class="line">1588</div><div class="line">1589</div><div class="line">1590</div><div class="line">1591</div><div class="line">1592</div><div class="line">1593</div><div class="line">1594</div><div class="line">1595</div><div class="line">1596</div><div class="line">1597</div><div class="line">1598</div><div class="line">1599</div><div class="line">1600</div><div class="line">1601</div><div class="line">1602</div><div class="line">1603</div><div class="line">1604</div><div class="line">1605</div><div class="line">1606</div><div class="line">1607</div><div class="line">1608</div><div class="line">1609</div><div class="line">1610</div><div class="line">1611</div><div class="line">1612</div><div class="line">1613</div><div class="line">1614</div><div class="line">1615</div><div class="line">1616</div><div class="line">1617</div><div class="line">1618</div><div class="line">1619</div><div class="line">1620</div><div class="line">1621</div><div class="line">1622</div><div class="line">1623</div><div class="line">1624</div><div class="line">1625</div><div class="line">1626</div><div class="line">1627</div><div class="line">1628</div><div class="line">1629</div><div class="line">1630</div><div class="line">1631</div><div class="line">1632</div><div class="line">1633</div><div class="line">1634</div><div class="line">1635</div><div class="line">1636</div><div class="line">1637</div><div class="line">1638</div><div class="line">1639</div><div class="line">1640</div><div class="line">1641</div><div class="line">1642</div><div class="line">1643</div><div class="line">1644</div><div class="line">1645</div><div class="line">1646</div><div class="line">1647</div><div class="line">1648</div><div class="line">1649</div><div class="line">1650</div><div class="line">1651</div><div class="line">1652</div><div class="line">1653</div><div class="line">1654</div><div class="line">1655</div><div class="line">1656</div><div class="line">1657</div><div class="line">1658</div><div class="line">1659</div><div class="line">1660</div><div class="line">1661</div><div class="line">1662</div><div class="line">1663</div><div class="line">1664</div><div class="line">1665</div><div class="line">1666</div><div class="line">1667</div><div class="line">1668</div><div class="line">1669</div><div class="line">1670</div><div class="line">1671</div><div class="line">1672</div><div class="line">1673</div><div class="line">1674</div><div class="line">1675</div><div class="line">1676</div><div class="line">1677</div><div class="line">1678</div><div class="line">1679</div><div class="line">1680</div><div class="line">1681</div><div class="line">1682</div><div class="line">1683</div><div class="line">1684</div><div class="line">1685</div><div class="line">1686</div><div class="line">1687</div><div class="line">1688</div><div class="line">1689</div><div class="line">1690</div><div class="line">1691</div><div class="line">1692</div><div class="line">1693</div><div class="line">1694</div><div class="line">1695</div><div class="line">1696</div><div class="line">1697</div><div class="line">1698</div><div class="line">1699</div><div class="line">1700</div><div class="line">1701</div><div class="line">1702</div><div class="line">1703</div><div class="line">1704</div><div class="line">1705</div><div class="line">1706</div><div class="line">1707</div><div class="line">1708</div><div class="line">1709</div><div class="line">1710</div><div class="line">1711</div><div class="line">1712</div><div class="line">1713</div><div class="line">1714</div><div class="line">1715</div><div class="line">1716</div><div class="line">1717</div><div class="line">1718</div><div class="line">1719</div><div class="line">1720</div><div class="line">1721</div><div class="line">1722</div><div class="line">1723</div><div class="line">1724</div><div class="line">1725</div><div class="line">1726</div><div class="line">1727</div><div class="line">1728</div><div class="line">1729</div><div class="line">1730</div><div class="line">1731</div><div class="line">1732</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* Zepto v1.1.6 - zepto event ajax form ie - zeptojs.com/license */</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> Zepto = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> <span class="literal">undefined</span>, key, $, classList, </div><div class="line"></div><div class="line">      <span class="comment">// è·å–æ•°ç»„çš„slice å’Œ filterï¼ˆè¿”å›æ•°ç»„ä¸­çš„æ»¡è¶³å›è°ƒå‡½æ•°ä¸­æŒ‡å®šçš„æ¡ä»¶çš„å…ƒç´ ï¼‰æ–¹æ³•</span></div><div class="line">      emptyArray = [], slice = emptyArray.slice, filter = emptyArray.filter,</div><div class="line"></div><div class="line">      <span class="built_in">document</span> = <span class="built_in">window</span>.document,</div><div class="line">      elementDisplay = &#123;&#125;, classCache = &#123;&#125;,</div><div class="line">      cssNumber = &#123;</div><div class="line">        <span class="string">'column-count'</span>: <span class="number">1</span>, </div><div class="line">        <span class="string">'columns'</span>: <span class="number">1</span>, </div><div class="line">        <span class="string">'font-weight'</span>: <span class="number">1</span>, </div><div class="line">        <span class="string">'line-height'</span>: <span class="number">1</span>,</div><div class="line">        <span class="string">'opacity'</span>: <span class="number">1</span>, </div><div class="line">        <span class="string">'z-index'</span>: <span class="number">1</span>, </div><div class="line">        <span class="string">'zoom'</span>: <span class="number">1</span></div><div class="line">      &#125;,</div><div class="line"></div><div class="line">      <span class="comment">// å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span></div><div class="line">      fragmentRE = <span class="regexp">/^\s*&lt;(\w+|!)[^&gt;]*&gt;/</span>,</div><div class="line">      <span class="comment">// åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt;  ä¸åŒ¹é… &lt;img src=""/&gt; &lt;p&gt;123&lt;/p&gt;</span></div><div class="line">      singleTagRE = <span class="regexp">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/</span>,</div><div class="line">      <span class="comment">// å•æ ‡ç­¾</span></div><div class="line">      tagExpanderRE = <span class="regexp">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig</span>,</div><div class="line">      <span class="comment">// body html</span></div><div class="line">      rootNodeRE = <span class="regexp">/^(?:body|html)$/i</span>,</div><div class="line">      <span class="comment">// å¤§å†™å­—æ¯</span></div><div class="line">      capitalRE = <span class="regexp">/([A-Z])/g</span>,</div><div class="line"></div><div class="line">      <span class="comment">// special attributes that should be get/set via method calls</span></div><div class="line">      <span class="comment">// åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§</span></div><div class="line">      methodAttributes = [<span class="string">'val'</span>, <span class="string">'css'</span>, <span class="string">'html'</span>, <span class="string">'text'</span>, <span class="string">'data'</span>, <span class="string">'width'</span>, <span class="string">'height'</span>, <span class="string">'offset'</span>],</div><div class="line"></div><div class="line">      adjacencyOperators = [ <span class="string">'after'</span>, <span class="string">'prepend'</span>, <span class="string">'before'</span>, <span class="string">'append'</span> ],</div><div class="line"></div><div class="line">      table = <span class="built_in">document</span>.createElement(<span class="string">'table'</span>),</div><div class="line">      tableRow = <span class="built_in">document</span>.createElement(<span class="string">'tr'</span>),</div><div class="line">      <span class="comment">// æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨</span></div><div class="line">      containers = &#123;</div><div class="line">        <span class="string">'tr'</span>: <span class="built_in">document</span>.createElement(<span class="string">'tbody'</span>),</div><div class="line">        <span class="string">'tbody'</span>: table, </div><div class="line">        <span class="string">'thead'</span>: table, </div><div class="line">        <span class="string">'tfoot'</span>: table,</div><div class="line">        <span class="string">'td'</span>: tableRow, </div><div class="line">        <span class="string">'th'</span>: tableRow,</div><div class="line">        <span class="comment">// é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div</span></div><div class="line">        <span class="string">'*'</span>: <span class="built_in">document</span>.createElement(<span class="string">'div'</span>)</div><div class="line">      &#125;,</div><div class="line"></div><div class="line">      <span class="comment">// interactive ï¼Ÿï¼Ÿï¼Ÿ</span></div><div class="line">      readyRE = <span class="regexp">/complete|loaded|interactive/</span>,</div><div class="line"></div><div class="line">      <span class="comment">// åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸²</span></div><div class="line">      simpleSelectorRE = <span class="regexp">/^[\w-]*$/</span>,</div><div class="line"></div><div class="line">      class2type = &#123;&#125;,</div><div class="line">      toString = class2type.toString,</div><div class="line"></div><div class="line">      zepto = &#123;&#125;,</div><div class="line">      camelize, uniq,</div><div class="line"></div><div class="line">      tempParent = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>),</div><div class="line"></div><div class="line">      <span class="comment">// å±æ€§è½¬æ¢ä¸º camalCase æ ¼å¼ã€‚</span></div><div class="line">      <span class="comment">// $.fn.prop æ–¹æ³•ç”¨åˆ°äº†</span></div><div class="line">      propMap = &#123;</div><div class="line">        <span class="string">'tabindex'</span>: <span class="string">'tabIndex'</span>,</div><div class="line">        <span class="string">'readonly'</span>: <span class="string">'readOnly'</span>,</div><div class="line">        <span class="string">'for'</span>: <span class="string">'htmlFor'</span>,</div><div class="line">        <span class="string">'class'</span>: <span class="string">'className'</span>,</div><div class="line">        <span class="string">'maxlength'</span>: <span class="string">'maxLength'</span>,</div><div class="line">        <span class="string">'cellspacing'</span>: <span class="string">'cellSpacing'</span>,</div><div class="line">        <span class="string">'cellpadding'</span>: <span class="string">'cellPadding'</span>,</div><div class="line">        <span class="string">'rowspan'</span>: <span class="string">'rowSpan'</span>,</div><div class="line">        <span class="string">'colspan'</span>: <span class="string">'colSpan'</span>,</div><div class="line">        <span class="string">'usemap'</span>: <span class="string">'useMap'</span>,</div><div class="line">        <span class="string">'frameborder'</span>: <span class="string">'frameBorder'</span>,</div><div class="line">        <span class="string">'contenteditable'</span>: <span class="string">'contentEditable'</span></div><div class="line">      &#125;,</div><div class="line">      <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯arrçš„å‡½æ•°</span></div><div class="line">      isArray = <span class="built_in">Array</span>.isArray || <span class="function"><span class="keyword">function</span>(<span class="params">object</span>)</span>&#123; <span class="keyword">return</span> object <span class="keyword">instanceof</span> <span class="built_in">Array</span> &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125;</span></div><div class="line">  <span class="comment">// åˆ¤æ–­ element æ˜¯å¦ç¬¦åˆ selector çš„é€‰æ‹©è¦æ±‚</span></div><div class="line">  zepto.matches = <span class="function"><span class="keyword">function</span>(<span class="params">element, selector</span>) </span>&#123;</div><div class="line">    <span class="comment">// selectoræœ‰å€¼ï¼Œelementæœ‰å€¼ï¼Œelementæ˜¯æ™®é€šDOMèŠ‚ç‚¹</span></div><div class="line">    <span class="keyword">if</span> (!selector || !element || element.nodeType !== <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span></div><div class="line"></div><div class="line">    <span class="comment">// elem.matchesSelector('.item') </span></div><div class="line">    <span class="comment">// åˆ¤æ–­å½“å‰çš„ elem æ˜¯å¦ç¬¦åˆä¼ å…¥çš„ selector çš„è¦æ±‚ </span></div><div class="line">    <span class="keyword">var</span> matchesSelector = element.webkitMatchesSelector || </div><div class="line">                          element.mozMatchesSelector ||</div><div class="line">                          element.oMatchesSelector || </div><div class="line">                          element.matchesSelector</div><div class="line">    <span class="keyword">if</span> (matchesSelector) <span class="keyword">return</span> matchesSelector.call(element, selector)</div><div class="line"></div><div class="line">    <span class="comment">// æµè§ˆå™¨ä¸æ”¯æŒ matchesSelector</span></div><div class="line">    <span class="comment">// fall back to performing a selector:</span></div><div class="line">    <span class="keyword">var</span> match, </div><div class="line">        parent = element.parentNode, </div><div class="line">        temp = !parent</div><div class="line"></div><div class="line">    <span class="comment">// ä¸Šæ–‡å®šä¹‰ tempParent = document.createElement('div'),</span></div><div class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰parentï¼Œparentèµ‹å€¼ä¸ºä¸€ä¸ªdivï¼Œç„¶åå°†å½“å‰å…ƒç´ åŠ å…¥åˆ°è¿™ä¸ªdivä¸­</span></div><div class="line">    <span class="keyword">if</span> (temp) &#123;</div><div class="line">      parent = tempParent;</div><div class="line">      tempParent.appendChild(element);</div><div class="line">      <span class="comment">// (parent = tempParent).appendChild(element); è¿™ç§å†™æ³•ä¸æ˜“è¯»</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// é€šè¿‡ qsa è·å–åŒ¹é…çš„å…ƒç´ ï¼Œåˆ¤æ–­å…¶ä¸­æœ‰æ²¡æœ‰ element</span></div><div class="line">    match = ~zepto.qsa(parent, selector).indexOf(element)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (temp) &#123;</div><div class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰parentæ—¶ï¼Œä¹‹å‰æ‰§è¡Œè¿‡  tempParent.appendChild(element);</span></div><div class="line">      <span class="comment">// æ­¤æ—¶è¦ç§»é™¤å­å…ƒç´ </span></div><div class="line">      tempParent.removeChild(element);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// temp &amp;&amp; tempParent.removeChild(element)  // è¿™ç§å†™æ³•ä¸æ˜“è¯»</span></div><div class="line"></div><div class="line">    <span class="comment">// è¿”å›æœ€ç»ˆçš„åŒ¹é…ç»“æœï¼Œç»è¿‡ qsa åˆ¤æ–­çš„ç»“æœ</span></div><div class="line">    <span class="keyword">return</span> match</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> obj == <span class="literal">null</span> ? </div><div class="line">           <span class="built_in">String</span>(obj) :  <span class="comment">// null undefined</span></div><div class="line">           class2type[toString.call(obj)] || <span class="string">"object"</span> </div><div class="line"></div><div class="line">    <span class="comment">// ä¸‹æ–‡å®šä¹‰ï¼š</span></div><div class="line">    <span class="comment">// // Populate the class2type map</span></div><div class="line">    <span class="comment">// $.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) &#123;</span></div><div class="line">    <span class="comment">//   class2type[ "[object " + name + "]" ] = name.toLowerCase()</span></div><div class="line">    <span class="comment">// &#125;)</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isFunction</span>(<span class="params">value</span>) </span>&#123; <span class="keyword">return</span> type(value) == <span class="string">"function"</span> &#125;</div><div class="line">  <span class="comment">// windowçš„ç‰¹ç‚¹ï¼šwindow.window === window</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isWindow</span>(<span class="params">obj</span>)     </span>&#123; <span class="keyword">return</span> obj != <span class="literal">null</span> &amp;&amp; obj == obj.window &#125;</div><div class="line">  <span class="comment">// document.nodeType === 9</span></div><div class="line">  <span class="comment">// elem.DOCUMENT_NODE ä¹Ÿç­‰äº 9 ï¼ˆè¿™é‡Œç›´æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯9ä¹Ÿè¡Œï¼Ÿï¼Ÿï¼Ÿï¼‰</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isDocument</span>(<span class="params">obj</span>)   </span>&#123; <span class="keyword">return</span> obj != <span class="literal">null</span> &amp;&amp; obj.nodeType == obj.DOCUMENT_NODE &#125;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isObject</span>(<span class="params">obj</span>)     </span>&#123; <span class="keyword">return</span> type(obj) == <span class="string">"object"</span> &#125;</div><div class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åŸºæœ¬çš„objectï¼šObject.getPrototypeOf(obj) == Object.prototype</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">isPlainObject</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> isObject(obj) &amp;&amp; !isWindow(obj) &amp;&amp; <span class="built_in">Object</span>.getPrototypeOf(obj) == <span class="built_in">Object</span>.prototype</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">likeArray</span>(<span class="params">obj</span>) </span>&#123; <span class="keyword">return</span> <span class="keyword">typeof</span> obj.length == <span class="string">'number'</span> &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ç­›é€‰æ•°ç»„ï¼Œè¸¢å‡º null undefined å…ƒç´ </span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">compact</span>(<span class="params">array</span>) </span>&#123; <span class="keyword">return</span> filter.call(array, <span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123; <span class="keyword">return</span> item != <span class="literal">null</span> &#125;) &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ä¸‹æ–‡å®šä¹‰ï¼š</span></div><div class="line">  <span class="comment">// $.fn = &#123;</span></div><div class="line">  <span class="comment">//    concat: emptyArray.concat,</span></div><div class="line">  <span class="comment">// $.fn.concat.apply([], array) â€”â€” æ— è®º array æ˜¯ä¸æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œ</span></div><div class="line">  <span class="comment">// ä¾‹å¦‚ $.fn.concat.call([], 'abc') è¿”å›çš„æ˜¯ ['abc']</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">flatten</span>(<span class="params">array</span>) </span>&#123; <span class="keyword">return</span> array.length &gt; <span class="number">0</span> ? $.fn.concat.apply([], array) : array &#125;</div><div class="line"></div><div class="line">  <span class="comment">// camelize å·²åœ¨ä¸Šæ–‡å®šä¹‰</span></div><div class="line">  <span class="comment">// ç”¨äº css çš„ camalCase è½¬æ¢ï¼Œä¾‹å¦‚ background-color è½¬æ¢ä¸º backgroundColor</span></div><div class="line">  camelize = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>)</span>&#123; <span class="keyword">return</span> str.replace(<span class="regexp">/-+(.)?/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">match, chr</span>)</span>&#123; <span class="keyword">return</span> chr ? chr.toUpperCase() : <span class="string">''</span> &#125;) &#125;</div><div class="line"></div><div class="line">  <span class="comment">// å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dasherize</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> str.replace(<span class="regexp">/::/g</span>, <span class="string">'/'</span>)</div><div class="line">              .replace(<span class="regexp">/([A-Z]+)([A-Z][a-z])/g</span>, <span class="string">'$1_$2'</span>)</div><div class="line">              .replace(<span class="regexp">/([a-z\d])([A-Z])/g</span>, <span class="string">'$1_$2'</span>)</div><div class="line">              .replace(<span class="regexp">/_/g</span>, <span class="string">'-'</span>)</div><div class="line">              .toLowerCase()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// uniqå˜é‡å·²ç»åœ¨å‰é¢å®šä¹‰</span></div><div class="line">  <span class="comment">// ç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3]</span></div><div class="line">  uniq = <span class="function"><span class="keyword">function</span>(<span class="params">array</span>)</span>&#123; <span class="keyword">return</span> filter.call(array, <span class="function"><span class="keyword">function</span>(<span class="params">item, idx</span>)</span>&#123; <span class="keyword">return</span> array.indexOf(item) == idx &#125;) &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ classCache = &#123;&#125;</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">classRE</span>(<span class="params">name</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> name <span class="keyword">in</span> classCache ?</div><div class="line">           classCache[name] : </div><div class="line">           (classCache[name] = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'(^|\\s)'</span> + name + <span class="string">'(\\s|$)'</span>))</div><div class="line"></div><div class="line">    <span class="comment">// classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</span></div><div class="line">    <span class="comment">// &#123;</span></div><div class="line">    <span class="comment">//   abc: /(^|\s)abc(\s|$)/,  // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc '</span></div><div class="line">    <span class="comment">//   xyz: /(^|\s)abc(\s|$)/,</span></div><div class="line">    <span class="comment">//   ...</span></div><div class="line">    <span class="comment">// &#125;</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ä¼ å…¥ä¸€ä¸ª css çš„ name å’Œ valueï¼Œåˆ¤æ–­è¿™ä¸ª value æ˜¯å¦éœ€è¦å¢åŠ  'px'</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">maybeAddPx</span>(<span class="params">name, value</span>) </span>&#123;</div><div class="line">    <span class="comment">// dasherize(name) å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</span></div><div class="line">    <span class="comment">// !cssNumber[dasherize(name)] åˆ¤æ–­è½¬æ¢å‡ºæ¥çš„ css name æ˜¯å¦å†è¿™ä¸ªæ•°ç»„ä¹‹å¤–</span></div><div class="line">    <span class="keyword">return</span> (<span class="keyword">typeof</span> value == <span class="string">"number"</span> &amp;&amp; !cssNumber[dasherize(name)]) ? </div><div class="line">           <span class="comment">// å¦‚æœ value æ˜¯æ•°å­—ï¼Œå¹¶ä¸” name ä¸åœ¨ cssNumber æ•°ç»„ä¹‹å†…ï¼Œå°±éœ€è¦åŠ  'px'ï¼Œå¦åˆ™ä¸éœ€è¦</span></div><div class="line">           <span class="comment">// ä¾‹å¦‚ 'width'ã€'font-size' å°±éœ€è¦åŠ  'px'ï¼Œ 'font-weight' å°±ä¸éœ€è¦åŠ </span></div><div class="line">           value + <span class="string">"px"</span> : </div><div class="line">           value</div><div class="line"></div><div class="line">    <span class="comment">// å‰æ–‡å®šä¹‰----------------------</span></div><div class="line">    <span class="comment">// cssNumber = &#123;</span></div><div class="line">    <span class="comment">//   'column-count': 1, </span></div><div class="line">    <span class="comment">//   'columns': 1, </span></div><div class="line">    <span class="comment">//   'font-weight': 1, </span></div><div class="line">    <span class="comment">//   'line-height': 1,</span></div><div class="line">    <span class="comment">//   'opacity': 1, </span></div><div class="line">    <span class="comment">//   'z-index': 1, </span></div><div class="line">    <span class="comment">//   'zoom': 1</span></div><div class="line">    <span class="comment">// &#125;,</span></div><div class="line">    <span class="comment">// function dasherize(str) &#123;</span></div><div class="line">    <span class="comment">//   return str.replace(/::/g, '/')</span></div><div class="line">    <span class="comment">//             .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')</span></div><div class="line">    <span class="comment">//             .replace(/([a-z\d])([A-Z])/g, '$1_$2')</span></div><div class="line">    <span class="comment">//             .replace(/_/g, '-')</span></div><div class="line">    <span class="comment">//             .toLowerCase()</span></div><div class="line">    <span class="comment">// &#125;</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// è·å–ä¸€ä¸ªå…ƒç´ çš„é»˜è®¤ display æ ·å¼å€¼ï¼Œå¯èƒ½çš„ç»“æœæ˜¯ï¼šinline block inline-block table .... ï¼ˆnone è½¬æ¢ä¸º blockï¼‰</span></div><div class="line">  <span class="comment">// $.fn.show æ–¹æ³•ä¸­ç”¨åˆ°äº†</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">defaultDisplay</span>(<span class="params">nodeName</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> element, display</div><div class="line"></div><div class="line">    <span class="comment">// å‰æ–‡å®šä¹‰ elementDisplay = &#123;&#125;</span></div><div class="line">    <span class="keyword">if</span> (!elementDisplay[nodeName]) &#123;</div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœ elementDisplay å¯¹è±¡ä¸­ï¼Œæ²¡æœ‰å­˜å‚¨ nodeName çš„ä¿¡æ¯</span></div><div class="line">      <span class="comment">// åˆ™æ–°å»ºä¸€ä¸ª nodeName å…ƒç´ ï¼Œæ·»åŠ åˆ° body ä¸­</span></div><div class="line">      element = <span class="built_in">document</span>.createElement(nodeName)</div><div class="line">      <span class="built_in">document</span>.body.appendChild(element)</div><div class="line">      <span class="comment">// è·å–å®ƒçš„é»˜è®¤çš„ display æ ·å¼ä¿¡æ¯ã€‚</span></div><div class="line">      display = getComputedStyle(element, <span class="string">''</span>).getPropertyValue(<span class="string">"display"</span>)</div><div class="line">      <span class="comment">// æ¥ç€é©¬ä¸Šç§»é™¤å…ƒç´ ï¼ï¼ï¼</span></div><div class="line">      element.parentNode.removeChild(element)</div><div class="line">      <span class="comment">// 'none' æ¢æˆ 'block'ï¼Œå¦å¤–è¿˜å¯èƒ½æ˜¯ 'inline' 'inline-block' 'table' ç­‰ç­‰...</span></div><div class="line">      display == <span class="string">"none"</span> &amp;&amp; (display = <span class="string">"block"</span>)</div><div class="line">      <span class="comment">// å­˜å‚¨ä¸‹æ¥</span></div><div class="line">      elementDisplay[nodeName] = display</div><div class="line"></div><div class="line">      <span class="comment">// ä¸‹æ–‡å®šä¹‰ </span></div><div class="line">      <span class="comment">// var nativeGetComputedStyle = getComputedStyle;</span></div><div class="line">      <span class="comment">// window.getComputedStyle = function(element)&#123;</span></div><div class="line">      <span class="comment">//   try &#123;</span></div><div class="line">      <span class="comment">//     return nativeGetComputedStyle(element)</span></div><div class="line">      <span class="comment">//   &#125; catch(e) &#123;</span></div><div class="line">      <span class="comment">//     return null</span></div><div class="line">      <span class="comment">//   &#125;</span></div><div class="line">      <span class="comment">// &#125;</span></div><div class="line">      <span class="comment">// è§£é‡Šï¼š</span></div><div class="line">      <span class="comment">// å¦‚æœæµè§ˆå™¨æ”¯æŒ getComputedStyle åˆ™ä½¿ç”¨ï¼Œå¦‚æœä¸æ”¯æŒï¼Œå°±è¿”å› null</span></div><div class="line">      <span class="comment">// getComputedStyle(elem, 'ä¼ªç±»ï¼Œå¦‚ :link') è¿”å›ä¸€ä¸ª CSSStyleDeclaration å¯¹è±¡ï¼Œé‡Œé¢å­˜å‚¨äº†å…ƒç´ çš„æ ·å¼ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ getPropertyValue('name') æ–¹æ³•è·å–</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// æœ€ç»ˆè¿”å› display ç»“æœ</span></div><div class="line">    <span class="keyword">return</span> elementDisplay[nodeName]</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªå…ƒç´ çš„å­å…ƒç´ ï¼Œæ•°ç»„å½¢å¼</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">children</span>(<span class="params">element</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">// æœ‰äº›æµè§ˆå™¨æ”¯æŒ elem.children è·å–å­å…ƒç´ ï¼Œæœ‰äº›ä¸æ”¯æŒ</span></div><div class="line">    <span class="keyword">return</span> <span class="string">'children'</span> <span class="keyword">in</span> element ?</div><div class="line"></div><div class="line">           <span class="comment">// ä¸Šæ–‡å®šä¹‰ slice = [].slice</span></div><div class="line">           <span class="comment">// slice.call(likeArr) å¯ä»¥å°†å¯¹è±¡æ•°ç»„è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„</span></div><div class="line">           slice.call(element.children) :</div><div class="line"></div><div class="line">           <span class="comment">// æµè§ˆå™¨ä¸æ”¯æŒ elem.children åªèƒ½é€šè¿‡ elem.childNodes è·å–å­å…ƒç´ </span></div><div class="line">           <span class="comment">// åªå» node.nodeType == 1 çš„å­å…ƒç´ ï¼Œé€šè¿‡ $.map æ‹¼æ¥æˆæ•°ç»„</span></div><div class="line">           <span class="comment">// $.map ä¸‹æ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) &#123;....&#125;</span></div><div class="line">           <span class="comment">// $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„</span></div><div class="line">           $.map(element.childNodes, <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123; <span class="keyword">if</span> (node.nodeType == <span class="number">1</span>) <span class="keyword">return</span> node &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125;</span></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) &#123; /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ &#125;</span></div><div class="line"></div><div class="line">  <span class="comment">// `$.zepto.fragment` takes a html string and an optional tag name</span></div><div class="line">  <span class="comment">// to generate DOM nodes nodes from the given html string.</span></div><div class="line">  <span class="comment">// The generated DOM nodes are returned as an array.</span></div><div class="line">  <span class="comment">// This function can be overriden in plugins for example to make</span></div><div class="line">  <span class="comment">// it compatible with browsers that don't support the DOM fully.</span></div><div class="line">  zepto.fragment = <span class="function"><span class="keyword">function</span>(<span class="params">html, name, properties</span>) </span>&#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line">      å‚æ•°ï¼š</div><div class="line">      @html: å¾…å¤„ç†çš„htmlå­—ç¬¦ä¸²</div><div class="line">      @name: é€šè¿‡ name å¯åœ¨ containers ä¸­æŸ¥æ‰¾å®¹å™¨èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä¼ å…¥ï¼Œå–å¾—çš„å®¹å™¨é»˜è®¤ä¸º div</div><div class="line">      @properties: èŠ‚ç‚¹å±æ€§å¯¹è±¡</div><div class="line">    */</div><div class="line"></div><div class="line">    <span class="keyword">var</span> dom, nodes, container</div><div class="line"></div><div class="line">    <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼šsingleTagRE = /^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;|)$/,   // åŒ¹é… &lt;img /&gt; &lt;p&gt;&lt;/p&gt;  ä¸åŒ¹é… &lt;img src=""/&gt; &lt;p&gt;123&lt;/p&gt;</span></div><div class="line">    <span class="comment">// å¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™ç›´æ¥ç”¨è¯¥æ ‡ç­¾åˆ›å»ºå…ƒç´ </span></div><div class="line">    <span class="comment">// RegExp.$1 è¡¨ç¤ºæ­£åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªæ‹¬å·åŒ¹é…çš„å†…å®¹ï¼Œåœ¨æ­¤å³ (\w+) åŒ¹é…çš„å†…å®¹ï¼Œ</span></div><div class="line">    <span class="comment">// A special case optimization for a single tag</span></div><div class="line">    <span class="keyword">if</span> (singleTagRE.test(html)) dom = $(<span class="built_in">document</span>.createElement(<span class="built_in">RegExp</span>.$<span class="number">1</span>))</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (!dom) &#123;</div><div class="line">      <span class="comment">// è¯´æ˜ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œdomæœªè¢«èµ‹å€¼</span></div><div class="line"></div><div class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ tagExpanderRE = /&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig,   // å•æ ‡ç­¾</span></div><div class="line">      <span class="comment">// å°† &lt;p/&gt;æˆ–&lt;p /&gt;ï¼Œæ›¿æ¢ä¸º &lt;p&gt;&lt;/p&gt;ï¼Œå°†&lt;p abc/&gt;æ›¿æ¢ä¸º&lt;p&gt;abc&lt;/p&gt;</span></div><div class="line">      <span class="comment">// &lt;input/&gt; ï¼ˆåœ¨ tagExpanderRE ä¸­å®šä¹‰ï¼‰çš„ä¸æ›¿æ¢</span></div><div class="line">      <span class="keyword">if</span> (html.replace) html = html.replace(tagExpanderRE, <span class="string">"&lt;$1&gt;&lt;/$2&gt;"</span>)</div><div class="line"></div><div class="line">      <span class="comment">// fragmentRE = /^\s*&lt;(\w+|!)[^&gt;]*&gt;/,   // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span></div><div class="line">      <span class="comment">// å¦‚æœ name æœªä¼ å…¥ï¼Œåˆ™èµ‹å€¼ä¸º html çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾</span></div><div class="line">      <span class="keyword">if</span> (name === <span class="literal">undefined</span>) name = fragmentRE.test(html) &amp;&amp; <span class="built_in">RegExp</span>.$<span class="number">1</span></div><div class="line"></div><div class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰</span></div><div class="line">      <span class="comment">// // æŒ‡å®šç‰¹æ®Šå…ƒç´ çš„ å®¹å™¨</span></div><div class="line">      <span class="comment">// containers = &#123;</span></div><div class="line">      <span class="comment">//   'tr': document.createElement('tbody'),</span></div><div class="line">      <span class="comment">//   'tbody': table, </span></div><div class="line">      <span class="comment">//   'thead': table, </span></div><div class="line">      <span class="comment">//   'tfoot': table,</span></div><div class="line">      <span class="comment">//   'td': tableRow, </span></div><div class="line">      <span class="comment">//   'th': tableRow,</span></div><div class="line">      <span class="comment">//   // é™¤äº†ä¸Šé¢æŒ‡å®šçš„ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„å®¹å™¨éƒ½æ˜¯ div</span></div><div class="line">      <span class="comment">//   '*': document.createElement('div')</span></div><div class="line">      <span class="comment">// &#125;,</span></div><div class="line">      <span class="keyword">if</span> (!(name <span class="keyword">in</span> containers)) name = <span class="string">'*'</span></div><div class="line"></div><div class="line">      container = containers[name]</div><div class="line">      container.innerHTML = <span class="string">''</span> + html  <span class="comment">// è½¬å˜ä¸ºå­—ç¬¦ä¸²çš„å¿«æ·æ–¹å¼</span></div><div class="line"></div><div class="line">      <span class="comment">// éå† container çš„å­å…ƒç´ ï¼ˆå…ˆè½¬æ¢ä¸ºæ•°ç»„å½¢å¼ï¼‰</span></div><div class="line">      <span class="comment">// è¿”å›çš„åŒæ—¶ï¼Œå°†æ¯ä¸ªå­å…ƒç´ ç§»é™¤ã€‚</span></div><div class="line">      <span class="comment">// $.each è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯æ•°ç»„ slice.call(container.childNodes)</span></div><div class="line">      dom = $.each(slice.call(container.childNodes), <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        container.removeChild(<span class="keyword">this</span>)</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// èµ‹å€¼å±æ€§</span></div><div class="line">    <span class="keyword">if</span> (isPlainObject(properties)) &#123;</div><div class="line">      <span class="comment">// å…ˆå°†domè½¬æ¢ä¸º zepto å¯¹è±¡</span></div><div class="line">      nodes = $(dom)</div><div class="line"></div><div class="line">      $.each(properties, <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</div><div class="line">        <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span></div><div class="line">        <span class="comment">// // åº”è¯¥é€šè¿‡æ–¹æ³•è°ƒç”¨æ¥è®¾ç½®/è·å–çš„ç‰¹æ®Šå±æ€§</span></div><div class="line">        <span class="comment">// methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],</span></div><div class="line">        <span class="keyword">if</span> (methodAttributes.indexOf(key) &gt; <span class="number">-1</span>) nodes[key](value)  <span class="comment">// æ»¡è¶³ methodAttributes çš„ï¼Œé€šè¿‡æ–¹æ³•èµ‹å€¼</span></div><div class="line">        <span class="keyword">else</span> nodes.attr(key, value) <span class="comment">// å¦åˆ™ï¼Œé€šè¿‡å±æ€§å¤åˆ¶</span></div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// æœ€ç»ˆè¿”å›çš„domå¯èƒ½æœ‰ä¸¤ç§å½¢å¼</span></div><div class="line">    <span class="comment">// ç¬¬ä¸€ï¼Œå¦‚æœ html æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªzeptoå¯¹è±¡ dom = $(document.createElement(RegExp.$1))</span></div><div class="line">    <span class="comment">// ç¬¬äºŒï¼Œå¦‚æœ html ä¸æ˜¯å•æ ‡ç­¾ï¼Œåˆ™domè¢«å¤åˆ¶ä¸ºä¸€ä¸ªDOMèŠ‚ç‚¹çš„æ•°ç»„</span></div><div class="line">    <span class="keyword">return</span> dom</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto = &#123;&#125;</span></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto.matches = function(element, selector) &#123; /* åˆ¤æ–­elemæ˜¯å¦ç¬¦åˆselectorçš„è¦æ±‚ */ &#125;</span></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ zepto.fragment = function(html, name, properties) &#123; /* é€šè¿‡htmlå­—ç¬¦ä¸²è·å–æ–‡æ¡£ç¢ç‰‡ */ &#125;</span></div><div class="line"></div><div class="line">  <span class="comment">// `$.zepto.Z` swaps out the prototype of the given `dom` array</span></div><div class="line">  <span class="comment">// of nodes with `$.fn` and thus supplying all the Zepto functions</span></div><div class="line">  <span class="comment">// to the array. Note that `__proto__` is not supported on Internet</span></div><div class="line">  <span class="comment">// Explorer. This method can be overriden in plugins.</span></div><div class="line">  zepto.Z = <span class="function"><span class="keyword">function</span>(<span class="params">dom, selector</span>) </span>&#123;</div><div class="line">    dom = dom || []</div><div class="line">    <span class="comment">// å°† dom éšå¼åŸå‹å¼ºåˆ¶æ”¹ä¸º $.fn</span></div><div class="line">    <span class="comment">// ä¸‹æ–‡ zepto.Z.prototype = $.fn   å› æ­¤ï¼Œdom.__proto__ = $.fn å³ dom.__proto__ = zepto.Z.prototype  å¯ä»¥ä¸è¾ƒçœŸçš„è®¤ä¸º zepto.Z å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆä½†æ„Ÿè§‰è¿™ä¹ˆè®¾è®¡ï¼Œæœ‰äº›è¹©è„šï¼‰</span></div><div class="line">    dom.__proto__ = $.fn</div><div class="line">    dom.selector = selector || <span class="string">''</span></div><div class="line">    <span class="keyword">return</span> dom</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// `$.zepto.isZ` should return `true` if the given object is a Zepto</span></div><div class="line">  <span class="comment">// collection. This method can be overriden in plugins.</span></div><div class="line">  zepto.isZ = <span class="function"><span class="keyword">function</span>(<span class="params">object</span>) </span>&#123;</div><div class="line">    <span class="comment">// ä¸Šæ–‡ dom.__proto__ = $.fn</span></div><div class="line">    <span class="comment">// ä¸‹æ–‡ zepto.Z.prototype = $.fn</span></div><div class="line">    <span class="comment">// å¯çŸ¥ï¼šdom.__proto__ === $.fn === zepto.Z.prototype</span></div><div class="line"></div><div class="line">    <span class="comment">// å› æ­¤ï¼Œzeptoå¯¹è±¡éƒ½ç¬¦åˆ object instanceof zepto.Z</span></div><div class="line">    <span class="keyword">return</span> object <span class="keyword">instanceof</span> zepto.Z</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and</span></div><div class="line">  <span class="comment">// takes a CSS selector and an optional context (and handles various</span></div><div class="line">  <span class="comment">// special cases).</span></div><div class="line">  <span class="comment">// This method can be overriden in plugins.</span></div><div class="line">  zepto.init = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> dom</div><div class="line">    <span class="comment">// If nothing given, return an empty Zepto collection</span></div><div class="line">    <span class="keyword">if</span> (!selector) <span class="keyword">return</span> zepto.Z()</div><div class="line"></div><div class="line">    <span class="comment">// Optimize for string selectors</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">'string'</span>) &#123;</div><div class="line">      <span class="comment">// å­—ç¬¦ä¸²çš„æƒ…å†µï¼Œä¸€èˆ¬æœ‰ä¸¤ç§ï¼š</span></div><div class="line">      <span class="comment">// ç¬¬ä¸€ï¼Œä¸€æ®µ html ä»£ç ï¼Œæ—¨åœ¨é€šè¿‡zeptoç”Ÿæˆdomå¯¹è±¡</span></div><div class="line">      <span class="comment">// ç¬¬äºŒï¼Œä¸€æ®µæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæ—¨åœ¨é€šè¿‡zeptoæŸ¥æ‰¾domå¯¹è±¡</span></div><div class="line">      <span class="comment">// å°†æŸ¥è¯¢ç»“æœå­˜å‚¨åˆ° dom å˜é‡ä¸­</span></div><div class="line"></div><div class="line">      selector = selector.trim()</div><div class="line">      <span class="comment">// If it's a html fragment, create nodes from it</span></div><div class="line">      <span class="comment">// Note: In both Chrome 21 and Firefox 15, DOM error 12</span></div><div class="line">      <span class="comment">// is thrown if the fragment doesn't begin with &lt;</span></div><div class="line"></div><div class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span></div><div class="line">      <span class="comment">// // å–å‡ºhtmlä»£ç ä¸­ç¬¬ä¸€ä¸ªhtmlæ ‡ç­¾ï¼ˆæˆ–æ³¨é‡Šï¼‰ï¼Œå¦‚å–å‡º &lt;p&gt;123&lt;/p&gt;&lt;h1&gt;345&lt;/h1&gt; ä¸­çš„ &lt;p&gt;</span></div><div class="line">      <span class="comment">// fragmentRE = /^\s*&lt;(\w+|!)[^&gt;]*&gt;/,</span></div><div class="line">      <span class="keyword">if</span> (selector[<span class="number">0</span>] == <span class="string">'&lt;'</span> &amp;&amp; fragmentRE.test(selector))</div><div class="line"></div><div class="line">        <span class="comment">// ç¬¬ä¸€ï¼ŒRegExp.$1å–å‡ºæ¥çš„å°±æ˜¯ç¬¬ä¸€ä¸ªæ ‡ç­¾åç§°ï¼Œå³æ­£åˆ™ä¸­ (\w+|!) å¯¹åº”çš„å†…å®¹</span></div><div class="line">        <span class="comment">// ç¬¬äºŒï¼Œæ­¤æ—¶çš„ context åº”è¯¥ä¼ å…¥çš„æ˜¯csså±æ€§å¯¹è±¡ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰</span></div><div class="line">        dom = zepto.fragment(selector, <span class="built_in">RegExp</span>.$<span class="number">1</span>, context), selector = <span class="literal">null</span></div><div class="line">      <span class="comment">// If there's a context, create a collection on that context first, and select</span></div><div class="line">      <span class="comment">// nodes from there</span></div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœ selector ä¸æ˜¯htmlå­—ç¬¦ä¸²æ ‡ç­¾ï¼Œå¹¶ä¸” context æœ‰å€¼ï¼Œåˆ™ä»contextä¸­æŸ¥æ‰¾</span></div><div class="line">      <span class="comment">// find åº”è¯¥æ˜¯åœ¨ $.fn ä¸­å®šä¹‰çš„ï¼Œæœ‰å¾…è§£è¯»ï¼Ÿï¼Ÿï¼Ÿ</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector)</div><div class="line">      <span class="comment">// If it's a CSS selector, use it to select nodes.</span></div><div class="line"></div><div class="line">      <span class="comment">// é™¤äº†ä»¥ä¸Šæƒ…å†µï¼Œå°±ä»æ•´ä¸ª document æ‰§è¡Œ qsa çš„æŸ¥æ‰¾</span></div><div class="line">      <span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// If a function is given, call it when the DOM is ready</span></div><div class="line">    <span class="comment">// å¦‚æœæ˜¯å‡½æ•°ï¼Œåˆ™dom readyæ—¶æ‰§è¡Œï¼Œ</span></div><div class="line">    <span class="comment">// readyæ–¹æ³•åº”è¯¥åœ¨ $.fn ä¸­å®šä¹‰ï¼Œæœ‰å¾…è§£æ¯’</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (isFunction(selector)) <span class="keyword">return</span> $(<span class="built_in">document</span>).ready(selector)</div><div class="line"></div><div class="line">    <span class="comment">// If a Zepto collection is given, just return it</span></div><div class="line">    <span class="comment">// ä¼ å…¥çš„å‚æ•°æœ¬èº«å°±å·²ç»æ˜¯ zepto å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›</span></div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (zepto.isZ(selector)) <span class="keyword">return</span> selector</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line"></div><div class="line">      <span class="comment">// compactå‡½æ•°ï¼šè¸¢å‡ºæ•°ç»„ä¸­ == null çš„å…ƒç´ </span></div><div class="line">      <span class="comment">// normalize array if an array of nodes is given</span></div><div class="line">      <span class="keyword">if</span> (isArray(selector)) dom = compact(selector)</div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœä¼ å…¥çš„æ˜¯objectï¼Œç›´æ¥å¼ºåˆ¶å¡è¿›ä¸€ä¸ªæ•°ç»„</span></div><div class="line">      <span class="comment">// Wrap DOM nodes.</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (isObject(selector)) dom = [selector], selector = <span class="literal">null</span>  <span class="comment">// åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­</span></div><div class="line"></div><div class="line"></div><div class="line">      <span class="comment">// ä»æ­¤å¾€ä¸‹ï¼Œæ„Ÿè§‰å’Œä¸Šæ–‡ selector æ˜¯å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹ï¼Œé‡å¤äº†</span></div><div class="line">      <span class="comment">// ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span></div><div class="line"></div><div class="line"></div><div class="line">      <span class="comment">// fragmentRE.test å³åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ html æ ‡ç­¾å¼€å¤´ï¼ˆå³æ˜¯å¦æ˜¯html fragementï¼‰</span></div><div class="line">      <span class="comment">// If it's a html fragment, create nodes from it</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (fragmentRE.test(selector))</div><div class="line">        <span class="comment">//æ­¤æ—¶ï¼Œcontext ä¹Ÿæ˜¯å±æ€§é›†åˆï¼Œä¸æ˜¯å®¹å™¨ï¼ï¼ï¼</span></div><div class="line">        <span class="comment">//ï¼ˆè¿™é‡Œä¼šäº§ç”Ÿæ­§ä¹‰ï¼Œè€ç‰ˆçš„ä¸ä¼šä¼ å…¥ contextï¼‰</span></div><div class="line">        dom = zepto.fragment(selector.trim(), <span class="built_in">RegExp</span>.$<span class="number">1</span>, context), selector = <span class="literal">null</span> <span class="comment">// åŠæ—¶æ¸…ç©º selector ä¸å¦¨ç¢ä¸‹é¢çš„åˆ¤æ–­</span></div><div class="line">      <span class="comment">// If there's a context, create a collection on that context first, and select</span></div><div class="line">      <span class="comment">// nodes from there</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (context !== <span class="literal">undefined</span>) <span class="keyword">return</span> $(context).find(selector)</div><div class="line">      <span class="comment">// And last but no least, if it's a CSS selector, use it to select nodes.</span></div><div class="line">      <span class="keyword">else</span> dom = zepto.qsa(<span class="built_in">document</span>, selector)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// æœ€ç»ˆï¼Œè¿˜æ˜¯é€šè¿‡ zepto.Z åˆ›å»ºäº†å¯¹è±¡</span></div><div class="line">    <span class="comment">// è¿™é‡Œçš„ domï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span></div><div class="line">    <span class="comment">// create a new Zepto collection from the nodes found</span></div><div class="line">    <span class="keyword">return</span> zepto.Z(dom, selector)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// `$` will be the base `Zepto` object. When calling this</span></div><div class="line">  <span class="comment">// function just call `$.zepto.init, which makes the implementation</span></div><div class="line">  <span class="comment">// details of selecting nodes and creating Zepto collections</span></div><div class="line">  <span class="comment">// patchable in plugins.</span></div><div class="line">  $ = <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> zepto.init(selector, context)</div><div class="line">  &#125;</div><div class="line">  <span class="comment">// $ æœ€ç»ˆè¢«è¿™ä¸ªåŒ¿åå‡½æ•°æ‰€è¿”å›ï¼Œå¹¶å¤åˆ¶ç»™äº†å…¨å±€çš„ Zepto å˜é‡</span></div><div class="line">  <span class="comment">// å…¨å±€çš„ zepto å˜é‡æš´éœ²ç»™äº† windowï¼Œå¹¶ä¸”å¯èƒ½æœ‰ä¸€ä¸ªåˆ«åâ€”â€” $</span></div><div class="line">  <span class="comment">// æ­¤ $ éå½¼ $ </span></div><div class="line">  <span class="comment">// å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œè¿™é‡Œè‚¯å®šéå¸¸ç»•ï¼ˆè¿˜ä¸å¦‚æŠŠè¿™é‡Œçš„ $ æ”¹æ”¹åå­—ï¼‰</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">target, source, deep</span>) </span>&#123;</div><div class="line">    <span class="comment">// key åœ¨ä¸Šæ–‡å·²ç»å®šä¹‰ï¼Œå¦åˆ™å°±æ±¡æŸ“å…¨å±€å˜é‡äº†</span></div><div class="line">    <span class="keyword">for</span> (key <span class="keyword">in</span> source)</div><div class="line"></div><div class="line">      <span class="comment">// æ·±åº¦é€’å½’ï¼Œé¦–å…ˆå¿…é¡» deep å‚æ•°ä¸º true</span></div><div class="line">      <span class="comment">// å…¶æ¬¡ï¼Œsource[key] å¿…é¡»æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œæ‰æœ‰å¿…è¦æ·±åº¦é€’å½’ï¼ˆå¦åˆ™æ²¡å¿…è¦ï¼‰</span></div><div class="line">      <span class="keyword">if</span> (deep &amp;&amp; (isPlainObject(source[key]) || isArray(source[key]))) &#123;</div><div class="line"></div><div class="line">        <span class="comment">// source[key] æ˜¯å¯¹è±¡ï¼Œè€Œ target[key] ä¸æ˜¯å¯¹è±¡</span></div><div class="line">        <span class="comment">// åˆ™ target[key] = &#123;&#125; åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„</span></div><div class="line">        <span class="keyword">if</span> (isPlainObject(source[key]) &amp;&amp; !isPlainObject(target[key]))</div><div class="line">          target[key] = &#123;&#125;</div><div class="line"></div><div class="line">        <span class="comment">// source[key] æ˜¯æ•°ç»„ï¼Œè€Œ target[key] ä¸æ˜¯æ•°ç»„</span></div><div class="line">        <span class="comment">// åˆ™ target[key] = [] åˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™é€’å½’ä¼šå‡ºé”™çš„</span></div><div class="line">        <span class="keyword">if</span> (isArray(source[key]) &amp;&amp; !isArray(target[key]))</div><div class="line">          target[key] = []</div><div class="line"></div><div class="line">        <span class="comment">// æ‰§è¡Œé€’å½’</span></div><div class="line">        extend(target[key], source[key], deep)</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="comment">// ä¸æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œè¯´æ˜ source[key] æ˜¯ä¸€èˆ¬çš„å€¼ç±»å‹ï¼Œç›´æ¥èµ‹å€¼ç»™ target å°±æ˜¯äº†</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (source[key] !== <span class="literal">undefined</span>) target[key] = source[key]</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// Copy all but undefined properties from one or more</span></div><div class="line">  <span class="comment">// objects to the `target` object.</span></div><div class="line">  $.extend = <span class="function"><span class="keyword">function</span>(<span class="params">target</span>)</span>&#123;</div><div class="line">    <span class="comment">// ä¸€èˆ¬ä¼ å…¥çš„å‚æ•°ä¼šæ˜¯ï¼š</span></div><div class="line">    <span class="comment">// (targetObj, srcObj1, srcObj2, srcObj1...)</span></div><div class="line">    <span class="comment">// (true, targetObj, srcObj1, srcObj2, srcObj1...)</span></div><div class="line"></div><div class="line">    <span class="comment">// arguments æ˜¯å¯¹è±¡æ•°ç»„ï¼Œslice.call ä¼šè¿”å›çœŸæ­£çš„æ•°ç»„ï¼ˆæ­¤å¤„è¿”å›ä»ç¬¬äºŒé¡¹å¼€å§‹ï¼‰</span></div><div class="line">    <span class="keyword">var</span> deep, args = slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</div><div class="line"></div><div class="line">    <span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯booleanï¼Œè¿™é‡Œä¼šæŠŠç¬¬äºŒä¸ªå‚æ•°å½“åš targetï¼Œå…¶ä»–çš„ä½œä¸º source</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> target == <span class="string">'boolean'</span>) &#123;</div><div class="line">      deep = target</div><div class="line">      target = args.shift()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// å°†æ‰€æœ‰çš„ source æ·»åŠ åˆ° target ä¸­</span></div><div class="line">    args.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">arg</span>)</span>&#123; extend(target, arg, deep) &#125;)</div><div class="line">    <span class="keyword">return</span> target</div><div class="line"></div><div class="line">    <span class="comment">// æ„Ÿè§‰è¿™æ ·è®¾è®¡æ˜¯æ¯”è¾ƒå¥½ï¼Œå¾ˆå¥½çš„å°†ä¸šåŠ¡å’Œåº•å±‚è¿›è¡Œäº†åˆ†ç¦»ï¼ˆè™½ç„¶æ¯”è¾ƒç®€å•ï¼‰ï¼š</span></div><div class="line">    <span class="comment">// æ ¸å¿ƒæ–¹æ³•å† function extend(...)&#123;...&#125; ä¸­å®šä¹‰ï¼Œ</span></div><div class="line">    <span class="comment">// è€Œ $.extend æ–¹æ³•ä¸­åšä¸€äº›å¤–å›´çš„åˆ¤æ–­å’Œå¤„ç†ï¼Œæœ€ç»ˆè°ƒç”¨ extend å‡½æ•°å»æ‰§è¡Œ</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// `$.zepto.qsa` is Zepto's CSS selector implementation which</span></div><div class="line">  <span class="comment">// uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.</span></div><div class="line">  <span class="comment">// This method can be overriden in plugins.</span></div><div class="line">  zepto.qsa = <span class="function"><span class="keyword">function</span>(<span class="params">element, selector</span>)</span>&#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line">      @element: å®¹å™¨</div><div class="line">      @selector: é€‰æ‹©å™¨</div><div class="line">    */</div><div class="line"></div><div class="line">    <span class="keyword">var</span> found,</div><div class="line">        maybeID = selector[<span class="number">0</span>] == <span class="string">'#'</span>,</div><div class="line">        maybeClass = !maybeID &amp;&amp; selector[<span class="number">0</span>] == <span class="string">'.'</span>,</div><div class="line"></div><div class="line">        <span class="comment">// IDæˆ–classå½¢å¼ï¼šè¿”å› selector.slice(1) å³IDæˆ–è€…classçš„å€¼</span></div><div class="line">        <span class="comment">// å¦åˆ™ï¼šè¿”å› selectorï¼Œå¦‚é€šè¿‡ tagName æŸ¥è¯¢</span></div><div class="line">        nameOnly = maybeID || maybeClass ? selector.slice(<span class="number">1</span>) : selector, <span class="comment">// Ensure that a 1 char tag name still gets checked</span></div><div class="line"></div><div class="line">        <span class="comment">// æ˜¯å¦æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„é€‰æ‹©å™¨ï¼Œå¦‚ 'div#div1 .item[link] .red'ï¼‰</span></div><div class="line">        isSimple = simpleSelectorRE.test(nameOnly)</div><div class="line"></div><div class="line">    <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š</span></div><div class="line">    <span class="comment">// // åŒ¹é…ä¸€ä¸ªåŒ…æ‹¬ï¼ˆå­—æ¯ã€æ•°ç»„ã€ä¸‹åˆ’çº¿ã€-ï¼‰çš„å­—ç¬¦ä¸²</span></div><div class="line">    <span class="comment">// simpleSelectorRE = /^[\w-]*$/,</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// ä»¥ä¸‹ä»£ç çš„åŸºæœ¬æ€è·¯æ˜¯ï¼š</span></div><div class="line">    <span class="comment">// 1. ä¼˜å…ˆé€šè¿‡ ID è·å–å…ƒç´ ï¼›</span></div><div class="line">    <span class="comment">// 2. ç„¶åè¯•å›¾é€šè¿‡ className å’Œ tagName è·å–å…ƒç´ </span></div><div class="line">    <span class="comment">// 3. æœ€åé€šè¿‡ querySelectorAll æ¥è·å–</span></div><div class="line">    <span class="keyword">return</span> (isDocument(element) &amp;&amp; isSimple &amp;&amp; maybeID) ?</div><div class="line">           <span class="comment">// è¿™æ˜¯æœ€ç®€å•çš„å½¢å¼ï¼šå®¹å™¨æ˜¯documentã€é€‰æ‹©å™¨æ˜¯ä¸€ä¸ªid</span></div><div class="line">           <span class="comment">// å› ä¸º getElementById åªèƒ½åœ¨ document ä¸Šç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå•ç‹¬æ‹¿å‡ºæ¥</span></div><div class="line">           ( (found = element.getElementById(nameOnly)) ? </div><div class="line">              [found] : </div><div class="line">              [] </div><div class="line">           ) :</div><div class="line"></div><div class="line">           (element.nodeType !== <span class="number">1</span> &amp;&amp; element.nodeType !== <span class="number">9</span>) ? </div><div class="line">              <span class="comment">// å®¹å™¨ä¸æ˜¯ä¸€èˆ¬å…ƒç´ ï¼Œä¹Ÿä¸æ˜¯documentï¼Œç›´æ¥è¿”å› []</span></div><div class="line">              [] :</div><div class="line"></div><div class="line">              <span class="comment">// å°†è·å–çš„æ‰€æœ‰å…ƒç´ é›†åˆï¼Œéƒ½è½¬æ¢ä¸ºæ•°ç»„</span></div><div class="line">              slice.call(</div><div class="line">                isSimple &amp;&amp; !maybeID </div><div class="line"></div><div class="line">                <span class="comment">// isSimpleæƒ…å†µä¸‹ï¼ŒnameOnly åªå¯èƒ½æ˜¯ className æˆ–è€… tagName</span></div><div class="line">                <span class="comment">// getElementsByClassName å’Œ getElementsByTagName å¯ä»¥åœ¨ elem ä¸Šç”¨ï¼Œè€Œä¸”æ¯” querySelectorAll é€Ÿåº¦å¿«</span></div><div class="line">                <span class="comment">// æ‰€ä»¥ï¼Œåªè¦elemå®¹å™¨æœ‰å€¼ï¼Œå°½é‡å•ç‹¬æ‹¿å‡ºæ¥å¤„ç†</span></div><div class="line">                ? </div><div class="line">                  maybeClass ? </div><div class="line">                  element.getElementsByClassName(nameOnly) : <span class="comment">// If it's simple, it could be a class</span></div><div class="line">                  element.getElementsByTagName(selector)  <span class="comment">// Or a tag</span></div><div class="line"></div><div class="line">                <span class="comment">// æœ€åå…¶ä»–æƒ…å†µï¼Œåªèƒ½é€šè¿‡ querySelectorAll æ¥å¤„ç†</span></div><div class="line">                : </div><div class="line">                element.querySelectorAll(selector) <span class="comment">// Or it's not simple, and we need to query all</span></div><div class="line">              )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// æ ¹æ® selector ç­›é€‰ nodes </span></div><div class="line">  <span class="comment">// å¹¶å°† nodes å°è£…ä¸º zepto å¯¹è±¡</span></div><div class="line">  <span class="comment">// $.fn.filter ä¸‹æ–‡å®šä¹‰</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">filtered</span>(<span class="params">nodes, selector</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> selector == <span class="literal">null</span> ? $(nodes) : $(nodes).filter(selector)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// åˆ¤æ–­ parent æ˜¯å¦åŒ…å« node</span></div><div class="line">  $.contains = <span class="built_in">document</span>.documentElement.contains ?</div><div class="line">    <span class="comment">// æµè§ˆå™¨æ”¯æŒ contains æ–¹æ³•</span></div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">parent, node</span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> parent !== node &amp;&amp; parent.contains(node)</div><div class="line">    &#125; :</div><div class="line">    <span class="comment">// ä¸æ”¯æŒ contains æ–¹æ³•</span></div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">parent, node</span>) </span>&#123;</div><div class="line">      <span class="keyword">while</span> (node &amp;&amp; (node = node.parentNode))</div><div class="line">        <span class="keyword">if</span> (node === parent) <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">      <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="comment">// å¦‚æœ arg æ˜¯å‡½æ•°ï¼Œåˆ™æ”¹å˜å‡½æ•°çš„æ‰§è¡Œç¯å¢ƒå’Œå‚æ•°</span></div><div class="line">  <span class="comment">// å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è¿”å› arg</span></div><div class="line">  <span class="comment">// $.fn.html æ–¹æ³•å°±ç”¨åˆ°äº†</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">funcArg</span>(<span class="params">context, arg, idx, payload</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> isFunction(arg) ? arg.call(context, idx, payload) : arg</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// è®¾ç½®å±æ€§</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">setAttribute</span>(<span class="params">node, name, value</span>) </span>&#123;</div><div class="line">    value == <span class="literal">null</span> ? node.removeAttribute(name) : node.setAttribute(name, value)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// è®¾ç½®æˆ–è·å– node çš„ className</span></div><div class="line">  <span class="comment">// è€ƒè™‘ svg ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span></div><div class="line">  <span class="comment">// access className property while respecting SVGAnimatedString</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">className</span>(<span class="params">node, value</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> klass = node.className || <span class="string">''</span>,</div><div class="line">        svg   = klass &amp;&amp; klass.baseVal !== <span class="literal">undefined</span></div><div class="line"></div><div class="line">    <span class="comment">// è·å–</span></div><div class="line">    <span class="keyword">if</span> (value === <span class="literal">undefined</span>) <span class="keyword">return</span> svg ? klass.baseVal : klass</div><div class="line">    <span class="comment">// è®¾ç½®</span></div><div class="line">    svg ? (klass.baseVal = value) : (node.className = value)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š</span></div><div class="line">  <span class="comment">// "true"  =&gt; true</span></div><div class="line">  <span class="comment">// "false" =&gt; false</span></div><div class="line">  <span class="comment">// "null"  =&gt; null</span></div><div class="line">  <span class="comment">// "42"    =&gt; 42</span></div><div class="line">  <span class="comment">// "42.5"  =&gt; 42.5</span></div><div class="line">  <span class="comment">// "08"    =&gt; "08"</span></div><div class="line">  <span class="comment">// JSON    =&gt; parse if valid</span></div><div class="line">  <span class="comment">// String  =&gt; self</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">deserializeValue</span>(<span class="params">value</span>) </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">      <span class="keyword">return</span> value ?</div><div class="line"></div><div class="line">        <span class="comment">// valueã€æœ‰å€¼ã€çš„æƒ…å†µï¼š</span></div><div class="line">        value == <span class="string">"true"</span> ||  <span class="comment">// å¦‚æœ value == 'true'ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æœ¬èº«å°±è¿”å› true ï¼Œå¯¼è‡´æ•´ä¸ªå‡½æ•°è¿”å›true</span></div><div class="line"></div><div class="line">          <span class="comment">// value !== 'true' çš„æƒ…å†µï¼š</span></div><div class="line">          ( </div><div class="line">            value == <span class="string">"false"</span> ? <span class="literal">false</span> : <span class="comment">// "null"  =&gt; null</span></div><div class="line">            value == <span class="string">"null"</span> ? <span class="literal">null</span> : <span class="comment">// "null"  =&gt; null</span></div><div class="line">            +value + <span class="string">""</span> == value ? +value :  <span class="comment">// æ•°å­—ï¼š"42" =&gt; 42  "42.5" =&gt; 42.5  ï¼ˆ ä½†æ˜¯ '08' å´ä¸ç¬¦åˆè¿™ä¸ªæ¡ä»¶ ï¼‰</span></div><div class="line">            /^[\[\&#123;]/.test(value) ? $.parseJSON(value) : <span class="comment">// '[...]' æˆ–è€… '&#123;...&#125;'</span></div><div class="line">            value <span class="comment">// å…¶ä»–</span></div><div class="line">          )</div><div class="line"></div><div class="line">        <span class="comment">// valueã€æ— å€¼ã€çš„æƒ…å†µï¼š undefined / '' / flase / 0 / null</span></div><div class="line">        : value </div><div class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</div><div class="line">      <span class="keyword">return</span> value</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// å°†ä¸Šæ–‡å®šä¹‰çš„å‡½æ•°ï¼Œæš´éœ²ç»™ $ å¯¹è±¡ï¼ˆå…¶å® $ æ˜¯ä¸€ä¸ª functionï¼‰</span></div><div class="line">  $.type = type</div><div class="line">  $.isFunction = isFunction</div><div class="line">  $.isWindow = isWindow</div><div class="line">  $.isArray = isArray</div><div class="line">  $.isPlainObject = isPlainObject</div><div class="line"></div><div class="line">  $.isEmptyObject = <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> name</div><div class="line">    <span class="keyword">for</span> (name <span class="keyword">in</span> obj) <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">    <span class="keyword">return</span> <span class="literal">true</span></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  $.inArray = <span class="function"><span class="keyword">function</span>(<span class="params">elem, array, i</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> emptyArray.indexOf.call(array, elem, i)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  $.camelCase = camelize</div><div class="line">  $.trim = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> str == <span class="literal">null</span> ? <span class="string">""</span> : <span class="built_in">String</span>.prototype.trim.call(str)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// plugin compatibility</span></div><div class="line">  $.uuid = <span class="number">0</span></div><div class="line">  $.support = &#123; &#125;</div><div class="line">  $.expr = &#123; &#125;</div><div class="line"></div><div class="line">  <span class="comment">// é‡æ–°ç»„ç»‡ elements å¯¹è±¡ï¼ˆæ•°ç»„ã€å¯¹è±¡æˆ–è€…å¯¹è±¡æ•°ç»„ï¼‰ï¼Œé’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½ç”¨ callback è¿›è¡Œæ£€éªŒ</span></div><div class="line">  <span class="comment">// æ£€éªŒé€šè¿‡åï¼Œå°†å…ƒç´ pushè¿›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¹¶è¿”å›</span></div><div class="line">  $.map = <span class="function"><span class="keyword">function</span>(<span class="params">elements, callback</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> value, values = [], i, key</div><div class="line"></div><div class="line">    <span class="comment">// æ•°ç»„ï¼Œæˆ–è€…å¯¹è±¡æ•°ç»„</span></div><div class="line">    <span class="keyword">if</span> (likeArray(elements))</div><div class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; elements.length; i++) &#123;</div><div class="line">        <span class="comment">// éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­</span></div><div class="line">        value = callback(elements[i], i)</div><div class="line">        <span class="keyword">if</span> (value != <span class="literal">null</span>) values.push(value)</div><div class="line">      &#125;</div><div class="line"></div><div class="line">    <span class="comment">// å¯¹è±¡</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">      <span class="keyword">for</span> (key <span class="keyword">in</span> elements) &#123;</div><div class="line">        <span class="comment">// éå†ï¼Œç»è¿‡ callback éªŒè¯ï¼Œpushåˆ°ç»“æœä¸­</span></div><div class="line">        value = callback(elements[key], key)</div><div class="line">        <span class="keyword">if</span> (value != <span class="literal">null</span>) values.push(value)</div><div class="line">      &#125;</div><div class="line"></div><div class="line">    <span class="comment">// è¿”å›æ•°ç»„</span></div><div class="line">    <span class="comment">// flatten å‡½æ•°ä¸Šæ–‡å®šä¹‰çš„ï¼Œä½œç”¨ï¼šæ— è®º values æ˜¯å¦æ˜¯æ•°ç»„ï¼Œéƒ½å°†è¿”å›ä¸€ä¸ªæ­£ç¡®çš„æ•°ç»„ã€‚ä¾‹å¦‚ï¼Œä¼ å…¥ 'abc' ï¼Œè¿”å› ['abc']</span></div><div class="line">    <span class="keyword">return</span> flatten(values)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// éå† elements æ‰€æœ‰å…ƒç´ ï¼ˆæ•°ç»„ã€å¯¹è±¡æ•°ç»„ã€å¯¹è±¡ï¼‰ï¼Œæ‰§è¡Œ callback æ–¹æ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯è¿”å› elements</span></div><div class="line">  <span class="comment">// æ³¨æ„1ï¼šcallback.call(elements[i], i, elements[i]) å‡½æ•°æ‰§è¡Œçš„ç¯å¢ƒå’Œå‚æ•°</span></div><div class="line">  <span class="comment">// æ³¨æ„2ï¼š=== false) return elements ä¸€æ—¦æœ‰å‡½æ•°è¿”å› falseï¼Œå³è·³å‡ºå¾ªç¯ï¼Œç±»ä¼¼ break</span></div><div class="line">  <span class="comment">// æ³¨æ„3ï¼šæ— è®ºå“ªç§æƒ…å†µï¼Œæœ€ç»ˆè¿”å›çš„è¿˜æ˜¯ elements</span></div><div class="line">  $.each = <span class="function"><span class="keyword">function</span>(<span class="params">elements, callback</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> i, key</div><div class="line">    <span class="keyword">if</span> (likeArray(elements)) &#123;</div><div class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; elements.length; i++)</div><div class="line">        <span class="keyword">if</span> (callback.call(elements[i], i, elements[i]) === <span class="literal">false</span>) <span class="keyword">return</span> elements</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      <span class="keyword">for</span> (key <span class="keyword">in</span> elements)</div><div class="line">        <span class="keyword">if</span> (callback.call(elements[key], key, elements[key]) === <span class="literal">false</span>) <span class="keyword">return</span> elements</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> elements</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼šfilter = emptyArray.filter</span></div><div class="line">  <span class="comment">// ç­›é€‰æ•°ç»„</span></div><div class="line">  $.grep = <span class="function"><span class="keyword">function</span>(<span class="params">elements, callback</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> filter.call(elements, callback)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.JSON) $.parseJSON = <span class="built_in">JSON</span>.parse</div><div class="line"></div><div class="line">  <span class="comment">// Populate the class2type map</span></div><div class="line">  $.each(<span class="string">"Boolean Number String Function Array Date RegExp Object Error"</span>.split(<span class="string">" "</span>), <span class="function"><span class="keyword">function</span>(<span class="params">i, name</span>) </span>&#123;</div><div class="line">    class2type[ <span class="string">"[object "</span> + name + <span class="string">"]"</span> ] = name.toLowerCase()</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">      ä¸Šæ–‡å°† class2type èµ‹å€¼ä¸º &#123;&#125;</div><div class="line">      æœ€ç»ˆå°† class2type èµ‹å€¼ä¸ºï¼š</div><div class="line">      &#123;</div><div class="line">        '[object boolean]': 'boolean',</div><div class="line">        '[object number]': 'number',</div><div class="line">        '[object string]': 'string',</div><div class="line">        ...</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      å­˜å‚¨è¿™ä¸ªæ•°æ®æ˜¯ä¸ºäº†æ–¹ä¾¿çš„è·å–ä¸€äº›å¯¹è±¡çš„ç±»å‹ï¼Œ</div><div class="line">      ä¾‹å¦‚ Object.prototype.toString.call([]) è¿”å›çš„æ˜¯ '[Object Array]'</div><div class="line">      é‚£ä¹ˆå³å¯æ ¹æ®è¿™ä¸ªè·å– [] çš„ç±»å‹æ˜¯ 'array'</div><div class="line">    */</div><div class="line"></div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="comment">// Define methods that will be available on all</span></div><div class="line">  <span class="comment">// Zepto collections</span></div><div class="line">  $.fn = &#123;</div><div class="line"></div><div class="line">    <span class="comment">// ä¸ºä½•è¦è¿™ä¹ˆå¤šæ•°ç»„çš„æ–¹æ³•ï¼Ÿ</span></div><div class="line">    <span class="comment">// å› ä¸ºä¸€ä¸ª zepto å¯¹è±¡ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span></div><div class="line"></div><div class="line">    <span class="comment">// Because a collection acts like an array</span></div><div class="line">    <span class="comment">// copy over these useful array functions.</span></div><div class="line">    forEach: emptyArray.forEach,</div><div class="line">    <span class="attr">reduce</span>: emptyArray.reduce,  <span class="comment">// æ–¹æ³•ä½•ç”¨ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</span></div><div class="line">    push: emptyArray.push,</div><div class="line">    <span class="attr">sort</span>: emptyArray.sort,</div><div class="line">    <span class="attr">indexOf</span>: emptyArray.indexOf,</div><div class="line">    <span class="attr">concat</span>: emptyArray.concat,</div><div class="line"></div><div class="line">    <span class="comment">// `map` and `slice` in the jQuery API work differently</span></div><div class="line">    <span class="comment">// from their array counterparts</span></div><div class="line">    map: <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>)</span>&#123;</div><div class="line">      <span class="comment">// $.map ä¸Šæ–‡å®šä¹‰çš„ï¼Œ $.map = function (elements, callback) &#123;....&#125;</span></div><div class="line">      <span class="comment">// $.map ä½œç”¨ï¼šé’ˆå¯¹ elementsï¼ˆå¯¹è±¡ã€å¯¹è±¡æ•°ç»„æˆ–æ•°ç»„ï¼‰ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½ç»è¿‡ callback å‡½æ•°çš„è¿‡æ»¤ï¼Œå¹¶å°†è¿‡æ»¤é€šè¿‡çš„å…ƒç´ ï¼Œpushåˆ°ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œè¿”å›æ–°æ•°ç»„</span></div><div class="line"></div><div class="line">      <span class="comment">// æœ€åï¼Œç”¨ $ å°è£…è¿”å›</span></div><div class="line">      <span class="keyword">return</span> $(</div><div class="line">        <span class="comment">// $.map è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„</span></div><div class="line">        $.map(<span class="keyword">this</span>, </div><div class="line">          <span class="comment">// é’ˆå¯¹æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå¦‚æœå‡½æ•°è¿”å›çš„ !=null å°±å°†æ’å…¥åˆ°æ–°è¿”å›çš„æ•°ç»„</span></div><div class="line">          <span class="function"><span class="keyword">function</span>(<span class="params">el, i</span>)</span>&#123; <span class="keyword">return</span> fn.call(el, i, el) &#125;</div><div class="line">        )</div><div class="line">      )</div><div class="line"></div><div class="line">      <span class="comment">/*</span></div><div class="line">        $('div').map(function(key, value)&#123;</div><div class="line">          return value.id;</div><div class="line">          // æˆ–è€… return this.id;</div><div class="line">        &#125;)</div><div class="line">        è¿™ä¸ªç»“æœå°±æ˜¯ $(['div1', 'div2' ...])</div><div class="line">      */</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">slice</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="comment">// ç›´æ¥æ•°ç»„çš„sliceæ–¹æ³•ï¼Œå¹¶å°†ç»“æœç”¨ $ å°è£…è¿”å›</span></div><div class="line">      <span class="keyword">return</span> $(slice.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>))</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// åœ¨ zepto.init å‡½æ•°ä¸­ï¼Œå½“ä¼ å…¥çš„å‡½æ•°æ˜¯å‡½æ•°æ—¶ï¼Œå°±ç”¨åˆ°äº† ready </span></div><div class="line">    <span class="comment">// else if (isFunction(selector)) return $(document).ready(selector)</span></div><div class="line">    ready: <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">      <span class="comment">// need to check if document.body exists for IE as that browser reports</span></div><div class="line">      <span class="comment">// document ready when it hasn't yet created the body element</span></div><div class="line"></div><div class="line">      <span class="comment">// ä¸‹æ–‡å®šä¹‰ï¼šreadyRE = /complete|loaded|interactive/,</span></div><div class="line">      <span class="keyword">if</span> (readyRE.test(<span class="built_in">document</span>.readyState) &amp;&amp; <span class="built_in">document</span>.body) callback($)</div><div class="line">      <span class="keyword">else</span> <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; callback($) &#125;, <span class="literal">false</span>)</div><div class="line"></div><div class="line">      <span class="comment">// è¿”å›å½“å‰å¯¹è±¡</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> idx === <span class="literal">undefined</span> ? </div><div class="line">             slice.call(<span class="keyword">this</span>) : <span class="comment">// æœªä¼ å‚æ•°ï¼Œç›´æ¥è¿”å›ä¸€æ•´ä¸ªæ•°ç»„</span></div><div class="line">             <span class="comment">// æœ‰å‚æ•°ï¼Œåˆ™è¯•å›¾è¿”å›å•ä¸ªå…ƒç´ ï¼ˆå¤§äº0ï¼Œå°äº0 ä¸¤ç§æƒ…å†µï¼‰</span></div><div class="line">             <span class="keyword">this</span>[</div><div class="line">                idx &gt;= <span class="number">0</span> ? </div><div class="line">                idx : </div><div class="line">                idx + <span class="keyword">this</span>.length</div><div class="line">            ]</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// å°†zeptoé›†åˆå˜ä¸ºçº¯æ•°ç»„</span></div><div class="line">    toArray: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.get() &#125;,</div><div class="line"></div><div class="line">    <span class="attr">size</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.length</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// å°†å…ƒç´ ä»è¿™ä¸ªDOMæ ‘ä¸­ç§»é™¤</span></div><div class="line">    remove: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.parentNode != <span class="literal">null</span>)</div><div class="line">          <span class="keyword">this</span>.parentNode.removeChild(<span class="keyword">this</span>)</div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="attr">each</span>: <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">      <span class="comment">// [].every ES5ä¸­Arrayçš„æ–°ç‰¹æ€§ã€‚å¾ªç¯æ•°ç»„æ¯ä¸ªå…ƒç´ ï¼Œè¿”å›æ˜¯å¦ç¬¦åˆcallbackå‡½æ•°çš„è¦æ±‚</span></div><div class="line"></div><div class="line">      <span class="comment">// every å‡½æ•°è¿”å›çš„æ˜¯ false æˆ–è€… trueï¼ˆä¸è¿‡è¿™é‡Œè¿”å›ä»€ä¹ˆæ— æ‰€è°“ï¼Œæ‰§è¡Œå°±å¯ä»¥äº†ï¼‰</span></div><div class="line">      emptyArray.every.call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">el, idx</span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> callback.call(el, idx, el) !== <span class="literal">false</span></div><div class="line">      &#125;)</div><div class="line"></div><div class="line">      <span class="comment">// æœ€åè¿”å›æœ¬èº«å¯¹è±¡</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">filter</span>: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="comment">// notå‡½æ•°ä¸‹æ–‡å®šä¹‰</span></div><div class="line">      <span class="comment">// å¦‚æœç»™notä¼ å…¥çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œåˆ™è¿”å›ä¸ç¬¦åˆè¿™ä¸ªå‡½æ•°è§„åˆ™çš„å…ƒç´ çš„æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰</span></div><div class="line">      <span class="keyword">if</span> (isFunction(selector)) <span class="keyword">return</span> <span class="keyword">this</span>.not(<span class="keyword">this</span>.not(selector))</div><div class="line"></div><div class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼šzepto.matches åˆ¤æ–­elementsæ˜¯å¦ç¬¦åˆ selector çš„è¦æ±‚</span></div><div class="line">      <span class="comment">// zepto.matches = function(element, selector) &#123;...&#125;</span></div><div class="line">      <span class="keyword">return</span> $(filter.call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">        <span class="comment">// åˆ©ç”¨ [].filter æ–¹æ³•åšç­›é€‰ï¼Œåˆ©ç”¨ zepto.matches åšåˆ¤æ–­</span></div><div class="line">        <span class="keyword">return</span> zepto.matches(element, selector)</div><div class="line">      &#125;))</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// $('div') å¯èƒ½åªæœ‰ä¸‰ä¸ª div èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ $('div').add('p') å†ä¸‰ä¸ª div èŠ‚ç‚¹çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸‰ä¸ª p èŠ‚ç‚¹</span></div><div class="line">    add: <span class="function"><span class="keyword">function</span>(<span class="params">selector,context</span>)</span>&#123;</div><div class="line">      <span class="comment">// uniqå‡½æ•°â€”â€”æ•°ç»„å»é‡ï¼Œä¾‹å¦‚ï¼šç”¨æ¥å°† [1,1,2,2,3,3] æ›¿æ¢ä¸º [1,2,3]</span></div><div class="line">      <span class="keyword">return</span> $(uniq(<span class="keyword">this</span>.concat($(selector,context))))</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">is</span>: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="comment">// æ³¨æ„ï¼šè¿™é‡Œåªå¯¹ this[0] ç¬¬ä¸€ä¸ªå…ƒç´ åšåˆ¤æ–­äº†ï¼Œå…¶ä»–çš„å…ƒç´ ä¸ç®¡äº†</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.length &gt; <span class="number">0</span> &amp;&amp; zepto.matches(<span class="keyword">this</span>[<span class="number">0</span>], selector)</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="attr">not</span>: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> nodes=[] <span class="comment">// å­˜å‚¨æœ€åè¿”å›çš„ç»“æœ</span></div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœå‚æ•°æ˜¯å‡½æ•°</span></div><div class="line">      <span class="keyword">if</span> (isFunction(selector) &amp;&amp; selector.call !== <span class="literal">undefined</span>)</div><div class="line">        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">          <span class="comment">// éå†å¯¹è±¡çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯¹æ¯ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¼ å…¥çš„å‡½æ•°</span></div><div class="line">          <span class="comment">// å½“å‡½æ•°è¿”å› false æ—¶ï¼ˆå³ä¸ç¬¦åˆå‡½æ•°çš„è§„åˆ™ï¼‰ï¼Œåˆ™å°†å½“å‰å…ƒç´ pushåˆ°ç»“æœä¸­ï¼Œç­‰å¾…è¿”å›</span></div><div class="line">          <span class="keyword">if</span> (!selector.call(<span class="keyword">this</span>,idx)) nodes.push(<span class="keyword">this</span>)</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœå‚æ•°ä¸æ˜¯å‡½æ•°</span></div><div class="line">      <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// ä¸º excludes èµ‹å€¼</span></div><div class="line">        <span class="keyword">var</span> excludes = </div><div class="line">          <span class="comment">// å¦‚æœ selector æ˜¯å­—ç¬¦ä¸²ï¼ˆcssé€‰æ‹©å™¨ï¼‰ï¼Œåˆ™ç”¨filterè¿‡æ»¤ï¼Œå°†ç»“æœå­˜å‚¨åˆ° excludes ä¸­</span></div><div class="line">          <span class="keyword">typeof</span> selector == <span class="string">'string'</span> ? <span class="keyword">this</span>.filter(selector) :</div><div class="line">          <span class="comment">// å¦‚æœ selector ä¸æ˜¯å­—ç¬¦ä¸²</span></div><div class="line">          <span class="comment">// å¦‚æœæ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡æ•°ç»„ï¼ˆå¹¶ä¸” selector.item æ˜¯å‡½æ•°ï¼Ÿï¼Ÿï¼Ÿï¼‰ï¼Œåˆ™ç”Ÿæˆæ•°ç»„ï¼Œèµ‹å€¼ç»™ excludes</span></div><div class="line">          (likeArray(selector) &amp;&amp; isFunction(selector.item)) ? slice.call(selector) </div><div class="line">          <span class="comment">// å¦åˆ™ç›´æ¥ç”Ÿæˆ zepto å¯¹è±¡ï¼Œèµ‹å€¼ç»™ excludes</span></div><div class="line">            : $(selector)</div><div class="line"></div><div class="line">        <span class="comment">// è‡³æ­¤ï¼Œexcludes ä¸­å°±å­˜å‚¨äº†é€šè¿‡ selector æŸ¥æ‰¾å‡ºæ¥çš„å…ƒç´ </span></div><div class="line"></div><div class="line">        <span class="comment">// [].forEach æ˜¯ES5çš„æ–°ç‰¹æ€§</span></div><div class="line">        <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">el</span>)</span>&#123;</div><div class="line">          <span class="comment">// å–å‡º excludes ä¸­ä¸åŒ…å«çš„å…ƒç´ ï¼Œpushåˆ°ç»“æœä¸­</span></div><div class="line">          <span class="keyword">if</span> (excludes.indexOf(el) &lt; <span class="number">0</span>) nodes.push(el)</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="comment">// è¿”å›æœ€åçš„ç»“æœï¼Œç”¨ $ å°è£…</span></div><div class="line">      <span class="keyword">return</span> $(nodes)</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="attr">has</span>: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="comment">// ç»è¿‡ filter å‡½æ•°å¤„ç†ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¤„ç†åçš„å€¼</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> isObject(selector) ?</div><div class="line">          <span class="comment">// å¦‚æœ seletor æ˜¯ objectï¼ˆå¯èƒ½æ˜¯elemèŠ‚ç‚¹ï¼‰ï¼Œåˆ™ç”¨ $.contains åˆ¤æ–­</span></div><div class="line">          $.contains(<span class="keyword">this</span>, selector) :</div><div class="line">          <span class="comment">// å¦åˆ™ï¼ˆselectoræ˜¯cssé€‰æ‹©å­—ç¬¦ä¸²ï¼‰åˆ™è¿”å›findåçš„sizeï¼ˆå¦‚æœ size === 0 å³ç›¸å½“äºè¿”å› falseï¼‰</span></div><div class="line">          $(<span class="keyword">this</span>).find(selector).size()</div><div class="line"></div><div class="line">          <span class="comment">// $.fn.find åœ¨ä¸‹æ–‡å®šä¹‰</span></div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">eq</span>: <span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">      <span class="comment">// å–å‡ºæŒ‡å®šindexçš„å…ƒç´ </span></div><div class="line">      <span class="comment">// å¯æ”¯æŒ -1ã€0ã€1ã€2 â€¦â€¦</span></div><div class="line">      <span class="keyword">return</span> idx === <span class="number">-1</span> ? <span class="keyword">this</span>.slice(idx) : <span class="keyword">this</span>.slice(idx, + idx + <span class="number">1</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">first</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> el = <span class="keyword">this</span>[<span class="number">0</span>]</div><div class="line">      <span class="comment">// ä¸æ˜¯ object åˆ™ç›´æ¥è¿”å›</span></div><div class="line">      <span class="comment">// æ˜¯ object ç±»å‹ï¼Œåˆ™ç”¨ $ å°è£… ï¼ˆå› ä¸ºæ—¶åˆ»éƒ½è¦æ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼ï¼‰</span></div><div class="line">      <span class="keyword">return</span> el &amp;&amp; !isObject(el) ? el : $(el)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">last</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> el = <span class="keyword">this</span>[<span class="keyword">this</span>.length - <span class="number">1</span>]</div><div class="line">      <span class="keyword">return</span> el &amp;&amp; !isObject(el) ? el : $(el)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">find</span>: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="comment">// result å­˜å‚¨è¿”å›ç»“æœ</span></div><div class="line">      <span class="keyword">var</span> result, $<span class="keyword">this</span> = <span class="keyword">this</span></div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºçš„ zepto å¯¹è±¡</span></div><div class="line">      <span class="keyword">if</span> (!selector) result = $()</div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœselectoræ˜¯å¯¹è±¡</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">'object'</span>)</div><div class="line">        result = $(selector).filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          <span class="keyword">var</span> node = <span class="keyword">this</span></div><div class="line">          <span class="keyword">return</span> emptyArray.some.call($<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">parent</span>)</span>&#123;</div><div class="line">            <span class="keyword">return</span> $.contains(parent, node)</div><div class="line">          &#125;)</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœ selector ä¸æ˜¯å¯¹è±¡ï¼ˆå³æ˜¯cssé€‰æ‹©å™¨ï¼‰ï¼š</span></div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœåªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ qsa åˆ¤æ–­ï¼Œç»“æœç»è¿‡ $ å°è£…åèµ‹å€¼ç»™ result</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.length == <span class="number">1</span>) result = $(zepto.qsa(<span class="keyword">this</span>[<span class="number">0</span>], selector))</div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœæœ‰å¤šä¸ªå…ƒç´ ï¼Œåˆ™ä½¿ç”¨ map éå†æ‰€æœ‰å…ƒç´ ï¼Œä½¿ç”¨ qsa é’ˆå¯¹æ¯ä¸ªå…ƒç´ åˆ¤æ–­ï¼Œç¬¦åˆæ¡ä»¶å³è¿”å›ï¼ˆmapå°†è¿”å›åŒ…å«ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ $ å°è£…ï¼Œæ”¯æŒé“¾å¼æ“ä½œï¼ï¼ï¼‰</span></div><div class="line">      <span class="keyword">else</span> result = <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> zepto.qsa(<span class="keyword">this</span>, selector) &#125;)</div><div class="line"></div><div class="line">      <span class="comment">// è¿”å›æœ€ç»ˆç»“æœ</span></div><div class="line">      <span class="keyword">return</span> result</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// ä»å…ƒç´ æœ¬èº«å¼€å§‹ï¼Œé€çº§å‘ä¸Šçº§å…ƒç´ åŒ¹é…ï¼Œå¹¶è¿”å›æœ€å…ˆåŒ¹é…selectorçš„å…ƒç´ </span></div><div class="line">    closest: <span class="function"><span class="keyword">function</span>(<span class="params">selector, context</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> node = <span class="keyword">this</span>[<span class="number">0</span>], collection = <span class="literal">false</span></div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœ selector æ˜¯å¯¹è±¡ï¼Œåˆ™ç”¨ $ å°è£…åï¼Œèµ‹å€¼ç»™ collection</span></div><div class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> selector == <span class="string">'object'</span>) collection = $(selector)</div><div class="line"></div><div class="line">      <span class="keyword">while</span> (</div><div class="line">        <span class="comment">// whileå¾ªç¯çš„åˆ¤æ–­æ¡ä»¶ï¼š</span></div><div class="line">        <span class="comment">// ç¬¬ä¸€ï¼Œnodeæœ‰å€¼ï¼ˆnodeä¸€å¼€å§‹è¢«èµ‹å€¼ä¸ºå¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</span></div><div class="line">        <span class="comment">// ç¬¬äºŒï¼Œcollectionæœ‰å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å¯¹è±¡ï¼‰åˆ™collectionåŒ…å«nodeï¼›collectionæ— å€¼ï¼ˆä¼ å…¥çš„selectoræ˜¯å­—ç¬¦ä¸²ï¼Œcssé€‰æ‹©ï¼‰ï¼Œåˆ™nodeæ»¡è¶³selectoræ¡ä»¶</span></div><div class="line">        <span class="comment">// æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œä¸æ»¡è¶³ç¬¬äºŒæ¡ä»¶ï¼Œåˆ™å¾ªç¯ç»§ç»­ï¼ˆnodeè¯•å›¾èµ‹å€¼ä¸ºnode.parentNodeï¼‰ï¼›å¦åˆ™ï¼Œå¾ªç¯è·³å‡ºï¼ˆè¯´æ˜å·²ç»æ‰¾åˆ°äº†ç¬¦åˆæ¡ä»¶çš„çˆ¶èŠ‚ç‚¹ï¼‰</span></div><div class="line">        node &amp;&amp; !(</div><div class="line">                    collection ? collection.indexOf(node) &gt;= <span class="number">0</span> : zepto.matches(node, selector)</div><div class="line">                )</div><div class="line">      )</div><div class="line">        <span class="comment">// nodeèµ‹å€¼æˆ node.parentNode</span></div><div class="line">        <span class="comment">// å‰ææ¡ä»¶æ˜¯ï¼šnode != context &amp;&amp; node ä¸æ˜¯ documentï¼Œå¦‚æœæ˜¯è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œé‚£å°±ä¸ç»§ç»­èµ‹å€¼</span></div><div class="line">        node = node !== context &amp;&amp; !isDocument(node) &amp;&amp; node.parentNode</div><div class="line"></div><div class="line">      <span class="comment">// è¿”å›æœ€ç»ˆç»“æœ</span></div><div class="line">      <span class="keyword">return</span> $(node)</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è·å–å¯¹è±¡é›†åˆæ¯ä¸ªå…ƒç´ æ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ ã€‚ $('h1').parents() =&gt; [&lt;div#container&gt;, &lt;body&gt;, &lt;html&gt;]</span></div><div class="line">    parents: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> ancestors = [], nodes = <span class="keyword">this</span></div><div class="line">      <span class="keyword">while</span> (nodes.length &gt; <span class="number">0</span>)</div><div class="line">        <span class="comment">// å¯èƒ½éœ€è¦æ‰§è¡Œå¤šæ¬¡ while å¾ªç¯</span></div><div class="line">        <span class="comment">// æ¯æ¬¡æ‰§è¡Œ $.map å‡½æ•°éƒ½ä¼šå¯¹ nodes é‡æ–°èµ‹å€¼ï¼Œç„¶åå†åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­å¾ªç¯</span></div><div class="line">        <span class="comment">// å› ä¸ºè¦è·å–æ¯ä¸ªå…ƒç´ çš„æ‰€æœ‰ç¥–å…ˆå…ƒç´ ï¼Œæ‰€ä»¥è¦å¤šæ¬¡å¾ªç¯</span></div><div class="line">        nodes = $.map(nodes, <span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</div><div class="line">          <span class="comment">// ä½¿ç”¨ $.mapï¼ˆè¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ–°æ•°ç»„ï¼Œå¹¶ç”¨ $ å°è£…ï¼‰éå†æ‰€æœ‰å…ƒç´ </span></div><div class="line">          <span class="keyword">if</span> ((node = node.parentNode) &amp;&amp; !isDocument(node) &amp;&amp; ancestors.indexOf(node) &lt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// å°†ç¬¦åˆæ¡ä»¶çš„å…ƒç´ pushåˆ°ç»“æœä¸­</span></div><div class="line">            <span class="comment">// æ¡ä»¶ï¼šä¸èƒ½æ˜¯ documentï¼Œç»“æœä¸­å…ƒç´ ä¸èƒ½é‡å¤ã€‚å¦åˆ™ä¸æ‰§è¡Œpush</span></div><div class="line">            ancestors.push(node)</div><div class="line"></div><div class="line">            <span class="comment">// è¿”å›çš„ node ï¼Œå°†æ‹¼æ¥å‡ºæ–°æ•°ç»„ï¼Œé‡æ–°å¤åˆ¶ç»™ nodesï¼Œç„¶åè¯•å›¾ç»§ç»­æ‰§è¡Œ while å¾ªç¯</span></div><div class="line">            <span class="keyword">return</span> node</div><div class="line">          &#125;</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºï¼Œè¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span></div><div class="line">      <span class="keyword">return</span> filtered(ancestors, selector)</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è·å–å¯¹è±¡é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„ç›´æ¥çˆ¶å…ƒç´ ã€‚å¦‚æœcssé€‰æ‹©å™¨å‚æ•°ç»™å‡ºã€‚è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚</span></div><div class="line">    parent: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="comment">// pluck å‡½æ•°åœ¨ä¸‹æ–‡å®šä¹‰</span></div><div class="line">      <span class="comment">// parent å‡½æ•°ï¼Œåªè·å–ç¬¬ä¸€çº§çˆ¶èŠ‚ç‚¹å³å¯</span></div><div class="line">      <span class="keyword">return</span> filtered(uniq(<span class="keyword">this</span>.pluck(<span class="string">'parentNode'</span>)), selector)</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤</span></div><div class="line">    children: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> filtered(</div><div class="line">        <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> children(<span class="keyword">this</span>) &#125;),  selector</div><div class="line">      )</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è·å¾—æ¯ä¸ªåŒ¹é…å…ƒç´ é›†åˆå…ƒç´ çš„å­å…ƒç´ ï¼ŒåŒ…æ‹¬æ–‡å­—å’Œæ³¨é‡ŠèŠ‚ç‚¹</span></div><div class="line">    contents: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> slice.call(<span class="keyword">this</span>.childNodes) &#125;)</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è·å–å¯¹è±¡é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œå¯é€šè¿‡ selector è¿‡æ»¤</span></div><div class="line">    siblings: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> filtered(<span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params">i, el</span>)</span>&#123;</div><div class="line">        <span class="comment">// è·å–å…„å¼ŸèŠ‚ç‚¹</span></div><div class="line">        <span class="keyword">return</span> filter.call(children(el.parentNode), <span class="function"><span class="keyword">function</span>(<span class="params">child</span>)</span>&#123; <span class="keyword">return</span> child!==el &#125;)</div><div class="line">      &#125;), selector)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">empty</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.innerHTML = <span class="string">''</span> &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// `pluck` is borrowed from Prototype.js</span></div><div class="line">    pluck: <span class="function"><span class="keyword">function</span>(<span class="params">property</span>)</span>&#123;</div><div class="line">      <span class="comment">// è·å–è‡ªå®šä¹‰å±æ€§ï¼Œè¿”å›å€¼ï¼Œæ‹¼æ¥æ•°ç»„</span></div><div class="line">      <span class="keyword">return</span> $.map(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">el</span>)</span>&#123; <span class="keyword">return</span> el[property] &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">show</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="comment">// è¿”å›å½“å‰å¯¹è±¡ï¼Œä¿è¯å¯é“¾å¼æ“ä½œ</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">// ç¬¬ä¸€æ­¥ï¼Œé’ˆå¯¹å†…è”æ ·å¼ï¼Œå°† none æ”¹ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¦‚ &lt;p id="p2" style="display:none;"&gt;p2&lt;/p&gt;</span></div><div class="line">        <span class="keyword">this</span>.style.display == <span class="string">"none"</span> &amp;&amp; (<span class="keyword">this</span>.style.display = <span class="string">''</span>)</div><div class="line"></div><div class="line">        <span class="comment">// ç¬¬äºŒæ­¥ï¼Œé’ˆå¯¹cssæ ·å¼ï¼Œå¦‚æœæ˜¯ none åˆ™ä¿®æ”¹ä¸ºé»˜è®¤çš„æ˜¾ç¤ºæ ·å¼</span></div><div class="line">        <span class="keyword">if</span> (getComputedStyle(<span class="keyword">this</span>, <span class="string">''</span>).getPropertyValue(<span class="string">"display"</span>) == <span class="string">"none"</span>)</div><div class="line">          <span class="keyword">this</span>.style.display = defaultDisplay(<span class="keyword">this</span>.nodeName)</div><div class="line"></div><div class="line">        <span class="comment">// show æ–¹æ³•æ˜¯ä¸ºäº†æ˜¾ç¤ºå¯¹è±¡ï¼Œè€Œå¯¹è±¡éšè—çš„æ–¹å¼æœ‰ä¸¤ç§ï¼šå†…è”æ ·å¼ æˆ– cssæ ·å¼</span></div><div class="line">        <span class="comment">// this.style.display åªèƒ½è·å–å†…è”æ ·å¼çš„å€¼ï¼ˆè·å–å±æ€§å€¼ï¼‰</span></div><div class="line">        <span class="comment">// getComputedStyle(this, '').getPropertyValue("display") å¯ä»¥è·å–å†…è”ã€cssæ ·å¼çš„å€¼ï¼ˆè·å– renderTree çš„å€¼ï¼‰</span></div><div class="line">        <span class="comment">// å› æ­¤ï¼Œè¿™ä¸¤æ­¥éƒ½è¦åšåˆ¤æ–­ï¼Œ</span></div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">replaceWith</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newContent</span>)</span>&#123;</div><div class="line">      <span class="comment">// å…ˆåœ¨å‰é¢æ’å…¥ï¼Œç„¶åå°†å½“å‰å¯¹è±¡ç§»é™¤</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.before(newContent).remove()</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">wrap</span>: <span class="function"><span class="keyword">function</span>(<span class="params">structure</span>)</span>&#123;</div><div class="line">      <span class="comment">// æ˜¯å¦æ˜¯å‡½æ•°</span></div><div class="line">      <span class="keyword">var</span> func = isFunction(structure)</div><div class="line"></div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>[<span class="number">0</span>] &amp;&amp; !func)</div><div class="line">        <span class="keyword">var</span> dom   = $(structure).get(<span class="number">0</span>),</div><div class="line">            <span class="comment">// ä½•æ—¶ç”¨ clone ï¼Ÿ</span></div><div class="line">            <span class="comment">// ç¬¬ä¸€ï¼Œdom.parentNode è¯´æ˜ dom åœ¨æ–‡æ¡£ç»“æ„ä¸­ï¼Œä¸ clone å°±ä¼šè¢«ç§»åŠ¨</span></div><div class="line">            <span class="comment">// ç¬¬äºŒï¼Œthis.length &gt; 1 è¯´æ˜å½“å‰å¯¹è±¡æœ‰å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½è¦æ·»åŠ ï¼Œæ‰€æœ‰è¦clone</span></div><div class="line">            clone = dom.parentNode || <span class="keyword">this</span>.length &gt; <span class="number">1</span></div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</div><div class="line">        <span class="comment">// å€Ÿç”¨ wrapAll æ–¹æ³•æ¥åšåŒ…è£…</span></div><div class="line">        $(<span class="keyword">this</span>).wrapAll(</div><div class="line">          func ? structure.call(<span class="keyword">this</span>, index) :</div><div class="line">            clone ? dom.cloneNode(<span class="literal">true</span>) : dom</div><div class="line">        )</div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// åœ¨æ‰€æœ‰åŒ¹é…å…ƒç´ å¤–é¢åŒ…ä¸€ä¸ªå•ç‹¬çš„ç»“æ„</span></div><div class="line">    wrapAll: <span class="function"><span class="keyword">function</span>(<span class="params">structure</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>[<span class="number">0</span>]) &#123;</div><div class="line">        <span class="comment">// å…ˆå°† structure æ’å…¥åˆ°æ–‡æ¡£ç»“æ„</span></div><div class="line">        $(<span class="keyword">this</span>[<span class="number">0</span>]).before(structure = $(structure))</div><div class="line"></div><div class="line">        <span class="keyword">var</span> children</div><div class="line">        <span class="comment">// drill down to the inmost element</span></div><div class="line">        <span class="comment">// é€šè¿‡å¾ªç¯ï¼Œå°† structure é‡æ–°èµ‹å€¼ä¸ºå½“å‰ structure çš„æœ€æ·±å¤„çš„ä¸€ä¸ªå­å…ƒç´  </span></div><div class="line">        <span class="keyword">while</span> ((children = structure.children()).length) structure = children.first()</div><div class="line"></div><div class="line">        <span class="comment">// å°†æ‰€æœ‰å­å…ƒç´ éƒ½åŒ…è£¹è¿› structure</span></div><div class="line">        $(structure).append(<span class="keyword">this</span>)</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="comment">// è¿”å›å½“å‰å¯¹è±¡</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">wrapInner</span>: <span class="function"><span class="keyword">function</span>(<span class="params">structure</span>)</span>&#123;</div><div class="line">      <span class="comment">// æ˜¯å¦æ˜¯å‡½æ•°</span></div><div class="line">      <span class="keyword">var</span> func = isFunction(structure)</div><div class="line"></div><div class="line">      <span class="comment">// è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> self = $(<span class="keyword">this</span>), contents = self.contents(),</div><div class="line">            <span class="comment">// æ˜¯å‡½æ•°ï¼Œå³è·å–å‡½æ•°æ‰§è¡Œçš„è¿”å›ç»“æœï¼›å¦åˆ™ç›´æ¥ç”¨ structure å‚æ•°</span></div><div class="line">            dom  = func ? structure.call(<span class="keyword">this</span>, index) : structure</div><div class="line"></div><div class="line">        <span class="comment">// å¦‚æœå½“å‰å…ƒç´ æœ‰å†…å®¹ï¼Œåˆ™é€šè¿‡å†…å®¹ wrapAllã€‚æ— å†…å®¹ï¼Œåˆ™ç›´æ¥ç”¨è‡ªèº«çš„ append å¢åŠ </span></div><div class="line">        contents.length ? contents.wrapAll(dom) : self.append(dom)</div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">unwrap</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="comment">// é€šè¿‡ this.parent() è·å–æ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹ï¼ˆé›†åˆï¼‰</span></div><div class="line">      <span class="comment">// éå†è¿™ä¸ªçˆ¶èŠ‚ç‚¹çš„é›†åˆ</span></div><div class="line">      <span class="keyword">this</span>.parent().each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">// å°†å½“å‰çˆ¶èŠ‚ç‚¹æ›¿æ¢ä¸ºå®ƒçš„å­èŠ‚ç‚¹</span></div><div class="line">        $(<span class="keyword">this</span>).replaceWith($(<span class="keyword">this</span>).children())</div><div class="line">      &#125;)</div><div class="line"></div><div class="line">      <span class="comment">// è¿”å›å¯¹è±¡è‡ªèº«ï¼Œä¿è¯é“¾å¼æ“ä½œ</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">clone</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="comment">// é€šè¿‡ this.map å¾ªç¯å¯¹è±¡ï¼Œ</span></div><div class="line">      <span class="comment">// é’ˆå¯¹æ¯ä¸ªå…ƒç´ éƒ½è¿”å›å®ƒçš„clone         è¿™ä¸ª this å’Œå‰é¢çš„ this ä¸ä¸€æ ·</span></div><div class="line">      <span class="comment">// è¿”å›æ–°æ•°ç»„ï¼ˆç”¨ $ å°è£…ï¼‰</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.cloneNode(<span class="literal">true</span>) &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">hide</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.css(<span class="string">"display"</span>, <span class="string">"none"</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// åˆ‡æ¢æ˜¾ç¤ºå’Œéšè—</span></div><div class="line">    toggle: <span class="function"><span class="keyword">function</span>(<span class="params">setting</span>)</span>&#123;</div><div class="line">      <span class="comment">/*</span></div><div class="line">        @setting</div><div class="line">        true : å¼ºåˆ¶åˆ‡æ¢ä¸º show</div><div class="line">        false : å¼ºåˆ¶åˆ‡æ¢ä¸º hide</div><div class="line">      */</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> el = $(<span class="keyword">this</span>)</div><div class="line"></div><div class="line">        <span class="comment">// æ¡ä»¶åˆ¤æ–­ï¼š</span></div><div class="line">        <span class="comment">// å¦‚æœ setting === undefined åˆ™çœ‹ el.css("display") == "none"</span></div><div class="line">        <span class="comment">// å¦‚æœ setting !== undefined åˆ™çœ‹ !!setting</span></div><div class="line">        ;(setting === <span class="literal">undefined</span> ? el.css(<span class="string">"display"</span>) == <span class="string">"none"</span> : setting) ? </div><div class="line">        el.show() : <span class="comment">// å¦‚æœ true åˆ™æ˜¾ç¤º</span></div><div class="line">        el.hide() <span class="comment">// å¦‚æœ false åˆ™éšè—</span></div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// å€ŸåŠ© previousElementSibling å±æ€§</span></div><div class="line">    prev: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123; <span class="keyword">return</span> $(<span class="keyword">this</span>.pluck(<span class="string">'previousElementSibling'</span>)).filter(selector || <span class="string">'*'</span>) &#125;,</div><div class="line">    <span class="comment">// å€ŸåŠ© nextElementSibling å±æ€§</span></div><div class="line">    next: <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123; <span class="keyword">return</span> $(<span class="keyword">this</span>.pluck(<span class="string">'nextElementSibling'</span>)).filter(selector || <span class="string">'*'</span>) &#125;,</div><div class="line">    <span class="attr">html</span>: <span class="function"><span class="keyword">function</span>(<span class="params">html</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> </div><div class="line"></div><div class="line">        <span class="comment">// æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº«</span></div><div class="line">        <span class="number">0</span> <span class="keyword">in</span> <span class="built_in">arguments</span> ? </div><div class="line">        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">          <span class="keyword">var</span> originHtml = <span class="keyword">this</span>.innerHTML</div><div class="line">          <span class="comment">// ä¼ å…¥çš„ html å‚æ•°å…è®¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå…è®¸æ˜¯ä¸€ä¸ªå‡½æ•°</span></div><div class="line">          <span class="comment">// é€šè¿‡ funcArg å‡½æ•°ï¼š</span></div><div class="line">          <span class="comment">//  1.å¦‚æœ html æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›html</span></div><div class="line">          <span class="comment">//  2.å¦‚æœ html æ˜¯å‡½æ•°ï¼Œåˆ™æ‰§è¡Œæ‰§è¡Œå‡½æ•°ï¼ˆä¼ å…¥ idxã€originHtmlï¼‰ï¼Œè¿”å›å‡½æ•°æ‰§è¡Œç»“æœ</span></div><div class="line">          $(<span class="keyword">this</span>).empty().append( funcArg(<span class="keyword">this</span>, html, idx, originHtml) )</div><div class="line">        &#125;) :</div><div class="line"></div><div class="line">        <span class="comment">/*</span></div><div class="line">          æ’æ’­ï¼š</div><div class="line">          function funcArg(context, arg, idx, payload) &#123;</div><div class="line">            return isFunction(arg) ? arg.call(context, idx, payload) : arg</div><div class="line">          &#125;</div><div class="line">        */</div><div class="line"></div><div class="line">        <span class="comment">// æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼</span></div><div class="line">        (<span class="number">0</span> <span class="keyword">in</span> <span class="keyword">this</span> ? </div><div class="line">          <span class="keyword">this</span>[<span class="number">0</span>].innerHTML : <span class="comment">// ç›´æ¥å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ innerHTML</span></div><div class="line">          <span class="literal">null</span></div><div class="line">        )</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">text</span>: <span class="function"><span class="keyword">function</span>(<span class="params">text</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> </div><div class="line"></div><div class="line">        <span class="comment">// æƒ…å†µ1ï¼šæœ‰å‚æ•°ï¼Œèµ‹å€¼ï¼Œå¹¶è¿”å›è‡ªèº«</span></div><div class="line">        <span class="number">0</span> <span class="keyword">in</span> <span class="built_in">arguments</span> ?</div><div class="line">        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">          <span class="comment">// funcArgçš„åº”ç”¨ï¼Œå’Œhtmlæ–¹æ³•ä¸­ä¸€æ ·</span></div><div class="line">          <span class="keyword">var</span> newText = funcArg(<span class="keyword">this</span>, text, idx, <span class="keyword">this</span>.textContent)</div><div class="line">          <span class="keyword">this</span>.textContent = newText == <span class="literal">null</span> ? <span class="string">''</span> : <span class="string">''</span>+newText</div><div class="line">        &#125;) :</div><div class="line"></div><div class="line">        <span class="comment">// æƒ…å†µ2ï¼šæ— å‚æ•°ï¼Œå–å€¼</span></div><div class="line">        (<span class="number">0</span> <span class="keyword">in</span> <span class="keyword">this</span> ? <span class="keyword">this</span>[<span class="number">0</span>].textContent : <span class="literal">null</span>)  <span class="comment">// ç›´æ¥å€Ÿç”¨ textContent å±æ€§</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">attr</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> result</div><div class="line"></div><div class="line">      <span class="keyword">return</span> </div><div class="line"></div><div class="line">        <span class="comment">// æƒ…å†µ1ï¼šæ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å€¼ï¼ˆè¯»å–å€¼åªèƒ½è¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼‰</span></div><div class="line">        (<span class="keyword">typeof</span> name == <span class="string">'string'</span> &amp;&amp; !(<span class="number">1</span> <span class="keyword">in</span> <span class="built_in">arguments</span>)) ?</div><div class="line">        (!<span class="keyword">this</span>.length || <span class="keyword">this</span>[<span class="number">0</span>].nodeType !== <span class="number">1</span> ? <span class="literal">undefined</span> :</div><div class="line">          <span class="comment">/*</span></div><div class="line">            æ³¨é‡Šï¼š</div><div class="line">            this[0]æ˜¯ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œæœ‰ã€å±æ€§ã€ä¹Ÿæœ‰ã€ç‰¹æ€§ã€</div><div class="line">              result = this[0].getAttribute(name) è¯•å›¾è·å– DOMèŠ‚ç‚¹å±æ€§</div><div class="line">              name in this[0] åˆ¤æ–­æ˜¯ä¸æ˜¯jså¯¹è±¡çš„å±æ€§</div><div class="line">            ç„¶åï¼Œè¯¥è¿”å›å“ªä¸€ä¸ªå°±è¿”å›å“ªä¸€ä¸ª</div><div class="line">          */</div><div class="line">          (!(result = <span class="keyword">this</span>[<span class="number">0</span>].getAttribute(name)) &amp;&amp; name <span class="keyword">in</span> <span class="keyword">this</span>[<span class="number">0</span>]) ? </div><div class="line">          <span class="keyword">this</span>[<span class="number">0</span>][name] : </div><div class="line">          result</div><div class="line">        ) :</div><div class="line"></div><div class="line">        <span class="comment">// æƒ…å†µ2ï¼šæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å€¼ï¼ˆé’ˆå¯¹æ¯ä¸ªå…ƒç´ è®¾ç½®å€¼ï¼‰</span></div><div class="line">        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.nodeType !== <span class="number">1</span>) <span class="keyword">return</span></div><div class="line"></div><div class="line">          <span class="comment">// ä¼ å…¥çš„å‚æ•°å¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡é›†åˆ</span></div><div class="line">          <span class="comment">// æ­¤æ—¶ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æ”¾åœ¨ã€æƒ…å†µ1ã€å½“ä¸­ï¼Ÿï¼Ÿï¼Ÿæ­¤æ—¶ï¼Œvalueæ ¹æœ¬æ²¡æœ‰ç”¨å•Šï¼Ÿï¼Ÿï¼Ÿ</span></div><div class="line">          <span class="keyword">if</span> (isObject(name)) <span class="keyword">for</span> (key <span class="keyword">in</span> name) setAttribute(<span class="keyword">this</span>, key, name[key])</div><div class="line"></div><div class="line">          <span class="comment">// ä¼ å…¥çš„ä¸æ˜¯å¯¹è±¡ï¼Œå³è®¾ç½®ä¸€ä¸ªå•ä¸€çš„å±æ€§ã€‚</span></div><div class="line">          <span class="comment">// ä½†æ˜¯ï¼Œè¿™é‡Œçš„ value å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°</span></div><div class="line">          <span class="comment">// funcArg å³å¤„ç†äº† value æ˜¯å‡½æ•°å’Œéå‡½æ•°çš„ä¸¤ç§æƒ…å†µ</span></div><div class="line">          <span class="keyword">else</span> setAttribute(<span class="keyword">this</span>, name, funcArg(<span class="keyword">this</span>, value, idx, <span class="keyword">this</span>.getAttribute(name)))</div><div class="line">        &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">removeAttr</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(</div><div class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; </div><div class="line">          <span class="keyword">this</span>.nodeType === <span class="number">1</span> &amp;&amp; name.split(<span class="string">' '</span>).forEach(</div><div class="line">            <span class="function"><span class="keyword">function</span>(<span class="params">attribute</span>)</span>&#123;</div><div class="line">              setAttribute(<span class="keyword">this</span>, attribute)  <span class="comment">// å°†å±æ€§è®¾ç½®ä¸ºç©ºï¼ŒsetAttributeä¼šç§»é™¤å±æ€§</span></div><div class="line">            &#125;, </div><div class="line">            <span class="keyword">this</span> <span class="comment">// æ”¹å‚æ•°å°†æˆä¸º forEach ä¸­å‡½æ•°çš„this</span></div><div class="line">          )</div><div class="line">        &#125;</div><div class="line">      )</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è¯»å–ã€è®¾ç½®å±æ€§ï¼ˆjså¯¹è±¡çš„å±æ€§ï¼‰</span></div><div class="line">    prop: <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>)</span>&#123;</div><div class="line">      <span class="comment">// propMap ä¸­å­˜å‚¨çš„ï¼škeyæ˜¯htmlä¸­çš„å±æ€§åç§°ï¼Œvalueæ˜¯jså¯¹è±¡ä¸­çš„å±æ€§åç§°</span></div><div class="line">      <span class="comment">// ä¾‹å¦‚ï¼Œhtmlä¸­çš„ "class" åœ¨DOMå¯¹è±¡ä¸­ï¼Œå°±éœ€è¦ä½¿ç”¨ "className" è¿™ä¸ªåå­—è¯»å–ï¼ŒåŒç†äºï¼šfor  maxlength  cellspacing ç­‰ç­‰</span></div><div class="line">      name = propMap[name] || name</div><div class="line"></div><div class="line">      <span class="comment">/*</span></div><div class="line">        ä¸Šæ–‡å®šä¹‰ï¼š</div><div class="line">        propMap = &#123;</div><div class="line">          'tabindex': 'tabIndex',</div><div class="line">          'readonly': 'readOnly',</div><div class="line">          'for': 'htmlFor',</div><div class="line">          'class': 'className',</div><div class="line">          'maxlength': 'maxLength',</div><div class="line">          'cellspacing': 'cellSpacing',</div><div class="line">          'cellpadding': 'cellPadding',</div><div class="line">          'rowspan': 'rowSpan',</div><div class="line">          'colspan': 'colSpan',</div><div class="line">          'usemap': 'useMap',</div><div class="line">          'frameborder': 'frameBorder',</div><div class="line">          'contenteditable': 'contentEditable'</div><div class="line">        &#125;</div><div class="line">      */</div><div class="line"></div><div class="line">      <span class="keyword">return</span> </div><div class="line"></div><div class="line">        <span class="comment">// æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè®¾ç½®å±æ€§</span></div><div class="line">        (<span class="number">1</span> <span class="keyword">in</span> <span class="built_in">arguments</span>) ?</div><div class="line">        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">          <span class="comment">// è®¾ç½®å±æ€§å€¼ï¼ŒfuncArgå¤„ç†å‡½æ•°æˆ–è€…éå‡½æ•°</span></div><div class="line">          <span class="keyword">this</span>[name] = funcArg(<span class="keyword">this</span>, value, idx, <span class="keyword">this</span>[name])</div><div class="line">        &#125;) :</div><div class="line"></div><div class="line">        <span class="comment">// æ— ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯»å–å±æ€§ï¼ˆè¯»å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„ï¼‰</span></div><div class="line">        (<span class="keyword">this</span>[<span class="number">0</span>] &amp;&amp; <span class="keyword">this</span>[<span class="number">0</span>][name])</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// å‰é¢åŠ ä¸Š 'data-' é€šè¿‡ attr è®¾ç½®æˆ–è€…è¯»å–</span></div><div class="line">    data: <span class="function"><span class="keyword">function</span>(<span class="params">name, value</span>)</span>&#123;</div><div class="line">      <span class="comment">/*</span></div><div class="line">        ä¸Šæ–‡å®šä¹‰ï¼š</div><div class="line">        capitalRE = /([A-Z])/g,  //å¤§å†™å­—æ¯</div><div class="line">      */</div><div class="line"></div><div class="line">      <span class="comment">//      å‰é¢åŠ ä¸Š 'data-'               å°† 'A' æ›¿æ¢ä¸º '-a'</span></div><div class="line">      <span class="keyword">var</span> attrName = <span class="string">'data-'</span> + name.replace(capitalRE, <span class="string">'-$1'</span>).toLowerCase()</div><div class="line"></div><div class="line">      <span class="keyword">var</span> data = (<span class="number">1</span> <span class="keyword">in</span> <span class="built_in">arguments</span>) ?</div><div class="line">        <span class="keyword">this</span>.attr(attrName, value) :</div><div class="line">        <span class="keyword">this</span>.attr(attrName)</div><div class="line"></div><div class="line">      <span class="keyword">return</span> data !== <span class="literal">null</span> ? deserializeValue(data) : <span class="literal">undefined</span></div><div class="line"></div><div class="line">      <span class="comment">/*</span></div><div class="line">        ä¸Šæ–‡å®šä¹‰çš„ï¼ŒdeserializeValue å‡½æ•°çš„ä½œç”¨æ˜¯ï¼š</div><div class="line"></div><div class="line">        // å°†å­—ç¬¦ä¸²å˜æˆå“åº”çš„å¯¹è±¡æˆ–è€…å€¼ï¼Œä¾‹å¦‚æºä»£ç çš„æ³¨é‡Šï¼š</div><div class="line">        // "true"  =&gt; true</div><div class="line">        // "false" =&gt; false</div><div class="line">        // "null"  =&gt; null</div><div class="line">        // "42"    =&gt; 42</div><div class="line">        // "42.5"  =&gt; 42.5</div><div class="line">        // "08"    =&gt; "08"</div><div class="line">        // JSON    =&gt; parse if valid</div><div class="line">        // String  =&gt; self</div><div class="line">      */</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">val</span>: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> </div><div class="line"></div><div class="line">        <span class="comment">// æœ‰å‚æ•°ï¼Œè®¾ç½®å€¼</span></div><div class="line">        <span class="number">0</span> <span class="keyword">in</span> <span class="built_in">arguments</span> ?</div><div class="line">        <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">          <span class="comment">// éå†æ¯ä¸ªå…ƒç´ ï¼Œç›´æ¥å¯¹ value å±æ€§èµ‹å€¼</span></div><div class="line">          <span class="keyword">this</span>.value = funcArg(<span class="keyword">this</span>, value, idx, <span class="keyword">this</span>.value)</div><div class="line">        &#125;) :</div><div class="line"></div><div class="line">        <span class="comment">// æ— å‚æ•°ï¼Œè¯»å–å€¼</span></div><div class="line">        (<span class="keyword">this</span>[<span class="number">0</span>] &amp;&amp; (</div><div class="line">           <span class="comment">// å¦‚æœå…ƒç´ æ˜¯ &lt;select multiple&gt; å¤šé€‰åˆ—è¡¨</span></div><div class="line">           <span class="keyword">this</span>[<span class="number">0</span>].multiple ?</div><div class="line">           <span class="comment">// è¿”å›æ‰€æœ‰é€‰ä¸­çš„optionçš„å€¼çš„æ•°ç»„</span></div><div class="line">           $(<span class="keyword">this</span>[<span class="number">0</span>]).find(<span class="string">'option'</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.selected &#125;).pluck(<span class="string">'value'</span>) :</div><div class="line"></div><div class="line">                   <span class="comment">/*</span></div><div class="line">                      ä¸Šæ–‡å®šä¹‰ï¼š</div><div class="line">                      pluck: function(property)&#123;</div><div class="line">                        return $.map(this, function(el)&#123; return el[property] &#125;)</div><div class="line">                      &#125;,</div><div class="line">                   */</div><div class="line"></div><div class="line">           <span class="comment">// å¦‚æœä¸æ˜¯ï¼Œç›´æ¥è·å– value</span></div><div class="line">           <span class="keyword">this</span>[<span class="number">0</span>].value</div><div class="line">          )</div><div class="line">        )</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è·å–ã€è®¾ç½®å…ƒç´ çš„ offset</span></div><div class="line">    offset: <span class="function"><span class="keyword">function</span>(<span class="params">coordinates</span>)</span>&#123;</div><div class="line">      <span class="comment">// å¦‚æœæœ‰ coordinates å‚æ•°ï¼Œè®¾ç½®åæ ‡å€¼ï¼Œå¹¶è¿”å›å½“å‰å¯¹è±¡</span></div><div class="line">      <span class="keyword">if</span> (coordinates) <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">index</span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>),</div><div class="line">            <span class="comment">// æ”¯æŒå‡½æ•°ï¼ˆä¼ å…¥ $this.offset() åšå‚æ•°ï¼‰å’Œéå‡½æ•°</span></div><div class="line">            coords = funcArg(<span class="keyword">this</span>, coordinates, index, $<span class="keyword">this</span>.offset()),</div><div class="line">            <span class="comment">// æ‰¾åˆ°æœ€è¿‘çš„ â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€ çš„ç¥–å…ˆå…ƒç´ ï¼Œå¹¶è·å–å®ƒçš„ offset()</span></div><div class="line">            parentOffset = $<span class="keyword">this</span>.offsetParent().offset(),</div><div class="line">            <span class="comment">// left å’Œ top éœ€è¦å»æ‰å®šä½çš„ç¥–å…ˆå…ƒç´ çš„ leftã€top å€¼</span></div><div class="line">            props = &#123;</div><div class="line">              <span class="attr">top</span>:  coords.top  - parentOffset.top,</div><div class="line">              <span class="attr">left</span>: coords.left - parentOffset.left</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        <span class="comment">// staticæ—¶ï¼Œè®¾ç½® topã€leftæ˜¯æ— æ•ˆçš„</span></div><div class="line">        <span class="keyword">if</span> ($<span class="keyword">this</span>.css(<span class="string">'position'</span>) == <span class="string">'static'</span>) props[<span class="string">'position'</span>] = <span class="string">'relative'</span></div><div class="line"></div><div class="line">        <span class="comment">// é€šè¿‡ css èµ‹å€¼</span></div><div class="line">        $<span class="keyword">this</span>.css(props)</div><div class="line">      &#125;)</div><div class="line"></div><div class="line">      <span class="comment">// å½“å‰å¯¹è±¡æ˜¯ç©ºï¼Œåˆ™è¿”å› null</span></div><div class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span> <span class="literal">null</span></div><div class="line"></div><div class="line">      <span class="comment">// å¦‚æœæ²¡æœ‰ coordinates å‚æ•°ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ çš„åæ ‡å€¼</span></div><div class="line">      <span class="keyword">var</span> obj = <span class="keyword">this</span>[<span class="number">0</span>].getBoundingClientRect()</div><div class="line">      <span class="comment">/*</span></div><div class="line">        elem.getBoundingClientRect() è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œ</div><div class="line">        åŒ…å«å…ƒç´ çš„ top bottom left right width height çš„å€¼</div><div class="line">        ä½†æ˜¯è¿™ä¸ª topã€bottomã€leftã€right æ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£çš„è·ç¦»ï¼Œè€Œä¸æ˜¯é¡µé¢çš„è¾¹ç•Œ</div><div class="line">        ï¼ˆæ³¨æ„ï¼Œelem.getBoundingClientRect()åœ¨IEä½ç‰ˆæœ¬æµè§ˆå™¨æœ‰2pxçš„å…¼å®¹é—®é¢˜ï¼‰</div><div class="line"></div><div class="line">        window.pageXOffset å’Œ window.pageYOffset å¯è·å–ç½‘é¡µæ»šåŠ¨çš„è·ç¦»ï¼Œ</div><div class="line">        IEä½ç‰ˆæœ¬éœ€è¦ç”¨ document.body.scrollLeft å’Œ document.body.scrollTop å…¼å®¹</div><div class="line">      */</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">left</span>: obj.left + <span class="built_in">window</span>.pageXOffset,</div><div class="line">        <span class="attr">top</span>: obj.top + <span class="built_in">window</span>.pageYOffset,</div><div class="line">        <span class="attr">width</span>: <span class="built_in">Math</span>.round(obj.width),</div><div class="line">        <span class="attr">height</span>: <span class="built_in">Math</span>.round(obj.height)</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    <span class="comment">// è®¾ç½®ã€è·å– css</span></div><div class="line">    css: <span class="function"><span class="keyword">function</span>(<span class="params">property, value</span>)</span>&#123;</div><div class="line"></div><div class="line">      <span class="comment">// åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ ·å¼</span></div><div class="line">      <span class="keyword">if</span> (<span class="built_in">arguments</span>.length &lt; <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">var</span> computedStyle, element = <span class="keyword">this</span>[<span class="number">0</span>]</div><div class="line">        <span class="keyword">if</span>(!element) <span class="keyword">return</span>  <span class="comment">// å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ æ— å€¼ï¼Œç›´æ¥è¿”å›ã€‚å¦åˆ™ç»§ç»­</span></div><div class="line"></div><div class="line">        <span class="comment">// è·å–å…ƒç´ çš„è®¡ç®—åçš„æ ·å¼</span></div><div class="line">        computedStyle = getComputedStyle(element, <span class="string">''</span>)</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> property == <span class="string">'string'</span>)</div><div class="line">          <span class="comment">// æƒ…å†µ1ï¼Œå‚æ•°ä¸ºå­—ç¬¦ä¸²å½¢å¼</span></div><div class="line">          <span class="comment">// å…ˆä»elemå†…è”æ ·å¼è·å–ï¼ˆelement.styleï¼‰ï¼Œæ­¤æ—¶éœ€è¦ camelize(property) è½¬æ¢ï¼Œå¦‚å°† background-color å˜ä¸º backgroundColor</span></div><div class="line">          <span class="comment">// å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™ä»cssæ ·å¼è·å– computedStyle.getPropertyValue(property) </span></div><div class="line">          <span class="comment">// ï¼ˆé‡è¦ï¼‰æ³¨é‡Šï¼šelem.style åªèƒ½è·å–å…ƒç´ è®¾ç½®çš„å†…è”æ ·å¼ã€ä¸èƒ½è·å–cssæ ·å¼ï¼›è€Œ getComputedStyle å¯è·å–å†…è”ã€cssæ ·å¼ã€‚</span></div><div class="line">          <span class="keyword">return</span> element.style[camelize(property)] || computedStyle.getPropertyValue(property)</div><div class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (isArray(property)) &#123;</div><div class="line">          <span class="comment">// æƒ…å†µ2ï¼Œå‚æ•°ä¸ºæ•°ç»„å½¢å¼ï¼ˆæ³¨æ„ï¼Œæ­¤æ—¶ isObject æƒ…å†µå°šæœªåˆ¤æ–­ï¼‰</span></div><div class="line">          <span class="keyword">var</span> props = &#123;&#125;</div><div class="line">          $.each(property, <span class="function"><span class="keyword">function</span>(<span class="params">_, prop</span>)</span>&#123;</div><div class="line">            props[prop] = (element.style[camelize(prop)] || computedStyle.getPropertyValue(prop))</div><div class="line">          &#125;)</div><div class="line">          <span class="keyword">return</span> props  <span class="comment">// è¿”å›ä¸€ä¸ªå¯¹è±¡</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="comment">// å…¶ä»–æƒ…å†µï¼šæœ‰ä¸¤ä¸ªå‚æ•°ã€propertyæ˜¯å¯¹è±¡</span></div><div class="line">      <span class="keyword">var</span> css = <span class="string">''</span></div><div class="line">      <span class="keyword">if</span> (type(property) == <span class="string">'string'</span>) &#123;</div><div class="line">        <span class="comment">// æƒ…å†µ1ï¼Œproperty æ˜¯å­—ç¬¦ä¸²ï¼Œè®¾ç½®å•ä¸ªæ ·å¼</span></div><div class="line">        <span class="keyword">if</span> (!value &amp;&amp; value !== <span class="number">0</span>)</div><div class="line">          <span class="comment">// å¦‚æœvalueå‚æ•°æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼</span></div><div class="line">          <span class="comment">// æ³¨ï¼šæ­¤è®¡ç®—åªé€‚ç”¨äºå†…è”æ ·å¼çš„åˆ é™¤ï¼Œå¯¹ css æ ·å¼æ— æ•ˆï¼Œå› ä¸ºå®ƒåªé€šè¿‡ this.style.removeProperty è®¡ç®—ï¼Œè€Œ this.style è·å–ä¸åˆ°cssæ ·å¼</span></div><div class="line">          <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.style.removeProperty(dasherize(property)) &#125;)</div><div class="line">        <span class="keyword">else</span></div><div class="line">          <span class="comment">// valueæœ‰æ­£å¸¸å€¼ï¼Œå°† css ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå¦‚ 'font-size:20px'ï¼‰ç­‰å¾…èµ‹å€¼ç»™å†…è”æ ·å¼</span></div><div class="line">          <span class="comment">// maybeAddPx(property, value) éœ€è¦å¢åŠ  px çš„å¢åŠ ä¸Š</span></div><div class="line">          css = dasherize(property) + <span class="string">":"</span> + maybeAddPx(property, value)</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// æƒ…å†µ2ï¼Œproperty æ˜¯å¯¹è±¡ï¼ˆæ­¤æ—¶å°±ä¸ç®¡ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»€ä¹ˆäº†ï¼Œä¸ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œä¸€æ¬¡æ€§è®¾ç½®å¤šä¸ªæ ·å¼</span></div><div class="line">        <span class="keyword">for</span> (key <span class="keyword">in</span> property)</div><div class="line">          <span class="keyword">if</span> (!property[key] &amp;&amp; property[key] !== <span class="number">0</span>)</div><div class="line">            <span class="comment">// å¦‚æœå¯¹è±¡å±æ€§å€¼æ˜¯ '' null undefined åˆ™ç§»é™¤è¿™ä¸ªcssæ ·å¼ï¼ŒåŒç†ï¼Œåªé’ˆå¯¹å†…è”æ ·å¼</span></div><div class="line">            <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.style.removeProperty(dasherize(key)) &#125;)</div><div class="line">          <span class="keyword">else</span></div><div class="line">            <span class="comment">// å¦åˆ™ï¼Œç»™ css èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤šæ ·å¼å±æ€§ç”¨ ; éš”å¼€</span></div><div class="line">            css += dasherize(key) + <span class="string">':'</span> + maybeAddPx(key, property[key]) + <span class="string">';'</span></div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="comment">// é’ˆå¯¹æ¯ä¸ªå…ƒç´ ï¼Œè®¾ç½®å†…è”æ ·å¼ï¼ˆthis.style.cssTextå¯è·å–ã€è®¾ç½®å†…è”æ ·å¼ï¼‰</span></div><div class="line">      <span class="comment">// æœ€åè¿”å›è‡ªèº«</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.style.cssText += <span class="string">';'</span> + css &#125;)</div><div class="line"></div><div class="line">      <span class="comment">/*</span></div><div class="line">        ä¸Šæ–‡å®šä¹‰ï¼š</div><div class="line">        // å°† lineHeight è½¬æ¢ä¸º line-height æ ¼å¼</div><div class="line">        function dasherize(str) &#123;</div><div class="line">          return str.replace(/::/g, '/')</div><div class="line">                    .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')</div><div class="line">                    .replace(/([a-z\d])([A-Z])/g, '$1_$2')</div><div class="line">                    .replace(/_/g, '-')</div><div class="line">                    .toLowerCase()</div><div class="line">        &#125;</div><div class="line">      */</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// è·å–ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•å€¼ï¼ˆä»0å¼€å§‹è®¡æ•°ï¼‰ã€‚å½“elemenå‚æ•°æ²¡æœ‰ç»™å‡ºæ—¶ï¼Œè¿”å›å½“å‰å…ƒç´ åœ¨å…„å¼ŸèŠ‚ç‚¹ä¸­çš„ä½ç½®</span></div><div class="line">    index: <span class="function"><span class="keyword">function</span>(<span class="params">element</span>)</span>&#123;</div><div class="line">      <span class="comment">/*</span></div><div class="line">        ä¸Šæ–‡å®šä¹‰ï¼š</div><div class="line">        $.fn.indexOf: emptyArray.indexOf</div><div class="line">      */</div><div class="line"></div><div class="line">      <span class="comment">// å…¶å® this æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æœ¬èº«å°±æœ‰ indexOf ï¼Œä¸ºä½•è¿˜è¦ä¸Šæ–‡çš„è¿™ä¸ªèµ‹å€¼å‘¢ï¼Ÿ</span></div><div class="line">      <span class="comment">// å› ä¸ºä¸Šæ–‡ä¸­ï¼Œthis.__proto__ ä¿®æ”¹äº†ï¼Œä¸æ˜¯ Array.prototype äº†ï¼Œä¹Ÿå°±æ²¡æœ‰ indexOf æ–¹æ³•äº†</span></div><div class="line">      <span class="comment">// å› æ­¤è¦æ‰‹åŠ¨èµ‹å€¼ï¼Œéœ€è¦å°†æ•°ç»„å¸¸ç”¨çš„æ–¹æ³•åœ¨é‡æ–°èµ‹å€¼ç»™ $.fn.indexOf</span></div><div class="line"></div><div class="line">      <span class="keyword">return</span> element ? <span class="keyword">this</span>.indexOf($(element)[<span class="number">0</span>]) : <span class="keyword">this</span>.parent().children().indexOf(<span class="keyword">this</span>[<span class="number">0</span>])</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">hasClass</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="literal">false</span></div><div class="line">      <span class="keyword">return</span> emptyArray.some.call(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span>(<span class="params">el</span>)</span>&#123;</div><div class="line">        <span class="comment">// this å°±æ˜¯ classRE(name) çš„è¿”å›å€¼ï¼ˆè¿”å›ä¸€ä¸ªæ­£åˆ™ï¼‰</span></div><div class="line">        <span class="comment">// function className(node, value)&#123;...&#125; è·å–æˆ–è€…è®¾ç½®elemçš„className</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.test(className(el))</div><div class="line">      &#125;, classRE(name))</div><div class="line"></div><div class="line">      <span class="comment">// array.some(callback,[ thisObject]); åªè¦æ•°ç»„ä¸­ä¸€é¡¹ç¬¦åˆcallbackè¦æ±‚ï¼Œå³è¿”å›true</span></div><div class="line"></div><div class="line">      <span class="comment">/*</span></div><div class="line">        // ä¸Šæ–‡å®šä¹‰ classCache = &#123;&#125;</div><div class="line">        function classRE(name) &#123;</div><div class="line">          return name in classCache ?</div><div class="line">                 classCache[name] : </div><div class="line">                 (classCache[name] = new RegExp('(^|\\s)' + name + '(\\s|$)'))</div><div class="line"></div><div class="line">          // classCache å­˜å‚¨çš„æ•°æ®æ˜¯è¿™æ ·çš„ï¼š</div><div class="line">          // &#123;</div><div class="line">          //   abc: /(^|\s)abc(\s|$)/,  // èƒ½åŒ¹é… 'abc' æˆ– ' abc ' æˆ– ' abc' æˆ– 'abc '</div><div class="line">          //   xyz: /(^|\s)abc(\s|$)/,</div><div class="line">          //   ...</div><div class="line">          // &#125;</div><div class="line">        &#125;</div><div class="line">      */</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">addClass</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line"></div><div class="line">      <span class="comment">// é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½æ·»åŠ classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº«</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">        <span class="comment">// è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node</span></div><div class="line">        <span class="keyword">if</span> (!(<span class="string">'className'</span> <span class="keyword">in</span> <span class="keyword">this</span>)) <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment">// classList æ˜¯ä¸€å¼€å§‹å°±å®šä¹‰çš„ç©ºå˜é‡</span></div><div class="line">        classList = []</div><div class="line">        <span class="comment">// è·å–å…ƒç´ çš„ clasname      // æ”¯æŒä¼ å…¥å‡½æ•°</span></div><div class="line">        <span class="keyword">var</span> cls = className(<span class="keyword">this</span>), newName = funcArg(<span class="keyword">this</span>, name, idx, cls)</div><div class="line">        <span class="comment">// æŠŠè¦èµ‹å€¼çš„å€¼ï¼ŒæŒ‰ç…§ç©ºç™½åˆ†ç»„ï¼Œéå†</span></div><div class="line">        newName.split(<span class="regexp">/\s+/g</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">klass</span>)</span>&#123;</div><div class="line">          <span class="comment">// æŠŠå½“å‰å…ƒç´ ä¸å­˜åœ¨çš„classï¼Œpushåˆ°classlistä¸­</span></div><div class="line">          <span class="keyword">if</span> (!$(<span class="keyword">this</span>).hasClass(klass)) classList.push(klass)</div><div class="line">        &#125;, <span class="keyword">this</span>)</div><div class="line">        <span class="comment">// å¦‚æœclasslistæœ‰æ•°æ®ï¼Œåˆ™ä¸ºå½“å‰å…ƒç´ èµ‹å€¼æœ€æ–°çš„classå€¼ï¼ˆç°æœ‰çš„classnameå’Œæ–°çš„classnameæ‹¼æ¥ï¼‰</span></div><div class="line">        classList.length &amp;&amp; className(<span class="keyword">this</span>, cls + (cls ? <span class="string">" "</span> : <span class="string">""</span>) + classList.join(<span class="string">" "</span>))</div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">removeClass</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name</span>)</span>&#123;</div><div class="line">      <span class="comment">// é’ˆå¯¹æ‰€æœ‰å…ƒç´ éƒ½ç§»é™¤classNameï¼Œæœ€ç»ˆè¿”å›æœ¬èº«</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">        <span class="comment">// è¯´æ˜å½“å‰å…ƒç´ ä¸æ˜¯ DOM node</span></div><div class="line">        <span class="keyword">if</span> (!(<span class="string">'className'</span> <span class="keyword">in</span> <span class="keyword">this</span>)) <span class="keyword">return</span></div><div class="line"></div><div class="line">        <span class="comment">// å¦‚æœå‚æ•°ç©ºï¼Œåˆ™ç§»é™¤å…ƒç´ çš„æ‰€æœ‰class</span></div><div class="line">        <span class="keyword">if</span> (name === <span class="literal">undefined</span>) <span class="keyword">return</span> className(<span class="keyword">this</span>, <span class="string">''</span>)</div><div class="line"></div><div class="line">        <span class="comment">// è·å–ç°æœ‰çš„classname</span></div><div class="line">        classList = className(<span class="keyword">this</span>)</div><div class="line">        <span class="comment">// ï¼ˆå¯ä»¥ä¼ å…¥å‡½æ•°ï¼‰éå†æ–°çš„classnameå­—ç¬¦ä¸²</span></div><div class="line">        funcArg(<span class="keyword">this</span>, name, idx, classList).split(<span class="regexp">/\s+/g</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">klass</span>)</span>&#123;</div><div class="line">          <span class="comment">// classRE(klass) è¿”å›ä¸€ä¸ªæ­£åˆ™ï¼ŒåŒ¹é… 'classname' æˆ– ' classname ' æˆ– ' classname' æˆ– 'classname '</span></div><div class="line">          <span class="comment">// é’ˆå¯¹ä¼ å…¥çš„classnameå­—ç¬¦ä¸²ï¼Œå¯¹æ¯ä¸ªç¬¦åˆæ¡ä»¶çš„classnameï¼Œéƒ½æ›¿æ¢ä¸º ' 'ï¼ˆå³åˆ é™¤äº†ï¼‰</span></div><div class="line">          classList = classList.replace(classRE(klass), <span class="string">" "</span>)</div><div class="line">        &#125;)</div><div class="line"></div><div class="line">        <span class="comment">// å¯¹æ•´ç†å¥½çš„classnameï¼Œé‡æ–°èµ‹å€¼ç»™å½“å‰å…ƒç´ </span></div><div class="line">        className(<span class="keyword">this</span>, classList.trim())</div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">toggleClass</span>: <span class="function"><span class="keyword">function</span>(<span class="params">name, when</span>)</span>&#123;</div><div class="line">      <span class="comment">// when å‚æ•°ç›¸å½“äºä¸€ä¸ªæ¡ä»¶ï¼š</span></div><div class="line">      <span class="comment">// å¦‚æœ when === true åˆ™å•çº¯æ‰§è¡Œ addClass</span></div><div class="line">      <span class="comment">// å¦‚æœ when === false åˆ™å•çº¯æ‰§è¡Œ removeClass</span></div><div class="line"></div><div class="line">      <span class="keyword">if</span> (!name) <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">        <span class="comment">//                   name å¯æ¥æ”¶å‡½æ•°ï¼Œå¯ä»¥æ˜¯ç©ºç™½åˆ†å‰²å¼€æ¥çš„å¤šä¸ªclassname</span></div><div class="line">        <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>), names = funcArg(<span class="keyword">this</span>, name, idx, className(<span class="keyword">this</span>))</div><div class="line">        <span class="comment">// ç”¨ç©ºç™½åˆ†å‰²å¼€å¤šä¸ªclass</span></div><div class="line">        names.split(<span class="regexp">/\s+/g</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">klass</span>)</span>&#123;</div><div class="line">          <span class="comment">// å¦‚æœæœ‰ when å‚æ•°ï¼Œåˆ™åªé€šè¿‡whenå‚æ•°åˆ¤æ–­ï¼Œtrueåˆ™åªæ‰§è¡ŒaddClassï¼Œfalseåˆ™åªæ‰§è¡ŒremoveClass</span></div><div class="line">          <span class="comment">// å¦‚æœæ²¡æœ‰ when å‚æ•°ï¼Œåˆ™åˆ¤æ–­å…ƒç´ æœ‰æ²¡æœ‰è¯¥classï¼Œæœ‰åˆ™ç§»é™¤ï¼Œæ²¡æœ‰åˆ™æ·»åŠ </span></div><div class="line">          (when === <span class="literal">undefined</span> ? !$<span class="keyword">this</span>.hasClass(klass) : when) ?</div><div class="line">            $<span class="keyword">this</span>.addClass(klass) : $<span class="keyword">this</span>.removeClass(klass)</div><div class="line">        &#125;)</div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">scrollTop</span>: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span></div><div class="line"></div><div class="line">      <span class="comment">// æ™®é€šelemæœ‰ scrollTop å±æ€§ï¼Œå¯ä»¥è·å–æˆ–è€…è®¾ç½®topå€¼</span></div><div class="line">      <span class="comment">// windowå¯¹è±¡æ²¡æœ‰ scrollTop å±æ€§ï¼Œé€šè¿‡ pageYOffset è·å–ï¼Œé€šè¿‡ scrollTo() èµ‹å€¼</span></div><div class="line"></div><div class="line">      <span class="keyword">var</span> hasScrollTop = <span class="string">'scrollTop'</span> <span class="keyword">in</span> <span class="keyword">this</span>[<span class="number">0</span>]</div><div class="line">      <span class="comment">// value æ— å€¼ï¼Œè·å– top</span></div><div class="line">      <span class="keyword">if</span> (value === <span class="literal">undefined</span>) <span class="keyword">return</span> hasScrollTop ? <span class="keyword">this</span>[<span class="number">0</span>].scrollTop : <span class="keyword">this</span>[<span class="number">0</span>].pageYOffset</div><div class="line">      <span class="comment">// value æœ‰å€¼ï¼Œè®¾ç½® top</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(hasScrollTop ?</div><div class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.scrollTop = value &#125; :</div><div class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.scrollTo(<span class="keyword">this</span>.scrollX, value) &#125;)   <span class="comment">// window.scrollX è·å–æ¨ªå‘æ»šåŠ¨å€¼</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">scrollLeft</span>: <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span></div><div class="line">      <span class="keyword">var</span> hasScrollLeft = <span class="string">'scrollLeft'</span> <span class="keyword">in</span> <span class="keyword">this</span>[<span class="number">0</span>]</div><div class="line">      <span class="keyword">if</span> (value === <span class="literal">undefined</span>) <span class="keyword">return</span> hasScrollLeft ? <span class="keyword">this</span>[<span class="number">0</span>].scrollLeft : <span class="keyword">this</span>[<span class="number">0</span>].pageXOffset</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(hasScrollLeft ?</div><div class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.scrollLeft = value &#125; :</div><div class="line">        <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">this</span>.scrollTo(value, <span class="keyword">this</span>.scrollY) &#125;)   <span class="comment">// window.scrollX è·å–çºµå‘æ»šåŠ¨å€¼</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">position</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.length) <span class="keyword">return</span></div><div class="line"></div><div class="line">      <span class="keyword">var</span> elem = <span class="keyword">this</span>[<span class="number">0</span>],</div><div class="line">        <span class="comment">// Get *real* offsetParent</span></div><div class="line">        offsetParent = <span class="keyword">this</span>.offsetParent(),  <span class="comment">// æ‰¾åˆ°ç¬¬ä¸€ä¸ªå®šä½è¿‡çš„ç¥–å…ˆå…ƒç´  â€œrelativeâ€, â€œabsoluteâ€ or â€œfixedâ€</span></div><div class="line">        <span class="comment">// Get correct offsets</span></div><div class="line">        offset       = <span class="keyword">this</span>.offset(), <span class="comment">// è·å–è‡ªèº«çš„offset</span></div><div class="line">        parentOffset = rootNodeRE.test(offsetParent[<span class="number">0</span>].nodeName) ? &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">0</span> &#125; : offsetParent.offset()  <span class="comment">// è·å–å®šä½ç¥–å…ˆå…ƒç´ çš„offsetï¼ˆ bodyã€htmlç›´æ¥è®¾ç½® top:0;left:0 ï¼‰</span></div><div class="line">      <span class="comment">// ä¸Šæ–‡å®šä¹‰ï¼š rootNodeRE = /^(?:body|html)$/i,</span></div><div class="line"></div><div class="line">      <span class="comment">// å»æ‰å½“å‰å…ƒç´ çš„ margin å®½åº¦</span></div><div class="line">      <span class="comment">// Subtract element margins</span></div><div class="line">      <span class="comment">// note: when an element has margin: auto the offsetLeft and marginLeft</span></div><div class="line">      <span class="comment">// are the same in Safari causing offset.left to incorrectly be 0</span></div><div class="line">      offset.top  -= <span class="built_in">parseFloat</span>( $(elem).css(<span class="string">'margin-top'</span>) ) || <span class="number">0</span></div><div class="line">      offset.left -= <span class="built_in">parseFloat</span>( $(elem).css(<span class="string">'margin-left'</span>) ) || <span class="number">0</span></div><div class="line"></div><div class="line">      <span class="comment">// å¢åŠ çˆ¶å…ƒç´ çš„ border å®½åº¦</span></div><div class="line">      <span class="comment">// Add offsetParent borders</span></div><div class="line">      parentOffset.top  += <span class="built_in">parseFloat</span>( $(offsetParent[<span class="number">0</span>]).css(<span class="string">'border-top-width'</span>) ) || <span class="number">0</span></div><div class="line">      parentOffset.left += <span class="built_in">parseFloat</span>( $(offsetParent[<span class="number">0</span>]).css(<span class="string">'border-left-width'</span>) ) || <span class="number">0</span></div><div class="line"></div><div class="line">      <span class="comment">// Subtract the two offsets</span></div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">top</span>:  offset.top  - parentOffset.top,</div><div class="line">        <span class="attr">left</span>: offset.left - parentOffset.left</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">offsetParent</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="comment">// é€šè¿‡ this.map éå†å½“å‰å¯¹è±¡æ‰€æœ‰å…ƒç´ ï¼Œè¿›è¡Œè®¡ç®—ï¼Œç„¶åæ‹¼æ¥æ–°çš„æ•°ç»„ï¼Œå¹¶è¿”å›ã€‚ä¿è¯é“¾å¼æ“ä½œ</span></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">var</span> parent = <span class="keyword">this</span>.offsetParent || <span class="built_in">document</span>.body  <span class="comment">// elem.offsetParent å¯è¿”å›æœ€è¿‘çš„æ”¹å…ƒç´ æœ€è¿‘çš„å·²ç»å®šä½çš„çˆ¶å…ƒç´ </span></div><div class="line">        <span class="keyword">while</span> (parent &amp;&amp; !rootNodeRE.test(parent.nodeName) &amp;&amp; $(parent).css(<span class="string">"position"</span>) == <span class="string">"static"</span>)</div><div class="line">          <span class="comment">// å¦‚æœè·å–çš„parentä¸æ˜¯nullã€ä¸æ˜¯bodyæˆ–htmlã€è€Œä¸”position==static</span></div><div class="line">          <span class="comment">// åˆ™ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ offsetParentã€å¤§ä¸äº†æ‰¾åˆ° body ä¸ºæ­¢</span></div><div class="line">          parent = parent.offsetParent</div><div class="line"></div><div class="line">        <span class="comment">// æœ€åè¿”å›æ”¹å…ƒç´ </span></div><div class="line">        <span class="keyword">return</span> parent</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// for now</span></div><div class="line">  $.fn.detach = $.fn.remove</div><div class="line"></div><div class="line">  <span class="comment">// Generate the `width` and `height` functions</span></div><div class="line">  ;[<span class="string">'width'</span>, <span class="string">'height'</span>].forEach(<span class="function"><span class="keyword">function</span>(<span class="params">dimension</span>)</span>&#123;</div><div class="line">    <span class="comment">// å°† width height å˜ä¸º  Width Height</span></div><div class="line">    <span class="keyword">var</span> dimensionProperty =</div><div class="line">      dimension.replace(<span class="regexp">/./</span>, <span class="function"><span class="keyword">function</span>(<span class="params">m</span>)</span>&#123; <span class="keyword">return</span> m[<span class="number">0</span>].toUpperCase() &#125;)</div><div class="line"></div><div class="line">    $.fn[dimension] = <span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> offset, el = <span class="keyword">this</span>[<span class="number">0</span>]</div><div class="line"></div><div class="line">      <span class="comment">// æƒ…å†µ1ï¼Œæ— å‚æ•°ï¼Œè·å–ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼</span></div><div class="line">      <span class="keyword">if</span> (value === <span class="literal">undefined</span>) <span class="keyword">return</span> isWindow(el) ? el[<span class="string">'inner'</span> + dimensionProperty] :  <span class="comment">// window.innerHeight</span></div><div class="line">        isDocument(el) ? el.documentElement[<span class="string">'scroll'</span> + dimensionProperty] :  <span class="comment">// document.documentElement.scrollHeight</span></div><div class="line">        (offset = <span class="keyword">this</span>.offset()) &amp;&amp; offset[dimension]  <span class="comment">// this.offset().width</span></div><div class="line"></div><div class="line">      <span class="comment">// æƒ…å†µ2ï¼Œæœ‰å‚æ•°ï¼Œè®¾ç½®æ‰€æœ‰å…ƒç´ çš„å€¼</span></div><div class="line">      <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">idx</span>)</span>&#123;</div><div class="line">        el = $(<span class="keyword">this</span>)</div><div class="line">        <span class="comment">// é€šè¿‡ css() æ–¹æ³•è®¾ç½®ï¼Œæ”¯æŒä¼ å…¥å‡½æ•°</span></div><div class="line">        el.css(dimension, funcArg(<span class="keyword">this</span>, value, idx, el[dimension]()))</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="comment">// é’ˆå¯¹å½“å‰å…ƒç´ ã€éå†å­å…ƒç´ ï¼Œéƒ½æ‰§è¡Œ fun å‡½æ•°</span></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">traverseNode</span>(<span class="params">node, fun</span>) </span>&#123;</div><div class="line">    fun(node)</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = node.childNodes.length; i &lt; len; i++)</div><div class="line">      traverseNode(node.childNodes[i], fun)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">// ä¸Šæ–‡å®šä¹‰ adjacencyOperators = [ 'after', 'prepend', 'before', 'append' ],</span></div><div class="line"></div><div class="line">  <span class="comment">// Generate the `after`, `prepend`, `before`, `append`,</span></div><div class="line">  <span class="comment">// `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.</span></div><div class="line">  adjacencyOperators.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">operator, operatorIndex</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> inside = operatorIndex % <span class="number">2</span> <span class="comment">//=&gt; prepend, append</span></div><div class="line"></div><div class="line">    $.fn[operator] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="comment">// arguments can be nodes, arrays of nodes, Zepto objects and HTML strings</span></div><div class="line">      <span class="keyword">var</span> argType, nodes = $.map(<span class="built_in">arguments</span>, <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</div><div class="line">            argType = type(arg)</div><div class="line">            <span class="keyword">return</span> argType == <span class="string">"object"</span> || argType == <span class="string">"array"</span> || arg == <span class="literal">null</span> ?</div><div class="line">              arg : zepto.fragment(arg)</div><div class="line">          &#125;),</div><div class="line">          parent, copyByClone = <span class="keyword">this</span>.length &gt; <span class="number">1</span></div><div class="line">      <span class="keyword">if</span> (nodes.length &lt; <span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.each(<span class="function"><span class="keyword">function</span>(<span class="params">_, target</span>)</span>&#123;</div><div class="line">        parent = inside ? target : target.parentNode</div><div class="line"></div><div class="line">        <span class="comment">// convert all methods to a "before" operation</span></div><div class="line">        target = operatorIndex == <span class="number">0</span> ? target.nextSibling :</div><div class="line">                 operatorIndex == <span class="number">1</span> ? target.firstChild :</div><div class="line">                 operatorIndex == <span class="number">2</span> ? target :</div><div class="line">                 <span class="literal">null</span></div><div class="line"></div><div class="line">        <span class="keyword">var</span> parentInDocument = $.contains(<span class="built_in">document</span>.documentElement, parent)</div><div class="line"></div><div class="line">        nodes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">node</span>)</span>&#123;</div><div class="line">          <span class="keyword">if</span> (copyByClone) node = node.cloneNode(<span class="literal">true</span>)</div><div class="line">          <span class="keyword">else</span> <span class="keyword">if</span> (!parent) <span class="keyword">return</span> $(node).remove()</div><div class="line"></div><div class="line">          parent.insertBefore(node, target)</div><div class="line">          <span class="keyword">if</span> (parentInDocument) traverseNode(node, <span class="function"><span class="keyword">function</span>(<span class="params">el</span>)</span>&#123;</div><div class="line">            <span class="keyword">if</span> (el.nodeName != <span class="literal">null</span> &amp;&amp; el.nodeName.toUpperCase() === <span class="string">'SCRIPT'</span> &amp;&amp;</div><div class="line">               (!el.type || el.type === <span class="string">'text/javascript'</span>) &amp;&amp; !el.src)</div><div class="line">              <span class="built_in">window</span>[<span class="string">'eval'</span>].call(<span class="built_in">window</span>, el.innerHTML)</div><div class="line">          &#125;)</div><div class="line">        &#125;)</div><div class="line">      &#125;)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// after    =&gt; insertAfter</span></div><div class="line">    <span class="comment">// prepend  =&gt; prependTo</span></div><div class="line">    <span class="comment">// before   =&gt; insertBefore</span></div><div class="line">    <span class="comment">// append   =&gt; appendTo</span></div><div class="line">    $.fn[inside ? operator+<span class="string">'To'</span> : <span class="string">'insert'</span>+(operatorIndex ? <span class="string">'Before'</span> : <span class="string">'After'</span>)] = <span class="function"><span class="keyword">function</span>(<span class="params">html</span>)</span>&#123;</div><div class="line">      $(html)[operator](<span class="keyword">this</span>)</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span></div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  zepto.Z.prototype = $.fn</div><div class="line"></div><div class="line">  <span class="comment">// Export internal API functions in the `$.zepto` namespace</span></div><div class="line">  zepto.uniq = uniq</div><div class="line">  zepto.deserializeValue = deserializeValue</div><div class="line">  $.zepto = zepto</div><div class="line"></div><div class="line">  <span class="keyword">return</span> $</div><div class="line">&#125;)()</div><div class="line"></div><div class="line"><span class="built_in">window</span>.Zepto = Zepto</div><div class="line"><span class="built_in">window</span>.$ === <span class="literal">undefined</span> &amp;&amp; (<span class="built_in">window</span>.$ = Zepto)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚æœä½ å¸¸ç”¨zeptoï¼Œå´æ²¡æœ‰è¯•ç€æ·±å…¥zeptoæºç å»çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼Œä½ ä¸å¥½å¥‡å—ï¼Ÿè·Ÿéšæˆ‘ï¼Œæ‰“å¼€zeptoçš„æºç æ¥åˆ†æä¸€ä¸‹ï¼Œçœ‹çœ‹zeptoæ˜¯ç”¨ä½•ç§æ–¹å¼åšæˆäº†æµè¡Œå…¨ä¸–ç•Œçš„jsåº“ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬è¯¾ç¨‹å†…å®¹ä¸»è¦æœ‰ä¸¤ä¸ªï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†æzeptoçš„è®¾è®¡æ€æƒ³ï¼Œå¹¶æ€è€ƒå¦‚ä½•æ‰èƒ½å®ç°è¿™ç§è®¾è®¡ï¼›&lt;/li&gt;
&lt;li&gt;æ‰“å¼€zeptoæºç ï¼Œçœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰©å±•å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½œè€…æ ‡æ³¨çš„ zepto coreæ¨¡å—çš„æºç æ³¨è§†ï¼›&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;è‡³äºä¸ºä½•è¦è§£è¯»æºç å’Œè®¾è®¡ï¼Ÿæˆ‘æƒ³æ—¢ç„¶æ¥çœ‹è¯¥æ•™ç¨‹çš„æœ‹å‹ï¼Œåº”è¯¥éƒ½çŸ¥é“å®ƒçš„æ„ä¹‰ï¼Œè¿™é‡Œä¸å†å” å¨ã€‚æ€»ä¹‹ï¼Œ&lt;strong&gt;æ‹œè¯»ç»å…¸æ¡†æ¶çš„æºç ã€å­¦ä¹ è®¾è®¡æ€æƒ³ï¼Œå°±ç­‰äºç«™åœ¨å·¨äººçš„è‚©è†€ä¸Š&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>eslinté…ç½®</title>
    <link href="http://xuhongbo.com/2016/10/08/%E5%B7%A5%E5%85%B7%E7%B1%BB/eslint%E9%85%8D%E7%BD%AE/"/>
    <id>http://xuhongbo.com/2016/10/08/å·¥å…·ç±»/eslinté…ç½®/</id>
    <published>2016-10-08T07:02:02.000Z</published>
    <updated>2017-03-02T10:39:05.102Z</updated>
    
    <content type="html"><![CDATA[<p>EsLintå¸®åŠ©æˆ‘ä»¬æ£€æŸ¥Javascriptç¼–ç¨‹æ—¶çš„è¯­æ³•é”™è¯¯ã€‚æ¯”å¦‚ï¼šåœ¨Javascriptåº”ç”¨ä¸­ï¼Œä½ å¾ˆéš¾æ‰¾åˆ°ä½ æ¼æ³„çš„å˜é‡æˆ–è€…æ–¹æ³•ã€‚EsLintèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åˆ†æJSä»£ç ï¼Œæ‰¾åˆ°bugå¹¶ç¡®ä¿ä¸€å®šç¨‹åº¦çš„JSè¯­æ³•ä¹¦å†™çš„æ­£ç¡®æ€§ã€‚<br>EsLintæ˜¯å»ºç«‹åœ¨Esprima(ECMAScriptè§£ææ¶æ„)çš„åŸºç¡€ä¸Šçš„ã€‚Esprimaæ”¯æŒES5.1,æœ¬èº«ä¹Ÿæ˜¯ç”¨ECMAScriptç¼–å†™çš„ï¼Œç”¨äºå¤šç”¨é€”åˆ†æã€‚EsLintä¸ä½†æä¾›ä¸€äº›é»˜è®¤çš„è§„åˆ™ï¼ˆå¯æ‰©å±•ï¼‰ï¼Œä¹Ÿæä¾›ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™æ¥çº¦æŸæˆ‘ä»¬å†™çš„Javascriptä»£ç ã€‚<br><a id="more"></a></p>
<p>æˆ‘ä»¬åœ¨å…¨å±€å®‰è£…<code>npm install eslint -g</code></p>
<p>ç„¶åå†åˆå§‹åŒ–eslint<code>eslint --init</code></p>
<p>ç„¶åæˆ‘ä»¬é…ç½®çš„æ—¶å€™<br>ç¬¬ä¸€ç§åˆå§‹åŒ–æ–¹å¼<br><img src="/images/eslint-1.png" alt="img"><br><img src="/images/eslint-1.png" alt="img"><br><img src="/images/eslint-1.png" alt="img"></p>
<p><img src="/images/eslint-4.png" alt="img"></p>
<p>ç¬¬äºŒç§åˆå§‹åŒ–æ–¹å¼<br><img src="/images/eslint-5.png" alt="img"></p>
<p>ç„¶åå°±å¯ä»¥äº†  é‡å¯æˆ‘ä»¬çš„vscodeå°±å¯ä»¥è¿›è¡Œä»£ç é£æ ¼æ£€æŸ¥äº†</p>
<ul>
<li>æ–‡æ¡£ &lt;<a href="http://eslint.cn/docs/user-guide/configuring" target="_blank" rel="external">http://eslint.cn/docs/user-guide/configuring</a><a href="http://eslint.cn/docs/user-guide/configuring" target="_blank" rel="external">http://eslint.cn/docs/user-guide/configuring</a>ESLintçš„2ç§é…ç½®:<strong>Configuration Comments</strong> - ä½¿ç”¨ JavaScript æ³¨é‡ŠæŠŠé…ç½®ä¿¡æ¯ç›´æ¥åµŒå…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚<strong>Configuration Files</strong> - ä½¿ç”¨ JavaScriptã€JSON æˆ–è€… YAML æ–‡ä»¶ä¸ºæ•´ä¸ªç›®å½•å’Œå®ƒçš„å­ç›®å½•æŒ‡å®šé…ç½®ä¿¡æ¯ã€‚å¯ä»¥ç”¨ .eslintrc.* æ–‡ä»¶æˆ–è€…åœ¨ package.json æ–‡ä»¶é‡Œçš„ eslintConfig å­—æ®µè¿™ä¸¤ç§æ–¹å¼è¿›è¡Œé…ç½®ï¼ŒESLint ä¼šæŸ¥æ‰¾å’Œè‡ªåŠ¨è¯»å–å®ƒä»¬ï¼Œå†è€…ï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤è¡ŒæŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚</li>
</ul>
<blockquote>
<blockquote>
<p>æœ‰å¾ˆå¤šé…ç½®ä¿¡æ¯:</p>
<ul>
<li><strong>Environments</strong> -æŒ‡å®šè„šæœ¬çš„è¿è¡Œç¯å¢ƒ æ¯ç§ç¯å¢ƒéƒ½æœ‰ä¸€ç»„ç‰¹å®šçš„é¢„å®šä¹‰å…¨å±€å˜é‡</li>
<li><strong>Globals</strong> -è„šæœ¬åœ¨æ‰§è¡ŒæœŸé—´è®¿é—®çš„é¢å¤–å…¨å±€å˜é‡</li>
<li><strong>Rules</strong> -å¯ç”¨çš„è§„åˆ™åŠå„è‡ªçš„é”™è¯¯çº§åˆ«</li>
</ul>
</blockquote>
</blockquote>
<h3 id="Configuring-Rules-é…ç½®è§„åˆ™"><a href="#Configuring-Rules-é…ç½®è§„åˆ™" class="headerlink" title="Configuring Rules é…ç½®è§„åˆ™"></a>Configuring Rules é…ç½®è§„åˆ™</h3><p>ESLint é™„å¸¦æœ‰å¤§é‡çš„è§„åˆ™ã€‚ä½ å¯ä»¥ä½¿ç”¨æ³¨é‡Šæˆ–é…ç½®æ–‡ä»¶ä¿®æ”¹ä½ é¡¹ç›®ä¸­è¦ä½¿ç”¨å“ªäº›è§„åˆ™ã€‚æ”¹å˜ä¸€ä¸ªè§„åˆ™è®¾ç½®ï¼Œä½ å¿…é¡»è®¾ç½®è§„åˆ™ ID ç­‰äºè¿™äº›å€¼ä¹‹ä¸€ï¼š</p>
<ul>
<li>â€œoffâ€æˆ–0 -å…³é—­è§„åˆ™</li>
<li>â€œwarnâ€ æˆ–1 - å¼€å¯è§„åˆ™, ä½¿ç”¨è­¦å‘Š ç¨‹åºä¸ä¼šé€€å‡º</li>
<li>â€œerrorâ€æˆ–2 - å¼€å¯è§„åˆ™, ä½¿ç”¨é”™è¯¯ ç¨‹åºé€€å‡º</li>
</ul>
<p>ä¸ºäº†åœ¨æ–‡ä»¶æ³¨é‡Šé‡Œé…ç½®è§„åˆ™ï¼Œä½¿ç”¨ä»¥ä¸‹æ ¼å¼çš„æ³¨é‡Šï¼š</p>
<p><code>/* eslint eqeqeq: &quot;off&quot;, curly: &quot;error&quot; */</code><br>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œeqeqeq è§„åˆ™è¢«å…³é—­ï¼Œcurly è§„åˆ™è¢«æ‰“å¼€ï¼Œå®šä¹‰ä¸ºé”™è¯¯çº§åˆ«ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹åº”çš„æ•°å­—å®šä¹‰è§„åˆ™ä¸¥é‡ç¨‹åº¦ï¼š</p>
<p><code>/* eslint eqeqeq: 0, curly: 2 */</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&quot;rules&quot;: &#123;</div><div class="line">    &quot;eqeqeq&quot;: &quot;off&quot;,</div><div class="line">    &quot;curly&quot;: &quot;error&quot;,</div><div class="line">    &quot;quotes&quot;: [&quot;error&quot;, &quot;double&quot;],</div><div class="line">    &quot;plugin1/rule1&quot;: &quot;error&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ä¸´æ—¶ç¦æ­¢è§„åˆ™å‡ºç°è­¦å‘Š"><a href="#ä¸´æ—¶ç¦æ­¢è§„åˆ™å‡ºç°è­¦å‘Š" class="headerlink" title="ä¸´æ—¶ç¦æ­¢è§„åˆ™å‡ºç°è­¦å‘Š"></a>ä¸´æ—¶ç¦æ­¢è§„åˆ™å‡ºç°è­¦å‘Š</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* eslint-disable */</span></div><div class="line">alert(<span class="string">'foo'</span>);</div><div class="line"><span class="comment">/* eslint-enable */</span></div></pre></td></tr></table></figure>
<h3 id="ruleè§£é‡Š"><a href="#ruleè§£é‡Š" class="headerlink" title="ruleè§£é‡Š"></a>ruleè§£é‡Š</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div></pre></td><td class="code"><pre><div class="line"><span class="string">"no-alert"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨alert confirm prompt</span></div><div class="line"><span class="string">"no-array-constructor"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨æ•°ç»„æ„é€ å™¨</span></div><div class="line"><span class="string">"no-bitwise"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨æŒ‰ä½è¿ç®—ç¬¦</span></div><div class="line"><span class="string">"no-caller"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨arguments.calleræˆ–arguments.callee</span></div><div class="line"><span class="string">"no-catch-shadow"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢catchå­å¥å‚æ•°ä¸å¤–éƒ¨ä½œç”¨åŸŸå˜é‡åŒå</span></div><div class="line"><span class="string">"no-class-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç»™ç±»èµ‹å€¼</span></div><div class="line"><span class="string">"no-cond-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ä½¿ç”¨èµ‹å€¼è¯­å¥</span></div><div class="line"><span class="string">"no-console"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨console</span></div><div class="line"><span class="string">"no-const-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¿®æ”¹constå£°æ˜çš„å˜é‡</span></div><div class="line"><span class="string">"no-constant-condition"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼ if(true) if(1)</span></div><div class="line"><span class="string">"no-continue"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨continue</span></div><div class="line"><span class="string">"no-control-regex"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦</span></div><div class="line"><span class="string">"no-debugger"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨debugger</span></div><div class="line"><span class="string">"no-delete-var"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½å¯¹varå£°æ˜çš„å˜é‡ä½¿ç”¨deleteæ“ä½œç¬¦</span></div><div class="line"><span class="string">"no-div-regex"</span>: <span class="number">1</span>,<span class="comment">//ä¸èƒ½ä½¿ç”¨çœ‹èµ·æ¥åƒé™¤æ³•çš„æ­£åˆ™è¡¨è¾¾å¼/=foo/</span></div><div class="line"><span class="string">"no-dupe-keys"</span>: <span class="number">2</span>,<span class="comment">//åœ¨åˆ›å»ºå¯¹è±¡å­—é¢é‡æ—¶ä¸å…è®¸é”®é‡å¤ &#123;a:1,a:1&#125;</span></div><div class="line"><span class="string">"no-dupe-args"</span>: <span class="number">2</span>,<span class="comment">//å‡½æ•°å‚æ•°ä¸èƒ½é‡å¤</span></div><div class="line"><span class="string">"no-duplicate-case"</span>: <span class="number">2</span>,<span class="comment">//switchä¸­çš„caseæ ‡ç­¾ä¸èƒ½é‡å¤</span></div><div class="line"><span class="string">"no-else-return"</span>: <span class="number">2</span>,<span class="comment">//å¦‚æœifè¯­å¥é‡Œé¢æœ‰return,åé¢ä¸èƒ½è·Ÿelseè¯­å¥</span></div><div class="line"><span class="string">"no-empty"</span>: <span class="number">2</span>,<span class="comment">//å—è¯­å¥ä¸­çš„å†…å®¹ä¸èƒ½ä¸ºç©º</span></div><div class="line"><span class="string">"no-empty-character-class"</span>: <span class="number">2</span>,<span class="comment">//æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„[]å†…å®¹ä¸èƒ½ä¸ºç©º</span></div><div class="line"><span class="string">"no-empty-label"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨ç©ºlabel</span></div><div class="line"><span class="string">"no-eq-null"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢å¯¹nullä½¿ç”¨==æˆ–!=è¿ç®—ç¬¦</span></div><div class="line"><span class="string">"no-eval"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨eval</span></div><div class="line"><span class="string">"no-ex-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç»™catchè¯­å¥ä¸­çš„å¼‚å¸¸å‚æ•°èµ‹å€¼</span></div><div class="line"><span class="string">"no-extend-native"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ‰©å±•nativeå¯¹è±¡</span></div><div class="line"><span class="string">"no-extra-bind"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„å‡½æ•°ç»‘å®š</span></div><div class="line"><span class="string">"no-extra-boolean-cast"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„boolè½¬æ¢</span></div><div class="line"><span class="string">"no-extra-parens"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢éå¿…è¦çš„æ‹¬å·</span></div><div class="line"><span class="string">"no-extra-semi"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢å¤šä½™çš„å†’å·</span></div><div class="line"><span class="string">"no-fallthrough"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢switchç©¿é€</span></div><div class="line"><span class="string">"no-floating-decimal"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢çœç•¥æµ®ç‚¹æ•°ä¸­çš„0 .5 3.</span></div><div class="line"><span class="string">"no-func-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢é‡å¤çš„å‡½æ•°å£°æ˜</span></div><div class="line"><span class="string">"no-implicit-coercion"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢éšå¼è½¬æ¢</span></div><div class="line"><span class="string">"no-implied-eval"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨éšå¼eval</span></div><div class="line"><span class="string">"no-inline-comments"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢è¡Œå†…å¤‡æ³¨</span></div><div class="line"><span class="string">"no-inner-declarations"</span>: [<span class="number">2</span>, <span class="string">"functions"</span>],<span class="comment">//ç¦æ­¢åœ¨å—è¯­å¥ä¸­ä½¿ç”¨å£°æ˜ï¼ˆå˜é‡æˆ–å‡½æ•°ï¼‰</span></div><div class="line"><span class="string">"no-invalid-regexp"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼</span></div><div class="line"><span class="string">"no-invalid-this"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ— æ•ˆçš„thisï¼Œåªèƒ½ç”¨åœ¨æ„é€ å™¨ï¼Œç±»ï¼Œå¯¹è±¡å­—é¢é‡</span></div><div class="line"><span class="string">"no-irregular-whitespace"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æœ‰ä¸è§„åˆ™çš„ç©ºæ ¼</span></div><div class="line"><span class="string">"no-iterator"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨__iterator__ å±æ€§</span></div><div class="line"><span class="string">"no-label-var"</span>: <span class="number">2</span>,<span class="comment">//labelåä¸èƒ½ä¸varå£°æ˜çš„å˜é‡åç›¸åŒ</span></div><div class="line"><span class="string">"no-labels"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ ‡ç­¾å£°æ˜</span></div><div class="line"><span class="string">"no-lone-blocks"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥—å—</span></div><div class="line"><span class="string">"no-lonely-if"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢elseè¯­å¥å†…åªæœ‰ifè¯­å¥</span></div><div class="line"><span class="string">"no-loop-func"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢åœ¨å¾ªç¯ä¸­ä½¿ç”¨å‡½æ•°ï¼ˆå¦‚æœæ²¡æœ‰å¼•ç”¨å¤–éƒ¨å˜é‡ä¸å½¢æˆé—­åŒ…å°±å¯ä»¥ï¼‰</span></div><div class="line"><span class="string">"no-mixed-requires"</span>: [<span class="number">0</span>, <span class="literal">false</span>],<span class="comment">//å£°æ˜æ—¶ä¸èƒ½æ··ç”¨å£°æ˜ç±»å‹</span></div><div class="line"><span class="string">"no-mixed-spaces-and-tabs"</span>: [<span class="number">2</span>, <span class="literal">false</span>],<span class="comment">//ç¦æ­¢æ··ç”¨tabå’Œç©ºæ ¼</span></div><div class="line"><span class="string">"linebreak-style"</span>: [<span class="number">0</span>, <span class="string">"windows"</span>],<span class="comment">//æ¢è¡Œé£æ ¼</span></div><div class="line"><span class="string">"no-multi-spaces"</span>: <span class="number">0</span>,<span class="comment">//ä¸èƒ½ç”¨å¤šä½™çš„ç©ºæ ¼</span></div><div class="line"><span class="string">"no-multi-str"</span>: <span class="number">2</span>,<span class="comment">//å­—ç¬¦ä¸²ä¸èƒ½ç”¨\æ¢è¡Œ</span></div><div class="line"><span class="string">"no-multiple-empty-lines"</span>: [<span class="number">1</span>, &#123;<span class="string">"max"</span>: <span class="number">3</span>&#125;],<span class="comment">//ç©ºè¡Œæœ€å¤šä¸èƒ½è¶…è¿‡2è¡Œ</span></div><div class="line"><span class="string">"no-native-reassign"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½é‡å†™nativeå¯¹è±¡</span></div><div class="line"><span class="string">"no-negated-in-lhs"</span>: <span class="number">2</span>,<span class="comment">//in æ“ä½œç¬¦çš„å·¦è¾¹ä¸èƒ½æœ‰!</span></div><div class="line"><span class="string">"no-nested-ternary"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨åµŒå¥—çš„ä¸‰ç›®è¿ç®—</span></div><div class="line"><span class="string">"no-new"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢åœ¨ä½¿ç”¨newæ„é€ ä¸€ä¸ªå®ä¾‹åä¸èµ‹å€¼</span></div><div class="line"><span class="string">"no-new-func"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨new Function</span></div><div class="line"><span class="string">"no-new-object"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨new Object()</span></div><div class="line"><span class="string">"no-new-require"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨new require</span></div><div class="line"><span class="string">"no-new-wrappers"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨newåˆ›å»ºåŒ…è£…å®ä¾‹ï¼Œnew String new Boolean new Number</span></div><div class="line"><span class="string">"no-obj-calls"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½è°ƒç”¨å†…ç½®çš„å…¨å±€å¯¹è±¡ï¼Œæ¯”å¦‚Math() JSON()</span></div><div class="line"><span class="string">"no-octal"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶æ•°å­—</span></div><div class="line"><span class="string">"no-octal-escape"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—</span></div><div class="line"><span class="string">"no-param-reassign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç»™å‚æ•°é‡æ–°èµ‹å€¼</span></div><div class="line"><span class="string">"no-path-concat"</span>: <span class="number">0</span>,<span class="comment">//nodeä¸­ä¸èƒ½ä½¿ç”¨__dirnameæˆ–__filenameåšè·¯å¾„æ‹¼æ¥</span></div><div class="line"><span class="string">"no-plusplus"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨++ï¼Œ--</span></div><div class="line"><span class="string">"no-process-env"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨process.env</span></div><div class="line"><span class="string">"no-process-exit"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨process.exit()</span></div><div class="line"><span class="string">"no-proto"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨__proto__å±æ€§</span></div><div class="line"><span class="string">"no-redeclare"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢é‡å¤å£°æ˜å˜é‡</span></div><div class="line"><span class="string">"no-regex-spaces"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­ä½¿ç”¨å¤šä¸ªç©ºæ ¼ /foo bar/</span></div><div class="line"><span class="string">"no-restricted-modules"</span>: <span class="number">0</span>,<span class="comment">//å¦‚æœç¦ç”¨äº†æŒ‡å®šæ¨¡å—ï¼Œä½¿ç”¨å°±ä¼šæŠ¥é”™</span></div><div class="line"><span class="string">"no-return-assign"</span>: <span class="number">1</span>,<span class="comment">//return è¯­å¥ä¸­ä¸èƒ½æœ‰èµ‹å€¼è¡¨è¾¾å¼</span></div><div class="line"><span class="string">"no-script-url"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨javascript:void(0)</span></div><div class="line"><span class="string">"no-self-compare"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æ¯”è¾ƒè‡ªèº«</span></div><div class="line"><span class="string">"no-sequences"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨é€—å·è¿ç®—ç¬¦</span></div><div class="line"><span class="string">"no-shadow"</span>: <span class="number">2</span>,<span class="comment">//å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ä¸èƒ½ä¸å®ƒæ‰€åŒ…å«çš„ä½œç”¨åŸŸä¸­çš„å˜é‡æˆ–å‚æ•°åŒå</span></div><div class="line"><span class="string">"no-shadow-restricted-names"</span>: <span class="number">2</span>,<span class="comment">//ä¸¥æ ¼æ¨¡å¼ä¸­è§„å®šçš„é™åˆ¶æ ‡è¯†ç¬¦ä¸èƒ½ä½œä¸ºå£°æ˜æ—¶çš„å˜é‡åä½¿ç”¨</span></div><div class="line"><span class="string">"no-spaced-func"</span>: <span class="number">2</span>,<span class="comment">//å‡½æ•°è°ƒç”¨æ—¶ å‡½æ•°åä¸()ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼</span></div><div class="line"><span class="string">"no-sparse-arrays"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç¨€ç–æ•°ç»„ï¼Œ [1,,2]</span></div><div class="line"><span class="string">"no-sync"</span>: <span class="number">0</span>,<span class="comment">//nodejs ç¦æ­¢åŒæ­¥æ–¹æ³•</span></div><div class="line"><span class="string">"no-ternary"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦</span></div><div class="line"><span class="string">"no-trailing-spaces"</span>: <span class="number">1</span>,<span class="comment">//ä¸€è¡Œç»“æŸåé¢ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line"><span class="string">"no-this-before-super"</span>: <span class="number">0</span>,<span class="comment">//åœ¨è°ƒç”¨super()ä¹‹å‰ä¸èƒ½ä½¿ç”¨thisæˆ–super</span></div><div class="line"><span class="string">"no-throw-literal"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æŠ›å‡ºå­—é¢é‡é”™è¯¯ throw "error";</span></div><div class="line"><span class="string">"no-undef"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æœ‰æœªå®šä¹‰çš„å˜é‡</span></div><div class="line"><span class="string">"no-undef-init"</span>: <span class="number">2</span>,<span class="comment">//å˜é‡åˆå§‹åŒ–æ—¶ä¸èƒ½ç›´æ¥ç»™å®ƒèµ‹å€¼ä¸ºundefined</span></div><div class="line"><span class="string">"no-undefined"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½ä½¿ç”¨undefined</span></div><div class="line"><span class="string">"no-unexpected-multiline"</span>: <span class="number">2</span>,<span class="comment">//é¿å…å¤šè¡Œè¡¨è¾¾å¼</span></div><div class="line"><span class="string">"no-underscore-dangle"</span>: <span class="number">1</span>,<span class="comment">//æ ‡è¯†ç¬¦ä¸èƒ½ä»¥_å¼€å¤´æˆ–ç»“å°¾</span></div><div class="line"><span class="string">"no-unneeded-ternary"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥— var isYes = answer === 1 ? true : false;</span></div><div class="line"><span class="string">"no-unreachable"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æœ‰æ— æ³•æ‰§è¡Œçš„ä»£ç </span></div><div class="line"><span class="string">"no-unused-expressions"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ— ç”¨çš„è¡¨è¾¾å¼</span></div><div class="line"><span class="string">"no-unused-vars"</span>: [<span class="number">2</span>, &#123;<span class="string">"vars"</span>: <span class="string">"all"</span>, <span class="string">"args"</span>: <span class="string">"after-used"</span>&#125;],<span class="comment">//ä¸èƒ½æœ‰å£°æ˜åæœªè¢«ä½¿ç”¨çš„å˜é‡æˆ–å‚æ•°</span></div><div class="line"><span class="string">"no-use-before-define"</span>: <span class="number">2</span>,<span class="comment">//æœªå®šä¹‰å‰ä¸èƒ½ä½¿ç”¨</span></div><div class="line"><span class="string">"no-useless-call"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„callå’Œapply</span></div><div class="line"><span class="string">"no-void"</span>: <span class="number">2</span>,<span class="comment">//ç¦ç”¨voidæ“ä½œç¬¦</span></div><div class="line"><span class="string">"no-var"</span>: <span class="number">0</span>,<span class="comment">//ç¦ç”¨varï¼Œç”¨letå’Œconstä»£æ›¿</span></div><div class="line"><span class="string">"no-warning-comments"</span>: [<span class="number">1</span>, &#123; <span class="string">"terms"</span>: [<span class="string">"todo"</span>, <span class="string">"fixme"</span>, <span class="string">"xxx"</span>], <span class="string">"location"</span>: <span class="string">"start"</span> &#125;],<span class="comment">//ä¸èƒ½æœ‰è­¦å‘Šå¤‡æ³¨</span></div><div class="line"><span class="string">"no-with"</span>: <span class="number">2</span>,<span class="comment">//ç¦ç”¨with</span></div><div class="line"></div><div class="line"><span class="string">"array-bracket-spacing"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],<span class="comment">//æ˜¯å¦å…è®¸éç©ºæ•°ç»„é‡Œé¢æœ‰å¤šä½™çš„ç©ºæ ¼</span></div><div class="line"><span class="string">"arrow-parens"</span>: <span class="number">0</span>,<span class="comment">//ç®­å¤´å‡½æ•°ç”¨å°æ‹¬å·æ‹¬èµ·æ¥</span></div><div class="line"><span class="string">"arrow-spacing"</span>: <span class="number">0</span>,<span class="comment">//=&gt;çš„å‰/åæ‹¬å·</span></div><div class="line"><span class="string">"accessor-pairs"</span>: <span class="number">0</span>,<span class="comment">//åœ¨å¯¹è±¡ä¸­ä½¿ç”¨getter/setter</span></div><div class="line"><span class="string">"block-scoped-var"</span>: <span class="number">0</span>,<span class="comment">//å—è¯­å¥ä¸­ä½¿ç”¨var</span></div><div class="line"><span class="string">"brace-style"</span>: [<span class="number">1</span>, <span class="string">"1tbs"</span>],<span class="comment">//å¤§æ‹¬å·é£æ ¼</span></div><div class="line"><span class="string">"callback-return"</span>: <span class="number">1</span>,<span class="comment">//é¿å…å¤šæ¬¡è°ƒç”¨å›è°ƒä»€ä¹ˆçš„</span></div><div class="line"><span class="string">"camelcase"</span>: <span class="number">2</span>,<span class="comment">//å¼ºåˆ¶é©¼å³°æ³•å‘½å</span></div><div class="line"><span class="string">"comma-dangle"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],<span class="comment">//å¯¹è±¡å­—é¢é‡é¡¹å°¾ä¸èƒ½æœ‰é€—å·</span></div><div class="line"><span class="string">"comma-spacing"</span>: <span class="number">0</span>,<span class="comment">//é€—å·å‰åçš„ç©ºæ ¼</span></div><div class="line"><span class="string">"comma-style"</span>: [<span class="number">2</span>, <span class="string">"last"</span>],<span class="comment">//é€—å·é£æ ¼ï¼Œæ¢è¡Œæ—¶åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾</span></div><div class="line"><span class="string">"complexity"</span>: [<span class="number">0</span>, <span class="number">11</span>],<span class="comment">//å¾ªç¯å¤æ‚åº¦</span></div><div class="line"><span class="string">"computed-property-spacing"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//æ˜¯å¦å…è®¸è®¡ç®—åçš„é”®åä»€ä¹ˆçš„</span></div><div class="line"><span class="string">"consistent-return"</span>: <span class="number">0</span>,<span class="comment">//return åé¢æ˜¯å¦å…è®¸çœç•¥</span></div><div class="line"><span class="string">"consistent-this"</span>: [<span class="number">2</span>, <span class="string">"that"</span>],<span class="comment">//thisåˆ«å</span></div><div class="line"><span class="string">"constructor-super"</span>: <span class="number">0</span>,<span class="comment">//éæ´¾ç”Ÿç±»ä¸èƒ½è°ƒç”¨superï¼Œæ´¾ç”Ÿç±»å¿…é¡»è°ƒç”¨super</span></div><div class="line"><span class="string">"curly"</span>: [<span class="number">2</span>, <span class="string">"all"</span>],<span class="comment">//å¿…é¡»ä½¿ç”¨ if()&#123;&#125; ä¸­çš„&#123;&#125;</span></div><div class="line"><span class="string">"default-case"</span>: <span class="number">2</span>,<span class="comment">//switchè¯­å¥æœ€åå¿…é¡»æœ‰default</span></div><div class="line"><span class="string">"dot-location"</span>: <span class="number">0</span>,<span class="comment">//å¯¹è±¡è®¿é—®ç¬¦çš„ä½ç½®ï¼Œæ¢è¡Œçš„æ—¶å€™åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾</span></div><div class="line"><span class="string">"dot-notation"</span>: [<span class="number">0</span>, &#123; <span class="string">"allowKeywords"</span>: <span class="literal">true</span> &#125;],<span class="comment">//é¿å…ä¸å¿…è¦çš„æ–¹æ‹¬å·</span></div><div class="line"><span class="string">"eol-last"</span>: <span class="number">0</span>,<span class="comment">//æ–‡ä»¶ä»¥å•ä¸€çš„æ¢è¡Œç¬¦ç»“æŸ</span></div><div class="line"><span class="string">"eqeqeq"</span>: <span class="number">0</span>,<span class="comment">//å¿…é¡»ä½¿ç”¨å…¨ç­‰</span></div><div class="line"><span class="string">"func-names"</span>: <span class="number">0</span>,<span class="comment">//å‡½æ•°è¡¨è¾¾å¼å¿…é¡»æœ‰åå­—</span></div><div class="line"><span class="string">"func-style"</span>: [<span class="number">0</span>, <span class="string">"declaration"</span>],<span class="comment">//å‡½æ•°é£æ ¼ï¼Œè§„å®šåªèƒ½ä½¿ç”¨å‡½æ•°å£°æ˜/å‡½æ•°è¡¨è¾¾å¼</span></div><div class="line"><span class="string">"generator-star-spacing"</span>: <span class="number">0</span>,<span class="comment">//ç”Ÿæˆå™¨å‡½æ•°*çš„å‰åç©ºæ ¼</span></div><div class="line"><span class="string">"guard-for-in"</span>: <span class="number">0</span>,<span class="comment">//for inå¾ªç¯è¦ç”¨ifè¯­å¥è¿‡æ»¤</span></div><div class="line"><span class="string">"handle-callback-err"</span>: <span class="number">0</span>,<span class="comment">//nodejs å¤„ç†é”™è¯¯</span></div><div class="line"><span class="string">"id-length"</span>: <span class="number">0</span>,<span class="comment">//å˜é‡åé•¿åº¦</span></div><div class="line"><span class="string">"indent"</span>: [<span class="number">2</span>, <span class="number">2</span>],<span class="comment">//ç¼©è¿›é£æ ¼</span></div><div class="line"><span class="string">"init-declarations"</span>: <span class="number">0</span>,<span class="comment">//å£°æ˜æ—¶å¿…é¡»èµ‹åˆå€¼</span></div><div class="line"><span class="string">"key-spacing"</span>: [<span class="number">0</span>, &#123; <span class="string">"beforeColon"</span>: <span class="literal">false</span>, <span class="string">"afterColon"</span>: <span class="literal">true</span> &#125;],<span class="comment">//å¯¹è±¡å­—é¢é‡ä¸­å†’å·çš„å‰åç©ºæ ¼</span></div><div class="line"><span class="string">"lines-around-comment"</span>: <span class="number">0</span>,<span class="comment">//è¡Œå‰/è¡Œåå¤‡æ³¨</span></div><div class="line"><span class="string">"max-depth"</span>: [<span class="number">0</span>, <span class="number">4</span>],<span class="comment">//åµŒå¥—å—æ·±åº¦</span></div><div class="line"><span class="string">"max-len"</span>: [<span class="number">0</span>, <span class="number">80</span>, <span class="number">4</span>],<span class="comment">//å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦</span></div><div class="line"><span class="string">"max-nested-callbacks"</span>: [<span class="number">0</span>, <span class="number">2</span>],<span class="comment">//å›è°ƒåµŒå¥—æ·±åº¦</span></div><div class="line"><span class="string">"max-params"</span>: [<span class="number">0</span>, <span class="number">3</span>],<span class="comment">//å‡½æ•°æœ€å¤šåªèƒ½æœ‰3ä¸ªå‚æ•°</span></div><div class="line"><span class="string">"max-statements"</span>: [<span class="number">0</span>, <span class="number">10</span>],<span class="comment">//å‡½æ•°å†…æœ€å¤šæœ‰å‡ ä¸ªå£°æ˜</span></div><div class="line"><span class="string">"new-cap"</span>: <span class="number">2</span>,<span class="comment">//å‡½æ•°åé¦–è¡Œå¤§å†™å¿…é¡»ä½¿ç”¨newæ–¹å¼è°ƒç”¨ï¼Œé¦–è¡Œå°å†™å¿…é¡»ç”¨ä¸å¸¦newæ–¹å¼è°ƒç”¨</span></div><div class="line"><span class="string">"new-parens"</span>: <span class="number">2</span>,<span class="comment">//newæ—¶å¿…é¡»åŠ å°æ‹¬å·</span></div><div class="line"><span class="string">"newline-after-var"</span>: <span class="number">2</span>,<span class="comment">//å˜é‡å£°æ˜åæ˜¯å¦éœ€è¦ç©ºä¸€è¡Œ</span></div><div class="line"><span class="string">"object-curly-spacing"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//å¤§æ‹¬å·å†…æ˜¯å¦å…è®¸ä¸å¿…è¦çš„ç©ºæ ¼</span></div><div class="line"><span class="string">"object-shorthand"</span>: <span class="number">0</span>,<span class="comment">//å¼ºåˆ¶å¯¹è±¡å­—é¢é‡ç¼©å†™è¯­æ³•</span></div><div class="line"><span class="string">"one-var"</span>: <span class="number">1</span>,<span class="comment">//è¿ç»­å£°æ˜</span></div><div class="line"><span class="string">"operator-assignment"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//èµ‹å€¼è¿ç®—ç¬¦ += -=ä»€ä¹ˆçš„</span></div><div class="line"><span class="string">"operator-linebreak"</span>: [<span class="number">2</span>, <span class="string">"after"</span>],<span class="comment">//æ¢è¡Œæ—¶è¿ç®—ç¬¦åœ¨è¡Œå°¾è¿˜æ˜¯è¡Œé¦–</span></div><div class="line"><span class="string">"padded-blocks"</span>: <span class="number">0</span>,<span class="comment">//å—è¯­å¥å†…è¡Œé¦–è¡Œå°¾æ˜¯å¦è¦ç©ºè¡Œ</span></div><div class="line"><span class="string">"prefer-const"</span>: <span class="number">0</span>,<span class="comment">//é¦–é€‰const</span></div><div class="line"><span class="string">"prefer-spread"</span>: <span class="number">0</span>,<span class="comment">//é¦–é€‰å±•å¼€è¿ç®—</span></div><div class="line"><span class="string">"prefer-reflect"</span>: <span class="number">0</span>,<span class="comment">//é¦–é€‰Reflectçš„æ–¹æ³•</span></div><div class="line"><span class="string">"quotes"</span>: [<span class="number">1</span>, <span class="string">"single"</span>],<span class="comment">//å¼•å·ç±»å‹ `` "" ''</span></div><div class="line"><span class="string">"quote-props"</span>:[<span class="number">2</span>, <span class="string">"always"</span>],<span class="comment">//å¯¹è±¡å­—é¢é‡ä¸­çš„å±æ€§åæ˜¯å¦å¼ºåˆ¶åŒå¼•å·</span></div><div class="line"><span class="string">"radix"</span>: <span class="number">2</span>,<span class="comment">//parseIntå¿…é¡»æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°</span></div><div class="line"><span class="string">"id-match"</span>: <span class="number">0</span>,<span class="comment">//å‘½åæ£€æµ‹</span></div><div class="line"><span class="string">"require-yield"</span>: <span class="number">0</span>,<span class="comment">//ç”Ÿæˆå™¨å‡½æ•°å¿…é¡»æœ‰yield</span></div><div class="line"><span class="string">"semi"</span>: [<span class="number">2</span>, <span class="string">"always"</span>],<span class="comment">//è¯­å¥å¼ºåˆ¶åˆ†å·ç»“å°¾</span></div><div class="line"><span class="string">"semi-spacing"</span>: [<span class="number">0</span>, &#123;<span class="string">"before"</span>: <span class="literal">false</span>, <span class="string">"after"</span>: <span class="literal">true</span>&#125;],<span class="comment">//åˆ†å·å‰åç©ºæ ¼</span></div><div class="line"><span class="string">"sort-vars"</span>: <span class="number">0</span>,<span class="comment">//å˜é‡å£°æ˜æ—¶æ’åº</span></div><div class="line"><span class="string">"space-after-keywords"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//å…³é”®å­—åé¢æ˜¯å¦è¦ç©ºä¸€æ ¼</span></div><div class="line"><span class="string">"space-before-blocks"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//ä¸ä»¥æ–°è¡Œå¼€å§‹çš„å—&#123;å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line"><span class="string">"space-before-function-paren"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line"><span class="string">"space-in-parens"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//å°æ‹¬å·é‡Œé¢è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line"><span class="string">"space-infix-ops"</span>: <span class="number">0</span>,<span class="comment">//ä¸­ç¼€æ“ä½œç¬¦å‘¨å›´è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line"><span class="string">"space-return-throw-case"</span>: <span class="number">2</span>,<span class="comment">//return throw caseåé¢è¦ä¸è¦åŠ ç©ºæ ¼</span></div><div class="line"><span class="string">"space-unary-ops"</span>: [<span class="number">0</span>, &#123; <span class="string">"words"</span>: <span class="literal">true</span>, <span class="string">"nonwords"</span>: <span class="literal">false</span> &#125;],<span class="comment">//ä¸€å…ƒè¿ç®—ç¬¦çš„å‰/åè¦ä¸è¦åŠ ç©ºæ ¼</span></div><div class="line"><span class="string">"spaced-comment"</span>: <span class="number">0</span>,<span class="comment">//æ³¨é‡Šé£æ ¼è¦ä¸è¦æœ‰ç©ºæ ¼ä»€ä¹ˆçš„</span></div><div class="line"><span class="string">"strict"</span>: <span class="number">2</span>,<span class="comment">//ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</span></div><div class="line"><span class="string">"use-isnan"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ¯”è¾ƒæ—¶ä½¿ç”¨NaNï¼Œåªèƒ½ç”¨isNaN()</span></div><div class="line"><span class="string">"valid-jsdoc"</span>: <span class="number">0</span>,<span class="comment">//jsdocè§„åˆ™</span></div><div class="line"><span class="string">"valid-typeof"</span>: <span class="number">2</span>,<span class="comment">//å¿…é¡»ä½¿ç”¨åˆæ³•çš„typeofçš„å€¼</span></div><div class="line"><span class="string">"vars-on-top"</span>: <span class="number">2</span>,<span class="comment">//varå¿…é¡»æ”¾åœ¨ä½œç”¨åŸŸé¡¶éƒ¨</span></div><div class="line"><span class="string">"wrap-iife"</span>: [<span class="number">2</span>, <span class="string">"inside"</span>],<span class="comment">//ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼çš„å°æ‹¬å·é£æ ¼</span></div><div class="line"><span class="string">"wrap-regex"</span>: <span class="number">0</span>,<span class="comment">//æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ç”¨å°æ‹¬å·åŒ…èµ·æ¥</span></div><div class="line"><span class="string">"yoda"</span>: [<span class="number">2</span>, <span class="string">"never"</span>]<span class="comment">//ç¦æ­¢å°¤è¾¾æ¡ä»¶</span></div></pre></td></tr></table></figure>
<p>vue 2.0 è‡ªå®šä¹‰è§„åˆ™å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">parser</span>: <span class="string">'babel-eslint'</span>,</div><div class="line">  <span class="attr">parserOptions</span>: &#123;</div><div class="line">    <span class="attr">sourceType</span>: <span class="string">'module'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// required to lint *.vue files</span></div><div class="line">  plugins: [</div><div class="line">    <span class="string">'html'</span></div><div class="line">  ],</div><div class="line">  <span class="comment">// add your custom rules here</span></div><div class="line">  <span class="string">'rules'</span>: &#123;</div><div class="line">    <span class="comment">// allow debugger during development</span></div><div class="line">    <span class="string">'no-debugger'</span>: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="number">2</span> : <span class="number">0</span>,</div><div class="line">    <span class="string">"no-alert"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨alert confirm prompt</span></div><div class="line">    <span class="string">"no-array-constructor"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨æ•°ç»„æ„é€ å™¨</span></div><div class="line">    <span class="string">"no-bitwise"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨æŒ‰ä½è¿ç®—ç¬¦</span></div><div class="line">    <span class="string">"no-caller"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨arguments.calleræˆ–arguments.callee</span></div><div class="line">    <span class="string">"no-catch-shadow"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢catchå­å¥å‚æ•°ä¸å¤–éƒ¨ä½œç”¨åŸŸå˜é‡åŒå</span></div><div class="line">    <span class="string">"no-class-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç»™ç±»èµ‹å€¼</span></div><div class="line">    <span class="string">"no-cond-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ä½¿ç”¨èµ‹å€¼è¯­å¥</span></div><div class="line">    <span class="string">"no-console"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨console</span></div><div class="line">    <span class="string">"no-const-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¿®æ”¹constå£°æ˜çš„å˜é‡</span></div><div class="line">    <span class="string">"no-constant-condition"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼ if(true) if(1)</span></div><div class="line">    <span class="string">"no-continue"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨continue</span></div><div class="line">    <span class="string">"no-control-regex"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ§åˆ¶å­—ç¬¦</span></div><div class="line">    <span class="string">"no-debugger"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨debugger</span></div><div class="line">    <span class="string">"no-delete-var"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½å¯¹varå£°æ˜çš„å˜é‡ä½¿ç”¨deleteæ“ä½œç¬¦</span></div><div class="line">    <span class="string">"no-div-regex"</span>: <span class="number">1</span>,<span class="comment">//ä¸èƒ½ä½¿ç”¨çœ‹èµ·æ¥åƒé™¤æ³•çš„æ­£åˆ™è¡¨è¾¾å¼/=foo/</span></div><div class="line">    <span class="string">"no-dupe-keys"</span>: <span class="number">2</span>,<span class="comment">//åœ¨åˆ›å»ºå¯¹è±¡å­—é¢é‡æ—¶ä¸å…è®¸é”®é‡å¤ &#123;a:1,a:1&#125;</span></div><div class="line">    <span class="string">"no-dupe-args"</span>: <span class="number">2</span>,<span class="comment">//å‡½æ•°å‚æ•°ä¸èƒ½é‡å¤</span></div><div class="line">    <span class="string">"no-duplicate-case"</span>: <span class="number">2</span>,<span class="comment">//switchä¸­çš„caseæ ‡ç­¾ä¸èƒ½é‡å¤</span></div><div class="line">    <span class="string">"no-else-return"</span>: <span class="number">2</span>,<span class="comment">//å¦‚æœifè¯­å¥é‡Œé¢æœ‰return,åé¢ä¸èƒ½è·Ÿelseè¯­å¥</span></div><div class="line">    <span class="string">"no-empty"</span>: <span class="number">0</span>,<span class="comment">//å—è¯­å¥ä¸­çš„å†…å®¹ä¸èƒ½ä¸ºç©º</span></div><div class="line">    <span class="string">"no-empty-character-class"</span>: <span class="number">2</span>,<span class="comment">//æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„[]å†…å®¹ä¸èƒ½ä¸ºç©º</span></div><div class="line">    <span class="string">"no-eq-null"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢å¯¹nullä½¿ç”¨==æˆ–!=è¿ç®—ç¬¦</span></div><div class="line">    <span class="string">"no-eval"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨eval</span></div><div class="line">    <span class="string">"no-ex-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç»™catchè¯­å¥ä¸­çš„å¼‚å¸¸å‚æ•°èµ‹å€¼</span></div><div class="line">    <span class="string">"no-extend-native"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ‰©å±•nativeå¯¹è±¡</span></div><div class="line">    <span class="string">"no-extra-bind"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„å‡½æ•°ç»‘å®š</span></div><div class="line">    <span class="string">"no-extra-boolean-cast"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„boolè½¬æ¢</span></div><div class="line">    <span class="string">"no-extra-parens"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢éå¿…è¦çš„æ‹¬å·</span></div><div class="line">    <span class="string">"no-extra-semi"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢å¤šä½™çš„å†’å·</span></div><div class="line">    <span class="string">"no-fallthrough"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢switchç©¿é€</span></div><div class="line">    <span class="string">"no-floating-decimal"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢çœç•¥æµ®ç‚¹æ•°ä¸­çš„0 .5 3.</span></div><div class="line">    <span class="string">"no-func-assign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢é‡å¤çš„å‡½æ•°å£°æ˜</span></div><div class="line">    <span class="string">"no-implicit-coercion"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢éšå¼è½¬æ¢</span></div><div class="line">    <span class="string">"no-implied-eval"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨éšå¼eval</span></div><div class="line">    <span class="string">"no-inline-comments"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢è¡Œå†…å¤‡æ³¨</span></div><div class="line">    <span class="string">"no-inner-declarations"</span>: [<span class="number">2</span>, <span class="string">"functions"</span>],<span class="comment">//ç¦æ­¢åœ¨å—è¯­å¥ä¸­ä½¿ç”¨å£°æ˜ï¼ˆå˜é‡æˆ–å‡½æ•°ï¼‰</span></div><div class="line">    <span class="string">"no-invalid-regexp"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼</span></div><div class="line">    <span class="string">"no-invalid-this"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ— æ•ˆçš„thisï¼Œåªèƒ½ç”¨åœ¨æ„é€ å™¨ï¼Œç±»ï¼Œå¯¹è±¡å­—é¢é‡</span></div><div class="line">    <span class="string">"no-irregular-whitespace"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æœ‰ä¸è§„åˆ™çš„ç©ºæ ¼</span></div><div class="line">    <span class="string">"no-iterator"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨__iterator__ å±æ€§</span></div><div class="line">    <span class="string">"no-label-var"</span>: <span class="number">2</span>,<span class="comment">//labelåä¸èƒ½ä¸varå£°æ˜çš„å˜é‡åç›¸åŒ</span></div><div class="line">    <span class="string">"no-labels"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢æ ‡ç­¾å£°æ˜</span></div><div class="line">    <span class="string">"no-lone-blocks"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥—å—</span></div><div class="line">    <span class="string">"no-lonely-if"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢elseè¯­å¥å†…åªæœ‰ifè¯­å¥</span></div><div class="line">    <span class="string">"no-loop-func"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢åœ¨å¾ªç¯ä¸­ä½¿ç”¨å‡½æ•°ï¼ˆå¦‚æœæ²¡æœ‰å¼•ç”¨å¤–éƒ¨å˜é‡ä¸å½¢æˆé—­åŒ…å°±å¯ä»¥ï¼‰</span></div><div class="line">    <span class="string">"no-mixed-requires"</span>: [<span class="number">0</span>, <span class="literal">false</span>],<span class="comment">//å£°æ˜æ—¶ä¸èƒ½æ··ç”¨å£°æ˜ç±»å‹</span></div><div class="line">    <span class="string">"no-mixed-spaces-and-tabs"</span>: [<span class="number">2</span>, <span class="literal">false</span>],<span class="comment">//ç¦æ­¢æ··ç”¨tabå’Œç©ºæ ¼</span></div><div class="line">    <span class="string">"linebreak-style"</span>: [<span class="number">0</span>, <span class="string">"windows"</span>],<span class="comment">//æ¢è¡Œé£æ ¼</span></div><div class="line">    <span class="string">"no-multi-spaces"</span>: <span class="number">0</span>,<span class="comment">//ä¸èƒ½ç”¨å¤šä½™çš„ç©ºæ ¼</span></div><div class="line">    <span class="string">"no-multi-str"</span>: <span class="number">2</span>,<span class="comment">//å­—ç¬¦ä¸²ä¸èƒ½ç”¨\æ¢è¡Œ</span></div><div class="line">    <span class="string">"no-multiple-empty-lines"</span>: [<span class="number">1</span>, &#123;<span class="string">"max"</span>: <span class="number">3</span>&#125;],<span class="comment">//ç©ºè¡Œæœ€å¤šä¸èƒ½è¶…è¿‡2è¡Œ</span></div><div class="line">    <span class="string">"no-native-reassign"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½é‡å†™nativeå¯¹è±¡</span></div><div class="line">    <span class="string">"no-negated-in-lhs"</span>: <span class="number">2</span>,<span class="comment">//in æ“ä½œç¬¦çš„å·¦è¾¹ä¸èƒ½æœ‰!</span></div><div class="line">    <span class="string">"no-nested-ternary"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨åµŒå¥—çš„ä¸‰ç›®è¿ç®—</span></div><div class="line">    <span class="string">"no-new"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢åœ¨ä½¿ç”¨newæ„é€ ä¸€ä¸ªå®ä¾‹åä¸èµ‹å€¼</span></div><div class="line">    <span class="string">"no-new-func"</span>: <span class="number">1</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨new Function</span></div><div class="line">    <span class="string">"no-new-object"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨new Object()</span></div><div class="line">    <span class="string">"no-new-require"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨new require</span></div><div class="line">    <span class="string">"no-new-wrappers"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨newåˆ›å»ºåŒ…è£…å®ä¾‹ï¼Œnew String new Boolean new Number</span></div><div class="line">    <span class="string">"no-obj-calls"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½è°ƒç”¨å†…ç½®çš„å…¨å±€å¯¹è±¡ï¼Œæ¯”å¦‚Math() JSON()</span></div><div class="line">    <span class="string">"no-octal"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶æ•°å­—</span></div><div class="line">    <span class="string">"no-octal-escape"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ—</span></div><div class="line">    <span class="string">"no-param-reassign"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç»™å‚æ•°é‡æ–°èµ‹å€¼</span></div><div class="line">    <span class="string">"no-path-concat"</span>: <span class="number">0</span>,<span class="comment">//nodeä¸­ä¸èƒ½ä½¿ç”¨__dirnameæˆ–__filenameåšè·¯å¾„æ‹¼æ¥</span></div><div class="line">    <span class="string">"no-plusplus"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨++ï¼Œ--</span></div><div class="line">    <span class="string">"no-process-env"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨process.env</span></div><div class="line">    <span class="string">"no-process-exit"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨process.exit()</span></div><div class="line">    <span class="string">"no-proto"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨__proto__å±æ€§</span></div><div class="line">    <span class="string">"no-redeclare"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢é‡å¤å£°æ˜å˜é‡</span></div><div class="line">    <span class="string">"no-regex-spaces"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­ä½¿ç”¨å¤šä¸ªç©ºæ ¼ /foo bar/</span></div><div class="line">    <span class="string">"no-restricted-modules"</span>: <span class="number">0</span>,<span class="comment">//å¦‚æœç¦ç”¨äº†æŒ‡å®šæ¨¡å—ï¼Œä½¿ç”¨å°±ä¼šæŠ¥é”™</span></div><div class="line">    <span class="string">"no-return-assign"</span>: <span class="number">1</span>,<span class="comment">//return è¯­å¥ä¸­ä¸èƒ½æœ‰èµ‹å€¼è¡¨è¾¾å¼</span></div><div class="line">    <span class="string">"no-script-url"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨javascript:void(0)</span></div><div class="line">    <span class="string">"no-self-compare"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æ¯”è¾ƒè‡ªèº«</span></div><div class="line">    <span class="string">"no-sequences"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨é€—å·è¿ç®—ç¬¦</span></div><div class="line">    <span class="string">"no-shadow"</span>: <span class="number">2</span>,<span class="comment">//å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ä¸èƒ½ä¸å®ƒæ‰€åŒ…å«çš„ä½œç”¨åŸŸä¸­çš„å˜é‡æˆ–å‚æ•°åŒå</span></div><div class="line">    <span class="string">"no-shadow-restricted-names"</span>: <span class="number">2</span>,<span class="comment">//ä¸¥æ ¼æ¨¡å¼ä¸­è§„å®šçš„é™åˆ¶æ ‡è¯†ç¬¦ä¸èƒ½ä½œä¸ºå£°æ˜æ—¶çš„å˜é‡åä½¿ç”¨</span></div><div class="line">    <span class="string">"no-spaced-func"</span>: <span class="number">2</span>,<span class="comment">//å‡½æ•°è°ƒç”¨æ—¶ å‡½æ•°åä¸()ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼</span></div><div class="line">    <span class="string">"no-sparse-arrays"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ç¨€ç–æ•°ç»„ï¼Œ [1,,2]</span></div><div class="line">    <span class="string">"no-sync"</span>: <span class="number">0</span>,<span class="comment">//nodejs ç¦æ­¢åŒæ­¥æ–¹æ³•</span></div><div class="line">    <span class="string">"no-ternary"</span>: <span class="number">0</span>,<span class="comment">//ç¦æ­¢ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦</span></div><div class="line">    <span class="string">"no-trailing-spaces"</span>: <span class="number">1</span>,<span class="comment">//ä¸€è¡Œç»“æŸåé¢ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line">    <span class="string">"no-this-before-super"</span>: <span class="number">0</span>,<span class="comment">//åœ¨è°ƒç”¨super()ä¹‹å‰ä¸èƒ½ä½¿ç”¨thisæˆ–super</span></div><div class="line">    <span class="string">"no-throw-literal"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æŠ›å‡ºå­—é¢é‡é”™è¯¯ throw "error";</span></div><div class="line">    <span class="string">"no-undef"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æœ‰æœªå®šä¹‰çš„å˜é‡</span></div><div class="line">    <span class="string">"no-undef-init"</span>: <span class="number">2</span>,<span class="comment">//å˜é‡åˆå§‹åŒ–æ—¶ä¸èƒ½ç›´æ¥ç»™å®ƒèµ‹å€¼ä¸ºundefined</span></div><div class="line">    <span class="string">"no-undefined"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½ä½¿ç”¨undefined</span></div><div class="line">    <span class="string">"no-unexpected-multiline"</span>: <span class="number">2</span>,<span class="comment">//é¿å…å¤šè¡Œè¡¨è¾¾å¼</span></div><div class="line">    <span class="string">"no-underscore-dangle"</span>: <span class="number">1</span>,<span class="comment">//æ ‡è¯†ç¬¦ä¸èƒ½ä»¥_å¼€å¤´æˆ–ç»“å°¾</span></div><div class="line">    <span class="string">"no-unneeded-ternary"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥— var isYes = answer === 1 ? true : false;</span></div><div class="line">    <span class="string">"no-unreachable"</span>: <span class="number">2</span>,<span class="comment">//ä¸èƒ½æœ‰æ— æ³•æ‰§è¡Œçš„ä»£ç </span></div><div class="line">    <span class="string">"no-unused-expressions"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ— ç”¨çš„è¡¨è¾¾å¼</span></div><div class="line">    <span class="string">"no-unused-vars"</span>: [<span class="number">2</span>, &#123;<span class="string">"vars"</span>: <span class="string">"all"</span>, <span class="string">"args"</span>: <span class="string">"after-used"</span>&#125;],<span class="comment">//ä¸èƒ½æœ‰å£°æ˜åæœªè¢«ä½¿ç”¨çš„å˜é‡æˆ–å‚æ•°</span></div><div class="line">    <span class="string">"no-use-before-define"</span>: <span class="number">2</span>,<span class="comment">//æœªå®šä¹‰å‰ä¸èƒ½ä½¿ç”¨</span></div><div class="line">    <span class="string">"no-useless-call"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢ä¸å¿…è¦çš„callå’Œapply</span></div><div class="line">    <span class="string">"no-void"</span>: <span class="number">2</span>,<span class="comment">//ç¦ç”¨voidæ“ä½œç¬¦</span></div><div class="line">    <span class="string">"no-var"</span>: <span class="number">0</span>,<span class="comment">//ç¦ç”¨varï¼Œç”¨letå’Œconstä»£æ›¿</span></div><div class="line">    <span class="string">"no-warning-comments"</span>: [<span class="number">1</span>, &#123; <span class="string">"terms"</span>: [<span class="string">"todo"</span>, <span class="string">"fixme"</span>, <span class="string">"xxx"</span>], <span class="string">"location"</span>: <span class="string">"start"</span> &#125;],<span class="comment">//ä¸èƒ½æœ‰è­¦å‘Šå¤‡æ³¨</span></div><div class="line">    <span class="string">"no-with"</span>: <span class="number">2</span>,<span class="comment">//ç¦ç”¨with</span></div><div class="line"></div><div class="line">    <span class="string">"array-bracket-spacing"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],<span class="comment">//æ˜¯å¦å…è®¸éç©ºæ•°ç»„é‡Œé¢æœ‰å¤šä½™çš„ç©ºæ ¼</span></div><div class="line">    <span class="string">"arrow-parens"</span>: <span class="number">0</span>,<span class="comment">//ç®­å¤´å‡½æ•°ç”¨å°æ‹¬å·æ‹¬èµ·æ¥</span></div><div class="line">    <span class="string">"arrow-spacing"</span>: <span class="number">0</span>,<span class="comment">//=&gt;çš„å‰/åæ‹¬å·</span></div><div class="line">    <span class="string">"accessor-pairs"</span>: <span class="number">0</span>,<span class="comment">//åœ¨å¯¹è±¡ä¸­ä½¿ç”¨getter/setter</span></div><div class="line">    <span class="string">"block-scoped-var"</span>: <span class="number">0</span>,<span class="comment">//å—è¯­å¥ä¸­ä½¿ç”¨var</span></div><div class="line">    <span class="string">"brace-style"</span>: [<span class="number">1</span>, <span class="string">"1tbs"</span>],<span class="comment">//å¤§æ‹¬å·é£æ ¼</span></div><div class="line">    <span class="string">"callback-return"</span>: <span class="number">1</span>,<span class="comment">//é¿å…å¤šæ¬¡è°ƒç”¨å›è°ƒä»€ä¹ˆçš„</span></div><div class="line">    <span class="string">"camelcase"</span>: <span class="number">2</span>,<span class="comment">//å¼ºåˆ¶é©¼å³°æ³•å‘½å</span></div><div class="line">    <span class="string">"comma-dangle"</span>: [<span class="number">2</span>, <span class="string">"never"</span>],<span class="comment">//å¯¹è±¡å­—é¢é‡é¡¹å°¾ä¸èƒ½æœ‰é€—å·</span></div><div class="line">    <span class="string">"comma-spacing"</span>: <span class="number">0</span>,<span class="comment">//é€—å·å‰åçš„ç©ºæ ¼</span></div><div class="line">    <span class="string">"comma-style"</span>: [<span class="number">2</span>, <span class="string">"last"</span>],<span class="comment">//é€—å·é£æ ¼ï¼Œæ¢è¡Œæ—¶åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾</span></div><div class="line">    <span class="string">"complexity"</span>: [<span class="number">0</span>, <span class="number">11</span>],<span class="comment">//å¾ªç¯å¤æ‚åº¦</span></div><div class="line">    <span class="string">"computed-property-spacing"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//æ˜¯å¦å…è®¸è®¡ç®—åçš„é”®åä»€ä¹ˆçš„</span></div><div class="line">    <span class="string">"consistent-return"</span>: <span class="number">0</span>,<span class="comment">//return åé¢æ˜¯å¦å…è®¸çœç•¥</span></div><div class="line">    <span class="string">"consistent-this"</span>: [<span class="number">2</span>, <span class="string">"that"</span>],<span class="comment">//thisåˆ«å</span></div><div class="line">    <span class="string">"constructor-super"</span>: <span class="number">0</span>,<span class="comment">//éæ´¾ç”Ÿç±»ä¸èƒ½è°ƒç”¨superï¼Œæ´¾ç”Ÿç±»å¿…é¡»è°ƒç”¨super</span></div><div class="line">    <span class="string">"curly"</span>: [<span class="number">2</span>, <span class="string">"all"</span>],<span class="comment">//å¿…é¡»ä½¿ç”¨ if()&#123;&#125; ä¸­çš„&#123;&#125;</span></div><div class="line">    <span class="string">"default-case"</span>: <span class="number">2</span>,<span class="comment">//switchè¯­å¥æœ€åå¿…é¡»æœ‰default</span></div><div class="line">    <span class="string">"dot-location"</span>: <span class="number">0</span>,<span class="comment">//å¯¹è±¡è®¿é—®ç¬¦çš„ä½ç½®ï¼Œæ¢è¡Œçš„æ—¶å€™åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾</span></div><div class="line">    <span class="string">"dot-notation"</span>: [<span class="number">0</span>, &#123; <span class="string">"allowKeywords"</span>: <span class="literal">true</span> &#125;],<span class="comment">//é¿å…ä¸å¿…è¦çš„æ–¹æ‹¬å·</span></div><div class="line">    <span class="string">"eol-last"</span>: <span class="number">0</span>,<span class="comment">//æ–‡ä»¶ä»¥å•ä¸€çš„æ¢è¡Œç¬¦ç»“æŸ</span></div><div class="line">    <span class="string">"eqeqeq"</span>: <span class="number">0</span>,<span class="comment">//å¿…é¡»ä½¿ç”¨å…¨ç­‰</span></div><div class="line">    <span class="string">"func-names"</span>: <span class="number">0</span>,<span class="comment">//å‡½æ•°è¡¨è¾¾å¼å¿…é¡»æœ‰åå­—</span></div><div class="line">    <span class="string">"func-style"</span>: [<span class="number">0</span>, <span class="string">"declaration"</span>],<span class="comment">//å‡½æ•°é£æ ¼ï¼Œè§„å®šåªèƒ½ä½¿ç”¨å‡½æ•°å£°æ˜/å‡½æ•°è¡¨è¾¾å¼</span></div><div class="line">    <span class="string">"generator-star-spacing"</span>: <span class="number">0</span>,<span class="comment">//ç”Ÿæˆå™¨å‡½æ•°*çš„å‰åç©ºæ ¼</span></div><div class="line">    <span class="string">"guard-for-in"</span>: <span class="number">0</span>,<span class="comment">//for inå¾ªç¯è¦ç”¨ifè¯­å¥è¿‡æ»¤</span></div><div class="line">    <span class="string">"handle-callback-err"</span>: <span class="number">0</span>,<span class="comment">//nodejs å¤„ç†é”™è¯¯</span></div><div class="line">    <span class="string">"id-length"</span>: <span class="number">0</span>,<span class="comment">//å˜é‡åé•¿åº¦</span></div><div class="line">    <span class="string">"indent"</span>: [<span class="number">2</span>, <span class="number">2</span>],<span class="comment">//ç¼©è¿›é£æ ¼</span></div><div class="line">    <span class="string">"init-declarations"</span>: <span class="number">0</span>,<span class="comment">//å£°æ˜æ—¶å¿…é¡»èµ‹åˆå€¼</span></div><div class="line">    <span class="string">"key-spacing"</span>: [<span class="number">0</span>, &#123; <span class="string">"beforeColon"</span>: <span class="literal">false</span>, <span class="string">"afterColon"</span>: <span class="literal">true</span> &#125;],<span class="comment">//å¯¹è±¡å­—é¢é‡ä¸­å†’å·çš„å‰åç©ºæ ¼</span></div><div class="line">    <span class="string">"lines-around-comment"</span>: <span class="number">0</span>,<span class="comment">//è¡Œå‰/è¡Œåå¤‡æ³¨</span></div><div class="line">    <span class="string">"max-depth"</span>: [<span class="number">0</span>, <span class="number">4</span>],<span class="comment">//åµŒå¥—å—æ·±åº¦</span></div><div class="line">    <span class="string">"max-len"</span>: [<span class="number">0</span>, <span class="number">80</span>, <span class="number">4</span>],<span class="comment">//å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦</span></div><div class="line">    <span class="string">"max-nested-callbacks"</span>: [<span class="number">0</span>, <span class="number">2</span>],<span class="comment">//å›è°ƒåµŒå¥—æ·±åº¦</span></div><div class="line">    <span class="string">"max-params"</span>: [<span class="number">0</span>, <span class="number">3</span>],<span class="comment">//å‡½æ•°æœ€å¤šåªèƒ½æœ‰3ä¸ªå‚æ•°</span></div><div class="line">    <span class="string">"max-statements"</span>: [<span class="number">0</span>, <span class="number">10</span>],<span class="comment">//å‡½æ•°å†…æœ€å¤šæœ‰å‡ ä¸ªå£°æ˜</span></div><div class="line">    <span class="string">"new-cap"</span>: <span class="number">2</span>,<span class="comment">//å‡½æ•°åé¦–è¡Œå¤§å†™å¿…é¡»ä½¿ç”¨newæ–¹å¼è°ƒç”¨ï¼Œé¦–è¡Œå°å†™å¿…é¡»ç”¨ä¸å¸¦newæ–¹å¼è°ƒç”¨</span></div><div class="line">    <span class="string">"new-parens"</span>: <span class="number">2</span>,<span class="comment">//newæ—¶å¿…é¡»åŠ å°æ‹¬å·</span></div><div class="line">    <span class="string">"newline-after-var"</span>: <span class="number">2</span>,<span class="comment">//å˜é‡å£°æ˜åæ˜¯å¦éœ€è¦ç©ºä¸€è¡Œ</span></div><div class="line">    <span class="string">"object-curly-spacing"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//å¤§æ‹¬å·å†…æ˜¯å¦å…è®¸ä¸å¿…è¦çš„ç©ºæ ¼</span></div><div class="line">    <span class="string">"object-shorthand"</span>: <span class="number">0</span>,<span class="comment">//å¼ºåˆ¶å¯¹è±¡å­—é¢é‡ç¼©å†™è¯­æ³•</span></div><div class="line">    <span class="string">"one-var"</span>: <span class="number">1</span>,<span class="comment">//è¿ç»­å£°æ˜</span></div><div class="line">    <span class="string">"operator-assignment"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//èµ‹å€¼è¿ç®—ç¬¦ += -=ä»€ä¹ˆçš„</span></div><div class="line">    <span class="string">"operator-linebreak"</span>: [<span class="number">2</span>, <span class="string">"after"</span>],<span class="comment">//æ¢è¡Œæ—¶è¿ç®—ç¬¦åœ¨è¡Œå°¾è¿˜æ˜¯è¡Œé¦–</span></div><div class="line">    <span class="string">"padded-blocks"</span>: <span class="number">0</span>,<span class="comment">//å—è¯­å¥å†…è¡Œé¦–è¡Œå°¾æ˜¯å¦è¦ç©ºè¡Œ</span></div><div class="line">    <span class="string">"prefer-const"</span>: <span class="number">0</span>,<span class="comment">//é¦–é€‰const</span></div><div class="line">    <span class="string">"prefer-spread"</span>: <span class="number">0</span>,<span class="comment">//é¦–é€‰å±•å¼€è¿ç®—</span></div><div class="line">    <span class="string">"prefer-reflect"</span>: <span class="number">0</span>,<span class="comment">//é¦–é€‰Reflectçš„æ–¹æ³•</span></div><div class="line">    <span class="string">"quotes"</span>: [<span class="number">0</span>, <span class="string">"single"</span>],<span class="comment">//å¼•å·ç±»å‹ `` "" ''</span></div><div class="line">    <span class="string">"quote-props"</span>:[<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//å¯¹è±¡å­—é¢é‡ä¸­çš„å±æ€§åæ˜¯å¦å¼ºåˆ¶åŒå¼•å·</span></div><div class="line">    <span class="string">"radix"</span>: <span class="number">2</span>,<span class="comment">//parseIntå¿…é¡»æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°</span></div><div class="line">    <span class="string">"id-match"</span>: <span class="number">0</span>,<span class="comment">//å‘½åæ£€æµ‹</span></div><div class="line">    <span class="string">"require-yield"</span>: <span class="number">0</span>,<span class="comment">//ç”Ÿæˆå™¨å‡½æ•°å¿…é¡»æœ‰yield</span></div><div class="line">    <span class="string">"semi"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//è¯­å¥å¼ºåˆ¶åˆ†å·ç»“å°¾</span></div><div class="line">    <span class="string">"semi-spacing"</span>: [<span class="number">0</span>, &#123;<span class="string">"before"</span>: <span class="literal">false</span>, <span class="string">"after"</span>: <span class="literal">false</span>&#125;],<span class="comment">//åˆ†å·å‰åç©ºæ ¼</span></div><div class="line">    <span class="string">"sort-vars"</span>: <span class="number">0</span>,<span class="comment">//å˜é‡å£°æ˜æ—¶æ’åº</span></div><div class="line">    <span class="string">"space-after-keywords"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//å…³é”®å­—åé¢æ˜¯å¦è¦ç©ºä¸€æ ¼</span></div><div class="line">    <span class="string">"space-before-blocks"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//ä¸ä»¥æ–°è¡Œå¼€å§‹çš„å—&#123;å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line">    <span class="string">"space-before-function-paren"</span>: [<span class="number">0</span>, <span class="string">"always"</span>],<span class="comment">//å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line">    <span class="string">"space-in-parens"</span>: [<span class="number">0</span>, <span class="string">"never"</span>],<span class="comment">//å°æ‹¬å·é‡Œé¢è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line">    <span class="string">"space-infix-ops"</span>: <span class="number">0</span>,<span class="comment">//ä¸­ç¼€æ“ä½œç¬¦å‘¨å›´è¦ä¸è¦æœ‰ç©ºæ ¼</span></div><div class="line">    <span class="string">"space-unary-ops"</span>: [<span class="number">0</span>, &#123; <span class="string">"words"</span>: <span class="literal">true</span>, <span class="string">"nonwords"</span>: <span class="literal">false</span> &#125;],<span class="comment">//ä¸€å…ƒè¿ç®—ç¬¦çš„å‰/åè¦ä¸è¦åŠ ç©ºæ ¼</span></div><div class="line">    <span class="string">"spaced-comment"</span>: <span class="number">0</span>,<span class="comment">//æ³¨é‡Šé£æ ¼è¦ä¸è¦æœ‰ç©ºæ ¼ä»€ä¹ˆçš„</span></div><div class="line">    <span class="string">"strict"</span>: <span class="number">2</span>,<span class="comment">//ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼</span></div><div class="line">    <span class="string">"use-isnan"</span>: <span class="number">2</span>,<span class="comment">//ç¦æ­¢æ¯”è¾ƒæ—¶ä½¿ç”¨NaNï¼Œåªèƒ½ç”¨isNaN()</span></div><div class="line">    <span class="string">"valid-jsdoc"</span>: <span class="number">0</span>,<span class="comment">//jsdocè§„åˆ™</span></div><div class="line">    <span class="string">"valid-typeof"</span>: <span class="number">2</span>,<span class="comment">//å¿…é¡»ä½¿ç”¨åˆæ³•çš„typeofçš„å€¼</span></div><div class="line">    <span class="string">"vars-on-top"</span>: <span class="number">2</span>,<span class="comment">//varå¿…é¡»æ”¾åœ¨ä½œç”¨åŸŸé¡¶éƒ¨</span></div><div class="line">    <span class="string">"wrap-iife"</span>: [<span class="number">2</span>, <span class="string">"inside"</span>],<span class="comment">//ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼çš„å°æ‹¬å·é£æ ¼</span></div><div class="line">    <span class="string">"wrap-regex"</span>: <span class="number">0</span>,<span class="comment">//æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ç”¨å°æ‹¬å·åŒ…èµ·æ¥</span></div><div class="line">    <span class="string">"yoda"</span>: [<span class="number">2</span>, <span class="string">"never"</span>]<span class="comment">//ç¦æ­¢å°¤è¾¾æ¡ä»¶</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;EsLintå¸®åŠ©æˆ‘ä»¬æ£€æŸ¥Javascriptç¼–ç¨‹æ—¶çš„è¯­æ³•é”™è¯¯ã€‚æ¯”å¦‚ï¼šåœ¨Javascriptåº”ç”¨ä¸­ï¼Œä½ å¾ˆéš¾æ‰¾åˆ°ä½ æ¼æ³„çš„å˜é‡æˆ–è€…æ–¹æ³•ã€‚EsLintèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åˆ†æJSä»£ç ï¼Œæ‰¾åˆ°bugå¹¶ç¡®ä¿ä¸€å®šç¨‹åº¦çš„JSè¯­æ³•ä¹¦å†™çš„æ­£ç¡®æ€§ã€‚&lt;br&gt;EsLintæ˜¯å»ºç«‹åœ¨Esprima(ECMAScriptè§£ææ¶æ„)çš„åŸºç¡€ä¸Šçš„ã€‚Esprimaæ”¯æŒES5.1,æœ¬èº«ä¹Ÿæ˜¯ç”¨ECMAScriptç¼–å†™çš„ï¼Œç”¨äºå¤šç”¨é€”åˆ†æã€‚EsLintä¸ä½†æä¾›ä¸€äº›é»˜è®¤çš„è§„åˆ™ï¼ˆå¯æ‰©å±•ï¼‰ï¼Œä¹Ÿæä¾›ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™æ¥çº¦æŸæˆ‘ä»¬å†™çš„Javascriptä»£ç ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="ä¸»è¦è®²è§£eslinté…ç½®æ–¹æ³•" scheme="http://xuhongbo.com/tags/%E4%B8%BB%E8%A6%81%E8%AE%B2%E8%A7%A3eslint%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>æ­ç§˜å‘½åå‡½æ•°è¡¨è¾¾å¼</title>
    <link href="http://xuhongbo.com/2016/09/17/JavaScript/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3javascript/48%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89/"/>
    <id>http://xuhongbo.com/2016/09/17/JavaScript/æ·±å…¥ç†è§£javascript/48å¯¹è±¡åˆ›å»ºæ¨¡å¼ï¼ˆä¸‹ç¯‡ï¼‰/</id>
    <published>2016-09-17T15:02:02.000Z</published>
    <updated>2017-03-02T14:11:58.246Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦æ˜¯ä»‹ç»åˆ›å»ºå¯¹è±¡æ–¹é¢çš„æ¨¡å¼çš„ä¸‹ç¯‡ï¼Œåˆ©ç”¨å„ç§æŠ€å·§å¯ä»¥æå¤§åœ°é¿å…äº†é”™è¯¯æˆ–è€…å¯ä»¥ç¼–å†™å‡ºéå¸¸ç²¾ç®€çš„ä»£ç ã€‚<br><a id="more"></a></p>
<h2 id="æ¨¡å¼-6ï¼šå‡½æ•°è¯­æ³•ç³–"><a href="#æ¨¡å¼-6ï¼šå‡½æ•°è¯­æ³•ç³–" class="headerlink" title="æ¨¡å¼ 6ï¼šå‡½æ•°è¯­æ³•ç³–"></a>æ¨¡å¼ 6ï¼šå‡½æ•°è¯­æ³•ç³–</h2><p>å‡½æ•°è¯­æ³•ç³–æ˜¯ä¸ºä¸€ä¸ªå¯¹è±¡å¿«é€Ÿæ·»åŠ æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰çš„æ‰©å±•ï¼Œè¿™ä¸ªä¸»è¦æ˜¯åˆ©ç”¨ prototype çš„ç‰¹æ€§ï¼Œä»£ç æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®ç°ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if (typeof Function.prototype.method !== &quot;function&quot;) &#123;</div><div class="line">    Function.prototype.method = function (name, implementation) &#123;</div><div class="line">        this.prototype[name] = implementation;</div><div class="line">        return this;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ‰©å±•å¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥è¿™ä¹ˆç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var Person = function (name) &#123;</div><div class="line">    this.name = name;</div><div class="line">&#125;</div><div class="line">.method(&apos;getName&apos;,</div><div class="line">            function () &#123;</div><div class="line">                return this.name;</div><div class="line">            &#125;)</div><div class="line">.method(&apos;setName&apos;, function (name) &#123;</div><div class="line">    this.name = name;</div><div class="line">    return this;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ç»™ Person å‡½æ•°æ·»åŠ äº† getName å’Œ setName è¿™ 2 ä¸ªæ–¹æ³•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var a = new Person(&apos;Adam&apos;);</div><div class="line">console.log(a.getName()); // &apos;Adam&apos;</div><div class="line">console.log(a.setName(&apos;Eve&apos;).getName()); // &apos;Eve&apos;</div></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼-7ï¼šå¯¹è±¡å¸¸é‡"><a href="#æ¨¡å¼-7ï¼šå¯¹è±¡å¸¸é‡" class="headerlink" title="æ¨¡å¼ 7ï¼šå¯¹è±¡å¸¸é‡"></a>æ¨¡å¼ 7ï¼šå¯¹è±¡å¸¸é‡</h2><p>å¯¹è±¡å¸¸é‡æ˜¯åœ¨ä¸€ä¸ªå¯¹è±¡æä¾› setï¼Œgetï¼ŒifDefined å„ç§æ–¹æ³•çš„ä½“ç°ï¼Œè€Œä¸”å¯¹äº set çš„æ–¹æ³•åªä¼šä¿ç•™æœ€å…ˆè®¾ç½®çš„å¯¹è±¡ï¼ŒåæœŸå†è®¾ç½®éƒ½æ˜¯æ— æ•ˆçš„ï¼Œå·²è¾¾åˆ°åˆ«äººæ— æ³•é‡è½½çš„ç›®çš„ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">var constant = (function () &#123;</div><div class="line">    var constants = &#123;&#125;,</div><div class="line">        ownProp = Object.prototype.hasOwnProperty,</div><div class="line">    // åªå…è®¸è®¾ç½®è¿™ä¸‰ç§ç±»å‹çš„å€¼</div><div class="line">        allowed = &#123;</div><div class="line">            string: 1,</div><div class="line">            number: 1,</div><div class="line">            boolean: 1</div><div class="line">        &#125;,</div><div class="line">        prefix = (Math.random() + &quot;_&quot;).slice(2);  </div><div class="line">    return &#123;</div><div class="line">        // è®¾ç½®åç§°ä¸ºnameçš„å±æ€§</div><div class="line">        set: function (name, value) &#123;</div><div class="line">            if (this.isDefined(name)) &#123;</div><div class="line">                return false;</div><div class="line">            &#125;</div><div class="line">            if (!ownProp.call(allowed, typeof value)) &#123;</div><div class="line">                return false;</div><div class="line">            &#125;</div><div class="line">            constants[prefix + name] = value;</div><div class="line">            return true;</div><div class="line">        &#125;,</div><div class="line">        // åˆ¤æ–­æ˜¯å¦å­˜åœ¨åç§°ä¸ºnameçš„å±æ€§</div><div class="line">        isDefined: function (name) &#123;</div><div class="line">            return ownProp.call(constants, prefix + name);</div><div class="line">        &#125;,</div><div class="line">        // è·å–åç§°ä¸ºnameçš„å±æ€§</div><div class="line">        get: function (name) &#123;</div><div class="line">            if (this.isDefined(name)) &#123;</div><div class="line">                return constants[prefix + name];</div><div class="line">            &#125;</div><div class="line">            return null;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125; ());</div></pre></td></tr></table></figure>
<p>éªŒè¯ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// æ£€æŸ¥æ˜¯å¦å­˜åœ¨</div><div class="line">console.log(constant.isDefined(&quot;maxwidth&quot;)); // false  </div><div class="line">// å®šä¹‰</div><div class="line">console.log(constant.set(&quot;maxwidth&quot;, 480)); // true  </div><div class="line">// é‡æ–°æ£€æµ‹</div><div class="line">console.log(constant.isDefined(&quot;maxwidth&quot;)); // true  </div><div class="line">// å°è¯•é‡æ–°å®šä¹‰</div><div class="line">console.log(constant.set(&quot;maxwidth&quot;, 320)); // false  </div><div class="line">// åˆ¤æ–­åŸå…ˆçš„å®šä¹‰æ˜¯å¦è¿˜å­˜åœ¨</div><div class="line">console.log(constant.get(&quot;maxwidth&quot;)); // 480</div></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼-8ï¼šæ²™ç›’æ¨¡å¼"><a href="#æ¨¡å¼-8ï¼šæ²™ç›’æ¨¡å¼" class="headerlink" title="æ¨¡å¼ 8ï¼šæ²™ç›’æ¨¡å¼"></a>æ¨¡å¼ 8ï¼šæ²™ç›’æ¨¡å¼</h2><p>æ²™ç›’ï¼ˆSandboxï¼‰æ¨¡å¼å³æ—¶ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—æä¾›å•ç‹¬çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œè€Œä¸ä¼šå½±å“å…¶ä»–æ¨¡å—çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œæ¯”å¦‚æœ‰ä¸ª Sandbox é‡Œæœ‰ 3 ä¸ªæ–¹æ³•eventï¼Œdomï¼Œajaxï¼Œåœ¨è°ƒç”¨å…¶ä¸­ 2 ä¸ªç»„æˆä¸€ä¸ªç¯å¢ƒçš„è¯ï¼Œå’Œè°ƒç”¨ä¸‰ä¸ªç»„æˆçš„ç¯å¢ƒå®Œå…¨æ²¡æœ‰å¹²æ‰°ã€‚Sandbox å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">function Sandbox() &#123;</div><div class="line">    // å°†å‚æ•°è½¬ä¸ºæ•°ç»„</div><div class="line">    var args = Array.prototype.slice.call(arguments),</div><div class="line">    // æœ€åä¸€ä¸ªå‚æ•°ä¸ºcallback</div><div class="line">        callback = args.pop(),</div><div class="line">        // é™¤æœ€åä¸€ä¸ªå‚æ•°å¤–ï¼Œå…¶å®ƒå‡ä¸ºè¦é€‰æ‹©çš„æ¨¡å—</div><div class="line">        modules = (args[0] &amp;&amp; typeof args[0] === &quot;string&quot;) ? args : args[0],</div><div class="line">        i;  </div><div class="line">    // å¼ºåˆ¶ä½¿ç”¨newæ“ä½œç¬¦</div><div class="line">    if (!(this instanceof Sandbox)) &#123;</div><div class="line">        return new Sandbox(modules, callback);</div><div class="line">    &#125;  </div><div class="line">    // æ·»åŠ å±æ€§</div><div class="line">    this.a = 1;</div><div class="line">    this.b = 2;  </div><div class="line">    // å‘thiså¯¹è±¡ä¸Šéœ€æƒ³æ·»åŠ æ¨¡å—</div><div class="line">    // å¦‚æœæ²¡æœ‰æ¨¡å—æˆ–ä¼ å…¥çš„å‚æ•°ä¸º &quot;*&quot; ï¼Œåˆ™ä»¥ä¸ºç€ä¼ å…¥æ‰€æœ‰æ¨¡å—</div><div class="line">    if (!modules || modules == &apos;*&apos;) &#123;</div><div class="line">        modules = [];</div><div class="line">        for (i in Sandbox.modules) &#123;</div><div class="line">            if (Sandbox.modules.hasOwnProperty(i)) &#123;</div><div class="line">                modules.push(i);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;  </div><div class="line">    // åˆå§‹åŒ–éœ€è¦çš„æ¨¡å—</div><div class="line">    for (i = 0; i &lt; modules.length; i += 1) &#123;</div><div class="line">        Sandbox.modules[modules[i]](this);</div><div class="line">    &#125;</div><div class="line">    // è°ƒç”¨ callback</div><div class="line">    callback(this);</div><div class="line">&#125;  </div><div class="line">// é»˜è®¤æ·»åŠ åŸå‹å¯¹è±¡</div><div class="line">Sandbox.prototype = &#123;</div><div class="line">    name: &quot;My Application&quot;,</div><div class="line">    version: &quot;1.0&quot;,</div><div class="line">    getName: function () &#123;</div><div class="line">        return this.name;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>ç„¶åæˆ‘ä»¬å†å®šä¹‰é»˜è®¤çš„åˆå§‹æ¨¡å—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">Sandbox.modules = &#123;&#125;;  </div><div class="line">Sandbox.modules.dom = function (box) &#123;</div><div class="line">    box.getElement = function () &#123;</div><div class="line">    &#125;;</div><div class="line">    box.getStyle = function () &#123;</div><div class="line">    &#125;;</div><div class="line">    box.foo = &quot;bar&quot;;</div><div class="line">&#125;;  </div><div class="line">Sandbox.modules.event = function (box) &#123;</div><div class="line">    // access to the Sandbox prototype if needed:</div><div class="line">    // box.constructor.prototype.m = &quot;mmm&quot;;</div><div class="line">    box.attachEvent = function () &#123;</div><div class="line">    &#125;;</div><div class="line">    box.detachEvent = function () &#123;</div><div class="line">    &#125;;</div><div class="line">&#125;;  </div><div class="line">Sandbox.modules.ajax = function (box) &#123;</div><div class="line">    box.makeRequest = function () &#123;</div><div class="line">    &#125;;</div><div class="line">    box.getResponse = function () &#123;</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>è°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// è°ƒç”¨æ–¹å¼</div><div class="line">Sandbox([&apos;ajax&apos;, &apos;event&apos;], function (box) &#123;</div><div class="line">    console.log(typeof (box.foo));</div><div class="line">    // æ²¡æœ‰é€‰æ‹©domï¼Œæ‰€ä»¥box.fooä¸å­˜åœ¨</div><div class="line">&#125;);  </div><div class="line">Sandbox(&apos;ajax&apos;, &apos;dom&apos;, function (box) &#123;</div><div class="line">    console.log(typeof (box.attachEvent));</div><div class="line">    // æ²¡æœ‰é€‰æ‹©event,æ‰€ä»¥eventé‡Œå®šä¹‰çš„attachEventä¹Ÿä¸å­˜åœ¨</div><div class="line">&#125;);  </div><div class="line">Sandbox(&apos;*&apos;, function (box) &#123;</div><div class="line">    console.log(box); // ä¸Šé¢å®šä¹‰çš„æ‰€æœ‰æ–¹æ³•éƒ½å¯è®¿é—®</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>é€šè¿‡ä¸‰ä¸ªä¸åŒçš„è°ƒç”¨æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸‰ç§æ–¹å¼çš„ä¸Šä¸‹æ–‡ç¯å¢ƒéƒ½æ˜¯ä¸åŒçš„ï¼Œç¬¬ä¸€ç§é‡Œæ²¡æœ‰ fooï¼›è€Œç¬¬äºŒç§åˆ™æ²¡æœ‰ attachEventï¼Œå› ä¸ºåªåŠ è½½äº† ajax å’Œ domï¼Œè€Œæ²¡æœ‰åŠ è½½ eventï¼›ç¬¬ä¸‰ç§åˆ™åŠ è½½äº†å…¨éƒ¨ã€‚</p>
<h2 id="æ¨¡å¼-9ï¼šé™æ€æˆå‘˜"><a href="#æ¨¡å¼-9ï¼šé™æ€æˆå‘˜" class="headerlink" title="æ¨¡å¼ 9ï¼šé™æ€æˆå‘˜"></a>æ¨¡å¼ 9ï¼šé™æ€æˆå‘˜</h2><p>é™æ€æˆå‘˜ï¼ˆStatic Membersï¼‰åªæ˜¯ä¸€ä¸ªå‡½æ•°æˆ–å¯¹è±¡æä¾›çš„é™æ€å±æ€§ï¼Œå¯åˆ†ä¸ºç§æœ‰çš„å’Œå…¬æœ‰çš„ï¼Œå°±åƒ C#æˆ– Java é‡Œçš„ public static å’Œ private static ä¸€æ ·ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å…¬æœ‰æˆå‘˜ï¼Œå…¬æœ‰æˆå‘˜éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å¹³æ—¶å£°æ˜çš„æ–¹æ³•ï¼Œå‡½æ•°éƒ½æ˜¯å…¬æœ‰çš„ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// æ„é€ å‡½æ•°</div><div class="line">var Gadget = function () &#123;</div><div class="line">&#125;;  </div><div class="line">// å…¬æœ‰é™æ€æ–¹æ³•</div><div class="line">Gadget.isShiny = function () &#123;</div><div class="line">    return &quot;you bet&quot;;</div><div class="line">&#125;;  </div><div class="line">// åŸå‹ä¸Šæ·»åŠ çš„æ­£å¸¸æ–¹æ³•</div><div class="line">Gadget.prototype.setPrice = function (price) &#123;</div><div class="line">    this.price = price;</div><div class="line">&#125;;  </div><div class="line">// è°ƒç”¨é™æ€æ–¹æ³•</div><div class="line">console.log(Gadget.isShiny()); // &quot;you bet&quot;  </div><div class="line">// åˆ›å»ºå®ä¾‹ï¼Œç„¶åè°ƒç”¨æ–¹æ³•</div><div class="line">var iphone = new Gadget();</div><div class="line">iphone.setPrice(500);  </div><div class="line">console.log(typeof Gadget.setPrice); // &quot;undefined&quot;</div><div class="line">console.log(typeof iphone.isShiny); // &quot;undefined&quot;</div><div class="line">Gadget.prototype.isShiny = Gadget.isShiny;</div><div class="line">console.log(iphone.isShiny()); // &quot;you bet&quot;</div></pre></td></tr></table></figure>
<p>è€Œç§æœ‰é™æ€æˆå‘˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å…¶é—­åŒ…ç‰¹æ€§å»å®ç°ï¼Œä»¥ä¸‹æ˜¯ä¸¤ç§å®ç°æ–¹å¼ã€‚</p>
<h3 id="ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼š"><a href="#ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼š" class="headerlink" title="ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼š"></a>ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var Gadget = (function () &#123;</div><div class="line">    // é™æ€å˜é‡/å±æ€§</div><div class="line">    var counter = 0;  </div><div class="line">    // é—­åŒ…è¿”å›æ„é€ å‡½æ•°çš„æ–°å®ç°</div><div class="line">    return function () &#123;</div><div class="line">        console.log(counter += 1);</div><div class="line">    &#125;;</div><div class="line">&#125; ()); // ç«‹å³æ‰§è¡Œ  </div><div class="line">var g1 = new Gadget(); // logs 1</div><div class="line">var g2 = new Gadget(); // logs 2</div><div class="line">var g3 = new Gadget(); // logs 3</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶æ¯æ¬¡éƒ½æ˜¯ new çš„å¯¹è±¡ï¼Œä½†æ•°å­—ä¾ç„¶æ˜¯é€’å¢çš„ï¼Œè¾¾åˆ°äº†é™æ€æˆå‘˜çš„ç›®çš„ã€‚</p>
<h3 id="ç¬¬äºŒç§æ–¹å¼ï¼š"><a href="#ç¬¬äºŒç§æ–¹å¼ï¼š" class="headerlink" title="ç¬¬äºŒç§æ–¹å¼ï¼š"></a>ç¬¬äºŒç§æ–¹å¼ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">var Gadget = (function () &#123;</div><div class="line">    // é™æ€å˜é‡/å±æ€§</div><div class="line">    var counter = 0,</div><div class="line">        NewGadget;  </div><div class="line">    //æ–°æ„é€ å‡½æ•°å®ç°</div><div class="line">    NewGadget = function () &#123;</div><div class="line">        counter += 1;</div><div class="line">   &#125;;  </div><div class="line">    // æˆæƒå¯ä»¥è®¿é—®çš„æ–¹æ³•</div><div class="line">    NewGadget.prototype.getLastId = function () &#123;</div><div class="line">        return counter;</div><div class="line">    &#125;;  </div><div class="line">    // è¦†ç›–æ„é€ å‡½æ•°</div><div class="line">    return NewGadget;</div><div class="line">&#125; ()); // ç«‹å³æ‰§è¡Œ  </div><div class="line">var iphone = new Gadget();</div><div class="line">iphone.getLastId(); // 1</div><div class="line">var ipod = new Gadget();</div><div class="line">ipod.getLastId(); // 2</div><div class="line">var ipad = new Gadget();</div><div class="line">ipad.getLastId(); // 3</div></pre></td></tr></table></figure>
<p>æ•°å­—ä¹Ÿæ˜¯é€’å¢äº†ï¼Œè¿™æ˜¯åˆ©ç”¨å…¶å†…éƒ¨æˆæƒæ–¹æ³•çš„é—­åŒ…ç‰¹æ€§å®ç°çš„ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™æ˜¯å¯¹è±¡åˆ›å»ºæ¨¡å¼çš„ä¸‹ç¯‡ï¼Œä¸¤ç¯‡ä¸€èµ·æ€»å…±9ç§æ¨¡å¼ï¼Œæ˜¯æˆ‘ä»¬åœ¨æ—¥å¸¸ JavaScript ç¼–ç¨‹ä¸­ç»å¸¸ä½¿ç”¨çš„å¯¹è±¡åˆ›å»ºæ¨¡å¼ï¼Œä¸åŒçš„åœºæ™¯èµ·åˆ°äº†ä¸åŒçš„ä½œç”¨ï¼Œå¸Œæœ›å¤§å®¶æ ¹æ®å„è‡ªçš„éœ€æ±‚é€‰æ‹©é€‚ç”¨çš„æ¨¡å¼ã€‚</p>
<h2 id="åŒæ­¥ä¸æ¨è"><a href="#åŒæ­¥ä¸æ¨è" class="headerlink" title="åŒæ­¥ä¸æ¨è"></a>åŒæ­¥ä¸æ¨è</h2><p>æ·±å…¥ç†è§£ JavaScript ç³»åˆ—æ–‡ç« ï¼ŒåŒ…æ‹¬äº†åŸåˆ›ï¼Œç¿»è¯‘ï¼Œè½¬è½½ç­‰å„ç±»å‹çš„æ–‡ç« ï¼Œå¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œè¯·æ¨èæ”¯æŒä¸€æŠŠï¼Œç»™å¤§å”å†™ä½œçš„åŠ¨åŠ›ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç¯‡ä¸»è¦æ˜¯ä»‹ç»åˆ›å»ºå¯¹è±¡æ–¹é¢çš„æ¨¡å¼çš„ä¸‹ç¯‡ï¼Œåˆ©ç”¨å„ç§æŠ€å·§å¯ä»¥æå¤§åœ°é¿å…äº†é”™è¯¯æˆ–è€…å¯ä»¥ç¼–å†™å‡ºéå¸¸ç²¾ç®€çš„ä»£ç ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>å¯¹è±¡åˆ›å»ºæ¨¡å¼ï¼ˆä¸Šç¯‡ï¼‰</title>
    <link href="http://xuhongbo.com/2016/09/11/JavaScript/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3javascript/47%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89/"/>
    <id>http://xuhongbo.com/2016/09/11/JavaScript/æ·±å…¥ç†è§£javascript/47å¯¹è±¡åˆ›å»ºæ¨¡å¼ï¼ˆä¸Šç¯‡ï¼‰/</id>
    <published>2016-09-11T03:02:02.000Z</published>
    <updated>2017-03-02T14:11:55.201Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦æ˜¯ä»‹ç»åˆ›å»ºå¯¹è±¡æ–¹é¢çš„æ¨¡å¼ï¼Œåˆ©ç”¨å„ç§æŠ€å·§å¯ä»¥æå¤§åœ°é¿å…äº†é”™è¯¯æˆ–è€…å¯ä»¥ç¼–å†™å‡ºéå¸¸ç²¾ç®€çš„ä»£ç ã€‚<br><a id="more"></a></p>
<h2 id="æ¨¡å¼-1ï¼šå‘½åç©ºé—´ï¼ˆnamespaceï¼‰"><a href="#æ¨¡å¼-1ï¼šå‘½åç©ºé—´ï¼ˆnamespaceï¼‰" class="headerlink" title="æ¨¡å¼ 1ï¼šå‘½åç©ºé—´ï¼ˆnamespaceï¼‰"></a>æ¨¡å¼ 1ï¼šå‘½åç©ºé—´ï¼ˆnamespaceï¼‰</h2><p>å‘½åç©ºé—´å¯ä»¥å‡å°‘å…¨å±€å‘½åæ‰€éœ€çš„æ•°é‡ï¼Œé¿å…å‘½åå†²çªæˆ–è¿‡åº¦ã€‚ä¸€èˆ¬æˆ‘ä»¬åœ¨è¿›è¡Œå¯¹è±¡å±‚çº§å®šä¹‰çš„æ—¶å€™ï¼Œç»å¸¸æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var app = app || &#123;&#125;;</div><div class="line">app.moduleA = app.moduleA || &#123;&#125;;</div><div class="line">app.moduleA.subModule = app.moduleA.subModule || &#123;&#125;;</div><div class="line">app.moduleA.subModule.MethodA = function () &#123;</div><div class="line">    console.log(&quot;print A&quot;);</div><div class="line">&#125;;</div><div class="line">app.moduleA.subModule.MethodB = function () &#123;</div><div class="line">    console.log(&quot;print B&quot;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>å¦‚æœå±‚çº§å¾ˆå¤šçš„è¯ï¼Œé‚£å°±è¦ä¸€ç›´è¿™æ ·ç»§ç»­ä¸‹å»ï¼Œå¾ˆæ˜¯æ··ä¹±ã€‚namespace æ¨¡å¼å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå­˜åœ¨çš„ï¼Œæˆ‘ä»¬çœ‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// ä¸å®‰å…¨ï¼Œå¯èƒ½ä¼šè¦†ç›–å·²æœ‰çš„MYAPPå¯¹è±¡</div><div class="line">var MYAPP = &#123;&#125;;</div><div class="line">// è¿˜å¥½</div><div class="line">if (typeof MYAPP === &quot;undefined&quot;) &#123;</div><div class="line">    var MYAPP = &#123;&#125;;</div><div class="line">&#125;</div><div class="line">// æ›´ç®€æ´çš„æ–¹å¼</div><div class="line">var MYAPP = MYAPP || &#123;&#125;;  </div><div class="line">//å®šä¹‰é€šç”¨æ–¹æ³•</div><div class="line">MYAPP.namespace = function (ns_string) &#123;</div><div class="line">    var parts = ns_string.split(&apos;.&apos;),</div><div class="line">        parent = MYAPP,</div><div class="line">        i;  </div><div class="line">    // é»˜è®¤å¦‚æœç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯MYAPPçš„è¯ï¼Œå°±å¿½ç•¥æ‰ï¼Œæ¯”å¦‚MYAPP.ModuleA</div><div class="line">    if (parts[0] === &quot;MYAPP&quot;) &#123;</div><div class="line">        parts = parts.slice(1);</div><div class="line">    &#125;  </div><div class="line">    for (i = 0; i &lt; parts.length; i += 1) &#123;</div><div class="line">        // å¦‚æœå±æ€§ä¸å­˜åœ¨ï¼Œå°±åˆ›å»º</div><div class="line">        if (typeof parent[parts[i]] === &quot;undefined&quot;) &#123;</div><div class="line">            parent[parts[i]] = &#123;&#125;;</div><div class="line">        &#125;</div><div class="line">        parent = parent[parts[i]];</div><div class="line">    &#125;</div><div class="line">    return parent;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>è°ƒç”¨ä»£ç ï¼Œéå¸¸ç®€å•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// é€šè¿‡namespaceä»¥åï¼Œå¯ä»¥å°†è¿”å›å€¼èµ‹ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡</div><div class="line">var module2 = MYAPP.namespace(&apos;MYAPP.modules.module2&apos;);</div><div class="line">console.log(module2 === MYAPP.modules.module2); // true  </div><div class="line">// è·³è¿‡MYAPP</div><div class="line">MYAPP.namespace(&apos;modules.module51&apos;);  </div><div class="line">// éå¸¸é•¿çš„åå­—</div><div class="line">MYAPP.namespace(&apos;once.upon.a.time.there.was.this.long.nested.property&apos;);</div></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼-2ï¼šå®šä¹‰ä¾èµ–"><a href="#æ¨¡å¼-2ï¼šå®šä¹‰ä¾èµ–" class="headerlink" title="æ¨¡å¼ 2ï¼šå®šä¹‰ä¾èµ–"></a>æ¨¡å¼ 2ï¼šå®šä¹‰ä¾èµ–</h2><p>æœ‰æ—¶å€™ä½ çš„ä¸€ä¸ªæ¨¡å—æˆ–è€…å‡½æ•°å¯èƒ½è¦å¼•ç”¨ç¬¬ä¸‰æ–¹çš„ä¸€äº›æ¨¡å—æˆ–è€…å·¥å…·ï¼Œè¿™æ—¶å€™æœ€å¥½å°†è¿™äº›ä¾èµ–æ¨¡å—åœ¨åˆšå¼€å§‹çš„æ—¶å€™å°±å®šä¹‰å¥½ï¼Œä»¥ä¾¿ä»¥åå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢æ‰ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var myFunction = function () &#123;</div><div class="line">    // ä¾èµ–æ¨¡å—</div><div class="line">    var event = YAHOO.util.Event,</div><div class="line">        dom = YAHOO.util.dom;  </div><div class="line">    // å…¶å®ƒå‡½æ•°åé¢çš„ä»£ç é‡Œä½¿ç”¨å±€éƒ¨å˜é‡eventå’Œdom</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼-3ï¼šç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•"><a href="#æ¨¡å¼-3ï¼šç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•" class="headerlink" title="æ¨¡å¼ 3ï¼šç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•"></a>æ¨¡å¼ 3ï¼šç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•</h2><p>JavaScript æœ¬ä¹¦ä¸æä¾›ç‰¹å®šçš„è¯­æ³•æ¥æ”¯æŒç§æœ‰å±æ€§å’Œç§æœ‰æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡é—­åŒ…æ¥å®ç°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">function Gadget() &#123;</div><div class="line">    // ç§æœ‰å¯¹è±¡</div><div class="line">    var name = &apos;iPod&apos;;</div><div class="line">    // å…¬æœ‰å‡½æ•°</div><div class="line">    this.getName = function () &#123;</div><div class="line">        return name;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line">var toy = new Gadget();  </div><div class="line">// nameæœªå®šä¹‰ï¼Œæ˜¯ç§æœ‰çš„</div><div class="line">console.log(toy.name); // undefined  </div><div class="line">// å…¬æœ‰æ–¹æ³•è®¿é—®name</div><div class="line">console.log(toy.getName()); // &quot;iPod&quot;  </div><div class="line">var myobj; // é€šè¿‡è‡ªæ‰§è¡Œå‡½æ•°ç»™myobjèµ‹å€¼</div><div class="line">(function () &#123;</div><div class="line">    // è‡ªç”±å¯¹è±¡</div><div class="line">    var name = &quot;my, oh my&quot;;  </div><div class="line">    // å®ç°äº†å…¬æœ‰éƒ¨åˆ†ï¼Œæ‰€ä»¥æ²¡æœ‰var</div><div class="line">    myobj = &#123;</div><div class="line">        // æˆæƒæ–¹æ³•</div><div class="line">        getName: function () &#123;</div><div class="line">            return name;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125; ());</div></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼-4ï¼šRevelationæ¨¡å¼"><a href="#æ¨¡å¼-4ï¼šRevelationæ¨¡å¼" class="headerlink" title="æ¨¡å¼ 4ï¼šRevelationæ¨¡å¼"></a>æ¨¡å¼ 4ï¼šRevelationæ¨¡å¼</h2><p>ä¹Ÿæ˜¯å…³äºéšè—ç§æœ‰æ–¹æ³•çš„æ¨¡å¼ï¼Œå’Œ<a href="http://www.cnblogs.com/TomXu/archive/2011/12/30/2288372.html" target="_blank" rel="external">ã€Šæ·±å…¥ç†è§£JavaScriptç³»åˆ—ï¼ˆ3ï¼‰ï¼šå…¨é¢è§£æModuleæ¨¡å¼ã€‹</a>é‡Œçš„ Module æ¨¡å¼æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ˜¯ä¸æ˜¯ return çš„æ–¹å¼ï¼Œè€Œæ˜¯åœ¨å¤–éƒ¨å…ˆå£°æ˜ä¸€ä¸ªå˜é‡ï¼Œç„¶ååœ¨å†…éƒ¨ç»™å˜é‡èµ‹å€¼å…¬æœ‰æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">var myarray;</div><div class="line">(function () &#123;</div><div class="line">    var astr = &quot;[object Array]&quot;,</div><div class="line">        toString = Object.prototype.toString;  </div><div class="line">    function isArray(a) &#123;</div><div class="line">        return toString.call(a) === astr;</div><div class="line">    &#125;  </div><div class="line">    function indexOf(haystack, needle) &#123;</div><div class="line">        var i = 0,</div><div class="line">            max = haystack.length;</div><div class="line">        for (; i &lt; max; i += 1) &#123;</div><div class="line">            if (haystack[i] === needle) &#123;</div><div class="line">                return i;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return -1;</div><div class="line">    &#125;  </div><div class="line">    //é€šè¿‡èµ‹å€¼çš„æ–¹å¼ï¼Œå°†ä¸Šé¢æ‰€æœ‰çš„ç»†èŠ‚éƒ½éšè—äº†</div><div class="line">    myarray = &#123;</div><div class="line">        isArray: isArray,</div><div class="line">        indexOf: indexOf,</div><div class="line">        inArray: indexOf</div><div class="line">    &#125;;</div><div class="line">&#125; ());  </div><div class="line">//æµ‹è¯•ä»£ç </div><div class="line">console.log(myarray.isArray([1, 2])); // true</div><div class="line">console.log(myarray.isArray(&#123; 0: 1 &#125;)); // false</div><div class="line">console.log(myarray.indexOf([&quot;a&quot;, &quot;b&quot;, &quot;z&quot;], &quot;z&quot;)); // 2</div><div class="line">console.log(myarray.inArray([&quot;a&quot;, &quot;b&quot;, &quot;z&quot;], &quot;z&quot;)); // 2  </div><div class="line">myarray.indexOf = null;</div><div class="line">console.log(myarray.inArray([&quot;a&quot;, &quot;b&quot;, &quot;z&quot;], &quot;z&quot;)); // 2</div></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼-5ï¼šé“¾æ¨¡å¼"><a href="#æ¨¡å¼-5ï¼šé“¾æ¨¡å¼" class="headerlink" title="æ¨¡å¼ 5ï¼šé“¾æ¨¡å¼"></a>æ¨¡å¼ 5ï¼šé“¾æ¨¡å¼</h2><p>é“¾æ¨¡å¼å¯ä»¥ä½ è¿ç»­å¯ä»¥è°ƒç”¨ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œæ¯”å¦‚ obj.add(1).remove(2).delete(4).add(2)è¿™æ ·çš„å½¢å¼ï¼Œå…¶å®ç°æ€è·¯éå¸¸ç®€å•ï¼Œå°±æ˜¯å°† this åŸæ ·è¿”å›ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">    value: 1,</div><div class="line">    increment: function () &#123;</div><div class="line">        this.value += 1;</div><div class="line">        return this;</div><div class="line">    &#125;,</div><div class="line">    add: function (v) &#123;</div><div class="line">        this.value += v;</div><div class="line">        return this;</div><div class="line">    &#125;,</div><div class="line">    shout: function () &#123;</div><div class="line">        console.log(this.value);</div><div class="line">    &#125;</div><div class="line">&#125;;  </div><div class="line">// é“¾æ–¹æ³•è°ƒç”¨</div><div class="line">obj.increment().add(3).shout(); // 5  </div><div class="line">// ä¹Ÿå¯ä»¥å•ç‹¬ä¸€ä¸ªä¸€ä¸ªè°ƒç”¨</div><div class="line">obj.increment();</div><div class="line">obj.add(3);</div><div class="line">obj.shout();</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç¯‡æ˜¯å¯¹è±¡åˆ›å»ºæ¨¡å¼çš„ä¸Šç¯‡ï¼Œæ•¬è¯·æœŸå¾…æ˜å¤©çš„ä¸‹ç¯‡ã€‚</p>
<h2 id="åŒæ­¥ä¸æ¨è"><a href="#åŒæ­¥ä¸æ¨è" class="headerlink" title="åŒæ­¥ä¸æ¨è"></a>åŒæ­¥ä¸æ¨è</h2><p>æ·±å…¥ç†è§£ JavaScript ç³»åˆ—æ–‡ç« ï¼ŒåŒ…æ‹¬äº†åŸåˆ›ï¼Œç¿»è¯‘ï¼Œè½¬è½½ç­‰å„ç±»å‹çš„æ–‡ç« ï¼Œå¦‚æœå¯¹ä½ æœ‰ç”¨ï¼Œè¯·æ¨èæ”¯æŒä¸€æŠŠï¼Œç»™å¤§å”å†™ä½œçš„åŠ¨åŠ›ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç¯‡ä¸»è¦æ˜¯ä»‹ç»åˆ›å»ºå¯¹è±¡æ–¹é¢çš„æ¨¡å¼ï¼Œåˆ©ç”¨å„ç§æŠ€å·§å¯ä»¥æå¤§åœ°é¿å…äº†é”™è¯¯æˆ–è€…å¯ä»¥ç¼–å†™å‡ºéå¸¸ç²¾ç®€çš„ä»£ç ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Function æ¨¡å¼ï¼ˆä¸‹ç¯‡ï¼‰</title>
    <link href="http://xuhongbo.com/2016/08/26/JavaScript/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3javascript/50Function%20%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89/"/>
    <id>http://xuhongbo.com/2016/08/26/JavaScript/æ·±å…¥ç†è§£javascript/50Function æ¨¡å¼ï¼ˆä¸‹ç¯‡ï¼‰/</id>
    <published>2016-08-26T08:56:02.000Z</published>
    <updated>2017-03-02T14:12:13.733Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡æˆ‘ä»¬ä»‹ç»çš„ä¸€äº›æ¨¡å¼ç§°ä¸ºåˆå§‹åŒ–æ¨¡å¼å’Œæ€§èƒ½æ¨¡å¼ï¼Œä¸»è¦æ˜¯ç”¨åœ¨åˆå§‹åŒ–ä»¥åŠæé«˜æ€§èƒ½æ–¹é¢ï¼Œä¸€äº›æ¨¡å¼ä¹‹å‰å·²ç»æåˆ°è¿‡ï¼Œè¿™é‡Œåªæ˜¯åšä¸€ä¸‹æ€»ç»“ã€‚</p>
<h2 id="ç«‹å³æ‰§è¡Œçš„å‡½æ•°"><a href="#ç«‹å³æ‰§è¡Œçš„å‡½æ•°" class="headerlink" title="ç«‹å³æ‰§è¡Œçš„å‡½æ•°"></a>ç«‹å³æ‰§è¡Œçš„å‡½æ•°</h2><p>åœ¨æœ¬ç³»åˆ—ç¬¬ 4 ç¯‡çš„<a href="http://www.cnblogs.com/TomXu/archive/2011/12/31/2289423.html" target="_blank" rel="external">ã€Šç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ã€‹ä¸­</a>ï¼Œæˆ‘ä»¬å·²ç»å¯¹ç±»ä¼¼çš„å‡½æ•°è¿›è¡Œè¿‡è¯¦ç»†çš„æè¿°ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯å†ä¸¾ä¸¤ä¸ªç®€å•çš„ä¾‹å­åšä¸€ä¸‹æ€»ç»“ã€‚<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// å£°æ˜å®Œå‡½æ•°ä»¥åï¼Œç«‹å³æ‰§è¡Œè¯¥å‡½æ•°</div><div class="line">(function () &#123;</div><div class="line">    console.log(&apos;watch out!&apos;);</div><div class="line">&#125; ());  </div><div class="line">//è¿™ç§æ–¹å¼å£°æ˜çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç«‹å³æ‰§è¡Œ</div><div class="line">!function () &#123;</div><div class="line">    console.log(&apos;watch out!&apos;);</div><div class="line">&#125; ();  </div><div class="line">// å¦‚ä¸‹æ–¹å¼ä¹Ÿéƒ½å¯ä»¥å“¦</div><div class="line">~function () &#123; /* code */ &#125; ();</div><div class="line">-function () &#123; /* code */ &#125; ();</div><div class="line">+function () &#123; /* code */ &#125; ();</div></pre></td></tr></table></figure></p>
<h2 id="ç«‹å³æ‰§è¡Œçš„å¯¹è±¡åˆå§‹åŒ–"><a href="#ç«‹å³æ‰§è¡Œçš„å¯¹è±¡åˆå§‹åŒ–" class="headerlink" title="ç«‹å³æ‰§è¡Œçš„å¯¹è±¡åˆå§‹åŒ–"></a>ç«‹å³æ‰§è¡Œçš„å¯¹è±¡åˆå§‹åŒ–</h2><p>è¯¥æ¨¡å¼çš„æ„æ€æ˜¯æŒ‡åœ¨å£°æ˜ä¸€ä¸ªå¯¹è±¡ï¼ˆè€Œéå‡½æ•°ï¼‰çš„æ—¶å€™ï¼Œç«‹å³æ‰§è¡Œå¯¹è±¡é‡Œçš„æŸä¸€ä¸ªæ–¹æ³•æ¥è¿›è¡Œåˆå§‹åŒ–å·¥ä½œï¼Œé€šå¸¸è¯¥æ¨¡å¼å¯ä»¥ç”¨åœ¨ä¸€æ¬¡æ€§æ‰§è¡Œçš„ä»£ç ä¸Šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">(&#123;</div><div class="line">    // è¿™é‡Œä½ å¯ä»¥å®šä¹‰å¸¸é‡ï¼Œè®¾ç½®å…¶å®ƒå€¼</div><div class="line">    maxwidth: 600,</div><div class="line">    maxheight: 400,  </div><div class="line">    //  å½“ç„¶ä¹Ÿå¯ä»¥å®šä¹‰utilityæ–¹æ³•</div><div class="line">    gimmeMax: function () &#123;</div><div class="line">        return this.maxwidth + &quot;x&quot; + this.maxheight;</div><div class="line">    &#125;,  </div><div class="line">    // åˆå§‹åŒ–</div><div class="line">    init: function () &#123;</div><div class="line">        console.log(this.gimmeMax());</div><div class="line">        // æ›´å¤šä»£ç ...</div><div class="line">    &#125;</div><div class="line">&#125;).init();  // è¿™æ ·å°±å¼€å§‹åˆå§‹åŒ–å’¯</div></pre></td></tr></table></figure>
<h2 id="åˆ†æ”¯åˆå§‹åŒ–"><a href="#åˆ†æ”¯åˆå§‹åŒ–" class="headerlink" title="åˆ†æ”¯åˆå§‹åŒ–"></a>åˆ†æ”¯åˆå§‹åŒ–</h2><p>åˆ†æ”¯åˆå§‹åŒ–æ˜¯æŒ‡åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼ˆåœºæ™¯ï¼‰åˆå§‹åŒ–ä¸åŒçš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¡ä»¶è¯­å¥èµ‹å€¼ã€‚ä¹‹å‰æˆ‘ä»¬åœ¨åšäº‹ä»¶å¤„ç†çš„æ—¶å€™ï¼Œé€šå¸¸ä½¿ç”¨ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var utils = &#123;</div><div class="line">    addListener: function (el, type, fn) &#123;</div><div class="line">        if (typeof window.addEventListener === &apos;function&apos;) &#123;</div><div class="line">            el.addEventListener(type, fn, false);</div><div class="line">        &#125; else if (typeof document.attachEvent !== &apos;undefined&apos;) &#123;</div><div class="line">            el.attachEvent(&apos;on&apos; + type, fn);</div><div class="line">        &#125; else &#123;</div><div class="line">            el[&apos;on&apos; + type] = fn;</div><div class="line">        &#125;</div><div class="line">    &#125;,</div><div class="line">    removeListener: function (el, type, fn) &#123;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥æ”¹è¿›ä¸€ä¸‹ï¼Œé¦–å…ˆæˆ‘ä»¬è¦å®šä¹‰ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªç”¨æ¥addäº‹ä»¶å¥æŸ„ï¼Œä¸€ä¸ªç”¨æ¥ remove äº‹ä»¶å¥æŸ„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var utils = &#123;</div><div class="line">    addListener: null,</div><div class="line">    removeListener: null</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">if (typeof window.addEventListener === &apos;function&apos;) &#123;</div><div class="line">    utils.addListener = function (el, type, fn) &#123;</div><div class="line">        el.addEventListener(type, fn, false);</div><div class="line">    &#125;;</div><div class="line">&#125; else if (typeof document.attachEvent !== &apos;undefined&apos;) &#123; // IE</div><div class="line">    utils.addListener = function (el, type, fn) &#123;</div><div class="line">        el.attachEvent(&apos;on&apos; + type, fn);</div><div class="line">    &#125;;</div><div class="line">    utils.removeListener = function (el, type, fn) &#123;</div><div class="line">        el.detachEvent(&apos;on&apos; + type, fn);</div><div class="line">    &#125;;</div><div class="line">&#125; else &#123; // å…¶å®ƒæ—§æµè§ˆå™¨</div><div class="line">    utils.addListener = function (el, type, fn) &#123;</div><div class="line">        el[&apos;on&apos; + type] = fn;</div><div class="line">    &#125;;</div><div class="line">    utils.removeListener = function (el, type, fn) &#123;</div><div class="line">        el[&apos;on&apos; + type] = null;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”¨èµ·æ¥ï¼Œæ˜¯ä¸æ˜¯å°±å¾ˆæ–¹ä¾¿äº†ï¼Ÿä»£ç ä¹Ÿä¼˜é›…å¤šäº†ã€‚</p>
<h2 id="è‡ªå£°æ˜å‡½æ•°"><a href="#è‡ªå£°æ˜å‡½æ•°" class="headerlink" title="è‡ªå£°æ˜å‡½æ•°"></a>è‡ªå£°æ˜å‡½æ•°</h2><p>ä¸€èˆ¬æ˜¯åœ¨å‡½æ•°å†…éƒ¨ï¼Œé‡å†™åŒåå‡½æ•°ä»£ç ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var scareMe = function () &#123;</div><div class="line">    alert(&quot;Boo!&quot;);</div><div class="line">    scareMe = function () &#123;</div><div class="line">        alert(&quot;Double boo!&quot;);</div><div class="line">    &#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>è¿™ç§ä»£ç ï¼Œéå¸¸å®¹æ˜“ä½¿äººè¿·æƒ‘ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¾‹å­çš„æ‰§è¡Œç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// 1. æ·»åŠ æ–°å±æ€§</div><div class="line">scareMe.property = &quot;properly&quot;;</div><div class="line">// 2. scareMeèµ‹ä¸ä¸€ä¸ªæ–°å€¼</div><div class="line">var prank = scareMe;</div><div class="line">// 3. ä½œä¸ºä¸€ä¸ªæ–¹æ³•è°ƒç”¨</div><div class="line">var spooky = &#123;</div><div class="line">    boo: scareMe</div><div class="line">&#125;;</div><div class="line">// ä½¿ç”¨æ–°å˜é‡åç§°è¿›è¡Œè°ƒç”¨</div><div class="line">prank(); // &quot;Boo!&quot;</div><div class="line">prank(); // &quot;Boo!&quot;</div><div class="line">console.log(prank.property); // &quot;properly&quot;</div><div class="line">// ä½¿ç”¨æ–¹æ³•è¿›è¡Œè°ƒç”¨</div><div class="line">spooky.boo(); // &quot;Boo!&quot;</div><div class="line">spooky.boo(); // &quot;Boo!&quot;</div><div class="line">console.log(spooky.boo.property); // &quot;properly&quot;</div></pre></td></tr></table></figure>
<p>é€šè¿‡æ‰§è¡Œç»“æœï¼Œå¯ä»¥å‘ç°ï¼Œå°†å®šäºçš„å‡½æ•°èµ‹å€¼ä¸æ–°å˜é‡ï¼ˆæˆ–å†…éƒ¨æ–¹æ³•ï¼‰ï¼Œä»£ç å¹¶ä¸æ‰§è¡Œé‡è½½çš„ scareMe ä»£ç ï¼Œè€Œå¦‚ä¸‹ä¾‹å­åˆ™æ­£å¥½ç›¸åï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// ä½¿ç”¨è‡ªå£°æ˜å‡½æ•°</div><div class="line">scareMe(); // Double boo!</div><div class="line">scareMe(); // Double boo!</div><div class="line">console.log(scareMe.property); // undefined</div></pre></td></tr></table></figure>
<p>å¤§å®¶ä½¿ç”¨è¿™ç§æ¨¡å¼æ—¶ï¼Œä¸€å®šè¦éå¸¸å°å¿ƒæ‰è¡Œï¼Œå¦åˆ™å®é™…ç»“æœå¾ˆå¯èƒ½å’Œä½ æœŸæœ›çš„ç»“æœä¸ä¸€æ ·ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ®Šåšä¸€äº›ç‰¹æ®Šçš„æ“ä½œã€‚</p>
<h2 id="å†…å­˜ä¼˜åŒ–"><a href="#å†…å­˜ä¼˜åŒ–" class="headerlink" title="å†…å­˜ä¼˜åŒ–"></a>å†…å­˜ä¼˜åŒ–</h2><p>è¯¥æ¨¡å¼ä¸»è¦æ˜¯åˆ©ç”¨å‡½æ•°çš„å±æ€§ç‰¹æ€§æ¥é¿å…å¤§é‡çš„é‡å¤è®¡ç®—ã€‚é€šå¸¸ä»£ç å½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var myFunc = function (param) &#123;</div><div class="line">    if (!myFunc.cache[param]) &#123;</div><div class="line">        var result = &#123;&#125;;</div><div class="line">        // ... å¤æ‚æ“ä½œ ...</div><div class="line">        myFunc.cache[param] = result;</div><div class="line">    &#125;</div><div class="line">    return myFunc.cache[param];</div><div class="line">&#125;;</div><div class="line">// cache å­˜å‚¨</div><div class="line">myFunc.cache = &#123;&#125;;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä¸Šè¿°ä»£ç æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯ toString æˆ–è€…å…¶å®ƒç±»ä¼¼ Object æ‹¥æœ‰çš„ä¸€äº›å…¬ç”¨æ–¹æ³•çš„è¯ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œè¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ä¼ è¯´ä¸­çš„ hasOwnProperty æ–¹æ³•äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var myFunc = function (param) &#123;</div><div class="line">    if (!myFunc.cache.hasOwnProperty(param)) &#123;</div><div class="line">        var result = &#123;&#125;;</div><div class="line">        // ... å¤æ‚æ“ä½œ ...</div><div class="line">        myFunc.cache[param] = result;</div><div class="line">    &#125;</div><div class="line">    return myFunc.cache[param];</div><div class="line">&#125;;  </div><div class="line">// cache å­˜å‚¨</div><div class="line">myFunc.cache = &#123;&#125;;</div></pre></td></tr></table></figure>
<p>æˆ–è€…å¦‚æœä½ ä¼ å…¥çš„å‚æ•°æ˜¯å¤šä¸ªçš„è¯ï¼Œå¯ä»¥å°†è¿™äº›å‚æ•°é€šè¿‡ JSON çš„ stringify æ–¹æ³•ç”Ÿäº§ä¸€ä¸ª cachekey å€¼è¿›è¡Œå­˜å‚¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var myFunc = function () &#123;</div><div class="line">    var cachekey = JSON.stringify(Array.prototype.slice.call(arguments)),</div><div class="line">        result;</div><div class="line">    if (!myFunc.cache[cachekey]) &#123;</div><div class="line">        result = &#123;&#125;;</div><div class="line">        // ... å¤æ‚æ“ä½œ ...</div><div class="line">        myFunc.cache[cachekey] = result;</div><div class="line">    &#125;</div><div class="line">    return myFunc.cache[cachekey];</div><div class="line">&#125;;  </div><div class="line">// cache å­˜å‚¨</div><div class="line">myFunc.cache = &#123;&#125;;</div></pre></td></tr></table></figure>
<p>æˆ–è€…å¤šä¸ªå‚æ•°çš„è¯ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ arguments.callee ç‰¹æ€§ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var myFunc = function (param) &#123;</div><div class="line">    var f = arguments.callee,</div><div class="line">        result;</div><div class="line">    if (!f.cache[param]) &#123;</div><div class="line">        result = &#123;&#125;;</div><div class="line">        // ... å¤æ‚æ“ä½œ ...</div><div class="line">        f.cache[param] = result;</div><div class="line">    &#125;</div><div class="line">    return f.cache[param];</div><div class="line">&#125;;  </div><div class="line">// cache å­˜å‚¨</div><div class="line">myFunc.cache = &#123;&#125;;</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å°±ä¸ç”¨æ€»ç»“äº†å§ï¼Œå¤§å®¶ä»”ç»†çœ‹ä»£ç å°±è¡Œå’¯</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç¯‡æˆ‘ä»¬ä»‹ç»çš„ä¸€äº›æ¨¡å¼ç§°ä¸ºåˆå§‹åŒ–æ¨¡å¼å’Œæ€§èƒ½æ¨¡å¼ï¼Œä¸»è¦æ˜¯ç”¨åœ¨åˆå§‹åŒ–ä»¥åŠæé«˜æ€§èƒ½æ–¹é¢ï¼Œä¸€äº›æ¨¡å¼ä¹‹å‰å·²ç»æåˆ°è¿‡ï¼Œè¿™é‡Œåªæ˜¯åšä¸€ä¸‹æ€»ç»“ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç«‹å³æ‰§è¡Œçš„å‡½æ•°&quot;&gt;&lt;a href=&quot;#ç«‹å³æ‰§è¡Œçš„å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;ç«‹å³æ‰§è¡Œçš„å‡½æ•°&quot;&gt;&lt;/a&gt;ç«‹å³æ‰§è¡Œçš„å‡½æ•°&lt;/h2&gt;&lt;p&gt;åœ¨æœ¬ç³»åˆ—ç¬¬ 4 ç¯‡çš„&lt;a href=&quot;http://www.cnblogs.com/TomXu/archive/2011/12/31/2289423.html&quot;&gt;ã€Šç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ã€‹ä¸­&lt;/a&gt;ï¼Œæˆ‘ä»¬å·²ç»å¯¹ç±»ä¼¼çš„å‡½æ•°è¿›è¡Œè¿‡è¯¦ç»†çš„æè¿°ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯å†ä¸¾ä¸¤ä¸ªç®€å•çš„ä¾‹å­åšä¸€ä¸‹æ€»ç»“ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>S.O.L.I.D äº”å¤§åŸåˆ™ä¹‹é‡Œæ°æ›¿æ¢åŸåˆ™ LSP</title>
    <link href="http://xuhongbo.com/2016/08/23/JavaScript/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3javascript/8S.O.L.I.D%20%E4%BA%94%E5%A4%A7%E5%8E%9F%E5%88%99%E4%B9%8B%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99%20LSP/"/>
    <id>http://xuhongbo.com/2016/08/23/JavaScript/æ·±å…¥ç†è§£javascript/8S.O.L.I.D äº”å¤§åŸåˆ™ä¹‹é‡Œæ°æ›¿æ¢åŸåˆ™ LSP/</id>
    <published>2016-08-23T04:02:02.000Z</published>
    <updated>2017-03-02T14:12:35.023Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç« æˆ‘ä»¬è¦è®²è§£çš„æ˜¯ S.O.L.I.D äº”å¤§åŸåˆ™ JavaScript è¯­è¨€å®ç°çš„ç¬¬3ç¯‡ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™ LSPï¼ˆThe Liskov Substitution Principle ï¼‰ã€‚</p>
<p>å¼€é—­åŸåˆ™çš„æè¿°æ˜¯ï¼š</p>
<blockquote>
<p>Subtypes must be substitutable for their base types.<br>æ´¾ç”Ÿç±»å‹å¿…é¡»å¯ä»¥æ›¿æ¢å®ƒçš„åŸºç±»å‹ã€‚<br><a id="more"></a><br>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹é‡Œï¼Œç»§æ‰¿æä¾›äº†ä¸€ä¸ªæœºåˆ¶è®©å­ç±»å’Œå…±äº«åŸºç±»çš„ä»£ç ï¼Œè¿™æ˜¯é€šè¿‡åœ¨åŸºç±»å‹é‡Œå°è£…é€šç”¨çš„æ•°æ®å’Œè¡Œä¸ºæ¥å®ç°çš„ï¼Œç„¶åå·²ç»åŠç±»å‹æ¥å£°æ˜æ›´è¯¦ç»†çš„å­ç±»å‹ï¼Œä¸ºäº†åº”ç”¨é‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œç»§æ‰¿å­ç±»å‹éœ€è¦åœ¨è¯­ä¹‰ä¸Šç­‰ä»·äºåŸºç±»å‹é‡Œçš„æœŸæœ›è¡Œä¸ºã€‚</p>
</blockquote>
<p>ä¸ºäº†æ¥æ›´å¥½çš„ç†è§£ï¼Œè¯·å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">function Vehicle(my) &#123;</div><div class="line">    var my = my || &#123;&#125;;</div><div class="line">    my.speed = 0;</div><div class="line">    my.running = false;</div><div class="line">    this.speed = function() &#123;</div><div class="line">        return my.speed;</div><div class="line">    &#125;;</div><div class="line">    this.start = function() &#123;</div><div class="line">        my.running = true;</div><div class="line">    &#125;;</div><div class="line">    this.stop = function() &#123;</div><div class="line">        my.running = false;</div><div class="line">    &#125;;</div><div class="line">    this.accelerate = function() &#123;</div><div class="line">        my.speed++;</div><div class="line">    &#125;;</div><div class="line">    this.decelerate = function() &#123;</div><div class="line">        my.speed--;</div><div class="line">    &#125;, this.state = function() &#123;</div><div class="line">        if (!my.running) &#123;</div><div class="line">            return &quot;parked&quot;;</div><div class="line">        &#125;</div><div class="line">        else if (my.running &amp;&amp; my.speed) &#123;</div><div class="line">            return &quot;moving&quot;;</div><div class="line">        &#125;</div><div class="line">        else if (my.running) &#123;</div><div class="line">            return &quot;idle&quot;;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª Vehicle å‡½æ•°ï¼Œå…¶æ„é€ å‡½æ•°ä¸º vehicle å¯¹è±¡æä¾›äº†ä¸€äº›åŸºæœ¬çš„æ“ä½œï¼Œæˆ‘ä»¬æ¥æƒ³æƒ³å¦‚æœå½“å‰å‡½æ•°å½“å‰æ­£è¿è¡Œåœ¨æœåŠ¡å®¢æˆ·çš„äº§å“ç¯å¢ƒä¸Šï¼Œå¦‚æœç°åœ¨éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°æ¥å®ç°åŠ å¿«ç§»åŠ¨çš„ vehicleã€‚æ€è€ƒä»¥åï¼Œæˆ‘ä»¬å†™å‡ºäº†å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function FastVehicle(my) &#123;</div><div class="line">    var my = my || &#123;&#125;;</div><div class="line">    var that = new Vehicle(my);</div><div class="line">    that.accelerate = function() &#123;</div><div class="line">        my.speed += 3;</div><div class="line">    &#125;;</div><div class="line">    return that;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨æµè§ˆå™¨çš„æ§åˆ¶å°æˆ‘ä»¬éƒ½æµ‹è¯•äº†ï¼Œæ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯æˆ‘ä»¬çš„é¢„æœŸï¼Œæ²¡æœ‰é—®é¢˜ï¼ŒFastVehicle çš„é€Ÿåº¦å¢å¿«äº† 3 å€ï¼Œè€Œä¸”ç»§æ‰¿ä»–çš„æ–¹æ³•ä¹Ÿæ˜¯æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸå·¥ä½œã€‚æ­¤åï¼Œæˆ‘ä»¬å¼€å§‹éƒ¨ç½²è¿™ä¸ªæ–°ç‰ˆæœ¬çš„ç±»åº“åˆ°äº§å“ç¯å¢ƒä¸Šï¼Œå¯æ˜¯æˆ‘ä»¬å´æ¥åˆ°äº†æ–°çš„æ„é€ å‡½æ•°å¯¼è‡´ç°æœ‰çš„ä»£ç ä¸èƒ½æ”¯æŒæ‰§è¡Œäº†ï¼Œä¸‹é¢çš„ä»£ç æ®µæ­ç¤ºäº†è¿™ä¸ªé—®é¢˜ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">var maneuver = function(vehicle) &#123;</div><div class="line">    write(vehicle.state());</div><div class="line">    vehicle.start();</div><div class="line">    write(vehicle.state());</div><div class="line">    vehicle.accelerate();</div><div class="line">    write(vehicle.state());</div><div class="line">    write(vehicle.speed());</div><div class="line">    vehicle.decelerate();</div><div class="line">    write(vehicle.speed());</div><div class="line">    if (vehicle.state() != &quot;idle&quot;) &#123;</div><div class="line">        throw &quot;The vehicle is still moving!&quot;;</div><div class="line">    &#125;</div><div class="line">    vehicle.stop();</div><div class="line">    write(vehicle.state());</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>æ ¹æ®ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬çœ‹åˆ°æŠ›å‡ºçš„å¼‚å¸¸æ˜¯â€œThe vehicle is still moving!â€ï¼Œè¿™æ˜¯å› ä¸ºå†™è¿™æ®µä»£ç çš„ä½œè€…ä¸€ç›´è®¤ä¸ºåŠ é€Ÿï¼ˆaccelerateï¼‰å’Œå‡é€Ÿï¼ˆdecelerateï¼‰çš„æ•°å­—æ˜¯ä¸€æ ·çš„ã€‚ä½† FastVehicle çš„ä»£ç å’Œ Vehicle çš„ä»£ç å¹¶ä¸æ˜¯å®Œå…¨èƒ½å¤Ÿæ›¿æ¢æ‰çš„ã€‚å› æ­¤ï¼ŒFastVehicle è¿åäº†é‡Œæ°æ›¿æ¢åŸåˆ™ã€‚</p>
<p>åœ¨è¿™ç‚¹ä¸Šï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼šâ€œä½†ï¼Œå®¢æˆ·ç«¯ä¸èƒ½è€å‡å®š vehicle éƒ½æ˜¯æŒ‰ç…§è¿™æ ·çš„è§„åˆ™æ¥åšâ€ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™(LSP)çš„å¦¨ç¢ï¼ˆè¯‘è€…æ³¨ï¼šå°±æ˜¯å¦¨ç¢å®ç° LSP çš„ä»£ç ï¼‰ä¸æ˜¯åŸºäºæˆ‘ä»¬æ‰€æƒ³çš„ç»§æ‰¿å­ç±»åº”è¯¥åœ¨è¡Œä¸ºé‡Œç¡®ä¿æ›´æ–°ä»£ç ï¼Œè€Œæ˜¯è¿™æ ·çš„æ›´æ–°æ˜¯å¦èƒ½åœ¨å½“å‰çš„æœŸæœ›ä¸­å¾—åˆ°å®ç°ã€‚</p>
<p>ä¸Šè¿°ä»£ç è¿™ä¸ª caseï¼Œè§£å†³è¿™ä¸ªä¸å…¼å®¹çš„é—®é¢˜éœ€è¦åœ¨ vehicle ç±»åº“æˆ–è€…å®¢æˆ·ç«¯è°ƒç”¨ä»£ç ä¸Šè¿›è¡Œä¸€ç‚¹é‡æ–°è®¾è®¡ï¼Œæˆ–è€…ä¸¤è€…éƒ½è¦æ”¹ã€‚</p>
<h2 id="å‡å°‘-LSP-å¦¨ç¢"><a href="#å‡å°‘-LSP-å¦¨ç¢" class="headerlink" title="å‡å°‘ LSP å¦¨ç¢"></a>å‡å°‘ LSP å¦¨ç¢</h2><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•é¿å… LSP å¦¨ç¢ï¼Ÿä¸å¹¸çš„è¯ï¼Œå¹¶ä¸æ˜¯ä¸€ç›´éƒ½æ˜¯å¯ä»¥åšåˆ°çš„ã€‚æˆ‘ä»¬è¿™é‡Œæœ‰å‡ ä¸ªç­–ç•¥æˆ‘ä»¬å¤„ç†è¿™ä¸ªäº‹æƒ…ã€‚</p>
<h3 id="å¥‘çº¦ï¼ˆContractsï¼‰"><a href="#å¥‘çº¦ï¼ˆContractsï¼‰" class="headerlink" title="å¥‘çº¦ï¼ˆContractsï¼‰"></a>å¥‘çº¦ï¼ˆContractsï¼‰</h3><p>å¤„ç† LSP è¿‡åˆ†å¦¨ç¢çš„ä¸€ä¸ªç­–ç•¥æ˜¯ä½¿ç”¨å¥‘çº¦ï¼Œå¥‘çº¦æ¸…å•æœ‰ 2 ç§å½¢å¼ï¼šæ‰§è¡Œè¯´æ˜ä¹¦ï¼ˆexecutable specificationsï¼‰å’Œé”™è¯¯å¤„ç†ï¼Œåœ¨æ‰§è¡Œè¯´æ˜ä¹¦é‡Œï¼Œä¸€ä¸ªè¯¦ç»†ç±»åº“çš„å¥‘çº¦ä¹ŸåŒ…æ‹¬ä¸€ç»„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè€Œé”™è¯¯å¤„ç†æ˜¯åœ¨ä»£ç é‡Œç›´æ¥å¤„ç†çš„ï¼Œä¾‹å¦‚åœ¨å‰ç½®æ¡ä»¶ï¼Œåç½®æ¡ä»¶ï¼Œå¸¸é‡æ£€æŸ¥ç­‰ï¼Œå¯ä»¥ä» Bertrand Miller çš„å¤§ä½œ<a href="http://en.wikipedia.org/wiki/Design_by_contract" target="_blank" rel="external">ã€Šå¥‘çº¦è®¾è®¡ã€‹</a>ä¸­æŸ¥çœ‹è¿™ä¸ªæŠ€æœ¯ã€‚è™½ç„¶è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå¥‘çº¦è®¾è®¡ä¸åœ¨æœ¬ç¯‡æ–‡å­—çš„èŒƒå›´å†…ï¼Œä½†å½“æˆ‘ä»¬ç”¨çš„æ—¶å€™æˆ‘è¿˜æ˜¯æ¨èå¦‚ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>æ£€æŸ¥ä½¿ç”¨æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTest-Driven Developmentï¼‰æ¥æŒ‡å¯¼ä½ ä»£ç çš„è®¾è®¡</li>
<li>è®¾è®¡å¯é‡ç”¨ç±»åº“çš„æ—¶å€™å¯éšæ„ä½¿ç”¨å¥‘çº¦è®¾è®¡æŠ€æœ¯</li>
</ol>
<p>å¯¹äºä½ è‡ªå·±è¦ç»´æŠ¤å’Œå®ç°çš„ä»£ç ï¼Œä½¿ç”¨å¥‘çº¦è®¾è®¡è¶‹å‘äºæ·»åŠ å¾ˆå¤šä¸å¿…è¦çš„ä»£ç ï¼Œå¦‚æœä½ è¦æ§åˆ¶è¾“å…¥ï¼Œæ·»åŠ æµ‹è¯•æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå¦‚æœä½ æ˜¯ç±»åº“ä½œè€…ï¼Œä½¿ç”¨å¥‘çº¦è®¾è®¡ï¼Œä½ è¦æ³¨æ„ä¸æ­£ç¡®çš„ä½¿ç”¨æ–¹æ³•ä»¥åŠè®©ä½ çš„ç”¨æˆ·ä½¿ä¹‹ä½œä¸ºä¸€ä¸ªæµ‹è¯•å·¥å…·ã€‚</p>
<h3 id="é¿å…ç»§æ‰¿"><a href="#é¿å…ç»§æ‰¿" class="headerlink" title="é¿å…ç»§æ‰¿"></a>é¿å…ç»§æ‰¿</h3><p>é¿å… LSP å¦¨ç¢çš„å¦å¤–ä¸€ä¸ªæµ‹è¯•æ˜¯ï¼šå¦‚æœå¯èƒ½çš„è¯ï¼Œå°½é‡ä¸ç”¨ç»§æ‰¿ï¼Œåœ¨Gammaçš„å¤§ä½œ<a href="http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612" target="_blank" rel="external">ã€ŠDesign Patterns â€“ Elements of Reusable Object-Orineted Softwareã€‹</a>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å»ºè®®ï¼š</p>
<blockquote>
<p>Favor object composition over class inheritance<br>å°½é‡ä½¿ç”¨å¯¹è±¡ç»„åˆè€Œä¸æ˜¯ç±»ç»§æ‰¿</p>
</blockquote>
<p>æœ‰äº›ä¹¦é‡Œè®¨è®ºäº†ç»„åˆæ¯”ç»§æ‰¿å¥½çš„å”¯ä¸€ä½œç”¨æ˜¯é™æ€ç±»å‹ï¼ŒåŸºäºç±»çš„è¯­è¨€ï¼ˆä¾‹å¦‚ï¼Œåœ¨è¿è¡Œæ—¶å¯ä»¥æ”¹å˜è¡Œä¸ºï¼‰ï¼Œä¸ JavaScript ç›¸å…³çš„ä¸€ä¸ªé—®é¢˜æ˜¯è€¦åˆï¼Œå½“ä½¿ç”¨ç»§æ‰¿çš„æ—¶å€™ï¼Œç»§æ‰¿å­ç±»å‹å’Œä»–ä»¬çš„åŸºç±»å‹è€¦åˆåœ¨ä¸€èµ·äº†ï¼Œå°±æ˜¯è¯´åŸºç±»å‹çš„æ”¹å˜ä¼šå½±å“åˆ°ç»§æ‰¿å­ç±»å‹ã€‚ç»„åˆå€¾å‘äºå¯¹è±¡æ›´å°åŒ–ï¼Œæ›´å®¹æ˜“å‘é™æ€å’ŒåŠ¨æ€è¯­è¨€è¯­è¨€ç»´æŠ¤ã€‚</p>
<h2 id="ä¸è¡Œä¸ºæœ‰å…³ï¼Œè€Œä¸æ˜¯ç»§æ‰¿"><a href="#ä¸è¡Œä¸ºæœ‰å…³ï¼Œè€Œä¸æ˜¯ç»§æ‰¿" class="headerlink" title="ä¸è¡Œä¸ºæœ‰å…³ï¼Œè€Œä¸æ˜¯ç»§æ‰¿"></a>ä¸è¡Œä¸ºæœ‰å…³ï¼Œè€Œä¸æ˜¯ç»§æ‰¿</h2><p>åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬è®¨è®ºäº†å’Œç»§æ‰¿ä¸Šä¸‹æ–‡åœ¨å†…çš„é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ŒæŒ‡ç¤ºå‡º JavaScript çš„é¢å‘å¯¹è±¡å®ã€‚ä¸è¿‡ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰çš„æœ¬è´¨ä¸æ˜¯çœŸçš„å’Œç»§æ‰¿æœ‰å…³ï¼Œè€Œæ˜¯è¡Œä¸ºå…¼å®¹æ€§ã€‚JavaScript æ˜¯ä¸€ä¸ªåŠ¨æ€è¯­è¨€ï¼Œä¸€ä¸ªå¯¹è±¡çš„å¥‘çº¦è¡Œä¸ºä¸æ˜¯å¯¹è±¡çš„ç±»å‹å†³å®šçš„ï¼Œè€Œæ˜¯å¯¹è±¡æœŸæœ›çš„åŠŸèƒ½å†³å®šçš„ã€‚é‡Œæ°æ›¿æ¢åŸåˆ™çš„åˆå§‹æ„æƒ³æ˜¯ä½œä¸ºç»§æ‰¿çš„ä¸€ä¸ªåŸåˆ™æŒ‡å—ï¼Œç­‰ä»·äºå¯¹è±¡è®¾è®¡ä¸­çš„éšå¼æ¥å£ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Robert C. Martinçš„ å¤§ä½œ<a href="http://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612" target="_blank" rel="external">ã€Šæ•æ·è½¯ä»¶å¼€å‘ åŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹</a>ä¸­çš„ä¸€ä¸ªçŸ©å½¢ç±»å‹ï¼š</p>
<h3 id="çŸ©å½¢ä¾‹å­"><a href="#çŸ©å½¢ä¾‹å­" class="headerlink" title="çŸ©å½¢ä¾‹å­"></a>çŸ©å½¢ä¾‹å­</h3><p>è€ƒè™‘æˆ‘ä»¬æœ‰ä¸€ä¸ªç¨‹åºç”¨åˆ°ä¸‹é¢è¿™æ ·çš„ä¸€ä¸ªçŸ©å½¢å¯¹è±¡:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var rectangle = &#123;</div><div class="line">    length: 0,</div><div class="line">    width: 0</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>è¿‡åï¼Œç¨‹åºæœ‰éœ€è¦ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œç”±äºæ­£æ–¹å½¢å°±æ˜¯ä¸€ä¸ªé•¿(length)å’Œå®½(width)éƒ½ä¸€æ ·çš„ç‰¹æ®ŠçŸ©å½¢ï¼Œæ‰€ä»¥æˆ‘ä»¬è§‰å¾—åˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢ä»£æ›¿çŸ©å½¢ã€‚æˆ‘ä»¬æ·»åŠ äº† length å’Œ width å±æ€§æ¥åŒ¹é…çŸ©å½¢çš„å£°æ˜ï¼Œä½†æˆ‘ä»¬è§‰å¾—ä½¿ç”¨å±æ€§çš„g etters/setters ä¸€èˆ¬æˆ‘ä»¬å¯ä»¥è®© length å’Œ width ä¿å­˜åŒæ­¥ï¼Œç¡®ä¿å£°æ˜çš„æ˜¯ä¸€ä¸ªæ­£æ–¹å½¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">var square = &#123;&#125;;</div><div class="line">(function() &#123;</div><div class="line">    var length = 0, width = 0;</div><div class="line">    // æ³¨æ„definePropertyæ–¹å¼æ˜¯262-5ç‰ˆçš„æ–°ç‰¹æ€§</div><div class="line">    Object.defineProperty(square, &quot;length&quot;, &#123;</div><div class="line">        get: function() &#123; return length; &#125;,</div><div class="line">        set: function(value) &#123; length = width = value; &#125;</div><div class="line">    &#125;);</div><div class="line">    Object.defineProperty(square, &quot;width&quot;, &#123;</div><div class="line">        get: function() &#123; return width; &#125;,</div><div class="line">        set: function(value) &#123; length = width = value; &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<p>ä¸å¹¸çš„æ˜¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨æ­£æ–¹å½¢ä»£æ›¿çŸ©å½¢æ‰§è¡Œä»£ç çš„æ—¶å€™å‘ç°äº†é—®é¢˜ï¼Œå…¶ä¸­ä¸€ä¸ªè®¡ç®—çŸ©å½¢é¢ç§¯çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var g = function(rectangle) &#123;</div><div class="line">    rectangle.length = 3;</div><div class="line">    rectangle.width = 4;</div><div class="line">    write(rectangle.length);</div><div class="line">    write(rectangle.width);</div><div class="line">    write(rectangle.length * rectangle.width);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>è¯¥æ–¹æ³•åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œç»“æœæ˜¯ 16ï¼Œè€Œä¸æ˜¯æœŸæœ›çš„ 12ï¼Œæˆ‘ä»¬çš„æ­£æ–¹å½¢ square å¯¹è±¡è¿åäº† LSP åŸåˆ™ï¼Œsquare çš„é•¿åº¦å’Œå®½åº¦å±æ€§æš—ç¤ºç€å¹¶ä¸æ˜¯å’ŒçŸ©å½¢ 100% å…¼å®¹ï¼Œä½†æˆ‘ä»¬å¹¶ä¸æ€»æ˜¯è¿™æ ·æ˜ç¡®çš„æš—ç¤ºã€‚è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°è®¾è®¡ä¸€ä¸ª shape å¯¹è±¡æ¥å®ç°ç¨‹åºï¼Œä¾æ®å¤šè¾¹å½¢çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å£°æ˜ rectangle å’Œsquareï¼Œrelevantã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯è¦è¯´é‡Œæ°æ›¿æ¢åŸåˆ™å¹¶ä¸åªæ˜¯ç»§æ‰¿ï¼Œè€Œæ˜¯ä»»ä½•æ–¹æ³•ï¼ˆå…¶ä¸­çš„è¡Œä¸ºå¯ä»¥å¦å¤–çš„è¡Œä¸ºï¼‰ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLSPï¼‰è¡¨è¾¾çš„æ„æ€ä¸æ˜¯ç»§æ‰¿çš„å…³ç³»ï¼Œè€Œæ˜¯ä»»ä½•æ–¹æ³•ï¼ˆåªè¦è¯¥æ–¹æ³•çš„è¡Œä¸ºèƒ½ä½“ä¼šå¦å¤–çš„è¡Œä¸ºå°±è¡Œï¼‰ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç« æˆ‘ä»¬è¦è®²è§£çš„æ˜¯ S.O.L.I.D äº”å¤§åŸåˆ™ JavaScript è¯­è¨€å®ç°çš„ç¬¬3ç¯‡ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™ LSPï¼ˆThe Liskov Substitution Principle ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¼€é—­åŸåˆ™çš„æè¿°æ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Subtypes must be substitutable for their base types.&lt;br&gt;æ´¾ç”Ÿç±»å‹å¿…é¡»å¯ä»¥æ›¿æ¢å®ƒçš„åŸºç±»å‹ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Function æ¨¡å¼ï¼ˆä¸Šç¯‡ï¼‰</title>
    <link href="http://xuhongbo.com/2016/08/02/JavaScript/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3javascript/49Function%20%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89/"/>
    <id>http://xuhongbo.com/2016/08/02/JavaScript/æ·±å…¥ç†è§£javascript/49Function æ¨¡å¼ï¼ˆä¸Šç¯‡ï¼‰/</id>
    <published>2016-08-02T09:02:02.000Z</published>
    <updated>2017-03-02T14:12:01.728Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ç¯‡ä¸»è¦æ˜¯ä»‹ç» Function æ–¹é¢ä½¿ç”¨çš„ä¸€äº›æŠ€å·§ï¼ˆä¸Šç¯‡ï¼‰ï¼Œåˆ©ç”¨ Function ç‰¹æ€§å¯ä»¥ç¼–å†™å‡ºå¾ˆå¤šéå¸¸æœ‰æ„æ€çš„ä»£ç ï¼Œæœ¬ç¯‡ä¸»è¦åŒ…æ‹¬ï¼šå›è°ƒæ¨¡å¼ã€é…ç½®å¯¹è±¡ã€è¿”å›å‡½æ•°ã€åˆ†å¸ƒç¨‹åºã€æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ã€‚<br><a id="more"></a></p>
<h2 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h2><p>åœ¨ JavaScript ä¸­ï¼Œå½“ä¸€ä¸ªå‡½æ•° A ä½œä¸ºå¦å¤–ä¸€ä¸ªå‡½æ•° B çš„å…¶ä¸­ä¸€ä¸ªå‚æ•°æ—¶ï¼Œåˆ™å‡½æ•° A ç§°ä¸ºå›è°ƒå‡½æ•°ï¼Œå³ A å¯ä»¥åœ¨å‡½æ•° B çš„å‘¨æœŸå†…æ‰§è¡Œï¼ˆå¼€å§‹ã€ä¸­é—´ã€ç»“æŸæ—¶å‡å¯ï¼‰ã€‚</p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªå‡½æ•°ç”¨äºç”Ÿæˆ node</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">var complexComputation = function () &#123; /* å†…éƒ¨å¤„ç†ï¼Œå¹¶è¿”å›ä¸€ä¸ªnode*/&#125;;</div><div class="line">æœ‰ä¸€ä¸ªfindNodeså‡½æ•°å£°æ˜ç”¨äºæŸ¥æ‰¾æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡callbackå›è°ƒè¿›è¡Œæ‰§è¡Œä»£ç ã€‚  </div><div class="line">var findNodes = function (callback) &#123;</div><div class="line">var nodes = [];  </div><div class="line">var node = complexComputation();  </div><div class="line">// å¦‚æœå›è°ƒå‡½æ•°å¯ç”¨ï¼Œåˆ™æ‰§è¡Œå®ƒ</div><div class="line">if (typeof callback === &quot;function&quot;) &#123;</div><div class="line">callback(node);</div><div class="line">&#125;  </div><div class="line">nodes.push(node);</div><div class="line">return nodes;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>å…³äº callback çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥äº‹å…ˆå®šä¹‰å¥½æ¥ç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// å®šä¹‰callback</div><div class="line">var hide = function (node) &#123;</div><div class="line">node.style.display = &quot;none&quot;;</div><div class="line">&#125;; </div><div class="line">// æŸ¥æ‰¾nodeï¼Œç„¶åéšè—æ‰€æœ‰çš„node</div><div class="line">var hiddenNodes = findNodes(hide);</div><div class="line">ä¹Ÿå¯ä»¥ç›´æ¥åœ¨è°ƒç”¨çš„æ—¶å€™ä½¿ç”¨åŒ¿åå®šä¹‰ï¼Œå¦‚ä¸‹ï¼š  </div><div class="line">// ä½¿ç”¨åŒ¿åå‡½æ•°å®šä¹‰callback</div><div class="line">var blockNodes = findNodes(function (node) &#123;</div><div class="line">node.style.display = &apos;block&apos;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„ï¼Œä¼°è®¡å°±æ•° jQuery çš„ ajax æ–¹æ³•çš„è°ƒç”¨äº†ï¼Œé€šè¿‡åœ¨ done/faild ä¸Šå®šä¹‰ callbackï¼Œä»¥ä¾¿åœ¨ ajax è°ƒç”¨æˆåŠŸæˆ–è€…å¤±è´¥çš„æ—¶å€™åšè¿›ä¸€æ­¥å¤„ç†ï¼Œä»£ç å¦‚ä¸‹(æœ¬ä»£ç åŸºäº jquery1.8 ç‰ˆ)ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">var menuId = $(&quot;ul.nav&quot;).first().attr(&quot;id&quot;);</div><div class="line">var request = $.ajax(&#123;</div><div class="line">  url: &quot;script.php&quot;,</div><div class="line">  type: &quot;POST&quot;,</div><div class="line">  data: &#123;id : menuId&#125;,</div><div class="line">  dataType: &quot;html&quot;</div><div class="line">&#125;);  </div><div class="line">//è°ƒç”¨æˆåŠŸæ—¶çš„å›è°ƒå¤„ç†</div><div class="line">request.done(function(msg) &#123;</div><div class="line">  $(&quot;#log&quot;).html( msg );</div><div class="line">&#125;);  </div><div class="line">//è°ƒç”¨å¤±è´¥æ—¶çš„å›è°ƒå¤„ç†</div><div class="line">request.fail(function(jqXHR, textStatus) &#123;</div><div class="line">  alert( &quot;Request failed: &quot; + textStatus );</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="é…ç½®å¯¹è±¡"><a href="#é…ç½®å¯¹è±¡" class="headerlink" title="é…ç½®å¯¹è±¡"></a>é…ç½®å¯¹è±¡</h2><p>å¦‚æœä¸€ä¸ªå‡½æ•°ï¼ˆæˆ–æ–¹æ³•ï¼‰çš„å‚æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”å‚æ•°ä¸ºå¯¹è±¡å­—é¢é‡ï¼Œæˆ‘ä»¬åˆ™ç§°è¿™ç§æ¨¡å¼ä¸ºé…ç½®å¯¹è±¡æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var conf = &#123;</div><div class="line">    username:&quot;shichuan&quot;,</div><div class="line">    first:&quot;Chuan&quot;,</div><div class="line">    last:&quot;Shi&quot;</div><div class="line">&#125;;</div><div class="line">addPerson(conf);</div></pre></td></tr></table></figure>
<p>åˆ™åœ¨ addPerson å†…éƒ¨ï¼Œå°±å¯ä»¥éšæ„ä½¿ç”¨ conf çš„å€¼äº†ï¼Œä¸€èˆ¬ç”¨äºåˆå§‹åŒ–å·¥ä½œï¼Œä¾‹å¦‚ jquery é‡Œçš„ ajaxSetup ä¹Ÿå°±æ˜¯è¿™ç§æ–¹å¼æ¥å®ç°çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// äº‹å…ˆè®¾ç½®å¥½åˆå§‹å€¼</div><div class="line">$.ajaxSetup(&#123;</div><div class="line">   url: &quot;/xmlhttp/&quot;,</div><div class="line">   global: false,</div><div class="line">   type: &quot;POST&quot;</div><div class="line"> &#125;);  </div><div class="line">// ç„¶åå†è°ƒç”¨</div><div class="line"> $.ajax(&#123; data: myData &#125;);</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œå¾ˆå¤š jquery çš„æ’ä»¶ä¹Ÿæœ‰è¿™ç§å½¢å¼çš„ä¼ å‚ï¼Œåªä¸è¿‡ä¹Ÿå¯ä»¥ä¸ä¼ ï¼Œä¸ä¼ çš„æ—¶å€™åˆ™å°±ä½¿ç”¨é»˜è®¤å€¼äº†ã€‚</p>
<h2 id="è¿”å›å‡½æ•°"><a href="#è¿”å›å‡½æ•°" class="headerlink" title="è¿”å›å‡½æ•°"></a>è¿”å›å‡½æ•°</h2><p>è¿”å›å‡½æ•°ï¼Œåˆ™æ˜¯æŒ‡åœ¨ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºå¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…æ ¹æ®ç‰¹å®šçš„æ¡ä»¶çµæ´»åˆ›å»ºçš„æ–°å‡½æ•°ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var setup = function () &#123;</div><div class="line">    console.log(1);</div><div class="line">    return function () &#123;</div><div class="line">        console.log(2);</div><div class="line">    &#125;;</div><div class="line">&#125;;  </div><div class="line">// è°ƒç”¨setup å‡½æ•°</div><div class="line">var my = setup(); // è¾“å‡º 1</div><div class="line">my(); // è¾“å‡º 2</div><div class="line">// æˆ–è€…ç›´æ¥è°ƒç”¨ä¹Ÿå¯</div><div class="line">setup()();</div></pre></td></tr></table></figure>
<p>æˆ–è€…ä½ å¯ä»¥åˆ©ç”¨é—­åŒ…çš„ç‰¹æ€§ï¼Œåœ¨ setup å‡½æ•°é‡Œè®°å½•ä¸€ä¸ªç§æœ‰çš„è®¡æ•°å™¨æ•°å­—ï¼Œé€šè¿‡æ¯æ¬¡è°ƒç”¨æ¥å¢åŠ è®¡æ•°å™¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var setup = function () &#123;</div><div class="line">    var count = 0;</div><div class="line">    return function () &#123;</div><div class="line">        return ++count;</div><div class="line">    &#125;;</div><div class="line">&#125;;   </div><div class="line">// ç”¨æ³•</div><div class="line">var next = setup();</div><div class="line">next(); // è¿”å› 1</div><div class="line">next(); // è¿”å› 2</div><div class="line">next(); // è¿”å› 3</div></pre></td></tr></table></figure>
<h2 id="ååº”ç”¨"><a href="#ååº”ç”¨" class="headerlink" title="ååº”ç”¨"></a>ååº”ç”¨</h2><p>è¿™é‡Œçš„ååº”ç”¨ï¼Œå…¶å®æ˜¯å°†å‚æ•°çš„ä¼ å…¥å·¥ä½œåˆ†å¼€è¿›è¡Œï¼Œåœ¨æœ‰çš„æ—¶å€™ä¸€ç³»åˆ—çš„æ“ä½œå¯èƒ½ä¼šæœ‰æŸä¸€ä¸ªæˆ–å‡ ä¸ªå‚æ•°å§‹ç»ˆå®Œå…¨ä¸€æ ·ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªåå‡½æ•°ï¼Œç„¶åå†å»æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼ˆæ‰§è¡Œæ—¶ä¼ å…¥å‰©ä½™çš„ä¸åŒå‚æ•°ï¼‰ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">var partialAny = (function (aps) &#123;</div><div class="line">    // è¯¥å‡½æ•°æ˜¯ä½ ä»¬è‡ªæ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼çš„ç»“æœï¼Œå¹¶ä¸”èµ‹å€¼ç»™äº†partialAnyå˜é‡</div><div class="line">    function func(fn) &#123;</div><div class="line">        var argsOrig = aps.call(arguments, 1);</div><div class="line">        return function () &#123;</div><div class="line">            var args = [],</div><div class="line">                argsPartial = aps.call(arguments),</div><div class="line">                i = 0;  </div><div class="line">            // å˜é‡æ‰€æœ‰çš„åŸå§‹å‚æ•°é›†ï¼Œ</div><div class="line">            // å¦‚æœå‚æ•°æ˜¯partialAny._ å ä½ç¬¦ï¼Œåˆ™ä½¿ç”¨ä¸‹ä¸€ä¸ªå‡½æ•°å‚æ•°å¯¹åº”çš„å€¼</div><div class="line">            // å¦åˆ™ä½¿ç”¨åŸå§‹å‚æ•°é‡Œçš„å€¼</div><div class="line">            for (; i &lt; argsOrig.length; i++) &#123;</div><div class="line">                args[i] = argsOrig[i] === func._</div><div class="line">                            ? argsPartial.shift()</div><div class="line">                            : argsOrig[i];</div><div class="line">            &#125;  </div><div class="line">            // å¦‚æœæœ‰ä»»ä½•å¤šä½™çš„å‚æ•°ï¼Œåˆ™æ·»åŠ åˆ°å°¾éƒ¨</div><div class="line">            return fn.apply(this, args.concat(argsPartial));</div><div class="line">        &#125;;</div><div class="line">    &#125;  </div><div class="line">    // ç”¨äºå ä½ç¬¦è®¾ç½®</div><div class="line">    func._ = &#123;&#125;;  </div><div class="line">    return func;</div><div class="line">&#125;)(Array.prototype.slice);</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// å®šä¹‰å¤„ç†å‡½æ•°</div><div class="line">function hex(r, g, b) &#123;</div><div class="line">    return &apos;#&apos; + r + g + b;</div><div class="line">&#125;  </div><div class="line">//å®šä¹‰åå‡½æ•°, å°†hexçš„ç¬¬ä¸€ä¸ªå‚æ•°rä½œä¸ºä¸å˜çš„å‚æ•°å€¼ff</div><div class="line">var redMax = partialAny(hex, &apos;ff&apos;, partialAny._, partialAny._);  </div><div class="line">// æ–°å‡½æ•°redMaxçš„è°ƒç”¨æ–¹å¼å¦‚ä¸‹ï¼Œåªéœ€è¦ä¼ å…¥2ä¸ªå‚æ•°äº†ï¼š</div><div class="line">console.log(redMax(&apos;11&apos;, &apos;22&apos;)); // &quot;#ff1122&quot;</div></pre></td></tr></table></figure>
<p>å¦‚æœè§‰å¾— partialAny._å¤ªé•¿ï¼Œå¯ä»¥ç”¨__ä»£æ›¿å“¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var __ = partialAny._;</div><div class="line">var greenMax = partialAny(hex, __, &apos;ff&apos;);</div><div class="line">console.log(greenMax(&apos;33&apos;, &apos;44&apos;));</div><div class="line">var blueMax = partialAny(hex, __, __, &apos;ff&apos;);</div><div class="line">console.log(blueMax(&apos;55&apos;, &apos;66&apos;));</div><div class="line">var magentaMax = partialAny(hex, &apos;ff&apos;, __, &apos;ff&apos;);</div><div class="line">console.log(magentaMax(&apos;77&apos;));</div></pre></td></tr></table></figure>
<p>è¿™æ ·ä½¿ç”¨ï¼Œå°±ç®€æ´å¤šäº†å§ã€‚</p>
<h2 id="Currying"><a href="#Currying" class="headerlink" title="Currying"></a>Currying</h2><p>Currying æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå°†å¤šä¸ªå‚æ•°çš„å¤„ç†è½¬åŒ–æˆå•ä¸ªå‚æ•°çš„å¤„ç†ï¼Œç±»ä¼¼é“¾å¼è°ƒç”¨ã€‚</p>
<p>ä¸¾ä¸€ä¸ªç®€å•çš„ add å‡½æ•°çš„ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function add(x, y) &#123;</div><div class="line">    var oldx = x, oldy = y;</div><div class="line">    if (typeof oldy === &quot;undefined&quot;) &#123; // partial</div><div class="line">        return function (newy) &#123;</div><div class="line">            return oldx + newy;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return x + y;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·è°ƒç”¨æ–¹å¼å°±å¯ä»¥æœ‰å¤šç§äº†ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// æµ‹è¯•</div><div class="line">typeof add(5); // &quot;function&quot;</div><div class="line">add(3)(4); // 7  </div><div class="line">// ä¹Ÿå¯ä»¥è¿™æ ·è°ƒç”¨</div><div class="line">var add2000 = add(2000);</div><div class="line">add2000(10); // 2010</div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒé€šç”¨çš„ currying å‡½æ•°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦åº”ç”¨çš„functionï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦ä¼ å…¥çš„æœ€å°‘å‚æ•°ä¸ªæ•°</div><div class="line">function curry(func, minArgs) &#123;</div><div class="line">    if (minArgs == undefined) &#123;</div><div class="line">        minArgs = 1;</div><div class="line">    &#125;  </div><div class="line">    function funcWithArgsFrozen(frozenargs) &#123;</div><div class="line">        return function () &#123;</div><div class="line">            // ä¼˜åŒ–å¤„ç†ï¼Œå¦‚æœè°ƒç”¨æ—¶æ²¡æœ‰å‚æ•°ï¼Œè¿”å›è¯¥å‡½æ•°æœ¬èº«</div><div class="line">            var args = Array.prototype.slice.call(arguments);</div><div class="line">            var newArgs = frozenargs.concat(args);</div><div class="line">            if (newArgs.length &gt;= minArgs) &#123;</div><div class="line">                return func.apply(this, newArgs);</div><div class="line">            &#125; else &#123;</div><div class="line">                return funcWithArgsFrozen(newArgs);</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;  </div><div class="line">    return funcWithArgsFrozen([]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥éšæ„å®šä¹‰æˆ‘ä»¬çš„ä¸šåŠ¡è¡Œä¸ºäº†ï¼Œæ¯”å¦‚å®šä¹‰åŠ æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var plus = curry(function () &#123;</div><div class="line">    var result = 0;</div><div class="line">    for (var i = 0; i &lt; arguments.length; ++i) &#123;</div><div class="line">        result += arguments[i];</div><div class="line">    &#125;</div><div class="line">    return result;</div><div class="line">&#125;, 2);</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨æ–¹å¼ï¼ŒçœŸå®å¤šç§å¤šæ ·å“‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">plus(3, 2) // æ­£å¸¸è°ƒç”¨</div><div class="line">plus(3) // ååº”ç”¨ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆè¿”å›å€¼ä¸º3+å‚æ•°å€¼ï¼‰</div><div class="line">plus(3)(2) // å®Œæ•´åº”ç”¨ï¼ˆè¿”å›5ï¼‰</div><div class="line">plus()(3)()()(2) // è¿”å› 5</div><div class="line">plus(3, 2, 4, 5) // å¯ä»¥æ¥æ”¶å¤šä¸ªå‚æ•°</div><div class="line">plus(3)(2, 3, 5) // åŒç†</div></pre></td></tr></table></figure>
<p>å¦‚ä¸‹æ˜¯å‡æ³•çš„ä¾‹å­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var minus = curry(function (x) &#123;</div><div class="line">    var result = x;</div><div class="line">    for (var i = 1; i &lt; arguments.length; ++i) &#123;</div><div class="line">        result -= arguments[i];</div><div class="line">    &#125;</div><div class="line">    return result;</div><div class="line">&#125;, 2);</div></pre></td></tr></table></figure>
<p>æˆ–è€…å¦‚æœä½ æƒ³äº¤æ¢å‚æ•°çš„é¡ºåºï¼Œä½ å¯ä»¥è¿™æ ·å®šä¹‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var flip = curry(function (func) &#123;</div><div class="line">    return curry(function (a, b) &#123;</div><div class="line">        return func(b, a);</div><div class="line">    &#125;, 2);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>JavaScript é‡Œçš„ Function æœ‰å¾ˆå¤šç‰¹æ®Šçš„åŠŸæ•ˆï¼Œå¯ä»¥åˆ©ç”¨é—­åŒ…ä»¥åŠ arguments å‚æ•°ç‰¹æ€§å®ç°å¾ˆå¤šä¸åŒçš„æŠ€å·§ï¼Œä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†ç»§ç»­ä»‹ç»åˆ©ç”¨ Function è¿›è¡Œåˆå§‹åŒ–çš„æŠ€å·§ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ç¯‡ä¸»è¦æ˜¯ä»‹ç» Function æ–¹é¢ä½¿ç”¨çš„ä¸€äº›æŠ€å·§ï¼ˆä¸Šç¯‡ï¼‰ï¼Œåˆ©ç”¨ Function ç‰¹æ€§å¯ä»¥ç¼–å†™å‡ºå¾ˆå¤šéå¸¸æœ‰æ„æ€çš„ä»£ç ï¼Œæœ¬ç¯‡ä¸»è¦åŒ…æ‹¬ï¼šå›è°ƒæ¨¡å¼ã€é…ç½®å¯¹è±¡ã€è¿”å›å‡½æ•°ã€åˆ†å¸ƒç¨‹åºã€æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ã€‚&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
